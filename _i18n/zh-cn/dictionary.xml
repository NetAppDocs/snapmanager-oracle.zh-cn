<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="fe85986990f1e53d3fe6a1b5e3414042" category="summary">您必须为数据库创建配置文件，才能对该数据库执行任何操作。配置文件包含有关数据库的信息，并且只能引用一个数据库；但是，一个数据库可以由多个配置文件引用。使用一个配置文件创建的备份无法从其他配置文件访问，即使这两个配置文件都与同一数据库相关联也是如此。</block>
  <block id="6e87fcd7e38490d456d58a7bdb237ea5" category="doc">为数据库创建配置文件</block>
  <block id="de4cbd7029fee13ef6863f49a6a56f15" category="paragraph">您必须确保目标数据库详细信息包含在 /etc/oratab 文件中。</block>
  <block id="dce332d16b8cfb1669b00f5fcb6fa984" category="paragraph">以下步骤显示了如何使用 SnapManager UI 为数据库创建配置文件。如果愿意，您也可以使用命令行界面。</block>
  <block id="81cd41d2e252318ecfbf998d0d89bf39" category="paragraph">有关如何使用命令行界面创建配置文件的信息，请参见 _Oracle SnapManager for UNIX_ 管理指南。</block>
  <block id="750844fd68472cfbb831d2298a8f2838" category="list-text">在存储库树中，右键单击存储库或主机，然后选择 * 创建配置文件 * 。</block>
  <block id="9fcfce951d6b9fe99a427be768581ff6" category="list-text">在配置文件配置信息页面上，输入配置文件的自定义名称和密码。</block>
  <block id="73f0c879616cf5f4315e1087d0def5da" category="list-text">在 Database Configuration Information 页面上，输入以下信息：</block>
  <block id="f9878439df1fe9ad3ff8ed218f2f1d0d" category="cell">在此字段中 ...</block>
  <block id="5e2ad6fd9deb412d871137094ee43ef0" category="cell">执行此操作 ...</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="3a22100db710f4f3b1a685287e3e08bc" category="paragraph">* 数据库名称 *</block>
  <block id="29aad559776d662662e46f36b2d3043d" category="paragraph">输入要备份的数据库的名称。</block>
  <block id="57a0b7b212fe7e7401f87076a0ef3ff3" category="paragraph">* 数据库 SID*</block>
  <block id="b57ce65bec5177b5d7f4a60254d59b77" category="paragraph">输入数据库的安全 ID （ SID ）。数据库名称和数据库 SID 可以相同。</block>
  <block id="34a7588e855afcffbec3ec292d335369" category="paragraph">* 主机 *</block>
  <block id="5546f202f5ea9abe5acddff5e1dc669c" category="paragraph">输入目标数据库所在主机的 IP 地址。如果在域名系统（ DNS ）中指定了主机名，则也可以指定主机名。</block>
  <block id="abda10dcb22c2a111f6720b35edb9b7f" category="paragraph">* 主机帐户 *</block>
  <block id="87d76d2929c9625502b638730db153a8" category="paragraph">输入目标数据库的 Oracle 用户名。用户的默认值为 oracle 。</block>
  <block id="13b03a17c030f15b2ca040a0628f0b97" category="paragraph">* 主机组 *</block>
  <block id="c1d162ee583d0a291ab1067f5d37f62c" category="paragraph">输入 Oracle 用户组名称。默认值为 dba 。</block>
  <block id="26b17225b626fb9238849fd60eabdf60" category="paragraph">+</block>
  <block id="b9fceedb5948faa1e28fb706ad044c60" category="list-text">在 Database Connection Information 页面上，选择以下选项之一：</block>
  <block id="446b9a944f5d6d29b9cb41f3268da4d5" category="cell">选择此项 ...</block>
  <block id="5d920b501536441ea32ecc24679c72a2" category="cell">如果您要 ...</block>
  <block id="996af3bfaa7e792586b4dd8233437e7c" category="paragraph">* 使用操作系统身份验证 *</block>
  <block id="d5ceff09ec19e70d1b7a289d358e9fc7" category="paragraph">使用操作系统维护的凭据对访问数据库的用户进行身份验证。</block>
  <block id="33b8d745d3028c3e52fbd7524d014161" category="paragraph">* 使用数据库身份验证 *</block>
  <block id="390608651d95c57cc6a895856c287dbc" category="paragraph">允许 Oracle 使用密码文件身份验证对管理用户进行身份验证。输入相应的数据库连接信息。</block>
  <block id="88e7d5a5c3cd51ba54509d144f347852" category="list-text">在 * SYSDBA 特权用户名 * 字段中，输入具有管理权限的数据库管理员的名称。</block>
  <block id="c11747517ffdd378af1faa68d29385ff" category="list-text">在 * 密码 * 字段中，输入数据库管理员的密码。</block>
  <block id="18895b03197b5d6a66c297a5e0fe3163" category="list-text">在 * 端口 * 字段中，输入用于连接到数据库所在主机的端口号。</block>
  <block id="445d764a70a4f8278e63c797f4cb2c4e" category="paragraph">默认值为。</block>
  <block id="353a08709789366acec8019378980a6e" category="paragraph">* 使用 ASM 实例身份验证 *</block>
  <block id="2bdff6cf42dfec8c2189cfeb1ff6033a" category="paragraph">允许自动存储管理（ Automatic Storage Management ， ASM ）数据库实例对管理用户进行身份验证。输入相应的 ASM 实例身份验证信息。</block>
  <block id="934f7bd68239bf57ce28b722fbdd4754" category="list-text">在 * SYSDBA/SYSASM 特权用户名 * 字段中，输入具有管理权限的 ASM 实例管理员的用户名。</block>
  <block id="ff3bc8f6c696795a57c84129583547fa" category="list-text">在 * 密码 * 字段中，输入管理员的密码。</block>
  <block id="04dc4e8e3822d5b1c62e5090d0c127ce" category="paragraph">* 注： * 只有在数据库主机上有 ASM 实例时，才能选择 ASM 身份验证模式。</block>
  <block id="c67b89f1f9a87129e64ee4a7bd1d404e" category="list-text">在 RMAN 配置信息页面上，选择以下选项之一：</block>
  <block id="bfa9de45095a3a90ebc55708a5ee6dd2" category="cell">条件</block>
  <block id="67b649c036ed893fb3816a9636a5a7df" category="paragraph">* 请勿使用 RMAN*</block>
  <block id="7b41d7329857a84a4b123b7ae1383f10" category="paragraph">您不使用 RMAN 管理备份和还原操作。</block>
  <block id="8cb7e082f1dff0f8401efd2b6335b102" category="paragraph">通过控制文件使用 RMAN</block>
  <block id="f185b1eb7fe6807b51931bd15c4d7086" category="paragraph">您正在使用控制文件管理 RMAN 存储库。</block>
  <block id="b2da415550d3c3c4d65e3d956a1d7543" category="paragraph">* 通过恢复目录使用 RMAN</block>
  <block id="ae965137e4a412e5ec14271c434294b7" category="paragraph">您正在使用恢复目录数据库管理 RMAN 存储库。输入有权访问恢复目录数据库的用户名，密码以及管理透明网络承印商（ Network Substrate ， TNS ）连接的数据库的 Oracle 网络服务名称。</block>
  <block id="dc93296e51ccfc394b24b2d053d7a808" category="list-text">在 Snapshot Naming Information 页面上，选择变量以指定 Snapshot 副本的命名格式。</block>
  <block id="5e0405986953c9ddfd7f5eec4023375a" category="paragraph">您必须在命名格式中包含 SMID 变量。SMID 变量创建唯一的 Snapshot 标识符。</block>
  <block id="3feb7cc914e4b89a0d42879e07df0ae2" category="list-text">在策略设置页面上，执行以下操作：</block>
  <block id="d24efb8bdb7f0bfa443fb53d6f340828" category="list-text">输入每个保留类的保留计数和持续时间。</block>
  <block id="38a4c252985bbf08a49b09af99a5de71" category="list-text">从 * 保护策略 * 下拉列表中，选择 Protection Manager 策略。</block>
  <block id="efdf655d62e53159a46095358a3410df" category="list-text">如果要单独备份归档日志，请选中 * 单独备份归档日志 * 复选框，指定保留期限并选择保护策略。</block>
  <block id="0cc5e42ee75926a44fb2901a88f8db7f" category="paragraph">您可以选择与数据文件关联的策略不同的策略。例如，如果您为数据文件选择了一个 Protection Manager 策略，则可以为归档日志选择其他 Protection Manager 策略。</block>
  <block id="2c77cff5d81e586d830bf3e1b375634a" category="list-text">在配置通知设置页面上，指定电子邮件通知设置。</block>
  <block id="8fbc5a18fc24703c8f4749a9c86e1db1" category="list-text">在历史记录配置信息页面上，选择一个选项以维护 SnapManager 操作历史记录。</block>
  <block id="f6e9c12d7954ef59812f1a095e949528" category="list-text">在执行配置文件创建操作页面上，验证信息并单击 * 创建 * 。</block>
  <block id="ef19f32c9ac85e7b5337e94a1be181d6" category="list-text">单击 * 完成 * 以关闭向导。</block>
  <block id="b585d27615668c268ac9a6c2f4dc3335" category="paragraph">如果操作失败，请单击 * 操作详细信息 * 以查看导致操作失败的原因。</block>
  <block id="d33f2a600ba4fe43084a26e95e4908c0" category="paragraph">* 相关信息 *</block>
  <block id="14f48af41289e0a569f3ee2fe672b277" category="inline-link">《适用于 UNIX 的 SnapManager 3.4 for Oracle 管理指南》</block>
  <block id="a905acae05093709571ee95dcfd0039b" category="paragraph"><block ref="a905acae05093709571ee95dcfd0039b" category="inline-link-rx"></block></block>
  <block id="d9b816c013ecf4afa6565a7fc65bf189" category="summary">您可以验证数据库的备份，以确保备份的文件未损坏。</block>
  <block id="d2366dbf0ffaa68b40ee653f6501d39e" category="doc">验证数据库备份</block>
  <block id="f16913ffd72ea8d72e36c4a0fc1d9264" category="paragraph">如果在创建备份时未选中 * 使用 Oracle DBVERIFY 实用程序验证备份 * 复选框，则必须手动执行以下步骤来验证备份。但是，如果选中此复选框， SnapManager 会自动验证备份。</block>
  <block id="7aaa29f8d2e8a547f5f675b2fe3c80db" category="list-text">从 * 存储库 * 树中，选择配置文件。</block>
  <block id="8192c6c24632cadd689666243545a54f" category="list-text">右键单击要验证的备份，然后选择 * 验证 * 。</block>
  <block id="1859e92122e266181cafb9c13d7400a0" category="list-text">单击 * 完成 * 。</block>
  <block id="7daa0478d5b2b31ea8a556311f066f4b" category="paragraph">在 * 存储库 * 树中，右键单击备份，然后单击 * 属性 * 以查看验证操作的结果。</block>
  <block id="cf2e99b805691870600a9df16a35973a" category="paragraph">您可以使用备份的文件执行还原操作。有关如何使用 SnapManager 用户界面（ UI ）执行还原操作的信息，请参见 _Online 帮助 _ 。如果要使用命令行界面（ CLI ）执行还原操作，请参见 _Oracle SnapManager for UNIX_ 管理指南。</block>
  <block id="b168f0f57b82cbcf16861c4d048e4485" category="summary">SnapManager 使用 NetApp Snapshot 技术创建数据库备份。您可以使用 DBVERIFY 实用程序，也可以使用 SnapManager 验证备份的完整性。</block>
  <block id="ae019d206c094b1142ee2ede0c32daa4" category="doc">SnapManager 备份概述</block>
  <block id="9b32144f75c48bbc4411242dd5fc3e34" category="paragraph">SnapManager 通过为包含数据文件，控制文件和归档日志文件的卷创建 Snapshot 副本来备份数据库。这些 Snapshot 副本共同构成了一个备份集， SnapManager 可使用该备份集还原数据库。</block>
  <block id="880ff6e6fd6ea47143aacd31a575c882" category="summary">在部署 SnapManager 之前，您必须确保存储系统和 UNIX 主机满足最低资源要求。</block>
  <block id="6a6bb2fcebc6acd4649aee3d098f191a" category="doc">准备部署</block>
  <block id="daabe2636884b9009d422fb4835b6826" category="list-text">验证您是否具有所需的许可证。</block>
  <block id="3adbc61777ba020ded47ce2e077efb32" category="list-text">验证支持的配置。</block>
  <block id="20098ef904bef49a75e2c2fd154145c8" category="list-text">验证支持的存储类型。</block>
  <block id="0946d04f1fe81135e9d7b65074e3fbba" category="list-text">验证 UNIX 主机是否满足 SnapManager 要求。</block>
  <block id="edcc5fa99f7084d5270ebc731ac38c0d" category="summary">SnapManager for Oracle 包含一些组件，这些组件可以协同工作，为 Oracle 数据库提供全面而强大的备份，还原，恢复和克隆解决方案。</block>
  <block id="118aee1b4bbd60e1ecd34c7ede556a83" category="doc">SnapManager 架构</block>
  <block id="5bc685caf7b9f2d4f9612ebf7dc5939d" category="image-alt">此图显示了 7- 模式环境中的 SnapManager 架构</block>
  <block id="6913acb0b7525378368dc84e09594522" category="section-title">适用于 UNIX 的 SnapDrive</block>
  <block id="919f34a198248929d4f784948b69469d" category="paragraph">SnapManager 要求 SnapDrive 与存储系统建立连接。在安装 SnapManager 之前，必须在每个目标数据库主机上安装 SnapDrive for UNIX 。</block>
  <block id="af6a1bc54bfa25692fb404beeccbf81f" category="section-title">适用于 Oracle 的 SnapManager</block>
  <block id="7d5643ff2a416305c8e7f1f9edb27b00" category="paragraph">您必须在每个目标数据库主机上安装 SnapManager for Oracle 。</block>
  <block id="39428a8d90e5b121522d6129b78aa8f9" category="paragraph">您可以从安装了 SnapManager for Oracle 的数据库主机使用命令行界面（ CLI ）或 UI 。您也可以从 SnapManager 支持的操作系统上运行的任何系统使用 Web 浏览器远程使用 SnapManager UI 。</block>
  <block id="7ef022a578be28da1215ccf070dd30ff" category="admonition">支持的 JRE 版本为 1.5 ， 1.6 和 1.7 。</block>
  <block id="651517944489d080458feaf4b18b48e1" category="section-title">目标数据库</block>
  <block id="fc07b3bc28ff78b02c42678ae411ac43" category="paragraph">目标数据库是要通过执行备份，还原，恢复和克隆操作使用 SnapManager 管理的 Oracle 数据库。</block>
  <block id="01481686276dcdeb8154575ae3331d69" category="paragraph">目标数据库可以是独立的 Real Application Clusters （ RAC ），也可以驻留在 Oracle Automatic Storage Management （ ASM ）卷上。有关受支持的 Oracle 数据库版本，配置，操作系统和协议的详细信息，请参见 NetApp 互操作性表工具。</block>
  <block id="592bb088713850e19f9c74196b0b08cb" category="section-title">SnapManager 存储库</block>
  <block id="e39269b3b3025977f60fbc03f73e1f5a" category="paragraph">SnapManager 存储库位于 Oracle 数据库中，用于存储有关配置文件，备份，还原，恢复和克隆的元数据。一个存储库可以包含有关对多个数据库配置文件执行的操作的信息。</block>
  <block id="3e1d42d6bb576d5a5ec7bea7c1f2ebb4" category="paragraph">SnapManager 存储库不能驻留在目标数据库中。在执行 SnapManager 操作之前， SnapManager 存储库数据库和目标数据库必须处于联机状态。</block>
  <block id="c7bd671bda60a5f3458be6bf13fd5a09" category="section-title">OnCommand Unified Manager 核心软件包</block>
  <block id="bf1e15e637cfe49ad7a2fc30b32f8dec" category="paragraph">OnCommand Unified Manager 核心软件包集成了 Operations Manager ， Protection Manager 和 Provisioning Manager 的功能。它可以集中管理配置，克隆，备份和恢复以及灾难恢复（ Disaster Recovery ， DR ）策略。通过集成所有这些功能，可以从一个工具执行许多管理功能。</block>
  <block id="a1b5883b5d75b9edc2fd14e87bdccc86" category="section-title">Operations Manager</block>
  <block id="040ebe860f3300beab5fbf8bcf7e376e" category="paragraph">Operations Manager 是 OnCommand Unified Manager 核心软件包的基于 Web 的用户界面（ UI ）。它用于日常存储监控，问题描述警报以及存储和存储系统基础架构报告。SnapManager 集成可利用 Operations Manager 的 RBAC 功能。</block>
  <block id="f80abca2f599f0ee56b4664d5601535c" category="section-title">Protection Manager</block>
  <block id="2cf26de2667405a8675722d03f16e98e" category="paragraph">Protection Manager 为管理员提供了一个易于使用的管理控制台，用于快速配置和控制所有 SnapMirror 和 SnapVault 操作。通过该应用程序，管理员可以应用一致的数据保护策略，自动执行复杂的数据保护过程，并将备份和复制资源池起来以提高利用率。</block>
  <block id="89f5c977d4e12979c817ee29a6d5edec" category="paragraph">Protection Manager 的界面是 NetApp 管理控制台， NetApp 管理软件应用程序的客户端平台。NetApp 管理控制台运行在与安装 OnCommand 服务器的服务器不同的 Windows 或 Linux 系统上。它使存储，应用程序和服务器管理员无需在不同 UI 之间切换即可执行日常任务。在 NetApp 管理控制台中运行的应用程序包括 Protection Manager ， Provisioning Manager 和 Performance Advisor 。</block>
  <block id="1c9245870e55bf9bec46d150aa3760ac" category="section-title">主存储系统</block>
  <block id="53f2db474001cf3d1efc7ff338257407" category="paragraph">SnapManager 会备份 NetApp 主存储系统上的目标数据库。</block>
  <block id="89651e8a65f1df21e2f5bc6224769320" category="section-title">二级存储系统</block>
  <block id="4023f75794545a5dbcc1de49334e25a2" category="paragraph">在数据库配置文件上启用数据保护后， SnapManager 在主存储系统上创建的备份将使用 SnapVault 和 SnapMirror 技术复制到二级 NetApp 存储系统。</block>
  <block id="9ed4a475dd3705157a9fed8811f63ce2" category="inline-link">NetApp 互操作性表工具</block>
  <block id="d38df2295bfe768071dcfe28649a9438" category="paragraph"><block ref="d38df2295bfe768071dcfe28649a9438" category="inline-link-rx"></block></block>
  <block id="a437b0b9dab6573fc6624958ed395dcf" category="summary">您必须在运行要备份的数据库的每个主机上安装 SnapManager 。</block>
  <block id="77049eb73eb6ad58e4d1446822b143b8" category="doc">安装 SnapManager</block>
  <block id="72cab4b98395bd1fc2fa5c9fbc379520" category="paragraph">您必须已在数据库主机上安装 SnapDrive for UNIX 并与存储系统建立连接。</block>
  <block id="3f6ced2dbbd6263de47278987567ad0e" category="paragraph">有关如何安装 SnapDrive 并与存储系统建立连接的信息，请参见 SnapDrive for UNIX 文档。</block>
  <block id="15213fb5b6e6fc3f1936ef4243d8e46b" category="paragraph">每个数据库主机必须安装一个 SnapManager 实例。如果您使用的是 Real Application Cluster （ RAC ）数据库，并且要备份 RAC 数据库，则必须在 RAC 数据库的所有主机上安装 SnapManager 。</block>
  <block id="f0dddfeb985b74c40f0f6ff0ac9cc7d5" category="list-text">从 NetApp 支持站点下载适用于 UNIX 的 SnapManager for Oracle 安装包，并将其复制到主机系统。</block>
  <block id="438707aa6454630a3e0603f10491e47d" category="inline-link">NetApp 下载： " 软件</block>
  <block id="3fd842cde9d5bbed8d2b1bd6abca7e0f" category="paragraph"><block ref="d45291a7d9c038d32c7b95e1380a953a" category="inline-link-rx"></block>""</block>
  <block id="9e02dc957e6699dc244fbd6b48b58783" category="list-text">以 root 用户身份登录到数据库主机。</block>
  <block id="e5cce4f1deac93eb43717d2b0ab95ab1" category="list-text">在命令提示符处，导航到复制安装包的目录。</block>
  <block id="42e61f75b3797ea94189db57af70985a" category="list-text">使安装包可执行： chmod 755install_package.bin</block>
  <block id="bbf0c67306448413093a9c74a8af3e73" category="list-text">安装 SnapManager ： "./install_package.bin"</block>
  <block id="4eaace578e362a72870b09f60b686546" category="list-text">按 Enter 继续。</block>
  <block id="bf4b3af339a5ff97ead4ece2c457a6e1" category="list-text">执行以下步骤：</block>
  <block id="553008342787e14356853315461821a9" category="list-text">按 Enter 接受操作系统组的默认值。</block>
  <block id="aa879327890f4512d73038b36d308a92" category="paragraph">组的默认值为 dba 。</block>
  <block id="10c1bc3a8a8bc736b9e104c5e4fedbb9" category="list-text">按 Enter 接受启动类型的默认值。</block>
  <block id="b48c67a299c4ea4f1ff93ff67f2a2dfb" category="paragraph">此时将显示配置摘要。</block>
  <block id="835e21e29b7196107555c851360ee43e" category="list-text">查看配置摘要，然后按 Enter 继续。</block>
  <block id="96ea3464c17bcebbd6122bc43ddae793" category="paragraph">SnapManager 安装在上</block>
  <block id="d896cf10d558e476d6f4e33b50a52d46" category="inline-xref-macro">设置 SnapManager</block>
  <block id="3d9ed72a6e52fa7bb53ca9808f05270f" category="paragraph"><block ref="3d9ed72a6e52fa7bb53ca9808f05270f" category="inline-xref-macro-rx"></block></block>
  <block id="a93050ef7529b5d9d0b2849e609672ed" category="inline-link">NetApp 文档： SnapDrive for UNIX</block>
  <block id="1140fd07529e3cef888cbf727efa4160" category="paragraph"><block ref="60da81aa61955627327b799953209c10" category="inline-link-rx"></block>'</block>
  <block id="00ff6cb65975cb5036856052734543f1" category="summary">Copyright information</block>
  <block id="2cac0d3c3eaf551492769db51b40ad47" category="paragraph">版权所有 © 1994--2015 NetApp ， Inc. 。保留所有权利。Printed in the U.S.</block>
  <block id="2275e007ee598cef266c877f9c52ee25" category="paragraph">版权所涵盖的本文档的任何部分不得以任何形式或任何方式复制，包括图像，电子或机械，包括影印，录制， 在未经版权所有者事先书面许可的情况下，在电子检索系统中粘贴或存储。</block>
  <block id="ce4ad2236c56cc11a838f29c8c261bf7" category="paragraph">Software derived from copyrighted NetApp material is subject to the following license and disclaimer:</block>
  <block id="b110bc9db113b3149cb9e2ed905d4c6c" category="paragraph">THIS SOFTWARE IS PROVIDED BY NETAPP "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE, WHICH ARE HEREBY DISCLAIMED.IN NO EVENT SHALL NETAPP BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</block>
  <block id="4fc9b260d15698bbd988f76ca839c5b6" category="paragraph">NetApp reserves the right to change any products described herein at any time, and without notice.NetApp assumes no responsibility or liability arising from the use of products described herein, except as expressly agreed to in writing by NetApp.The use or purchase of this product does not convey a license under any patent rights, trademark rights, or any other intellectual property rights of NetApp.</block>
  <block id="87bfcb691f34a9e3fdda83480f0acf78" category="paragraph">The product described in this manual may be protected by one or more U.S.patents, foreign patents, or pending applications.</block>
  <block id="1e7816b459c191ce8ccc1beef33b8faf" category="paragraph">RESTRICTED RIGHTS LEGEND: Use, duplication, or disclosure by the government is subject to restrictions as set forth in subparagraph (c)(1)(ii) of the Rights in Technical Data and Computer Software clause at DFARS 252.277-7103 (October 1988) and FAR 52-227-19 (June 1987).</block>
  <block id="5f7135ad047fd0f95e04f17710e1b7f6" category="summary">您可以使用用户界面（ UI ）或命令行界面（ CLI ）启动 SnapManager 并访问它。访问 SnapManager 后，您必须先创建 SnapManager 存储库，然后再执行任何 SnapManager 操作。</block>
  <block id="00bbccb68e10f90e8cd9318c89339bfe" category="summary">您可以从 SnapManager 支持的操作系统上运行的任何系统使用 Web 浏览器远程访问 SnapManager 用户界面（ UI ）。您也可以通过运行 smogui 命令从目标数据库主机访问 SnapManager UI 。</block>
  <block id="a6fa631dd940c134c02e796375f14a7d" category="doc">访问 SnapManager 用户界面</block>
  <block id="5e7d6068a841a0742de2e6ca1d5ac028" category="list-text">您必须确保 SnapManager 正在运行。</block>
  <block id="fea3e0c2ae12136a2dcfb348ef5493f7" category="list-text">您必须确保要访问 SnapManager UI 的系统上安装了受支持的操作系统和 Java 。</block>
  <block id="d3fd96ed2a69782716214e9925fb26a6" category="paragraph">有关支持的操作系统和 Java 的信息，请参见互操作性表工具。</block>
  <block id="8ff5a183fbc8d4f80d43a01c78e5a884" category="list-text">在 Web 浏览器窗口中，输入以下内容：<block ref="eaa71cb4c0ba2e6feba820bcc3ce5420" category="inline-link-rx"></block></block>
  <block id="113bd1cbb0857950e650e23ce7d1cdd7" category="list-text">SERVER_NAME 是安装了 SnapManager 的目标数据库主机的名称。</block>
  <block id="3a12ce73bdf56e60dbd342a64261b073" category="paragraph">您还可以输入目标数据库主机的 IP 地址。</block>
  <block id="2616db9b08d835e48a18dbb8e51e31b9" category="list-text">port_number 是运行 SnapManager 的端口。</block>
  <block id="afd2b272c180b500568aad7bc1e68334" category="paragraph">默认值为 272.14 。</block>
  <block id="6d0462989f8df38cba3860c38bbd6027" category="list-text">单击链接。</block>
  <block id="044c010d94a8b86c3b69c12f49dba855" category="paragraph">此时将显示用户界面。</block>
  <block id="11fdd43137cfc836a71e2c84f0134b65" category="summary">You can help us to improve the quality of our documentation by sending us your feedback.首次发布生产级 \ （ GA/FCS\ ）文档或对现有生产级文档进行重要更改时，您可以收到自动通知。</block>
  <block id="6ab85e747e0c76cd7c95b5eb2dd03018" category="doc">How to send comments about documentation and receive update notifications</block>
  <block id="7a5f2d68b34e39986049259c8de51697" category="paragraph">You can help us to improve the quality of our documentation by sending us your feedback.You can receive automatic notification when production-level (GA/FCS) documentation is initially released or important changes are made to existing production-level documents.</block>
  <block id="6cb472d15e6581c6a1685914826fe23d" category="inline-link-macro">doccomments@netapp.com</block>
  <block id="cfc02d6e4e0b168d4bf41f074737eae5" category="paragraph">如果您对改进本文档有任何建议，请通过电子邮件将您的意见发送给我们 <block ref="bf25194d33ec7a97201c744c76650d65" category="inline-link-macro-rx"></block>。To help us direct your comments to the correct division, include in the subject line the product name, version, and operating system.</block>
  <block id="6be364524b60c8ce2362d8a248ae8458" category="paragraph">If you want to be notified automatically when production-level documentation is released or important changes are made to existing production-level documents, follow Twitter account @NetAppDoc.</block>
  <block id="0f6432546c71f0bad51899d7b12115f5" category="paragraph">You can also contact us in the following ways:</block>
  <block id="6b6e8e5dc64ceaa157b675b8130ec8ae" category="list-text">NetApp, Inc., 495 East Java Drive, Sunnyvale, CA 94089 U.S.</block>
  <block id="b320d449aa2877c850203a437a00d03f" category="list-text">电话： +1 （ 408 ） 822-6000</block>
  <block id="5270356a4b7661efe9b3919cc932dba1" category="list-text">传真： +1 （ 408 ） 822-4501</block>
  <block id="7683c0133a46ee9967259368f60e4024" category="list-text">支持电话： +1 （ 888 ） 463-8277</block>
  <block id="16d5e9c7e17c386db8f1aa039bc40396" category="summary">您必须从目标数据库主机启动 SnapManager 服务器。</block>
  <block id="2921a9f959e11e88623f0a5aafa7a7a3" category="doc">启动 SnapManager 服务器</block>
  <block id="4d7478178653800750f0c8d7090fd19a" category="list-text">登录到目标数据库主机并启动 SnapManager 服务器：</block>
  <block id="ce8d24684abf5a1bf544ab10606f5942" category="paragraph">此时将显示以下消息： SnapManager Server started on secure port port_number with PID PID_number 。 '</block>
  <block id="64570e03fde7d0b23ceb17574b9c354e" category="admonition">默认端口为 272.14 。</block>
  <block id="aed9d350477701a8a9909d8358c52489" category="paragraph">您可以验证 SnapManager 是否运行正常：</block>
  <block id="3fae3adef8252276cfc72c7b5fcb3e61" category="paragraph">此时将显示以下消息： "operation ID operation_ID_number succeeded" 。</block>
  <block id="44d67914869e969bafcc0d4deb795db6" category="summary">Oracle 数据库用户需要登录到数据库并执行 SnapManager 操作。如果目标数据库不存在具有 sysdba 权限的用户，则必须使用 sysdba 权限创建此用户。</block>
  <block id="117d3d068b773168c32fd64f74f8ce87" category="doc">为目标数据库创建 Oracle 数据库用户</block>
  <block id="e1a4eb4d0297714c761be989be8a6ce1" category="paragraph">Oracle 数据库用户需要登录到数据库并执行 SnapManager 操作。如果目标数据库不存在具有 _sysdba_ 权限的用户，则必须使用 _sysdba_ 权限创建此用户。</block>
  <block id="ebef93e1c1208428fb51cbdd2a381507" category="paragraph">SnapManager 可以使用目标数据库具有 _sysdba_ 权限的任何 Oracle 用户。例如， SnapManager 可以使用默认的 _sys_ 用户。但是，即使用户存在，您也可以为目标数据库创建新用户并分配 _sysdba_ 权限。</block>
  <block id="e81506aa69946b0f893a5538153d1d69" category="paragraph">您还可以使用操作系统身份验证方法，其中操作系统（ OS ）允许 Oracle 数据库使用操作系统维护的凭据对用户进行身份验证，以便登录到数据库并执行 SnapManager 操作。如果您通过操作系统进行身份验证，则无需指定用户名或密码即可连接到 Oracle 数据库。</block>
  <block id="a4c6430764aa76c4cbe3c2b93bc164f1" category="list-text">登录到 SQL * 加号： "qlplus / as sysdba"</block>
  <block id="47ece8b18bdf3e4db55f19b774ee9489" category="list-text">使用管理员密码创建新用户： "create useruser_name identified by admin_password ； "</block>
  <block id="1fc057573a612100e8ed7d24d2896d1f" category="paragraph">user_name 是要创建的用户的名称， admin_password 是要分配给该用户的密码。</block>
  <block id="e169f540aebf2558131388d12884d1ab" category="list-text">将 sysdba 权限分配给新的 Oracle 用户： "Grant sysdba to user_name； "</block>
  <block id="07e7e3a777c54f493dfbeca115275ff4" category="summary">自动化并简化与 Oracle 数据库的备份，恢复和克隆相关的复杂，手动且耗时的流程。您可以使用采用 Data ONTAP SnapMirror 技术的 SnapManager 在另一个卷上创建备份副本，并使用 Data ONTAP SnapVault 技术将备份高效归档到磁盘。</block>
  <block id="4b983fff716674f120176e09551dd445" category="doc">产品概述</block>
  <block id="e44f0bcdf3a1a5567ff5ae6842d389cc" category="paragraph">SnapManager 可与原生 Oracle 技术集成，例如 Oracle Real Application Clusters （ Oracle RAC ），自动存储管理（ ASM ）以及跨 FC ， iSCSI 和 NFS 协议的直接 NFS 。或者，可以使用 SnapManager 创建的备份通过 Oracle 恢复管理器（ RMAN ）进行编目来保留备份信息；这些备份可以稍后用于块级还原或表空间时间点恢复操作。</block>
  <block id="050061c5aef3edd391bf1b58e1c1ef34" category="section-title">SnapManager 亮点</block>
  <block id="8892a3f6f6f8dd9586becf4ce0721e57" category="paragraph">SnapManager 可与 UNIX 主机上的 Oracle 数据库以及后端的 NetApp Snapshot ， SnapRestore 和 FlexClone 技术无缝集成它提供了一个易于使用的用户界面（ UI ）以及用于管理功能的命令行界面（ CLI ）。</block>
  <block id="2cc9814a33f78e2eaa2e6c11964860ae" category="paragraph">使用 SnapManager ，您可以执行以下数据库操作并高效管理数据：</block>
  <block id="5914e903d4783eecd259652f890046d2" category="list-text">在主存储或二级存储上创建节省空间的备份</block>
  <block id="3a885bab8bf01445eac0cd5b7ce5b400" category="paragraph">使用 SnapManager 可以分别备份数据文件和归档日志文件。</block>
  <block id="7972a2702811e61123cb7047cd446e47" category="list-text">计划备份</block>
  <block id="41634b8a408ed21bb9c90583d3daa650" category="list-text">使用基于文件或基于卷的还原操作还原完整或部分数据库</block>
  <block id="5cf517163809ed1f37dcc4d78f3a9b03" category="list-text">通过从备份中发现，挂载和应用归档日志文件来恢复数据库</block>
  <block id="c75d914810d34ec2f51ce6235b1f4982" category="list-text">仅为归档日志创建备份时，从归档日志目标中删除归档日志文件</block>
  <block id="9d66dd2d501f270ac8eba78838826934" category="list-text">通过仅保留包含唯一归档日志文件的备份，自动保留最少数量的归档日志备份</block>
  <block id="92a0585f5c2c03bd54f9de21d8900265" category="list-text">跟踪操作详细信息并生成报告</block>
  <block id="1c09ff1f282c282d1b19bfd48d73ff52" category="list-text">验证备份以确保备份采用有效的块格式，并且备份的文件均未损坏</block>
  <block id="b158c761a708cc62a557761750631692" category="list-text">维护对数据库配置文件执行的操作的历史记录</block>
  <block id="92dd419d7253c252649b28fb063c8c84" category="paragraph">配置文件包含有关要由 SnapManager 管理的数据库的信息。</block>
  <block id="f4c7affba5fdf35df5be4ec497e7b8d1" category="list-text">保护二级和三级存储系统上的备份。</block>
  <block id="a25cd3aaadbdc58d2014fc42e6f68b94" category="list-text">在主存储或二级存储上为备份创建节省空间的克隆</block>
  <block id="416ad1558b73fa116c77efb1466a2f06" category="paragraph">使用 SnapManager 可以拆分数据库的克隆。</block>
  <block id="2e85cb69e9469b1c6e9aa9e30a2eeb1b" category="summary">要安装 SnapManager 的主机必须满足指定的软件，浏览器，数据库和操作系统要求。在安装或升级 SnapManager 之前，您必须验证对配置的支持。</block>
  <block id="1f0b82560627b660c6c6958a1df834b8" category="doc">支持的配置</block>
  <block id="be499028f588002a2f4b9b04f6bb92cb" category="paragraph">有关支持的配置的信息，请参见互操作性表工具。</block>
  <block id="efd1ddf6b728c1673691d824c68f8e93" category="summary">在使用 SnapManager 创建备份之前，您需要先安装 SnapDrive for UNIX ，然后再安装 SnapManager for Oracle 。</block>
  <block id="ab3ccb0be518e752d20f706d36d252c9" category="doc">部署工作流</block>
  <block id="12322ad00a92eab539bf7805d6c81ff5" category="image-alt">此图显示了 7- 模式环境中 SnapManager for Oracle 的部署工作流。</block>
  <block id="fad434a0d4fe65a2d130700064566a20" category="summary">创建配置文件后，您必须备份数据库。您可以在初始备份和验证后计划重复备份。</block>
  <block id="a0e44cd08a535858be5b5623eced9b57" category="doc">备份数据库</block>
  <block id="293aeeb0b07f77612035a6e26880cb76" category="paragraph">以下步骤说明了如何使用 SnapManager 用户界面创建数据库备份。如果您愿意，也可以使用命令行界面（ CLI ）。</block>
  <block id="3bb581e5fbf3b823a0fae2c86765976e" category="paragraph">有关如何使用命令行界面创建备份的信息，请参见 _Oracle SnapManager for UNIX_ 管理指南。</block>
  <block id="46f341c0c797cad08177a23479cd0f00" category="list-text">从存储库树中，右键单击包含要备份的数据库的配置文件，然后选择 * 备份 * 。</block>
  <block id="813adcd52c5815eec0b16dad23426af9" category="list-text">在 * 标签 * 中，输入备份的自定义名称。</block>
  <block id="0744d539f06bd08a310b160369481f0d" category="paragraph">名称中不得包含空格或特殊字符。如果不指定名称， SnapManager 会自动创建备份标签。</block>
  <block id="9c6c70210f0a6d4ab585304b52e2a0ca" category="paragraph">在 SnapManager 3.4 中，您可以修改 SnapManager 自动创建的备份标签。您可以编辑 override.default.backup.pattern 和 new.default.backup.pattern 配置变量以创建自己的默认备份标签模式。</block>
  <block id="36262d883c88ae699ae8551cb5f119bc" category="list-text">如果需要，选择 * 允许启动或关闭数据库 * 以修改数据库的状态。</block>
  <block id="97d44ece8eee75fa0bc34ae9dfed740c" category="paragraph">此选项可确保如果数据库未处于创建备份所需的状态， SnapManager 会自动将数据库置于所需状态以完成此操作。</block>
  <block id="90df1b8946d7705c238b1845800863a7" category="list-text">在要备份的数据库，表空间或数据文件页面上，执行以下操作：</block>
  <block id="3a0d9432a598f5736554557ee5547157" category="list-text">选择 * 备份数据文件 * 可备份完整数据库，选定数据文件或选定表空间。</block>
  <block id="25db8012cad0f5823cb28af979125059" category="list-text">选择 * 备份归档日志 * 可单独备份归档日志文件。</block>
  <block id="26e72a502179238021cca548fda392b0" category="list-text">如果要从已备份的活动文件系统中删除归档日志文件，请选择 * 复选框归档日志 * 。</block>
  <block id="4a2c4377472fd4631755cb1c0c2494d3" category="admonition">如果为归档日志文件启用了 Flash Recovery Area （ FRA ），则 SnapManager 无法对归档日志文件进行修剪。</block>
  <block id="024cfada2a28a170ed765321f0cd3624" category="list-text">如果要启用备份保护，请选择 * 保护备份 * 。</block>
  <block id="4395c76931b514e7a9a5afc9092c60cb" category="paragraph">只有在创建配置文件时选择了保护策略时，才会启用此选项。</block>
  <block id="da0b0f31855314ac4287e677f53a5d68" category="list-text">如果要立即保护二级存储的备份覆盖 Protection Manager 的保护计划，请选择 * 立即保护 * 。</block>
  <block id="d26d674c726a0a807332ac1488760d18" category="list-text">从 * 类型 * 下拉列表中，选择要创建的备份类型（脱机或联机）。</block>
  <block id="e229262991319f6749aed6cf596f416c" category="paragraph">如果选择自动， SnapManager 将根据数据库的当前状态创建备份。</block>
  <block id="f0053404ef992e63219fd7fbfebaac74" category="list-text">从 * 保留类 * 下拉列表中，选择保留类。</block>
  <block id="970ea32f4e637610cdc69165880dfb31" category="list-text">如果要确保备份的文件未损坏，请选中 * 使用 Oracle DBVERIFY 实用程序验证备份 * 复选框。</block>
  <block id="ba01eac418d611bcfe501f0d86231233" category="list-text">在任务启用页面上，指定是否要在备份操作完成前后执行任务。</block>
  <block id="4bdc535c794f2a42018bdd87dc77f45d" category="list-text">在执行备份操作页面上，验证信息并单击 * 备份 * 。</block>
  <block id="e0ea70dddaa3699d35f0fa1da39e8cac" category="summary">侦听器是一个侦听客户端连接请求的过程。它接收传入的客户端连接请求，并管理这些请求到数据库的流量。在连接到目标数据库或存储库数据库实例之前，您可以使用 status 命令验证侦听器配置。</block>
  <block id="2a7afc5d510f9c73ce354d510cca256b" category="doc">验证 Oracle 侦听器配置</block>
  <block id="c82044232245c2a813cb6608a1e2d5c1" category="paragraph">status 命令可显示有关特定侦听器的基本状态信息，包括侦听器配置设置，侦听协议地址的摘要以及向该侦听器注册的服务的摘要。</block>
  <block id="aad0b3ac78ba6073179575cfef76ad52" category="list-text">在命令提示符处输入以下命令： "lsnrctl status"</block>
  <block id="1319f339f0fc1e50cdd490bc95168a6b" category="paragraph">分配给侦听器端口的默认值为 1521 。</block>
  <block id="725d69e396f7834af2ab82cb632988c2" category="summary">《适用于 Oracle 3.4.2 的 SnapManager UNIX ® 安装和设置指南》</block>
  <block id="99cd5d576be5323d23f2ac84db3c8fd3" category="doc">《 UNIX ® 安装和设置指南》</block>
  <block id="91d11110a388fefdf77507bac3227dd0" category="paragraph">本指南介绍了在 UNIX 环境中使用 7- 模式 Data ONTAP 部署 SnapManager 3.4.2 for Oracle 所需执行的初始任务。主题包括如何安装和配置产品以及如何备份数据库。</block>
  <block id="8513b6d0dd99ede780d61bb311bb1641" category="summary">目标数据库是 Oracle 数据库，可以配置为独立， Real Application Clusters （ RAC ）， Automatic Storage Management （ ASM ）或任何其他受支持的组合。</block>
  <block id="5d818cf663c5cb7077469cb11c853141" category="doc">配置目标数据库</block>
  <block id="7e400c0b6d1b38dbf36e2fcaa810cad8" category="list-text">请参见 _TR-3633_ 来配置目标数据库。</block>
  <block id="842ec5bcd4534e9d7d2dbab855809cbd" category="inline-link">NetApp 技术报告 3633 ：《基于 NetApp 存储的 Oracle 数据库最佳实践》</block>
  <block id="ddd15170fbe995d1694f80d505c9a117" category="paragraph"><block ref="ddd15170fbe995d1694f80d505c9a117" category="inline-link-rx"></block></block>
  <block id="67b40a8b101278f4baac8e037417f81c" category="summary">需要 Oracle 用户登录和访问存储库数据库实例。您必须创建具有连接和资源权限的用户。</block>
  <block id="4727835a356403c0e5be932f703c9bb7" category="doc">为存储库数据库实例创建 Oracle 用户</block>
  <block id="edbf32672814e289da6701f13bf9bc42" category="paragraph">需要 Oracle 用户登录和访问存储库数据库实例。您必须使用 _connec_ 和 _resources_ 权限创建此用户。</block>
  <block id="b128a06d18b05e62c5a7029025e17fbc" category="list-text">创建一个新用户并为该用户分配管理员密码： "create useruser_name identified by admin_password default tablespace_name quota unlimited on tablespace_name" ；</block>
  <block id="fbbc09c8f0566ecc14d547a1f681155e" category="list-text">user_name 是要为存储库数据库创建的用户的名称。</block>
  <block id="2a7fccf1d24129de175d1e96302f2e59" category="list-text">admin_password 是要分配给用户的密码。</block>
  <block id="6fbb9575142e691b6c180db9e52387b3" category="list-text">tablespace_name 是为存储库数据库创建的表空间的名称。</block>
  <block id="02851f787905ffa6c17c669ec918f24b" category="list-text">向新 Oracle 用户分配 _connect_and _resource_privileges ： 'Grant connect ， resource to user_name ； '</block>
  <block id="4e0d65c0081c681991c52f27d13788ea" category="summary">您必须至少配置两个 Oracle 数据库，一个是要使用 SnapManager 备份的目标数据库，另一个是用于存储目标数据库元数据的存储库数据库。在执行 SnapManager 操作之前，必须配置目标数据库和 SnapManager 存储库数据库并使其联机。</block>
  <block id="4e37a59cef3180afa59c499125215257" category="doc">配置数据库</block>
  <block id="29dd72f76e7084403cd8bdc5dd3a72b3" category="paragraph">您必须至少配置两个 Oracle 数据库：一个要使用 SnapManager 备份的目标数据库；一个用于存储目标数据库元数据的存储库数据库。在执行 SnapManager 操作之前，必须配置目标数据库和 SnapManager 存储库数据库并使其联机。</block>
  <block id="aaa726d878886328e48f6babca5c200b" category="summary">存储库数据库实例是一个 Oracle 数据库，您可以在其中创建 SnapManager 存储库。存储库数据库实例必须是独立数据库，不能是目标数据库。</block>
  <block id="c12a4252c380fc4de61880a87c5c2727" category="doc">创建存储库数据库实例</block>
  <block id="b1c97ccad850dfe40df51567fcc9546a" category="paragraph">要访问此数据库，您必须具有 Oracle 数据库和用户帐户。</block>
  <block id="b4fa298d0710ac5e94b4600ea7d0337c" category="list-text">为 SnapManager 存储库创建新的表空间： "create tablespacetablespace_name datafile ′ /u01/app/oracle/oradata/datafile/tablespace_name.dbf′ size 100m autodelete on" ；</block>
  <block id="a306ae82fdd16138666217e0a5ab0676" category="paragraph">tableespace_name 是表空间的名称。</block>
  <block id="6cc67664eb4ade0f25a7c5b3e93b2ba3" category="list-text">验证表空间的块大小： "elect tablespace_name ， block_size from dba_tablespaces ； "</block>
  <block id="8dbed49eec50129dcac684c6fca83098" category="paragraph">SnapManager 要求表空间的块大小至少为 4-K 。</block>
  <block id="a1d6fdbb9ef592465c085ab60b18fc67" category="inline-link">NetApp 技术报告 3761 ：《 SnapManager for Oracle ：最佳实践》</block>
  <block id="5cee7647caeb0dd1521ed229e00352b2" category="paragraph"><block ref="535a31314568b5c075ba7097c77ec2d2" category="inline-link-rx"></block>'</block>
  <block id="a1904b3ad9267ba209d88905791a12f4" category="summary">安装 SnapManager 后，您可以为数据库创建一个基本备份，并验证该备份以确保它不包含任何损坏的文件。</block>
  <block id="1242f42987ca7d1aa1d8e5cc04f64973" category="doc">备份和验证数据库</block>
  <block id="e3f61beddfd59bd78b2989baeabbe526" category="paragraph"><block ref="e3f61beddfd59bd78b2989baeabbe526" category="inline-xref-macro-rx"></block></block>
  <block id="bdb26ee5642ea5b69e7812bfd7c76b3b" category="inline-xref-macro">定义备份策略</block>
  <block id="ed121e1c6152cecc7ffe3760802a7ed3" category="paragraph"><block ref="ed121e1c6152cecc7ffe3760802a7ed3" category="inline-xref-macro-rx"></block></block>
  <block id="29dc91e7adde1c210c5fd55e9238af09" category="paragraph"><block ref="29dc91e7adde1c210c5fd55e9238af09" category="inline-xref-macro-rx"></block></block>
  <block id="d8681001a2e5c06663fbaa9574770eb2" category="paragraph"><block ref="d8681001a2e5c06663fbaa9574770eb2" category="inline-xref-macro-rx"></block></block>
  <block id="beec5e9bd85cec1f99a2592d06afa0d8" category="paragraph"><block ref="beec5e9bd85cec1f99a2592d06afa0d8" category="inline-xref-macro-rx"></block></block>
  <block id="da7d1440722183f8a12e6394ef061389" category="inline-xref-macro">计划重复备份</block>
  <block id="393c861e00fec736e67e49ef76917699" category="paragraph"><block ref="393c861e00fec736e67e49ef76917699" category="inline-xref-macro-rx"></block></block>
  <block id="09caf424851a4710b54fc930ecebf079" category="summary">SnapManager 在物理机和虚拟机上均支持多种存储类型。在安装或升级 SnapManager 之前，您必须验证是否支持您的存储类型。</block>
  <block id="745f3917a074ad2d3a63f913855d07bd" category="doc">支持的存储类型</block>
  <block id="47c954121886a5e5aaca7eece461b56f" category="cell">计算机</block>
  <block id="f0cb6783b152b19ceab16227ca3976a2" category="cell">Storage type</block>
  <block id="e042e676706d93b3b14ce12e4d00a002" category="paragraph">物理服务器</block>
  <block id="df750015db6d85e88db15a90ebbf9147" category="list-text">NFS-connected volumes</block>
  <block id="3a14bc2a9e80eb39a44cd07a0d40b62b" category="list-text">FC 连接的 LUN</block>
  <block id="f83bf140a9f6b8a345e508ecdc999c4b" category="list-text">iSCSI 连接的 LUN</block>
  <block id="aa458273cce77aee753d7c0a8e5d7213" category="paragraph">VMware ESX</block>
  <block id="a58b8b421b0a6170e7380151af742f28" category="list-text">直接连接到子系统的 NFS 卷</block>
  <block id="9862fc163188a3bd684ac108343935ff" category="list-text">子操作系统上的 RDM LUN</block>
  <block id="e8b6f0f600d7b78e8842b0c2ed0ae495" category="summary">在创建备份之前定义备份策略可确保您已备份成功还原数据库。SnapManager 提供灵活的粒度备份计划，以满足您的服务级别协议（ SLA ）要求。</block>
  <block id="d35c5ff65d8e05dc1e4baedb7fa265ff" category="admonition">有关 SnapManager 最佳实践，请参见 _TR 3761_ 。</block>
  <block id="0aea56308b940bf3d69d2ec66d2e7c73" category="section-title">您需要哪种 SnapManager 备份模式？</block>
  <block id="30b1af8385dfaf45417608fdeae280c1" category="paragraph">SnapManager 支持两种备份模式：</block>
  <block id="72b2dc86deaa957ecff5946527705d88" category="cell">备份模式</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">Description</block>
  <block id="cd9177f3a112508cd1d4ef7ec5499433" category="paragraph">联机备份</block>
  <block id="47884179d81607d65951171fba373fcc" category="paragraph">在数据库处于联机状态时创建数据库备份。此备份模式也称为热备份。</block>
  <block id="203b3a4b594fb28b853f0cb7e5561c26" category="paragraph">脱机备份</block>
  <block id="77817ef9aa2941a088723f548a1b2343" category="paragraph">在数据库处于挂载或关闭状态时创建数据库备份。此备份模式也称为冷备份。</block>
  <block id="94c6c25c84b089f7b6a1e5a4ff6f9867" category="section-title">您需要哪种类型的 SnapManager 备份？</block>
  <block id="0ab51c0ba9e5bbd5c9da7e72c0263cf0" category="paragraph">SnapManager 支持三种类型的备份：</block>
  <block id="a3c82f66d39159c3e9d428cd534beb34" category="cell">备份类型</block>
  <block id="86766a67005e37d7ee68e747eca2db47" category="paragraph">完整备份</block>
  <block id="9351fc21e39ece25379a84c780a6fd14" category="paragraph">创建整个数据库的备份，其中包括所有数据文件，控制文件和归档日志文件。</block>
  <block id="75a7054091d41bcfca2fbd4aa7cd09e9" category="paragraph">部分备份</block>
  <block id="0282ec53301217cc0dc8f08fd846fc67" category="paragraph">创建选定数据文件，控制文件，表空间和归档日志文件的备份</block>
  <block id="321c3c3ab224f82b985a7f7773e3a454" category="paragraph">仅归档日志备份</block>
  <block id="6f7c0adcd628dae595b22dce991f62ff" category="paragraph">仅创建归档日志文件的备份。在创建配置文件时，必须选择 * 单独备份归档日志 * 。</block>
  <block id="0184ed9888695120662938f95fe7b6db" category="section-title">您需要哪种类型的数据库配置文件？</block>
  <block id="25b0b7011dc6e4169ae647e26aaad45b" category="paragraph">SnapManager 会根据数据库配置文件是否将归档日志备份与数据文件备份分隔开来创建备份。</block>
  <block id="fc4a96872d68186a12013ac069d7d40b" category="cell">配置文件类型</block>
  <block id="650e16d172230b6b53bc12e3654b5580" category="paragraph">一个数据库配置文件，用于对数据文件和归档日志进行组合备份</block>
  <block id="5c1968705b8fa8050e77b69453b31fb1" category="paragraph">用于创建：</block>
  <block id="446b9990aa2d9b903eb05155e610044c" category="list-text">完整备份，包含所有数据文件，归档日志文件和控制文件</block>
  <block id="5f9818ebe89152a4ca3b3393e3e2a9e2" category="list-text">包含选定数据文件，表空间，归档日志文件和控制文件的部分备份</block>
  <block id="2f75f39499893dc23aa6444300eede8b" category="paragraph">用于归档日志备份和数据文件备份的单独数据库配置文件</block>
  <block id="cd29c57bc0c936244fef0ded0bdae9fb" category="list-text">将具有不同标签的备份组合在一起，用于数据文件备份和归档日志备份</block>
  <block id="c8145490712dafdee06c8828dc4807a5" category="list-text">所有数据文件以及控制文件的纯数据备份</block>
  <block id="f6f695ee511c4db052adf9c8704f6d18" category="list-text">选定数据文件或表空间以及控制文件的部分纯数据备份</block>
  <block id="d78b49f521a49262af7da2db5ff95e68" category="list-text">仅归档日志备份</block>
  <block id="376b9e8da17090771171f5e45211c586" category="section-title">Snapshot 副本应使用哪些命名约定？</block>
  <block id="267eb14659342195a91c624d537c16f4" category="paragraph">通过备份创建的 Snapshot 副本可以遵循自定义命名约定。可以使用自定义文本或内置变量（例如配置文件名称，数据库名称和 SnapManager 提供的数据库 SID ）来创建命名约定。您可以在创建策略时创建命名约定。</block>
  <block id="1b6cbed080b9ece914ab8c8067cb2648" category="paragraph">Snapshot 副本命名约定可以在创建配置文件期间或之后进行更改。更新后的模式仅适用于尚未创建的 Snapshot 副本；现有 Snapshot 副本将保留先前的模式。</block>
  <block id="bf12de3ae15d181e74038e2f13328f62" category="section-title">您希望在主存储系统和二级存储系统上保留备份副本多长时间？</block>
  <block id="66b142eac1f831645933f9f7dbeb17e6" category="paragraph">备份保留策略用于指定要保留的成功备份数。您可以在创建策略时指定保留策略。</block>
  <block id="8129ffa329986052a9fbc89900e49a44" category="paragraph">您可以选择 " 每小时 " ， " 每日 " ， " 每周 " ， " 每月 " 或 " 无限制 " 作为保留类。对于每个保留类，您可以同时或单独指定保留计数和保留期限。</block>
  <block id="4ea5183469f7e26c793a4eed6fefd269" category="list-text">保留数量决定了应保留的特定保留类的最小备份数。</block>
  <block id="689ff13683806486acb40f3fcc927d84" category="paragraph">例如，如果备份计划为 _daily_ 且保留计数为 _10_ ，则会保留 10 个每日备份。</block>
  <block id="1fc6be077f6b1c8900e85ff96596549a" category="admonition">Data ONTAP 允许您保留的最大 Snapshot 副本数为 255 。默认情况下，在达到最大限制后，创建新 Snapshot 副本将失败。但是，您可以在 Data ONTAP 中配置轮换策略以删除旧的 Snapshot 副本。</block>
  <block id="a97a5accf20bac7638f71e59ca252529" category="list-text">保留期限用于确定备份应保留的最短天数。</block>
  <block id="04a2ba05eea9cc75e7708611136eeca0" category="paragraph">例如，如果备份计划为 _daily_ 且保留期限为 _10_ ，则会保留 10 天的每日备份。</block>
  <block id="0f51775b134a404749b8b65238771c2d" category="paragraph">如果设置了 SnapMirror 复制，则保留策略将在目标卷上镜像。</block>
  <block id="7bf76f2f5323539bb040c22896c077ed" category="admonition">要长期保留备份副本，应使用 SnapVault 。</block>
  <block id="5e262529a74ad26cffcbd60b150ffbe2" category="section-title">是否要使用源卷或目标卷验证备份副本？</block>
  <block id="fb8bf3c7648d57ee553092d9a5f98d4c" category="paragraph">如果使用 SnapMirror 或 SnapVault ，则可以使用 SnapMirror 或 SnapVault 目标卷上的 Snapshot 副本而不是主存储系统上的 Snapshot 副本来验证备份副本。使用目标卷进行验证可减少主存储系统上的负载。</block>
  <block id="398c8640bf452f7d193443309bf5a484" category="inline-link">NetApp 技术报告 3761 ：《 SnapManager for Oracle ：最佳实践》</block>
  <block id="6b4df046ad572ab972f5ec1bbf6d4a42" category="paragraph"><block ref="6b4df046ad572ab972f5ec1bbf6d4a42" category="inline-link-rx"></block></block>
  <block id="895a92c506e1ce7b18b60099b602ac0a" category="summary">要启用 SnapManager 操作，需要一个 SnapManager 许可证和多个存储系统许可证。SnapManager 许可证有两种许可模式：每服务器许可，其中 SnapManager 许可证驻留在每个数据库主机上；每存储系统许可，其中 SnapManager 许可证驻留在存储系统上。</block>
  <block id="1685f16743a3a69a3c22e0a1ac4b9a3d" category="doc">SnapManager 许可</block>
  <block id="bfbf0e8f3af58d4966e6d4fc40a53bef" category="paragraph">SnapManager 许可证要求如下：</block>
  <block id="794df3791a8c800841516007427a2aa3" category="cell">许可证</block>
  <block id="b428bd66304bced88a8f85c2e42e2a8d" category="cell">必要时</block>
  <block id="461b74bb807ae0fd89209ec246895d69" category="paragraph">每个服务器的 SnapManager</block>
  <block id="f6b97f0095365937faf44786dc02178f" category="paragraph">特定数据库主机的主机端许可证。只有安装了 SnapManager 的数据库主机才需要许可证。存储系统不需要 SnapManager 许可证。</block>
  <block id="06711dd821b38d704425f72a77c2dc2e" category="paragraph">在 SnapManager 主机上。使用每台服务器许可时，主存储系统和二级存储系统不需要 SnapManager 许可证。</block>
  <block id="1e33d351bc3206bf7ee4963474e1544b" category="paragraph">每个存储系统的 SnapManager</block>
  <block id="ce3f8d84f9b070edc2c8f97ac564781c" category="paragraph">一种存储端许可证，支持任意数量的数据库主机。只有在数据库主机上未使用每服务器许可证时才需要此许可证。</block>
  <block id="a815d861d4f9d75608174148e6385c78" category="paragraph">在主存储系统和二级存储系统上。</block>
  <block id="82ef718f4ebe0c276814ee3d51e33361" category="paragraph">SnapRestore</block>
  <block id="fda17aee8db16e826d18d24ba9b6eb0f" category="paragraph">一种使 SnapManager 能够还原数据库的必需许可证。</block>
  <block id="7f329396f132f73e246348f3678ea0c4" category="paragraph">在主存储系统和二级存储系统上。在 SnapVault 目标系统上需要使用此功能从备份中还原文件。</block>
  <block id="a701f5d044348085ee4f97fef6636845" category="paragraph">FlexClone</block>
  <block id="8b312c7392cabdb1663fc2eb2b40d725" category="paragraph">用于克隆数据库的可选许可证。</block>
  <block id="a32905ba56a6446f6393d6dd6a5ce532" category="paragraph">在主存储系统和二级存储系统上。从备份创建克隆时， SnapVault 目标系统上需要此功能。</block>
  <block id="794cb725c5631ad99b5b7c000307f0df" category="paragraph">SnapMirror</block>
  <block id="f1530a7ca9b76132067e751a5d7d774a" category="paragraph">用于将备份镜像到目标存储系统的可选许可证。</block>
  <block id="5bc075cee240a70af54270621d93765c" category="paragraph">SnapVault</block>
  <block id="22379bd0b8abd400cbad4f992d8bb06a" category="paragraph">用于将备份归档到目标存储系统的可选许可证。</block>
  <block id="9985b4390c40137573e6da05caf85874" category="paragraph">协议</block>
  <block id="f95370fcfd159f0310d781d83b102f31" category="paragraph">根据所使用的协议，需要 NFS ， iSCSI 或 FC 许可证。</block>
  <block id="9c076c1e57f1d946edd9f596818dbde8" category="paragraph">在主存储系统和二级存储系统上。如果源卷不可用，则 SnapMirror 目标系统需要提供数据。</block>
  <block id="21fb1c1a42f4fc552a948b8cf25ddd2b" category="summary">您必须在托管要备份的 Oracle 数据库的每个主机上安装 SnapManager for Oracle 。您必须确保主机满足 SnapManager 配置的最低要求。</block>
  <block id="42e895f7edd4d0ddcf62522f3bc5066c" category="doc">UNIX 主机要求</block>
  <block id="f3184093bf9da8ef8f6ae201b86471d1" category="list-text">在安装 SnapManager 之前，必须在数据库主机上安装 SnapDrive 。</block>
  <block id="3a6d807024a0c2906b5a40f13d952136" category="list-text">您可以在物理机或虚拟机上安装 SnapManager 。</block>
  <block id="5e307672a5f1d9b2595cda6a2ab2b872" category="list-text">您必须在共享同一存储库的所有主机上安装相同版本的 SnapManager 。</block>
  <block id="720432b257dfe351efcde5cb5c3f3176" category="list-text">如果您使用的是 Oracle 数据库 11.2.0.2 或 11.2.0.3 ，则必须安装 Oracle 修补程序 13366202 。</block>
  <block id="d2bb1d70c2a1e1d815bf4d5f33e1fc94" category="paragraph">如果您使用的是 DNFS ，则还必须安装 My Oracle Support （ MOS ）报告 1495104.1 中列出的修补程序，以获得最佳性能和稳定性。</block>
  <block id="0111fa190c6fc388615ca51c79d0b4ab" category="summary">安装 SnapManager 并成功创建备份后，您可以使用 SnapManager 执行还原，恢复和克隆操作。此外，您可能还需要查找有关其他 SnapManager 功能的信息，例如计划，管理 SnapManager 操作以及维护操作历史记录。</block>
  <block id="3163b3d4dc92f42d04ad4c79906dcdc3" category="doc">下一步行动</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">NetApp 支持</block>
  <block id="721df3f6a85065a5369f506940c58948" category="paragraph">您可以在以下文档中找到有关这些功能的详细信息以及 SnapManager 的特定版本信息，所有这些文档均可从获得<block ref="49fe929a0dcb5f635e68a9741749346f" category="inline-link-rx"></block>。</block>
  <block id="57be13590b45822f465e7d8f6d5049bb" category="paragraph">介绍如何配置和管理适用于 Oracle 的 SnapManager 。主题包括如何配置，备份，还原和克隆数据库，执行二级保护， 以及有关如何升级和卸载产品的命令行界面命令和说明。</block>
  <block id="632cf7a2194dea768c454183b1190a8c" category="inline-link">《 SnapManager 3.4 for Oracle 发行说明》</block>
  <block id="c904b471b925d64868675dabaa5fc035" category="list-text"><block ref="c904b471b925d64868675dabaa5fc035" category="inline-link-rx"></block></block>
  <block id="77f7df8bb9e53cd3d5f22ccf75510528" category="paragraph">介绍 SnapManager for Oracle 的新增功能，已修复问题，重要注意事项，已知问题和限制。</block>
  <block id="b34946b6376ed9bae73c55ecd334d43c" category="list-text">_Oracle SnapManager 联机帮助 _</block>
  <block id="28e66bf3a3e8f716b3367146a9d4afdf" category="paragraph">介绍使用 SnapManager UI 执行不同 SnapManager 操作的分步过程。</block>
  <block id="45ecb89aaa8b3ff78571faf1241ee6be" category="admonition">联机帮助 _ 与 SnapManager UI 集成在一起，不在支持站点上提供。</block>
  <block id="0b428aea23822d76f547c303852866a4" category="paragraph">介绍适用于 Oracle 的 SnapManager 最佳实践。</block>
  <block id="085c3fa3b22a95ef0325c5fd33ab0a2d" category="paragraph">介绍在 NetApp 存储系统上配置 Oracle 数据库的最佳实践。</block>
  <block id="a854791fa3c105c2b6262ad2d7e36297" category="paragraph"><block ref="a854791fa3c105c2b6262ad2d7e36297" category="inline-link-rx"></block></block>
  <block id="0affad787d4ba4f0a18ffd0e143886e5" category="inline-link">NetApp 文档：产品库 A-Z</block>
  <block id="43514e6470f58d320d183721fd17b61f" category="paragraph"><block ref="43514e6470f58d320d183721fd17b61f" category="inline-link-rx"></block></block>
  <block id="abf5633c4666f2c2f9ee92883952b686" category="summary">Trademark information</block>
  <block id="f2b73a859def9118b63acddd17a974ed" category="paragraph">NetApp ， NetApp 标识， Go further ， faster ， AltaVault ， ASUP ， AutoSupport ， Campaign Express ， Cloud ONTAP ，集群模式 Data ONTAP ， 客户健康， Data ONTAP ， DataMotion ， Fitness ， Flash Accel ， Flash Cache ， Flash Pool ， FlashRay ， FlexArray ， FlexCache ， FlexClone ， FlexPod ， FlexScale ， FlexShare ， FlexVol ， FPolicy ， GetSuccessful ， LockVault ， Manage ONTAP ， Mars ， MetroCluster ， MultiStore ， NetApp Insight ， OnCommand ， ONTAP ， ONTAPI ， RAID DP ， RAID-TEC ， SANtricity ， SecureShare ， 精简性，模拟 ONTAP ， Snap Creator ， SnapCenter ， SnapCopy ， SnapDrive ， SnapIntegrator ， SnapLock ， SnapManager ， SnapMirror ， SnapMover ， SnapProtect ， SnapRestore ， Snapshot ， SnapValidator ， SnapVault ， StorageGRID ， Tech OnTap ， Unbound Cloud 和 WAFL 以及其他名称是 NetApp ， Inc. 在美国和 / 或其他国家或地区的商标或注册商标。所有其他品牌或产品均为其各自所有者的商标或注册商标，应予同样对待。有关最新的 NetApp 商标列表，请参见网站<block ref="84ce43e6f8b301b25970e0689cba730e" category="inline-link-rx"></block>。</block>
  <block id="2368c9c71ea5da3ef261e4117f8cd49c" category="summary">您必须在存储库数据库实例中配置 SnapManager 存储库。存储库数据库用于存储由 SnapManager 管理的数据库的元数据。</block>
  <block id="42ba3e1cd4d1150966422d6714a92a80" category="doc">配置 SnapManager 存储库</block>
  <block id="8cda971e4b70b3b81984d911043b97c7" category="list-text">您必须已创建存储库数据库实例。</block>
  <block id="70b9bd88e128396359c7f8561c892858" category="list-text">您必须已为存储库数据库实例创建具有所需权限的 Oracle 用户。</block>
  <block id="11a868dd64f80cce860d142aa07bb396" category="list-text">您必须已在 tnsnames.ora 文件中包含存储库数据库实例详细信息。</block>
  <block id="b937f71d3620745c8fadc8de0b0869be" category="paragraph">您可以从 SnapManager 用户界面（ UI ）或命令行界面（ CLI ）配置 SnapManager 存储库。以下步骤显示了如何使用 SnapManager UI 创建存储库。如果愿意，您也可以使用命令行界面。</block>
  <block id="3e1785d1cc317ee98c63c39a15bb2653" category="paragraph">有关如何使用命令行界面创建存储库的信息，请参见 _Oracle SnapManager for UNIX_ 管理指南。</block>
  <block id="866a9440feae9e059f42205252e68070" category="list-text">在 SnapManager UI 的左窗格中，右键单击 * 存储库 * 。</block>
  <block id="175472a6da71bffe517f2ba3a8c8d1b6" category="list-text">选择 * 创建新存储库 * ，然后单击 * 下一步 * 。</block>
  <block id="4e9c228bab0f4b736cf44f8bd6b2356d" category="list-text">在存储库数据库配置信息窗口中，输入以下信息：</block>
  <block id="9b1ea6d299d8e415d53a65fe6c78bafe" category="paragraph">* 用户名 *</block>
  <block id="261257bceae49f24f47a4df95a23c575" category="paragraph">输入为存储库数据库实例创建的用户的名称。</block>
  <block id="519a06883e7db4dbb9a21eeecb16986a" category="paragraph">* 密码 *</block>
  <block id="1a411806f1f54597b7259137d2e753db" category="paragraph">输入密码。</block>
  <block id="1915a5e380671e63d2d73a7ba3fa92ed" category="paragraph">输入创建存储库数据库实例的主机的 IP 地址。</block>
  <block id="5ddcf17f54788a5bb9148e8671562c06" category="paragraph">* 端口 *</block>
  <block id="d045575c4b9b8581eee323c368f11206" category="paragraph">输入用于连接到存储库数据库实例的端口。默认端口为 1521 。</block>
  <block id="66ab57a984df9c0e37fabbb39a96eeb2" category="paragraph">* 服务名称 *</block>
  <block id="d824a7c142e2d65afc0549634b408e39" category="paragraph">输入 SnapManager 用于连接到存储库数据库实例的名称。根据 tnsnames.ora 文件中包含的详细信息，此名称可能是短服务名称或完全限定服务名称。</block>
  <block id="33b2938f5b7deca89990fd9ebe7b4c61" category="list-text">在 Perform Repository Add Operation 窗口中，查看配置摘要并单击 * 添加 * 。</block>
  <block id="45a732811b40c3b08ec61c0b7fd34e18" category="paragraph">如果操作失败，请单击 * 操作详细信息 * 选项卡以查看导致操作失败的原因。错误详细信息也会记录在位于 /var/log/SMO 的操作日志中。</block>
  <block id="daf8ee2df4900df818dcf8dfe7043c07" category="paragraph">存储库将列在左窗格中的 * 存储库 * 树下。如果未看到存储库，请右键单击 * 存储库 * ，然后单击 * 刷新 * 。</block>
  <block id="02886a54b5fd5c3c724361f9f96bfb15" category="summary">您可以计划备份操作，以便定期自动启动备份。使用 SnapManager ，您可以按每小时，每天，每周，每月或一次性计划备份。</block>
  <block id="c314705aac3fe02eb6524abe3158db5c" category="paragraph">您可以为一个数据库分配多个备份计划。但是，在为同一数据库计划多个备份时，必须确保不会同时计划备份。</block>
  <block id="1f5272ed59aff1e75c97017ac344c169" category="paragraph">以下步骤显示了如何使用 SnapManager 用户界面（ UI ）为数据库创建备份计划。如果您愿意，也可以使用命令行界面（ CLI ）。有关如何使用命令行界面计划备份的信息，请参见 _Oracle SnapManager for UNIX_ 管理指南。</block>
  <block id="12ede1201f8e3c7364b3a1602b5f999f" category="list-text">从存储库树中，右键单击要为其创建备份计划的数据库所在的配置文件，然后选择 * 计划备份 * 。</block>
  <block id="416a17d01d8c58bc319819decc0ecf0f" category="paragraph">在 SnapManager 3.4 中，您可以修改 SnapManager 自动创建的备份标签。您可以编辑 override.default.backup.pattern 和 new.default.backup.patternconfiguration 变量以创建自己的默认备份标签模式。</block>
  <block id="512b7f44440fdb3232dbd3c5130fc9f7" category="list-text">在 * 计划名称 * 字段中，输入计划的自定义名称。</block>
  <block id="2a48285c53caf9aef9edd5f14f5970ca" category="paragraph">名称中不得包含空格。</block>
  <block id="8350696d10f2224f2bf03dcf772d0c23" category="list-text">在配置备份计划页面上，执行以下操作：</block>
  <block id="51c6a10800cdc9b2d453de792a01e07e" category="list-text">从 * 执行此操作 * 下拉列表中，选择备份计划的频率。</block>
  <block id="fff2a5fb669c7f7a47ff75bf7ae5ba5d" category="list-text">在 * 开始日期 * 字段中，指定要启动备份计划的日期。</block>
  <block id="cbe21f93011afb6cede9b0b93ecb0b73" category="list-text">在 * 开始时间 * 字段中，指定要启动备份计划的时间。</block>
  <block id="7204305f3fa637db8d9d78b2177a3529" category="list-text">指定创建备份的间隔。</block>
  <block id="d050e60bf8b415b26c7a244d26f857f0" category="paragraph">例如，如果选择频率为每小时，并将间隔指定为 2 ，则备份将每 2 小时计划一次。</block>
  <block id="a5f773eabfac711a05356b08cfcccd6d" category="list-text">在执行备份计划操作页面上，验证信息并单击 * 计划 * 。</block>
  <block id="a3100bf3334206028c894a5568ddcf09" category="summary">介绍新增功能，升级说明，已修复的问题，已知限制和已知问题。</block>
  <block id="1aa689e0a57ae4a06b8a291ccbe6de9b" category="doc">《 SnapManager 3.4.2 for Oracle 发行说明》</block>
  <block id="1a4499c4ad6e1dcbb0b39de2e4bea300" category="paragraph">。 <block ref="097ae8b25b2b51e3606b00b739f5578d" category="inline-link-macro-rx"></block> 描述新功能，升级说明，已修复的问题，已知限制和已知问题。</block>
  <block id="dbd469acdcbd52648cb242bcfda6add3" category="paragraph">您需要登录到 NetApp 支持站点才能访问发行说明。</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="de6edae22bc37b97b38a15c7f8af62e2" category="paragraph"><block ref="de6edae22bc37b97b38a15c7f8af62e2" category="inline-link-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 徽标和 NetApp 商标页面上列出的标记是 NetApp 、 Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="a93bc0a57623c2facaa010825c808507" category="paragraph"><block ref="a93bc0a57623c2facaa010825c808507" category="inline-link-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">有关 NetApp 拥有的专利的最新列表，请访问：</block>
  <block id="547ea2e305891e64d8e744949b0aca2c" category="paragraph"><block ref="547ea2e305891e64d8e744949b0aca2c" category="inline-link-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="50921fca0d376fca62102a5e608994e2" category="paragraph"><block ref="50921fca0d376fca62102a5e608994e2" category="inline-link-rx"></block></block>
  <block id="24efa7ee4511563b16144f39706d594f" category="section-title">通知</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">通知文件提供有关 NetApp 软件中使用的第三方版权和许可证的信息。</block>
  <block id="8a54f568a62c5e9066720e17e405d5b4" category="inline-link-macro">SnapManager for Oracle 注意事项</block>
  <block id="1200db7a9269a501f22d120dd0e4cc2f" category="paragraph"><block ref="1200db7a9269a501f22d120dd0e4cc2f" category="inline-link-macro-rx"></block></block>
  <block id="fa7137ed611f49af8b061458df4a7bd0" category="doc">适用于 Oracle 的 SnapManager 3.4.2</block>
  <block id="48f298d744d41f1f062694a51fa7f050" category="paragraph">欢迎使用 SnapManager for Oracle 信息库。您可以在此处找到适用于 Oracle 的 SnapManager 3.4.2 的信息，其中包括如何为集群模式 Data ONTAP 和 7- 模式 Data ONTAP 设置，管理和配置软件。</block>
  <block id="38f2cb0900e0d85c71892576c87184d9" category="summary">SnapManager 可以使用标准 Oracle 备份验证操作来确认备份的完整性。</block>
  <block id="a16717b4b0e55cb37c714f3576e199b9" category="doc">验证备份状态</block>
  <block id="b21167af88e806eb9f0d4a17d7a04239" category="paragraph">数据库管理员（ Database Administrator ， DBA ）可以在备份操作期间或在其他时间执行验证。DBA 可以将验证操作设置为在主机服务器上的负载较小的非高峰时间或计划的维护时段执行。</block>
  <block id="920de1abe2faa0df5c8f3695d34aa68a" category="summary">您可以运行 profile update 命令来更新现有配置文件的信息。</block>
  <block id="c5f32bac765de67905007e836a40144a" category="doc">smo profile update 命令</block>
  <block id="92e9d6227d5534e7afc27a11179c808e" category="section-title">语法</block>
  <block id="3225a10b07f1580f10dee4abc3779e6c" category="section-title">Parameters</block>
  <block id="15adce5989f92d8293489c8325abae79" category="list-text">* 配置文件配置文件 *</block>
  <block id="9c87c31bfa2b562b235d4c2c2bea18ec" category="paragraph">指定配置文件的名称。此名称最长为 30 个字符，并且在主机中必须是唯一的。</block>
  <block id="51dc2d067bf0920aeb0bd0ac58e5c86d" category="list-text">-profile-password profile_password*</block>
  <block id="d0678ccdf142d4e0f4949fb51ef25b7a" category="paragraph">指定配置文件的密码。</block>
  <block id="56699bfc122342540c3679a9b3577be2" category="list-text">-new-profile new_profile_name*</block>
  <block id="16a84f56f92f8311acac5a779a4a061d" category="paragraph">指定可为配置文件提供的新名称。</block>
  <block id="49fa15239f5d3096da434b9072c26a12" category="list-text">* —数据库 *</block>
  <block id="96285491a34a0441d0b51d2ca334a6bb" category="paragraph">指定配置文件所描述的数据库的详细信息。这是要备份和还原的数据库，依此类推。</block>
  <block id="e2e5a25ef18c6206c33bae8a8afe417e" category="list-text">* — dbname db_dbname*</block>
  <block id="232467327e437827b30226371409f491" category="paragraph">指定配置文件所描述的数据库的名称。您可以使用全局名称或系统标识符。</block>
  <block id="464a359b3ee14b4914cc430473569643" category="list-text">* —主机 db_host*</block>
  <block id="23b77295304689bff92fd6c5cb40b19b" category="paragraph">指定运行数据库的主机计算机的名称或 IP 地址。</block>
  <block id="3e2e325afc351c038e49a603734b52c8" category="list-text">* — SID db_sid*</block>
  <block id="a4d9744106b1d29ad6a3eb18bc17bc3e" category="paragraph">指定配置文件所描述的数据库的系统标识符。默认情况下， SnapManager 使用数据库名称作为系统标识符。如果系统标识符与数据库名称不同，则必须使用 -SID 选项指定它。</block>
  <block id="23afd8e1673fbcb7b77c92980b448a0c" category="list-text">* —登录 *</block>
  <block id="81521844aa418a1efe2a2b78b1759c4b" category="paragraph">指定存储库登录详细信息。</block>
  <block id="675dd617f9519ec7f0310064de678919" category="list-text">* 用户名 repo_username*</block>
  <block id="59d1ec2840a9cbba53b18257c6adc2ef" category="paragraph">指定访问存储库数据库所需的用户名。</block>
  <block id="587c1ca68a69c3eea7d867194b15835b" category="list-text">* 端口 repo_port*</block>
  <block id="a1ba454202deaf6b66ce0f35999dbbb8" category="paragraph">指定访问存储库数据库所需的 TCP 端口号。</block>
  <block id="ba6fc943a580c96f6a89a8e5abaaa5e1" category="paragraph">指定配置文件所描述的数据库的详细信息。这是要备份，还原或克隆的数据库。</block>
  <block id="d59b8af0389f692f9247b00b221ca410" category="paragraph">指定数据库登录详细信息。</block>
  <block id="067eff884407bf1652c2c30e965de286" category="list-text">* 用户名 db_username*</block>
  <block id="0afe77f1dafd2993b8152c77aa71e134" category="paragraph">指定访问配置文件所述数据库所需的用户名。</block>
  <block id="f01a48cc54b2a5764a68e065d025a7d0" category="list-text">* 密码 db_password*</block>
  <block id="42a7244d679c4791df0a2d777bea7124" category="paragraph">指定访问配置文件所述数据库所需的密码。</block>
  <block id="10a983e9217700392a5bc74ed37871c8" category="list-text">* 端口 db_port*</block>
  <block id="e4743525a01917996d0158c68e413401" category="paragraph">指定访问配置文件所述数据库所需的 TCP 端口号。</block>
  <block id="615bcaba9ed32b493641113556a8a747" category="list-text">* — RMAN*</block>
  <block id="84a912b79ff521afeaa965f3d1bb0f21" category="paragraph">指定 SnapManager 使用 Oracle Recovery Manager （ RMAN ）对备份进行目录编制时使用的详细信息。</block>
  <block id="586534dc13cd98ed725ec4d4281306c6" category="list-text">* —控制文件 *</block>
  <block id="df1cab3289d2f2e48ef0aac0b360eb01" category="paragraph">指定目标数据库控制文件，而不是目录作为 RMAN 存储库。</block>
  <block id="efb4bb38e27ad2d4e4744b17a9fd3d11" category="paragraph">指定 RMAN 登录详细信息。</block>
  <block id="55aa4d9c8bd798d281c1c586a6471ceb" category="list-text">* 密码 RMAN_password*</block>
  <block id="f40fc10379cf9973b5de95ac8e531325" category="paragraph">指定用于登录到 RMAN 目录的密码。</block>
  <block id="eff94054166a2c4c6806e76bb7bec5bd" category="list-text">* 用户名 RMAN_USERS*</block>
  <block id="e202913fb5b8da442a5cdb9cefe5d060" category="paragraph">指定用于登录到 RMAN 目录的用户名。</block>
  <block id="a2f8e597c0ae6b40220c94d10a2364ed" category="list-text">* — tnsname tnsname*</block>
  <block id="c34bb9d4f69715de71f485239eebf758" category="paragraph">指定 tnsnamname 连接名称（在 tsname.ora 文件中定义）。</block>
  <block id="687785cc2bdba555d16d728ba36fd89c" category="list-text">* — remove-RMAN*</block>
  <block id="ea9ffc0d4c533ffc016704d461ae5c42" category="paragraph">指定删除配置文件上的 RMAN 。</block>
  <block id="edab79a426cf98d480d79c0083554dfc" category="list-text">* —保留时间为：每小时数（ -countn] ）（ -duration m]] （ -daily ）（ -count n] （ -duration m]] ）（ -weekly （ -count n） （ -duration m]] ）（ -monthly （ -count n） （ -duration m） ）） *</block>
  <block id="c64a6d54ad76a45a2e75df27e431249d" category="paragraph">指定备份的保留类（每小时，每天，每周，每月）。</block>
  <block id="9edb135b0142f51b77317139278b1637" category="paragraph">对于每个保留类，可以指定保留计数或保留期限，也可以同时指定这两者。持续时间以类的单位为单位（例如，小时表示每小时，天数表示每天）。例如，如果用户为每日备份指定的保留期限仅为 7 ，则 SnapManager 不会限制配置文件的每日备份数（因为保留数量为 0 ），但 SnapManager 会自动删除 7 天前创建的每日备份。</block>
  <block id="e73ad984323fde4dc08267b87d983908" category="list-text">* —注释注释 *</block>
  <block id="f483711436ed767b08738425e340ab50" category="paragraph">指定配置文件的注释。</block>
  <block id="c982d00f3e94ac7055f210e7088e08cb" category="list-text">* — snapname-pattern 模式 *</block>
  <block id="400f10a56f5d10cf0bc9532a9e161bf4" category="paragraph">指定 Snapshot 副本的命名模式。您还可以在所有 Snapshot 副本名称中包括自定义文本，例如，用于高可用性操作的 HAOPS 。您可以在创建配置文件时或创建配置文件后更改 Snapshot 副本命名模式。更新后的模式仅适用于尚未发生的 Snapshot 副本。已存在的 Snapshot 副本会保留先前的 Snapname 模式。您可以在模式文本中使用多个变量。</block>
  <block id="ab133a97d404ed18afa5187403208808" category="list-text">* —摘要通知 *</block>
  <block id="d1b8fc452f595c4af9e19bd129121575" category="paragraph">指定已为现有配置文件启用摘要电子邮件通知。</block>
  <block id="07b2b8899683a3676c3068078563b6d0" category="list-text">* — notification [-success — email e-mail_address1 ， e-mail address2 -Subject Subject_Pattern]*</block>
  <block id="c18e523385a77ce156eb25786545c09e" category="paragraph">为现有配置文件启用电子邮件通知，以便在 SnapManager 操作成功时收件人可以收到电子邮件。您必须输入一个或多个电子邮件地址以发送电子邮件警报，并输入现有配置文件的电子邮件主题模式。</block>
  <block id="2d5eee38e8d00fb0c39adb08b7b990ab" category="paragraph">您可以在更新配置文件时更改主题文本，也可以包括自定义主题文本。更新后的主题仅适用于未发送的电子邮件。您可以对电子邮件主题使用多个变量。</block>
  <block id="89ff9b9e33ee6f6befb8420aafd54404" category="list-text">* — notification [-failure -email e-mail_address1 ， e-mail2 -Subject Subject_Pattern]*</block>
  <block id="e5beb3c55463b20442e7afe38dd9f6e0" category="paragraph">为现有配置文件启用电子邮件通知，以便在 SnapManager 操作失败时收件人可以收到电子邮件。您必须输入一个或多个电子邮件地址以发送电子邮件警报，并输入现有配置文件的电子邮件主题模式。</block>
  <block id="79dca9f1b1f27817a7629fe16454b313" category="list-text">*-separate archivelog-backups*</block>
  <block id="3fa87bbf20fa3ec294f1406ed4efd6ee" category="paragraph">将归档日志备份与数据文件备份分隔开。这是一个可选参数，您可以在创建配置文件时提供。使用此选项分隔备份后，您可以创建仅数据文件备份或仅归档日志备份。</block>
  <block id="aa96300ce58e9a113ddbfe8f6078bc29" category="list-text">-retain-archivelog-backups -hours | -daysdays | -weeksweeksweeks| -monthsmonths*</block>
  <block id="5314fe4e2a847a6a0510ad4f6948026e" category="paragraph">指定根据归档日志保留期限（每小时，每天，每周，每月）保留归档日志备份。</block>
  <block id="e4a905dc5447c745c9135293d5ed4203" category="list-text">*-include-with 联机备份 | -no-include-with -online backup*</block>
  <block id="10c550cc46f5491ec67888f2ac1310bb" category="paragraph">指定归档日志备份与联机数据库备份一起包含。</block>
  <block id="27afc6f99268dc5cc48e4a956a921cad" category="paragraph">指定归档日志备份不会与联机数据库备份一起包含。</block>
  <block id="03cf73b2dd16c157e48070d35291e7c8" category="list-text">* —转储 *</block>
  <block id="88a650a225916424ada3b7287105256e" category="paragraph">指定在成功执行配置文件创建操作后收集转储文件。</block>
  <block id="4eff452d05014d06b8c9250454820e3f" category="list-text">* —静默 *</block>
  <block id="c0b40b0d7e4375bc16ed6997666e355d" category="paragraph">在控制台中仅显示错误消息。默认情况下会显示错误和警告消息。</block>
  <block id="ced0e8bfe0501bdcc554b92b477a6559" category="list-text">* —详细 *</block>
  <block id="681c482be8fe05d97ddd78766a4e7096" category="paragraph">在控制台中显示错误，警告和信息性消息。</block>
  <block id="0a52730597fb4ffa01fc117d9e71e3a9" category="section-title">示例</block>
  <block id="78a9b165b53b738053319222de7ce8d1" category="paragraph">以下示例将更改配置文件所述数据库的登录信息，并为此配置文件配置电子邮件通知：</block>
  <block id="aabb60c3497780ab539e8513af6c2e65" category="inline-xref-macro">更改配置文件密码</block>
  <block id="72d6b61d02e5a152815e76aac882b4b7" category="paragraph"><block ref="72d6b61d02e5a152815e76aac882b4b7" category="inline-xref-macro-rx"></block></block>
  <block id="1ab7e5bd2535ca1738ad2bc748aec097" category="inline-xref-macro">SnapManager 如何在本地存储上保留备份</block>
  <block id="e47608cc96b14941d8559668bb4b1692" category="paragraph"><block ref="e47608cc96b14941d8559668bb4b1692" category="inline-xref-macro-rx"></block></block>
  <block id="c55693e240fa5d747ce32d821a50fc63" category="summary">您可以使用 SnapManager for Oracle 对数据库执行不同的任务并高效管理数据。</block>
  <block id="37d4548d639dd4d5b79fde56d311aa56" category="doc">使用 SnapManager 的优势</block>
  <block id="1349cd85f890cd198bac6cbe2609b8a5" category="paragraph">SnapManager for Oracle 可与存储系统配合使用，并可用于执行以下任务：</block>
  <block id="a0a2c1577058fabb44ca52c3b818719b" category="list-text">为主存储或二级存储创建节省空间的备份并计划备份。</block>
  <block id="a9fe430a5144c84c16000800b83d3662" category="paragraph">您可以创建完整和部分数据库备份并应用保留期限策略。 SnapManager （ 3.2 或更高版本）使您只能创建数据文件和归档日志的备份。</block>
  <block id="916f90613fe6a3a2b4695ddc65d44fd1" category="list-text">通过 SnapManager （ 3.2 或更高版本），您可以在备份和还原操作前后执行预处理或后处理。</block>
  <block id="50823bb04f737c1abc8667043a435c78" category="list-text">使用 SnapManager （ 3.2 或更高版本），您可以使用后处理脚本保护备份。</block>
  <block id="8f984efc9bf5bf94c455848ebef8d4ce" category="list-text">使用基于文件的还原操作还原完整或部分数据库。</block>
  <block id="6d3a0b55eb44d627c245861d1e2a9b60" category="list-text">自动还原和恢复数据库备份。</block>
  <block id="99de1964d4883c37ae281db1d573b5f6" category="paragraph">SnapManager （ 3.2 或更高版本）可自动还原和恢复数据库备份。SnapManager 会通过发现，挂载和应用备份中的归档日志文件来自动恢复还原的数据库。</block>
  <block id="defe7561a7ab15b4152f73bf22f13246" category="list-text">仅为归档日志创建备份时，从归档日志目标中对归档日志文件进行修剪。</block>
  <block id="d3ff41f7f104ccdca29e1d983f91be6e" category="list-text">通过仅保留具有唯一归档日志文件的备份，自动保留最少数量的归档日志备份。</block>
  <block id="5513744eac762b596dce168d032d4561" category="list-text">跟踪操作详细信息，并按主机，配置文件，备份或克隆生成报告。</block>
  <block id="31ab9b6a12a61b31ec8034dee001e5cd" category="list-text">验证备份状态。</block>
  <block id="b1bedadcb7f00fb1889c0efc3ab1d0af" category="list-text">维护与配置文件关联的 SnapManager 操作的历史记录。</block>
  <block id="f66ac937ace8e2c37798d093be193581" category="list-text">在主存储上为备份创建节省空间的克隆。</block>
  <block id="ce5807f309ab0b66af778b887ca985a5" category="summary">您可以在启动备份，还原或克隆操作时使用自己的脚本。SnapManager 会在备份创建向导，还原或恢复向导或克隆创建向导中显示一个任务启用页面，您可以在其中选择脚本并为脚本所需的任何参数提供值。</block>
  <block id="bf48a5fd0374019e1d8d17fdf04d3b62" category="doc">使用预处理脚本和后处理脚本执行备份，还原和克隆操作</block>
  <block id="a7bf7119d45fe3741b42c1b5da130917" category="list-text">在正确的 SnapManager 安装位置安装插件脚本。</block>
  <block id="05937ecaa3895aab5c00e551a7ad77a2" category="list-text">使用 smsap plugin check 命令验证是否已正确安装插件。</block>
  <block id="820365ba0b7cfc8f31196fbb5a50e438" category="list-text">确保使用的是 bash shell 。</block>
  <block id="765bc96eb32946a5e91e72182b0f32c3" category="paragraph">在命令行界面（ CLI ）中，列出脚本名称，选择参数并设置值。</block>
  <block id="cb670d0e36c72a567d9fedb2b3cac7c9" category="list-text">要验证是否正在使用 bash shell ，请在命令提示符处输入以下命令： bash</block>
  <block id="76551af4827e73f249c3b97d8322237d" category="paragraph">或者，您也可以在提示符处输入 which — bash 命令，并使用命令输出作为脚本的 start 参数。</block>
  <block id="fe6d4b7d4b4a765fb90dfa9875d18753" category="paragraph">如果未看到错误，则 bash shell 运行正常。</block>
  <block id="cdd0867547badf0cbb89a4fbd65011c4" category="list-text">对于备份操作，输入 -taskspecs 选项并提供任务规范 XML 文件的绝对路径，以便在备份操作之前或之后执行预处理或后处理活动： SMO backup create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain ｛ -hourly | -weekly | -monthly | -unlimited ｝ ] ｛ -verify] | ｛ -data 〔 -filesfiles 【文件文件文件〕〕 _ 表空间 -tablesogs ｛ -tablespacesaces ） ]] -backup-destpath1 [ ， [path2]]] （ -exclude-destpath1 [ ， path2]]] （ -prunelog ｛ -all _ -untirescntisnSCN _ -before ｛ -dateyyyy-mm-dd HH ： mm ： ss _ -months | -days | -weeks | -hours ｝ -pruntilscnSCNN _ vesn_unesnssn.-edbackups _</block>
  <block id="87b424ddac32c42fc91ca86d3533e5b2" category="paragraph">如果备份插件操作失败，则仅显示插件名称和返回代码。插件脚本必须包含日志消息，并将这些消息重定向到用户定义的日志文件。</block>
  <block id="af8f8fd5641637e31ea9cc17de825ffe" category="list-text">对于备份还原操作，请输入 -taskSpec 选项并提供任务规范 XML 文件的绝对路径，以便在还原操作之前或之后执行预处理或后处理活动： SMO 备份还原 -profileprofileprofile_name ｛ -label-label &gt; | -id&lt;id&gt; ｝ ｛ -files&lt;files&gt;&gt;&lt;tablespaces&gt; | -complete | -controlfiles ｝ ｛ -recover ｛ -alllogs | -nologs | -until &lt;until &gt; ｝ ] 【 -restorspecifi&lt;restores&gt;】 【 -quiet 命令返回命令】（ &lt;taskforce&gt; 命令）</block>
  <block id="651abddff24b85096978d7d816c62923" category="paragraph">如果还原插件操作失败，则仅显示插件名称和返回代码。插件脚本必须包含日志消息，并将这些消息重定向到用户定义的日志文件。</block>
  <block id="16e5b38acefc1c065e9bb5ceef437a20" category="list-text">对于克隆创建操作，输入 -taskspecs 选项并提供任务规范 XML 文件的绝对路径，以便在克隆操作之前或之后执行预处理或后处理活动： SMO clone create -profileprofileprofile_name ｛ -backup-labelbackup_name _ -backup-id&lt;backup-id&gt;| -current ｝ -newsidnew_sid-clonspecfull_path_to_clonspecfile [-reserve&lt;yes ， no ， herity&gt;] （ -host&lt;host&gt;] ）【 -label&lt;label&gt; 】（ -label &lt;comit&gt;&gt; ）</block>
  <block id="8d9563772b94bf4d99332281443fb2b0" category="paragraph">如果克隆插件操作失败，则仅显示插件名称和返回代码。插件脚本必须包含日志消息，并将这些消息重定向到用户定义的日志文件。</block>
  <block id="ca6c0510001fcc328f67b0597643a2f1" category="section-title">使用任务规范 XML 文件创建备份的示例</block>
  <block id="501c95c992915a7ff383ae69e4d2b091" category="summary">SnapManager for Oracle 是一款独立产品，它集成了其他 NetApp 产品的功能，可实现只需少量空间的快速备份。</block>
  <block id="bf4aa251e44ec11b2afd49c9cecea852" category="doc">与其他 NetApp 应用程序和技术集成</block>
  <block id="aa0c2105478650eee73d0d56f2698009" category="paragraph">SnapManager 可与以下 NetApp 应用程序和技术集成：</block>
  <block id="71fd5e9589c0a9d24161db43acb1c033" category="cell">应用程序和技术</block>
  <block id="0413ef3305e44f2d6ba091a328985666" category="paragraph">SnapDrive</block>
  <block id="ef81dd5aa1893709b97254a9c38d1d9d" category="paragraph">SnapManager 使用 SnapDrive 创建存储的 Snapshot 副本。Snapshot 副本可确保备份比磁盘到磁盘备份节省空间并加快创建速度。</block>
  <block id="1c76e4a456e3c95466a891080640ddf5" category="paragraph">FlexClone （ Data ONTAP 的一项许可功能）</block>
  <block id="8117392c9f6499387fcc76fe5e4c91f6" category="paragraph">SnapManager 使用 FlexClone 功能为备份创建节省空间的快速克隆。</block>
  <block id="5ceb1e06e99eb3cb8f78938a5a37beff" category="paragraph">Snapshot （ Data ONTAP 的一项功能）</block>
  <block id="57fb102e62c5aa70c6191cf9c14a1508" category="paragraph">Snapshot 技术可为数据库创建时间点副本。</block>
  <block id="e80742d185dcda071365c82e9b0301b1" category="paragraph">SnapRestore （ Data ONTAP 的一项许可功能）</block>
  <block id="1955ea826bb597625e9f44de6e8f4a1d" category="paragraph">SnapManager 可使用 SnapRestore 缩短恢复数据库的平均时间。SnapRestore 可以将单个文件恢复到一个数 TB 的卷，以便快速恢复操作。</block>
  <block id="4d77e17945f6df5a6b2b044c62b81faf" category="paragraph">SnapVault （ Data ONTAP 的一项许可功能）</block>
  <block id="d2d851412ef968a34fdea14130454c3b" category="paragraph">SnapVault 利用基于磁盘的备份实现可靠的低开销数据库备份和恢复。</block>
  <block id="42ea13a55668977729c527100094b971" category="paragraph">SnapMirror （ Data ONTAP 的一项许可功能）</block>
  <block id="55ece0203294ec820711ec5f6b732053" category="paragraph">SnapMirror 以简单，可靠且经济高效的方式在全局网络中高速复制数据库数据。</block>
  <block id="b8409fec08dc34da17fa0c062d201201" category="summary">通过 SnapManager ，您可以为存储库数据库下的多个配置文件配置摘要电子邮件通知。</block>
  <block id="095dfbd01c4c6200cfb80b59838394ef" category="doc">为多个配置文件配置摘要电子邮件通知</block>
  <block id="ffce9889ebc6fcca670f735c21fb468b" category="paragraph">您可以将 SnapManager 服务器主机设置为通知主机，从中向收件人发送摘要通知电子邮件。如果更改了 SnapManager 服务器主机名或 IP 地址，则也可以更新通知主机。</block>
  <block id="533cf9b98ffd6fd41e8859dc340514f3" category="paragraph">您可以选择需要电子邮件通知的任一计划时间：</block>
  <block id="86d898b21dce5ac173887e46f096c062" category="list-text">每小时：每小时接收一次电子邮件通知</block>
  <block id="70db242f52b48991da8a5e9eb6708c01" category="list-text">daily ：每天接收电子邮件通知</block>
  <block id="90a7d6e31131ec648a50f83dd6ef6700" category="list-text">每周：每周接收电子邮件通知</block>
  <block id="6cb90cb20fe29866fa299cfdc5df0363" category="list-text">每月：每月接收电子邮件通知</block>
  <block id="77bb0e0e77319218cbb27fb1d50d554f" category="paragraph">要接收使用这些配置文件执行操作的通知，您需要输入一个电子邮件地址或一个逗号分隔的电子邮件地址列表。输入多个电子邮件地址时，必须确保逗号和下一个电子邮件地址之间没有空格。</block>
  <block id="fb28ad7bc08a68377ea1adebf6754128" category="admonition">您必须确保在双引号内输入一组多个电子邮件地址。</block>
  <block id="f64e99e37efee1bc4710ee0ff6501544" category="paragraph">使用 SnapManager ，您可以使用以下变量添加自定义电子邮件主题：</block>
  <block id="014f3652ad6d11df4b3d3bd8acff3b0f" category="list-text">用于数据库操作的配置文件名称。</block>
  <block id="9e362f7bde93fb1a52dea86534d5be9c" category="list-text">数据库名称</block>
  <block id="24ed559c76db85b9705feba045aacc44" category="list-text">数据库的 SID</block>
  <block id="b76d07da2796b899992dfd2e7621483f" category="list-text">主机服务器的名称</block>
  <block id="0e56d441141057308eee22ffbef86fe9" category="list-text">数据库操作的开始时间，格式为 yyyymmdd ： hh ： ss</block>
  <block id="5d4851fe0ddd283471eadb4159df78fa" category="list-text">数据库操作的结束时间，格式为 yyyymmdd ： hh ： ss</block>
  <block id="c6a63062a43a40a151a82e801ed5c667" category="list-text">数据库操作状态</block>
  <block id="038757d9d8ba46b77bdba1ea70f7d563" category="paragraph">如果选择不添加自定义主题，则 SnapManager 将显示错误消息： missing value -Subject 。</block>
  <block id="1251cb482d3e7e85018f9c7cbf40fa59" category="list-text">输入以下命令： smo notification update-summary-notification -repositor-portrepo_port-dbnamerepo_service_name-host-login-usernamerepo_username-emailemailemail_address1 ， email_address2-subjectsubject-pattern-frequency ｛ -daily-timedaily_time | -hourly-storage-time_3_name-time_3_file2_3_time_3_time_file2_3..._time_3_time_3_time_3_time_file2_3_time_3_time_time_3_time_file2_time_3_time_3_time_time_file2_time_3_time_3_time_file2_</block>
  <block id="de01eb5e8af8b28258e19e8bc362972b" category="paragraph">此命令的其他选项如下：</block>
  <block id="af0e76a68a5da1e30f1b07b4856f0481" category="paragraph">【 -force】 【 -noprompt】</block>
  <block id="7a7860fd0a04798e90009a886695db38" category="summary">您可以使用外部工具运行 backup mount 命令来挂载备份，以便执行恢复操作。</block>
  <block id="9fbe8ac55938e04314578c8e00801a96" category="doc">smo backup mount 命令</block>
  <block id="02264a0c9235c5e795a4450476ae2b6a" category="list-text">-profile profile_name*</block>
  <block id="cab3b1314cda79ec413138c657253e38" category="paragraph">指定与要挂载的备份关联的配置文件。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="5fcf8afad9e3223d204bbe8d60cb8b70" category="list-text">* — id guid*</block>
  <block id="c4579832044bf2da6b6b2950563b1bd2" category="paragraph">使用指定 GUID 挂载备份。GUID 由 SnapManager 在创建备份时生成。您可以使用 smo backup list 命令显示每个备份的 GUID 。</block>
  <block id="31ca71106edad31abcfe6082f947d6ba" category="list-text">* —标签标签 *</block>
  <block id="7fcae4f4b7b54582e680d8019535859c" category="paragraph">挂载具有指定标签的备份。</block>
  <block id="67ae43d4486b5b6b17f062a72c25fe0f" category="list-text">* 数据 *</block>
  <block id="975736c54fd19dde035ee8c5447f860c" category="paragraph">指定数据文件。</block>
  <block id="40eeac489b54881a1de56ec2dfe9675e" category="list-text">* — archivelogs*</block>
  <block id="50bccc9af14763b8cad9646017dd82dd" category="paragraph">指定归档日志文件。</block>
  <block id="db22acd73ab2014487321d7a1a941fe7" category="list-text">* —主机主机 *</block>
  <block id="af1a4a8ecfa6c889dcd41fecc544accb" category="paragraph">指定要挂载备份的主机。</block>
  <block id="5f86c201eb4f4bf17dc7340243b2be96" category="paragraph">在挂载操作成功或失败后收集转储文件。</block>
  <block id="76a6eec2d2cb232f5de3aa4991c663fc" category="paragraph">在控制台中仅显示错误消息。默认设置为显示错误和警告消息。</block>
  <block id="5b39d3ee099bd51d579d3705ad084b9f" category="admonition">只有在使用 Oracle Recovery Manager （ RMAN ）等外部工具时，才必须使用此命令。如果您使用 smo backup restore 命令还原备份，则 SnapManager 会自动处理备份挂载。此命令将显示一个列表，其中显示了已挂载 Snapshot 副本的路径。只有在指定 -verbose 选项时，才会显示此列表。</block>
  <block id="e8dbc32e49575ca8b376852b67d24f9b" category="paragraph">以下示例将挂载备份：</block>
  <block id="a106830d83cee6f69be2af874e31b610" category="inline-xref-macro">挂载备份</block>
  <block id="6bb0e0d016b6e3333bcf6086d4bb0258" category="paragraph"><block ref="6bb0e0d016b6e3333bcf6086d4bb0258" category="inline-xref-macro-rx"></block></block>
  <block id="ff107ab4ae783c34739135b96d100212" category="summary">使用 SnapManager 可以删除 SnapManager 操作的历史记录设置。此操作将清除与一个或多个配置文件关联的所有历史记录信息。</block>
  <block id="abf5efd28c22e58e99f8b66abdaa8a21" category="doc">删除与单个或多个配置文件关联的历史记录设置</block>
  <block id="e02e0215552df92610c1cf38f9b72144" category="list-text">要删除与单个或多个配置文件关联的 SnapManager 操作的历史记录，请输入以下命令： smo history remove -profile ｛ -name ， profile_name [profile_name1 ， profile_name2] | all-repository-login （ -passwordrepo_password ） -usernamerepo_username-reperepo_dbname-host_operation_name-sepo -host_operation_name1</block>
  <block id="ffab955e564e41a31b9c8a890813d85b" category="summary">您可以查看配置文件的计划操作列表。</block>
  <block id="0cdfb0b2d514096d5e23b118c1ac2d88" category="doc">查看已计划操作的列表</block>
  <block id="fdfc19d6bbf2e43f194acf93f843a7b3" category="list-text">要显示有关计划操作的信息，请输入以下命令： smo schedule list -profile profile_name[-quiet | -verbos]</block>
  <block id="5eba51c77a60a912dc40911152b04672" category="summary">此命令将暂停备份计划，直到恢复备份计划为止。</block>
  <block id="01f6030137c7596d24ac754013b247d1" category="doc">smo schedule suspend 命令</block>
  <block id="06dc62ee2c966aa46d146d36878cf1d1" category="paragraph">指定与要暂停备份计划的数据库相关的配置文件的名称。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="2033e19dd2afe85b416457cb3aa18dce" category="list-text">-schedule-name schedule_name*</block>
  <block id="aca579418f34ee2dce2ee4f19d786e2e" category="paragraph">指定创建备份计划时提供的计划名称。</block>
  <block id="5c135aa1f8e4ea6632370be45a404a9a" category="summary">您可以使用 backup verify 命令验证数据库备份中的块是否未损坏。验证操作将为备份中的每个数据文件调用 Oracle Database Verify 实用程序。</block>
  <block id="5d6c77625f574f74f53701725da46987" category="paragraph">使用 SnapManager ，您可以在方便您和系统上的用户的任何时间执行验证操作。创建备份后，您可以立即执行验证。您必须指定包含备份的配置文件以及您创建的备份的标签或 ID 。</block>
  <block id="477e03d00abdec63772fb90d156b6b7b" category="admonition">如果您使用的是 SnapManager 3.0 和 Oracle 数据库 11.1.0.7 ，则在 Windows 环境中备份验证操作将失败。您必须使用 Oracle 数据库 11.2.0.1 或更高版本。</block>
  <block id="e024024d8b0fd1c2910db2b37e8541d1" category="admonition">您可以指定 -dump 以在执行备份验证操作后收集转储文件。</block>
  <block id="360b158439c1fdec67e8dca1b22ed702" category="list-text">输入以下命令： smo backup verify -profile profile_name [-label label | -ididi] [-force] [ -dump] [-quiet | -verbose ]</block>
  <block id="be1a87d7265b8f5dbf9aac933a3c21b3" category="inline-xref-macro">smo backup verify 命令</block>
  <block id="827758bc838d6ece567efea8d99071a0" category="paragraph"><block ref="827758bc838d6ece567efea8d99071a0" category="inline-xref-macro-rx"></block></block>
  <block id="08c559bc637ded296d739c4d234face1" category="summary">您可以在创建备份时从归档日志位置对归档日志文件进行修剪。</block>
  <block id="6a7a4f03de8b87cf0168f449c3dfaecd" category="doc">删除归档日志文件</block>
  <block id="5d2663dd6a3e05969ab801b6be412d91" category="list-text">归档日志文件必须通过当前备份操作进行备份。</block>
  <block id="d96d186ed68b6fc09f177e884ee9f005" category="paragraph">如果指定了修剪以及不包含归档日志文件的其他备份，则不会对归档日志文件进行修剪。</block>
  <block id="61a3b05122f358397ff36931988ba2f3" category="list-text">数据库必须处于已挂载状态。</block>
  <block id="53eef9f054f8f3440ff92bd7417d6d86" category="paragraph">如果数据库未处于挂载状态，请输入 -force 选项以及 backup 命令。</block>
  <block id="d257f8a91a21ea5454cc87de2a99508b" category="paragraph">执行备份操作时，您可以指定以下内容：</block>
  <block id="56520c9b2380777a07836216d021bd6c" category="list-text">修剪范围：</block>
  <block id="82107bb9d565ad4f2b65aa7eda5739f7" category="list-text">删除所有归档日志文件。</block>
  <block id="4a32131bc10641abdd449c399b098932" category="list-text">删除归档日志文件，直到指定系统更改编号（ SCN ）为止。</block>
  <block id="bc339234204d9a230e9f2432dedccc88" category="list-text">删除归档日志文件，直到指定时间为止。</block>
  <block id="b87695e899a652c9eece558613f4283e" category="list-text">在指定时间段之前删除归档日志文件。</block>
  <block id="362bfb6cef87e6c3a2b6565e04fd95ea" category="list-text">必须从中对归档日志文件进行剪切的目标。</block>
  <block id="dd79bd4a2ea4bb7a61b676ef6fbd393e" category="admonition">即使一个目标中的归档日志文件修剪失败， SnapManager 仍会继续从其他目标对归档日志文件进行修剪。</block>
  <block id="f9585353afd93b4a7d19e4136530c834" category="paragraph">在删除归档日志文件之前， SnapManager 会验证以下内容：</block>
  <block id="1dae68431dea72a1a52f01961f314aea" category="list-text">归档日志文件至少会备份一次。</block>
  <block id="d04e238268c8ae11ae0aed474dd6621a" category="list-text">归档日志文件会发送到 Oracle Dataguard 备用数据库（如果有）。</block>
  <block id="b6abd8a61d478bb7bf15f2dd0782e439" category="list-text">归档日志文件由 Oracle 流捕获过程（如果有）捕获。</block>
  <block id="1e81425c877fbb250af7e59ca70ab698" category="paragraph">如果归档日志文件已备份并发运至备用状态，并由捕获过程捕获，则 SnapManager 会一次性删除所有归档日志文件。但是，如果有任何归档日志文件未备份，未发送到备用状态或未被捕获过程捕获，则 SnapManager 将逐个删除归档日志文件。与逐个删除归档日志相比，一次删除归档日志文件的速度更快。</block>
  <block id="77d060389891d285a772574f9e5b4144" category="paragraph">SnapManager 还可以对归档日志文件进行分组，并逐个批删除这些文件。每个批处理最多包含 98 个文件。可以使用 SMO.config 文件中的配置参数 max.archivelog.files.toprune.atatatatime 将此值配置为低于 998 。</block>
  <block id="6aa21f76331a5d42f35c9db37004d0fc" category="paragraph">SnapManager 使用 Oracle 恢复管理器（ RMAN ）命令删除归档日志文件。但是， SnapManager 不会与 RMAN 保留策略和删除策略集成。</block>
  <block id="0c06b573358ac1afc4af8c1c670543f1" category="admonition">如果从归档日志目标位置删除归档日志文件，则对归档日志文件进行删减将失败。</block>
  <block id="29876b701d4f447916c5e30c8fab5db6" category="paragraph">在以下情况下， SnapManager 不支持对归档日志文件进行删减：</block>
  <block id="7a396107772d533ba865151d91954b47" category="list-text">归档日志文件位于闪存恢复区域。</block>
  <block id="1ac4c07fc27d044a9e7f90afa79eff0e" category="list-text">归档日志文件位于备用数据库中。</block>
  <block id="3ade1988322f6e0e8cfff699bea61e2c" category="list-text">归档日志文件由 SnapManager 和 RMAN 管理。</block>
  <block id="d937337430b5ee14ed7d98023d92af8d" category="list-text">输入以下命令： SMO backup create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain ｛ -hourly | -weekly | -monthly | -unlimited ｝ ] ｛ -verify] | ｛ -data 〔 -filesfiles 【文件文件文件〕〕 _ ｛ -tablespaces-tablesogs ｛ -tablespaces ） ]] 【， ｛ path2]]] 【不包括目标路径 1 （，路径 2 ）】】【 -prunelog ｛ -all _ -untirescnilnSCN _ -until-dateyyyy-mm-dd ： HH ： mm ： ss _ -before ｛ -months _ -days _ -weeks _ -hours ｝ ｝ -prune-specprdestune_mm-dump _taskunesune]</block>
  <block id="c1325f6903ebb5ebb2bb519a73ddb1b0" category="cell">那么 ...</block>
  <block id="8422602129b6ef580e7ca429478921dd" category="paragraph">* 调整归档日志文件 *</block>
  <block id="ef0a3e9471b99cc2264fa72ff801d7cd" category="paragraph">指定以下选项：</block>
  <block id="51229a8f868f368b5d2cd716e5783510" category="list-text">-prunelog 指定在创建备份时删除归档日志文件。</block>
  <block id="a80ae67639dc3d8dd0ada20644e0b189" category="list-text">-all 指定删除所有归档日志文件。</block>
  <block id="7dbbed2be998e52b0705d9a1736fbf0c" category="list-text">-untirescn 指定删除归档日志文件，直到指定 SCN 为止。</block>
  <block id="ac436768b9d5ccee70a1f0f61259882b" category="list-text">-until date 指定删除包含指定日期和时间的归档日志。</block>
  <block id="d98141f67aec8714d965024a1e23405f" category="list-text">-｛ -months ｝ 之前</block>
  <block id="4087869cd68f54510d4827e54488a4dc" category="cell">days</block>
  <block id="c0ff1c5906d64507af38b892819ee410" category="cell">周</block>
  <block id="9954e2c9cacdc9aa31387e55caf47cef" category="cell">-hours ｝ 指定在指定时间段之前删除归档日志文件。</block>
  <block id="f96fd4c46d360ecdbeb3fec76b0e77d6" category="paragraph">* 包括要从中对归档日志文件进行删减的目标 *</block>
  <block id="bfa5d5b3f1c866eca5026603d4ab9077" category="summary">此命令会对存储库数据库上的多个配置文件禁用摘要通知。</block>
  <block id="3c5fa5d806bc35aca9427246c22b696d" category="doc">smo notification remove-summary-notification 命令</block>
  <block id="811a091284125eaa723abfc3c624578d" category="list-text">* 存储库 *</block>
  <block id="1b60ce0a9e2d7216eacac08f1a2712e1" category="paragraph">repository 后面的选项用于指定存储库的数据库详细信息。</block>
  <block id="2d1a3363f932141eb123d1b8fc38d004" category="paragraph">指定用于访问存储库的数据库的 TCP 端口号。</block>
  <block id="21f3be97980aab581499c884e5f2fee6" category="list-text">* — dbname repo_service_name*</block>
  <block id="31636bba2c8a05f66f55edf279a4c053" category="paragraph">指定存储库的数据库的名称。使用全局名称或 SID 。</block>
  <block id="f70289846a017f42e30d15f73448a69f" category="list-text">* — host repo_host*</block>
  <block id="2d328dd9d0953bea42a99acc00acbb3d" category="paragraph">指定运行存储库数据库的主机计算机的名称或 IP 地址。</block>
  <block id="7aeb0e0aaacad69133655e3bac960974" category="list-text">* — login repo_username*</block>
  <block id="2c6a08481bb15391377eb88221a2687a" category="paragraph">指定访问存储库的数据库所需的登录名。</block>
  <block id="b91012ad0b2ec6aa1bdc8c1cf5cf5c5f" category="paragraph">在控制台上仅显示错误消息。默认情况下会显示错误和警告消息。</block>
  <block id="6cbf0052f7fe2b425fd1e852c8ad0664" category="paragraph">在控制台上显示错误，警告和信息性消息。</block>
  <block id="ecc2f1dffd774d16e87867bd37f98bba" category="paragraph">以下示例将对存储库数据库上的多个配置文件禁用摘要通知。</block>
  <block id="5916aa6c307ca78505a24ac225b4bad2" category="summary">使用 SnapManager 可以执行基于文件的备份和还原操作。</block>
  <block id="9f2d3e3bb56206eb964ad4eb27f61c29" category="doc">什么是数据库还原</block>
  <block id="4f86b0fa5e2bd5f5bf548359bf08d96b" category="paragraph">下表介绍了还原方法：</block>
  <block id="f6640eb15b1f57519efb78734b22a77f" category="cell">还原过程</block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">详细信息</block>
  <block id="f688038fb891fde59faa7e1246ae2ac1" category="paragraph">基于文件的还原</block>
  <block id="557be9213e122af381ed435f07bf8604" category="paragraph">存储端完整文件系统还原（从主系统或二级系统）： SnapManager 执行完整逻辑单元号（ LUN ）还原。</block>
  <block id="a2a6d50975f7916e945eae73b4f725d9" category="section-title">存储端完整文件系统还原</block>
  <block id="150fdc6ce298ccfe6e8c75e0be2eb5c1" category="paragraph">如果无法执行卷还原，但可以在存储系统上还原整个文件系统，则会执行存储端完整文件系统还原。</block>
  <block id="be48bb1870d837e0b9d9c35c89b6ca99" category="paragraph">执行存储端文件系统还原时，将发生以下情况：</block>
  <block id="6725dadd716bcf16e39466d33b6a6c3e" category="list-text">在 SAN 环境中，文件系统使用的所有 LUN （以及底层卷组（如果有）都会还原到存储系统上。</block>
  <block id="2b542cca5e2a2bc2eddc99903d2cecb8" category="paragraph">执行存储端文件系统还原时，根据存储位置，将发生以下情况：</block>
  <block id="fc2a3dff6e3337acc849124239469ed1" category="list-text">从主存储系统还原 SnapManager 时， LUN （ SAN ）会通过 SFSR 原位还原。</block>
  <block id="184a53bea007c05be13fa0533d6464b5" category="list-text">从二级存储系统还原 SnapManager 时， LUN （ SAN ）会通过网络从二级存储系统复制回主存储系统。</block>
  <block id="7faa9e2651a9f6395ce047cae5f7d201" category="paragraph">由于文件系统已完全还原，因此也会还原不属于备份的文件。如果要还原的文件系统中存在非还原过程中的文件，则需要覆盖。</block>
  <block id="fac497648da64be540beedf3d0cf4a10" category="section-title">主机端文件还原</block>
  <block id="eaea33fcbb510fd491ab9b651bc652e2" category="paragraph">在无法执行存储端文件系统还原和存储端文件还原时，主机端文件副本还原是 SAN 环境中的最后一种解决方法。</block>
  <block id="45aeaf9a5dd2960b979dc04230edba4f" category="paragraph">主机端文件副本还原涉及以下任务：</block>
  <block id="95dafeaba00fc247dc8a338c4f9bb20f" category="list-text">克隆存储</block>
  <block id="c9a3113feb0fdf7700f4fd8191c37ed7" category="list-text">将克隆的存储连接到主机</block>
  <block id="9a3229a2b7ce8ef3ddc5e5965a697b73" category="list-text">将文件从克隆文件系统复制回活动文件系统</block>
  <block id="bf2e8df2067a21e684d312710b5e874d" category="list-text">断开克隆存储与主机的连接</block>
  <block id="346811a8eb6e16fbb30491b11ca2fd0f" category="list-text">删除克隆存储</block>
  <block id="5867d9bdbbcdc16929d1664b6f4bd9ba" category="summary">您可以从任何早期版本升级到最新版本的 SnapManager for Oracle 。您可以同时升级所有 SnapManager 主机，也可以执行滚动升级，以便按主机交错升级主机。</block>
  <block id="a27651e06b2d38ac159ee21d00ddda8d" category="doc">升级 SnapManager</block>
  <block id="96edb4cd98577d12d2b21076297fd6c9" category="summary">此命令将清除所有受保护资源的用户凭据缓存。</block>
  <block id="c288bf94942ad6562aae2b074ce1ebf9" category="doc">smo credential clear 命令</block>
  <block id="662385e6e7c81bc5868ecc810d1b4419" category="section-title">命令示例</block>
  <block id="e6c91e6cc85e75ce9fd8a628046de0a4" category="paragraph">此示例将清除运行命令的用户的所有凭据。</block>
  <block id="cdf8e9e124c1643654d13b3b917cd593" category="inline-xref-macro">清除所有主机，存储库和配置文件的用户凭据</block>
  <block id="baca2b784f2cf63360b27dc87cbb271e" category="paragraph"><block ref="baca2b784f2cf63360b27dc87cbb271e" category="inline-xref-macro-rx"></block></block>
  <block id="035c037844747ccfd9cb0faa682f5f6f" category="summary">您可以升级所有现有 SnapManager 主机以使用最新版本的 SnapManager 。所有主机都会同时升级。但是，这可能会导致所有 SnapManager 主机停机，并在此期间执行计划的操作。</block>
  <block id="7b9c2c77a281d98ec128cde6aecefc42" category="doc">升级 SnapManager 主机</block>
  <block id="a195055ebf136fa3d3a37444c535e1e1" category="list-text">通过执行以下步骤停止 SnapManager 服务器：</block>
  <block id="436cef0656b28e6d0443e6ebf02da111" category="list-text">在 Windows 服务窗口中，选择 * 适用于 Oracle* 的 NetApp SnapManager 。</block>
  <block id="d1d340c2a312c082eadb31d867f93762" category="list-text">在左侧面板中，单击 * 停止 * 。</block>
  <block id="02b974cb9ebf6121616414742015cf9a" category="list-text">双击 SnapManager 安装文件。</block>
  <block id="848aecbbe041c990db5434837f9d1a71" category="cell">操作系统</block>
  <block id="4982e77e037afa55ff8d4a99bde81081" category="cell">然后使用 ...</block>
  <block id="b9fd3c6028f8f4f16337e05e77e566a9" category="paragraph">Windows x86</block>
  <block id="80be4542ab6a81dbc938a23cecad52b4" category="paragraph">netapp.smo.windows-x86-version_number.exe</block>
  <block id="05831968cc37ffe1370be26c65f8317f" category="paragraph">Windows x64</block>
  <block id="51b12ec57c18003c2504a98b2801c051" category="paragraph">netapp.smo.windows-x64-version_number.exe</block>
  <block id="c0e01e4e193f5a9bc71eeae2cc68b36c" category="paragraph">此时将显示以下消息： The publisher could not be verified.确实要运行此软件？</block>
  <block id="a72cc47fad7d1846d19b085d2e77e5ba" category="list-text">单击 * 确定 * 。</block>
  <block id="2664eb29c61b03146a48d60522b4086c" category="paragraph">此时将显示简介窗口。</block>
  <block id="5a378b18f7bf0c4cabc6c655cd2f535e" category="list-text">单击 * 下一步 * 。</block>
  <block id="2b414a9339758533cff6f2bd922e8f97" category="paragraph">此时将显示选择安装文件夹窗口。</block>
  <block id="033e25199baf495bd84606c3ef38c68c" category="list-text">单击 * 下一步 * 接受默认安装位置或选择新位置。</block>
  <block id="a73d0957ade28639be39f7da6e7eecee" category="paragraph">默认位置为 C ： \Program Files\NetApp\SnapManager for Oracle 。</block>
  <block id="bd5b01157978296998b442152394531d" category="list-text">在菜单可用性窗口中，单击 * 下一步 * 。</block>
  <block id="0ac1cd66c07b293df1ae0bf1e1fadf3d" category="list-text">在指定服务属性窗口中，输入 Windows 服务的帐户和密码信息。</block>
  <block id="c04ff9fef6af1f0f500547d9c431928c" category="paragraph">指定帐户必须是以下组的成员：</block>
  <block id="09888530b37ac361138d1867cf1810e7" category="list-text">存储系统的本地管理组</block>
  <block id="0015b05ea1ec0a570a4b69a217f9d4fa" category="list-text">本地管理员的组</block>
  <block id="57d0b8a1a85423eecabcbe465e7c6c01" category="list-text">您可以指定的 ORA_DBA 组：服务必须在重新启动后自动启动，还是服务必须手动启动。</block>
  <block id="2fd688ad3019b09e1f90231f03a73c3c" category="list-text">在预安装摘要窗口中，单击 * 安装 * 。</block>
  <block id="c42b382f2a3a11525db8ee3a8951ae58" category="list-text">在 Install complete 窗口中，单击 * 下一步 * 。</block>
  <block id="eb2151bc5f4b6f546a197c968cebb91f" category="list-text">在重要信息窗口中，单击 * 完成 * 退出安装程序。</block>
  <block id="8e61f910e73e70c655973a73ddeba9fe" category="inline-xref-macro">准备安装适用于 Oracle 的 SnapManager</block>
  <block id="0de997f040101aa522cfe70f5222c7c1" category="paragraph"><block ref="0de997f040101aa522cfe70f5222c7c1" category="inline-xref-macro-rx"></block></block>
  <block id="fba32bb7ee240da86dabbdfb181e85f2" category="inline-xref-macro">预安装任务</block>
  <block id="897dec35eb25c8a29a3e08b1d7643893" category="paragraph"><block ref="897dec35eb25c8a29a3e08b1d7643893" category="inline-xref-macro-rx"></block></block>
  <block id="3f33434d143ccfd7263cccb01962bab8" category="inline-xref-macro">下载适用于 Oracle 的 SnapManager 安装包</block>
  <block id="fd8d88ab30afd65ac2e6da689064e887" category="paragraph"><block ref="fd8d88ab30afd65ac2e6da689064e887" category="inline-xref-macro-rx"></block></block>
  <block id="a789fc23be22c258f22fd0d0efce0e48" category="summary">您可以运行 clone show 命令来显示有关指定配置文件的数据库克隆的信息。</block>
  <block id="c471ab1b6ec2b8ba1b7d803cc12d85b2" category="doc">smo clone show 命令</block>
  <block id="8d6d5c5fc275e588fbfc7949ddd28580" category="paragraph">指定与配置文件关联的克隆的列表。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="bda7239085928983ea89fc53935dd645" category="paragraph">显示有关具有指定 GUID 的克隆的信息。GUID 由 SnapManager 在创建克隆时生成。您可以使用 smo clone show 命令显示每个克隆的 GUID 。</block>
  <block id="9ffcc441691e2578ff0234c57c645032" category="list-text">* — label label-name*</block>
  <block id="91b956eaa4e69b9d69f51ba806c7da40" category="paragraph">显示有关具有指定标签的克隆的信息。</block>
  <block id="c8b3a70ae53522fefca74707416843fd" category="paragraph">以下示例显示了有关克隆的信息：</block>
  <block id="ffc2ea08d040adde18be9561fde449fb" category="paragraph">以下输出显示了有关主存储上备份的克隆的信息：</block>
  <block id="7da66f0e34507db57ea16190bb9c3645" category="inline-xref-macro">查看详细克隆信息</block>
  <block id="2d5889c4806f5742a86559dca3d76886" category="paragraph"><block ref="2d5889c4806f5742a86559dca3d76886" category="inline-xref-macro-rx"></block></block>
  <block id="89b96380bf169f04248730b90d6848bf" category="summary">SnapManager 可在还原操作完成前后提供还原计划。还原计划用于预览，查看和分析不同的还原方法。</block>
  <block id="7da575276603823e4f996f943160ae14" category="doc">什么是还原预览计划</block>
  <block id="4b0666d7ac6e1b1963a0176617e1bd60" category="section-title">还原计划的结构</block>
  <block id="197909f3f87d5d0c0210b639a966d575" category="paragraph">还原计划包括以下两个部分：</block>
  <block id="9eb62be116638475f5a533d1367c33b1" category="list-text">预览 / 查看：本节介绍 SnapManager 将如何还原（或已还原）每个文件。</block>
  <block id="61b555dbbce4ea834f224502aa2e5387" category="list-text">分析：本节介绍还原操作期间未使用某些还原机制的原因。</block>
  <block id="9623b57620fe8b27989007572362d6a2" category="section-title">预览 / 查看部分</block>
  <block id="1aa2b2e974244ae62aa41ea6a02f96e0" category="paragraph">本节显示了每个文件将如何还原或已还原。在执行还原操作之前查看还原计划时，该计划称为预览。当您在还原操作完成后查看它时，它称为查看。</block>
  <block id="c7672128d29317bb6d60d5301e9b2dff" category="paragraph">以下预览示例显示了使用存储端文件系统还原和存储端系统还原方法还原文件。要确定为何不使用相同的还原方法还原所有文件，请参见分析一节。</block>
  <block id="8aebc136c8f0d5b64f87224c2fa58c41" category="paragraph">每个还原方法都有一个小节，其中包含有关可使用该还原方法还原的文件的信息。这些小节将根据存储方法效率的降低级别进行排序。</block>
  <block id="bb1dde79d7f7930420aa8adff797d214" category="paragraph">一个文件可以通过多种还原方法进行还原。如果文件系统使用的底层逻辑单元号（ LUN ）分布在不同的存储系统卷之间，并且某些卷符合卷还原条件，而其他卷则不符合卷还原条件，则会使用多种还原方法。如果使用多种还原方法来还原同一文件，则预览部分将类似于以下内容：</block>
  <block id="09a2575ff4db8523ea1c90a85575ecca" category="section-title">" 分析 " 部分</block>
  <block id="1c1fc0a2eedcf6925e367a3a14191ff1" category="paragraph">" 分析 " 部分介绍了不使用或不使用某些还原机制的原因。您可以使用此信息来确定启用更高效的还原机制所需的资源。</block>
  <block id="b965136519bc4f9f14d27ebe243d5213" category="paragraph">以下示例显示了一个 " 分析 " 部分：</block>
  <block id="47f541d53ef9e7c9691b6a6a619168f2" category="paragraph">在此示例中，您可以通过命令行界面（ CLI ）或在图形用户界面（ GUI ）中选择 * 覆盖 * 来覆盖第一个故障。卷中映射的 LUN 的第二个故障是必填的，不可覆盖。</block>
  <block id="c44f602ce65cdd38ef2cd5f84fd19cbd" category="paragraph">您可以通过执行以下操作来解决检查问题：</block>
  <block id="48166d506ca822ee6489818e98c12f6f" category="list-text">要解决强制检查失败的问题，请更改环境以使检查通过。</block>
  <block id="e9f9b0b0dae7e4c3c69960e96bfc3894" category="list-text">要解决可覆盖检查失败的问题，您可以更改环境或覆盖此检查。</block>
  <block id="e5d936f3218029a06d17a6cb154b037f" category="paragraph">但是，您必须小心，因为覆盖检查可能会导致意外后果。</block>
  <block id="ee99ef184cc26da9b15a3f2b485facd1" category="summary">在安装 SnapManager for Oracle 之前，您必须执行一些其他任务来设置您的环境。您必须执行的任务取决于操作系统， Oracle 组件以及要使用的数据库版本。</block>
  <block id="5f242101a1e71652f4c569f6fb21742f" category="list-text">使用适当的修补程序安装许可的操作系统。</block>
  <block id="4b23319aa04dc297767d0599d5b0c76a" category="list-text">将操作系统和 Oracle 数据库的语言设置为英语。</block>
  <block id="2c04783b80cf1417d1ab6a4a7cc66f82" category="paragraph">例如，要将 Oracle 数据库的语言设置为英语，请分配 NLS_LANG = America_America.WE8MSWIN1252 。有关如何设置语言的详细信息，请参见 _Troubleshooting SnapManager for Oracle_ 一节。</block>
  <block id="7c1cd8f512d097ec316d4e9b84f812c5" category="list-text">如果要将 RMAN 与适用于 Oracle 的 SnapManager 结合使用，请安装 Oracle 恢复管理器（ RMAN ）。</block>
  <block id="b7bf4725d284f103248f8afc13bfa3ca" category="list-text">在所有存储系统上安装 Data ONTAP ，并启用 SnapRestore 许可证以及受支持的协议，例如光纤通道（ FC ）和 Internet 小型计算机系统接口（ iSCSI ）。</block>
  <block id="15af0791a04451172dcd5fcd27f4cc51" category="list-text">如果您使用的是 Oracle 数据库 11.2.0.2 和 11.2.0.3 ，请安装以下 Oracle 修补程序：</block>
  <block id="277659cab24b18a5dea76892987cdfbb" category="list-text">13413167 ，适用于 Windows 32 位</block>
  <block id="f4174f136c505dcf86b5157db0e8cc4a" category="list-text">13555974 ，适用于 Windows 64 位</block>
  <block id="8b149c324b3dbdad9b9c99487b1d1a1a" category="inline-xref-macro">对 SnapManager 进行故障排除</block>
  <block id="e27fdd07d458305314ad569f88b52e15" category="paragraph"><block ref="e27fdd07d458305314ad569f88b52e15" category="inline-xref-macro-rx"></block></block>
  <block id="07ded41ab1e485220ff298a0171a3295" category="inline-link">NetApp 互操作性表： support.netapp.com/NOW/products/interoperability</block>
  <block id="26b03af9070ce150aaa9b1a226b62cda" category="paragraph"><block ref="26b03af9070ce150aaa9b1a226b62cda" category="inline-link-rx"></block></block>
  <block id="7967da19d06ae3f0bbee3bd63d230cb7" category="inline-link">SnapManager for Oracle 最佳实践： media.netapp.com/documents/tr-3761.pdf</block>
  <block id="8a7f69ec965eccec4a9364468fb42b6d" category="paragraph"><block ref="8a7f69ec965eccec4a9364468fb42b6d" category="inline-link-rx"></block></block>
  <block id="a3a9d40c9863f07c44f4fe41e841e964" category="summary">您可以删除配置文件的用户凭据，以便用户无法再访问它。</block>
  <block id="9b36f69903e67427bf6a7eba4b03706f" category="doc">删除配置文件的用户凭据</block>
  <block id="8464a088c3c8c5e09acfc9a655986fb3" category="list-text">要删除用户的配置文件凭据，请输入以下命令： smo credential delete -profile-nameprofile_name</block>
  <block id="b549908b51a511ce59f4cdc53e8a62eb" category="summary">您必须将任务前，任务后和策略任务脚本存储在要创建备份或克隆的目标服务器上的指定目录中。对于还原操作，必须将脚本放置在要还原备份的目标服务器上的指定目录中。</block>
  <block id="affa3019233538f40b6dc102318a4b99" category="doc">存储任务脚本</block>
  <block id="afd7225650ee9ca6d7b7a4ecef3068b9" category="list-text">创建脚本。</block>
  <block id="e1b1fbeb068570e38d2416665083b06d" category="list-text">将此脚本保存在以下位置之一：</block>
  <block id="daaeb2502f62ee94706ebe27030d9d80" category="paragraph">* 用于备份操作 *</block>
  <block id="e73cda510e8bb947f7e61089e5581494" category="cell">目录</block>
  <block id="a19eb96d38d8cb2be998b7472ceaa51e" category="paragraph">* &lt;default_install_directory &gt;\plugins\backup\create\policy*</block>
  <block id="f28b4cf6a256c0f8a60b76a8af8db09d" category="paragraph">策略脚本会在执行备份操作之前运行。</block>
  <block id="ae54f21c4d1dcb30a41e9909e7ed99cb" category="paragraph">* &lt;default_install_directory &gt;\plugins\backup\create\pre*</block>
  <block id="b87635dfd7d2d1ac6cb8065d45a0ee61" category="paragraph">预处理脚本会在备份前运行。</block>
  <block id="f5eda75cdd087a5995c509647d5e72a7" category="paragraph">后处理脚本会在执行备份操作后运行。</block>
  <block id="6907f9b79c1b599204ebb1f7b3d8dec7" category="paragraph">* 用于还原操作 *</block>
  <block id="cba9fac19ee389648dd5684c53d2b547" category="paragraph">* &lt;default_install_directory &gt;\plugins\restore\create\policy*</block>
  <block id="691f6a747126e9c901d9ca318f40a294" category="paragraph">策略脚本会在执行还原操作之前运行。</block>
  <block id="b17083de072bba0a528f114dcc605179" category="paragraph">* &lt;default_install_directory &gt;\plugins\restore\create\pre*</block>
  <block id="0ab88fd089c3f99b0fbe5143365ab021" category="paragraph">预处理脚本会在执行还原操作之前运行。</block>
  <block id="53900834bf24051b8c2c72b38533b273" category="paragraph">* &lt;default_install_directory &gt;\plugins\restore\create\post*</block>
  <block id="b17aba52ed26b37f6561e583a9c6b421" category="paragraph">后处理脚本会在执行还原操作后运行。</block>
  <block id="620dbdc6f23e445985de37a58606337f" category="paragraph">* 用于克隆操作 *</block>
  <block id="ef83bc4ac314b4129b332ab2aa45d5a6" category="paragraph">* &lt;default_install_directory &gt;\plugins\clone\create\policy*</block>
  <block id="e8ce22247e2fd5b5b216db2c4c7700c0" category="paragraph">策略脚本会在克隆操作之前运行。</block>
  <block id="fc81733f886cee009fdc0df9a6b4e6e4" category="paragraph">* &lt;default_install_directory &gt;\plugins\clone\create\pre*</block>
  <block id="70e5181c50523201f7b8c39b6e598c2e" category="paragraph">预处理脚本会在克隆操作之前运行。</block>
  <block id="e5d0bd1f5929653d0100f815f61e0323" category="paragraph">* &lt;default_install_directory &gt;\plugins\clone\create\post*</block>
  <block id="40bdfb2c89e08cb0fac7ccce10b97a0f" category="paragraph">后处理脚本会在克隆操作之后运行。</block>
  <block id="358b3714156746c638a41f7484c0303c" category="summary">您可以找到有关与不同 SnapManager 操作关联的错误消息的信息。</block>
  <block id="fb01cb224426565ae42b8be1c70e9074" category="doc">错误消息</block>
  <block id="3ee627a68d8e41524a4b570a19abc88b" category="section-title">最常见的错误消息</block>
  <block id="febb6b01c04ecaf9066a3cf674fd59f9" category="paragraph">下表列出了与 SnapManager for Oracle 关联的一些最常见且最重要的错误：</block>
  <block id="e20cbb947afcf84cf58de1358ee1068d" category="cell">错误消息</block>
  <block id="b72ac10807b29c77f5b7e4b80ea40414" category="cell">说明</block>
  <block id="b5a4b64b2aa505bd7c11f79b8a9f458d" category="cell">解决方法：</block>
  <block id="a8a398adc127338cb46b2c5c157ed09a" category="paragraph">SD-10038 ：文件系统不可写。</block>
  <block id="e7ad5c249ead69284a4857e7a109e865" category="paragraph">SnapManager 进程不具有对文件系统的写入访问权限。</block>
  <block id="1397a4ec60ea3ba269adc27756fe0067" category="paragraph">您必须确保 SnapManager 进程对文件系统具有写入访问权限。更正此错误后，您可能需要创建另一个快照。</block>
  <block id="805805d2e7beb64be8e379cfb90f9c51" category="paragraph">SMO-05075 ：无法创建配置文件。您必须正确配置 DP/XDP 关系，或者根据底层关系选择正确的保护策略。</block>
  <block id="361747c0055267ae5a868f4dfd0ff71f" category="paragraph">底层卷不处于 SnapVault 或 SnapMirror 关系中。</block>
  <block id="dfd1cbc6c8799455168cd448590cf938" category="paragraph">您必须在源卷和目标卷之间配置数据保护关系并初始化此关系。</block>
  <block id="e2cacea3df75b30f432971a6da64137d" category="paragraph">SMO-0503 ：您已为此配置文件指定相同的名称。指定其他名称以重命名配置文件。</block>
  <block id="3b84c92a4320c66c5070acb0097e708f" category="paragraph">名称相同的配置文件不能位于存储库中。</block>
  <block id="c3010a36fcf386ea762f053e599264da" category="paragraph">请提供未使用的配置文件名称。</block>
  <block id="c03bc62c05e6ac494c00117fc8f14822" category="paragraph">SMO-0505 ：无法更新数据集元数据。</block>
  <block id="bca395a2ae051c1e2ab5eb65090d608e" category="paragraph">数据集可能已删除或不存在。</block>
  <block id="c0307be3988e3877bad0bd88d8c8c27d" category="paragraph">在更新数据集元数据之前，请使用 NetApp 管理控制台验证数据集是否存在。</block>
  <block id="4d44937a6f815d797a2734c3e0d1df6b" category="paragraph">SMO-0556 ：无法更新此配置文件，因为此配置文件正在运行操作。您必须等待操作完成，然后再更新配置文件。</block>
  <block id="94bfc52eddace220b852e5e748d4aa27" category="paragraph">执行备份，还原和克隆操作时，无法更新配置文件。</block>
  <block id="1d047329bdee9dc57853b7da2c1b254f" category="paragraph">完成当前操作后更新配置文件。</block>
  <block id="3346310f9c6bcf7e2bec1724119113d2" category="paragraph">SMO-05509 ： archivelog 主保留期限无效 - 指定正整数值。</block>
  <block id="141927355f68d08e3343c664eb5efc49" category="paragraph">归档日志备份的保留期限不能为负数。</block>
  <block id="23d92299194a6ccb40557477f36461ef" category="paragraph">为归档日志备份的保留期限指定一个正值。</block>
  <block id="ab5e371e20f49b53409e6244f0d9badb" category="paragraph">SMO-074663 ：此备份还原要求数据库处于所需状态。无法将数据库置于所需状态。</block>
  <block id="02935e92cc563f6ec707505f3fa376d2" category="paragraph">数据库未处于备份操作所需的状态。</block>
  <block id="168bf4ff6f9171df031304c90c480652" category="paragraph">在创建备份副本之前，请检查数据库是否处于相关状态。要还原的数据库的状态取决于要执行的还原过程的类型以及要包含的文件类型。</block>
  <block id="e8d84324b0886f45089e76ce69ff6c2b" category="paragraph">SMO-09315 ：执行存储库升级或更新操作后，除非使用通知主机详细信息更新摘要通知，否则您可能无法收到先前版本中设置的通知的摘要通知。</block>
  <block id="46fd7f0d8fe0e52544a100c2960873b5" category="paragraph">滚动升级后，系统不会为此存储库配置通知设置。</block>
  <block id="333b7a96f0ce0e4c99b41b47e392894f" category="paragraph">滚动升级后，更新摘要通知设置以接收通知。</block>
  <block id="c3678b03204a3244514f6e0b17e95041" category="paragraph">SM0-2076 ：标签名称不应包含除下划线以外的任何特殊字符。</block>
  <block id="baee47d5fe24c6ea25a05450e4975788" category="paragraph">标签名称包含除下划线以外的其他特殊字符。</block>
  <block id="ea24f6c9b4a7b8e94303b11883c26979" category="paragraph">标签名称在配置文件中必须是唯一的。此名称可以包含字母，数字，下划线（ _ ）和连字符（ - ）（但不能以连字符开头）。确保标签不包含除下划线以外的任何特殊字符。</block>
  <block id="0c7a56957c71fb0f0ab00b72ddfb8448" category="paragraph">SMO-06308 ：尝试启动计划时出现异常： java.lang.NullPointerException</block>
  <block id="ed39be069586e50d3903f7e5deb161dd" category="paragraph">配置配置文件主机的完全限定域名（ FQDN ）而不是系统的主机名，并且无法解析配置文件主机的 FQDN 。</block>
  <block id="000b60d1eada02233ae602c1a1e3917d" category="paragraph">请确保使用系统的主机名，而不是 FQDN 。</block>
  <block id="666db896bd184ede0e60205b5c3d3d79" category="paragraph">ExecuteRestoreSteps 中的故障： ORACLE-10003 ：针对 Oracle 数据库 +ASM1 执行 SQL "drop diskgroup ； control diskgroup name ； including contents" 时出错： ora-15039 ： diskgroup not dropped ORA-15027 ： active use of diskgroup ； "control diskgroup name； " dismount</block>
  <block id="2985769d9b20614e5ef939374be82006" category="paragraph">使用控制文件还原备份的操作无法删除控制磁盘组。如果控制磁盘组中备份的控制文件已过时，则会发生此问题描述。</block>
  <block id="66f53385ea6aca29b81975277fb852bc" category="paragraph">确定已备份的陈旧控制文件并手动将其删除。</block>
  <block id="637580631e4b2bdb5c0d78524e723891" category="paragraph">RMAN-06004 ：恢复目录数据库中的 Oracle 错误： ora-01424 ：转义字符后面缺少字符或字符非法</block>
  <block id="b516d96bad08a66182556e382c86eafe" category="paragraph">如果 SnapManager 与 RMAN 集成，则备份创建操作无法从目录中删除备份副本。</block>
  <block id="e3ea99f8cef197408589e05760002823" category="paragraph">检查是否存在用于从 RMAN 删除备份的外部脚本。在 RMAN 中执行交叉检查备份命令以更新 RMAN 存储库，并执行 resync catalog 命令以将目标数据库的控制文件与恢复目录同步。</block>
  <block id="d52aa40ecdc14ff15c69633417712c89" category="paragraph">[debug] ：修剪备份时出现异常。java.lang.IllegalStateException ： [Assertion failed] —此状态不可变必须为 true</block>
  <block id="b5cef1cc1609435344d16ee996704392" category="paragraph">系统会为一个操作 ID 创建多个 Snapshot 副本。</block>
  <block id="a3eb05e9152cab5fe553ee685db816df" category="paragraph">手动删除 Snapshot 副本并使用脚本从存储库中删除条目。</block>
  <block id="98881f7bacc33bd86291d5ca6509d826" category="paragraph">SnapManager 在日志文件中显示的系统时间和时间不匹配或不同步。</block>
  <block id="011d62c428c2680a87fe62ab74ce5cb9" category="paragraph">Java 7 尚不支持更改时区。</block>
  <block id="c07d3f5b03758c3502759d89214f10e6" category="paragraph">应用 Oracle 提供的 tzupdateer 修补程序。</block>
  <block id="dd3e8fae5ce7017f34e3ca40c6705aeb" category="paragraph">dis磁盘 -00001 ：无法发现存储：以下标识符不存在或不是预期类型： ASM File</block>
  <block id="9199bd0da957831107ecd2df8d4c9dc6" category="paragraph">数据或控制文件或重做日志会在 ASM 数据库中进行多路传输。</block>
  <block id="38e02ee090c8b098934309e05377e1f9" category="paragraph">删除 Oracle 多路复用。</block>
  <block id="22ff4b4a454f9d3ef0f28c1f004dae40" category="paragraph">ora-01031 ：权限不足。验证 SnapManager Windows 服务是否已设置为以具有正确权限的用户身份运行，并且用户是否包含在 ORA_DBA 组中。</block>
  <block id="c2fcd5f91c4fa701ac803222c11988f4" category="paragraph">您在 SnapManager 中的权限不足。SnapManager 服务帐户不属于 ORA_DBA 组。</block>
  <block id="d6b99064b4ff4a76996af822db8d7f32" category="paragraph">右键单击桌面上的 * 计算机 * 图标并选择 * 管理 * 以验证 SnapManager 服务的用户帐户是否属于 ORA_DBA 组。检查本地用户和组，并确保此帐户属于 ORA_DBA 组。如果此用户是本地管理员，请确保此用户位于组中，而不是域管理员中。</block>
  <block id="5a1204c5fa253f21922c7771c7c00f9d" category="paragraph">0001-SMO-02016 ：在此备份操作中，数据库中可能存在未备份的外部表（因为在此备份期间数据库未打开，因此无法查询 all_external_locations 以确定是否存在外部表）。</block>
  <block id="0d58d23e211a821eb08ed07391417337" category="paragraph">SnapManager 不会备份外部表（例如，不存储在 .dbf 文件中的表）。之所以出现此问题描述，是因为备份期间未打开数据库， SnapManager 无法确定是否正在使用任何外部表。</block>
  <block id="77e0bd1efa8e09bbdded03173f91f962" category="paragraph">在此操作中，数据库中可能存在未备份的外部表（因为数据库在备份期间未打开）。</block>
  <block id="aaa2c9bdc01f4b04727efb80c17f0c39" category="paragraph">0002-332 管理员错误：无法检查对卷 "volume_name" 的 sd.snapshot.Clone 访问权限，以查找 Operations Manager 服务器 "DFM_server" 上的用户用户名。原因：指定的资源无效。在 Operations Manager 服务器 "DFM_server" 上找不到其 ID</block>
  <block id="1502bcd580ba3337223eb65de1bc3072" category="paragraph">未设置正确的访问权限和角色。</block>
  <block id="aa063eb24e94a1d8e11f7e23b41b1f27" category="paragraph">为尝试执行命令的用户设置访问权限或角色。</block>
  <block id="750ae6e25dcf26d1b9d7a2e679fb40c6" category="paragraph">【警告】 flow-11011 ：操作中止了【错误】 flow-11-8 ：操作失败： Java 堆空间。</block>
  <block id="6073af254d6641976efd9847b2ca44e5" category="paragraph">数据库中的归档日志文件数量超过允许的最大数量。</block>
  <block id="e9b1f51c8fcae535415e64ead87ff925" category="list-text">导航到 SnapManager 安装目录。</block>
  <block id="0f94ca0f3097d5af1573e983a727aef7" category="list-text">打开 launch Java 文件。</block>
  <block id="78d2667d88bfcff7a98c2f335d2220a5" category="list-text">增加 `java -Xmx160m` java heap space 参数的值。例如，您可以将此值从默认值 160 米修改为 200 米，并将其修改为 `java -Xmx200 米` 。</block>
  <block id="47fe17c5e3c952c619f993260b01292d" category="paragraph">SMO-21019 ：对目标： "e ： \dest" 执行归档日志删减失败，原因： "Oracle-00101 ：执行 RMAN 命令时出错：【删除 NOPROMPT ARCHIVELOG 'E ： \dest]]</block>
  <block id="05fa0bfb21bdc41da9d976e7b9061d70" category="paragraph">在其中一个目标中，归档日志修剪失败。在这种情况下， SnapManager 会继续从其他目标对归档日志文件进行修剪。如果从活动文件系统手动删除任何文件， RMAN 将无法从该目标对归档日志文件进行修剪。</block>
  <block id="99c3726c5317568e9b806841c1162c90" category="paragraph">从 SnapManager 主机连接到 RMAN 。运行 RMAN Crosscheck ARCHIVELOG ALL 命令，然后重新对归档日志文件执行修剪操作。</block>
  <block id="092e25ed5aa5cfd677fb366af93a9336" category="paragraph">SMO-13032 ：无法执行操作：归档日志 Prune.根发生原因： RMAN 异常： ORACLE-00101 ：执行 RMAN 命令时出错。</block>
  <block id="4661ac1870457c2d8cb266c952998d47" category="paragraph">归档日志文件将从归档日志目标位置手动删除。</block>
  <block id="d4e521a4d795724da72ec30984a22819" category="paragraph">无法解析 Shell 输出：（ java.util.regex.Matcher[pattern=Command complete 。Region = 0 ， 18 lastmatch=] ）不匹配（名称： backup_script ）无法解析 Shell 输出：（ java.util.regex.Matcher[pattern=Command complete 。Region = 0 ， 25 lastmatch=] ）不匹配（说明：备份脚本）</block>
  <block id="97b4e18051ed101479094700636f708c" category="paragraph">无法解析 Shell 输出：（ java.util.regex.Matcher[pattern=Command complete 。Region = 0.9 lastmatch=] ）不匹配（超时： 0 ）</block>
  <block id="57b06e848f9c2b2c230b1ec0a751b01d" category="paragraph">未在任务前或任务后脚本中正确设置环境变量。</block>
  <block id="91cb51b5cf08df428bece39da5f7eebe" category="inline-xref-macro">任务脚本中的操作</block>
  <block id="4a4601a434318d92c919a56f620410ee" category="paragraph">检查任务前或任务后脚本是否遵循标准 SnapManager 插件结构。有关追加信息在脚本中使用环境变量的信息，请参见 <block ref="dd4062018333f99bc0661572b66556e2" category="inline-xref-macro-rx"></block>。</block>
  <block id="3f427cefeb05a942114ffebb11ee5d2d" category="paragraph">ORA-01450 ：已超出最大密钥长度（ 6398 ）。</block>
  <block id="fd90b975865f089f028e831d2886bbcb" category="paragraph">在从适用于 Oracle 的 SnapManager 3.2 升级到适用于 Oracle 的 SnapManager 3.3 时，升级操作将失败并显示此错误消息。之所以出现此问题描述，可能是因为以下原因之一：</block>
  <block id="920b1b768ba713ba0c70cd342d1376a1" category="list-text">存储库所在表空间的块大小小于 8k 。</block>
  <block id="1e577ee18dbac3101949f88f540f545b" category="list-text">NLS_LENG_semantictics 参数设置为 char 。</block>
  <block id="7fb0086426e605d5c89fbd5123701e3e" category="paragraph">您必须将这些值分配给以下参数：</block>
  <block id="aac906a13237d30f332302f2f49f5027" category="list-text">block_size=8192</block>
  <block id="1c946d05c03028b115f55a59848dd37f" category="list-text">NLS_LENG=byte</block>
  <block id="f102708d2c96f6fa8476d9e533198dd5" category="paragraph">修改参数值后，必须重新启动数据库。</block>
  <block id="23109fdacbb6995fd6b1bd11eb02cd6e" category="paragraph">有关详细信息，请参见知识库文章 2017632 。</block>
  <block id="00ea785801d489df83be96d1f651e31c" category="section-title">与数据库备份过程（ 2000 系列）关联的错误消息</block>
  <block id="181c887ea3e3335f60c8e32258279be1" category="paragraph">下表列出了与数据库备份过程相关的常见错误：</block>
  <block id="fd7cbe810081a0f358f2d252a25c27f4" category="paragraph">SMO-02066 ：您无法删除或释放归档日志备份 "data-logs" ，因为备份与数据备份 "data-logs" 关联。</block>
  <block id="b83edf04bb0ddeddf8e79e18dde65f4d" category="paragraph">归档日志备份与数据文件备份一起进行，您尝试删除归档日志备份。</block>
  <block id="5f56227f98940ce57ba2d8903c5a1bf7" category="paragraph">使用 -force 选项删除或释放备份。</block>
  <block id="e82986a0ec87fd3dae24fa22e983fa87" category="paragraph">SMO-02067 ：您不能删除或释放归档日志备份 "data-logs" ，因为备份与数据备份 "data-logs" 关联且处于分配的保留期限内。</block>
  <block id="22dced64cf92dadeccb3ac16f4551df5" category="paragraph">归档日志备份与数据库备份关联且处于保留期限内，您尝试删除归档日志备份。</block>
  <block id="c63146c7a74f159e9f59336fdd2638d3" category="paragraph">SMO-07142 ：由于排除模式 &lt;exclude&gt; 模式，已排除归档日志。</block>
  <block id="f2b31c564d39a7557fb0c2b180bc6ae3" category="paragraph">您可以在配置文件创建或备份创建操作期间排除某些归档日志文件。</block>
  <block id="7f43f347b613f6a28645c1f967751efc" category="paragraph">无需执行任何操作。</block>
  <block id="89a99acda788715a09c3347c98c1c10d" category="paragraph">SMO-07155 ：活动文件系统中不存在 &lt;count&gt; 个归档日志文件。这些归档的日志文件不会包含在备份中。</block>
  <block id="3fdb8153245a7cb8016c792c044c30fa" category="paragraph">在配置文件创建或备份创建操作期间，活动文件系统中不存在归档日志文件。这些归档的日志文件不会包含在备份中。</block>
  <block id="cceafd69525fa5daacab3629352316a7" category="paragraph">SMO-07148 ：归档的日志文件不可用。</block>
  <block id="5b2caac9ff1acd5cc497875c04d4b839" category="paragraph">在配置文件创建或备份创建操作期间，不会为当前数据库创建任何归档日志文件。</block>
  <block id="49e85643ee0a5495ea3d5546f10dc64f" category="paragraph">SMO-07150 ：未找到归档的日志文件。</block>
  <block id="0ca4eafae6f23626d333d52d230f18e9" category="paragraph">文件系统中缺少所有归档日志文件，或者在配置文件创建或备份创建操作期间将其排除。</block>
  <block id="35b96e933e06ae23d63745f1df1d8fc4" category="paragraph">SMO-13032 ：无法执行操作：备份创建。根发生原因： ORACLE-20001 ：尝试将数据库实例 dfcln1 的状态更改为 OPEN 时出错： ORACLE-20004 ：希望能够在不使用 RESETLOGS 选项的情况下打开数据库，但 Oracle 报告需要使用 RESETLOGS 选项打开数据库。为了防止意外重置日志，此过程不会继续。请确保可以在不使用 RESETLOGS 选项的情况下打开数据库，然后重试。</block>
  <block id="987a4cc707e5bc230e204e1997863aa3" category="paragraph">您尝试备份使用 -no-resetlogs 选项创建的克隆数据库。克隆的数据库不是完整的数据库。但是，您可以对克隆的数据库执行 SnapManager 操作，例如创建配置文件和备份等，但由于克隆的数据库未配置为完整的数据库， SnapManager 操作将失败。</block>
  <block id="58586b0dc41c230a5960f919611f8a0b" category="paragraph">恢复克隆的数据库或将数据库转换为 Data Guard 备用数据库。</block>
  <block id="c291fe415c1e2783d174fb8d1b87d5df" category="section-title">与还原过程相关的错误消息（ 3000 系列）</block>
  <block id="4c494552fe365b9c2cb8b1d13a1ad79a" category="paragraph">下表显示了与还原过程相关的常见错误：</block>
  <block id="c585845d09b818f1af99687908867272" category="paragraph">SMO-03031 ：还原备份 &lt;variable&gt; 需要使用还原规范，因为备份的存储资源已释放。</block>
  <block id="a91ce12585caf85d3624b05a64673de0" category="paragraph">您尝试还原已释放其存储资源的备份，但未指定还原规范。</block>
  <block id="0b253841179ed97d98a0c9ea5b18f2f1" category="paragraph">指定还原规范。</block>
  <block id="4dda8fb54c1b6d36250fa7aa3f7d2982" category="paragraph">SMO-03032 ：还原规范必须包含要还原的文件的映射，因为备份的存储资源已释放。需要映射的文件为： &lt;variable&gt; from Snapshots ： &lt;variable&gt;</block>
  <block id="9bc0b8d697512b9c7bb9fc27cde2e7f5" category="paragraph">您尝试还原已释放其存储资源的备份以及不包含要还原的所有文件的映射的还原规范。</block>
  <block id="c67a758ba04142cec8a90026cc87d095" category="paragraph">更正还原规范文件，使映射与要还原的文件匹配。</block>
  <block id="5eace6e5086a88c966978b69a023342c" category="paragraph">ORACLE-30028 ：无法转储日志文件 &lt;filename&gt; 。此文件可能缺失 / 无法访问 / 已损坏。此日志文件不会用于恢复。</block>
  <block id="ebdc3e9d9d1bd31742b110f3dbe620ae" category="paragraph">无法使用联机重做日志文件或归档日志文件进行恢复。发生此错误的原因如下：</block>
  <block id="179f34df6bc5b86c78ada1362cc668b2" category="list-text">错误消息中提及的联机重做日志文件或归档日志文件没有足够的更改编号可用于恢复。如果数据库联机而未进行任何事务，则会发生这种情况。重做日志或归档日志文件没有任何可应用于恢复的有效变更编号。</block>
  <block id="86077a70a0247c8c028ec1666a67c4f3" category="list-text">错误消息中提及的联机重做日志文件或归档日志文件没有足够的 Oracle 访问权限。</block>
  <block id="8ba9dd60beba16570cd4a7f412f7972f" category="list-text">错误消息中提及的联机重做日志文件或归档日志文件已损坏， Oracle 无法读取。</block>
  <block id="fcc35a3ed095ada49c20500ffe247a64" category="list-text">在所述路径中未找到错误消息中提及的联机重做日志文件或归档日志文件。</block>
  <block id="472046d2c001326e41bd837bcc7b93c9" category="paragraph">如果错误消息中提及的文件是归档日志文件，并且您手动提供了恢复功能，请确保该文件具有对 Oracle 的完全访问权限。即使该文件具有完全权限， 此消息仍会显示，归档日志文件没有任何要应用于恢复的更改编号，可以忽略此消息。</block>
  <block id="960105fe799b99a0530365be137f0fa9" category="section-title">与克隆进程（ 4000 系列）关联的错误消息</block>
  <block id="bf5fea49c83f20c824183df6a2dcab19" category="paragraph">下表显示了与克隆过程相关的常见错误：</block>
  <block id="6054b59c0f28d75280104c560d58b7d7" category="paragraph">SMO-04133 ：转储目标不能存在</block>
  <block id="29e55ab1cb44a1c6f9522ca6d7bb0b2a" category="paragraph">您正在使用 SnapManager 创建新克隆；但是，新克隆要使用的转储目标已存在。如果存在转储目标，则 SnapManager 无法创建克隆。</block>
  <block id="a4979c2971a9a88d18afc7fa026dc369" category="paragraph">在创建克隆之前，请删除或重命名旧的转储目标。</block>
  <block id="9a5f06b51056594ae359d6ec32de1c29" category="paragraph">SMO-13032 ：无法执行操作： clone Create 。根发生原因： ORACLE-001 ：执行 SQL 时出错： [alter database open RESETLOGS ； ] 。返回的命令： ora-38856 ：无法将实例 unn命名 实例 _2 （重做线程 2 ）标记为已启用。</block>
  <block id="42b809a8087a1a685d8a52900cf72cef" category="paragraph">使用以下设置从备用数据库创建克隆时，克隆创建将失败：</block>
  <block id="145095c1c14811ed18e8a5ad924cacc2" category="list-text">使用 RMAN 创建备份数据文件的备用。</block>
  <block id="19f28808fa01be3e4ab64a739c5df8d4" category="paragraph">在创建克隆之前，在克隆规范文件中添加 _no_recovery_through _resetlogs=true 参数。请参见适用于追加信息的 Oracle 文档（ ID 334899.1 ）。确保您已获得 Oracle Metalink 用户名和密码。</block>
  <block id="fc40e5968f979e53ab7d47a7ecd3b400" category="paragraph">您未在克隆规范文件中为参数提供值。</block>
  <block id="dfc5bc40123fbd6bf740372f4b19f952" category="paragraph">您必须为此参数提供一个值，或者如果克隆规范文件中不需要该参数，则必须将其删除。</block>
  <block id="0cc819e44b206478f7ecbc7efc72e39b" category="section-title">与管理配置文件进程（ 5000 系列）关联的错误消息</block>
  <block id="970f5a4285fafbd3b7278fa6cad01d50" category="paragraph">SMO-20600 ：在存储库 "repo_name" 中未找到配置文件 "profile1" 。请运行 " 配置文件同步 " 以更新配置文件到存储库的映射。</block>
  <block id="29fbd6d3d77611edd6185db890b62ad5" category="paragraph">如果配置文件创建失败，则无法执行转储操作。</block>
  <block id="c2acad4791abc25017d30fc9baad4962" category="paragraph">使用 smsystem dump 。</block>
  <block id="925a341f42e6b01f56d462cd2a9b3643" category="section-title">与释放备份资源相关的错误消息（备份 6000 系列）</block>
  <block id="d683b5744b8de69f4dd5ee7d44f9aeb8" category="paragraph">下表显示了与备份任务相关的常见错误：</block>
  <block id="05ae9367ff8d612be89dc7e72a3be2a9" category="paragraph">SMO-06030 ：无法删除备份，因为它正在使用中： &lt;variable&gt;</block>
  <block id="0c41fbc9d99a81a133832c0b5dcbe81e" category="paragraph">您尝试使用命令执行无备份操作，在备份已挂载，具有克隆或标记为无限制保留时执行此操作。</block>
  <block id="bf214f02cc74fb7f8e0bcbc0adc59153" category="paragraph">卸载备份或更改无限保留策略。如果存在克隆，请将其删除。</block>
  <block id="dbde14cd8e4834ff76c2540e5161978d" category="paragraph">SMO-06045 ：无法释放备份 &lt;variable&gt; ，因为备份的存储资源已释放</block>
  <block id="5748e59d4b41c64e0447cc36e322a2a4" category="paragraph">当备份已释放时，您尝试使用命令执行备份可用操作。</block>
  <block id="0f929669d39a82f042089f4d9370b61b" category="paragraph">如果备份已释放，则无法释放它。</block>
  <block id="dc60a5539d0a9b90b02350a39db2332f" category="paragraph">SMO-06047 ：只能释放成功的备份。备份 &lt;ID&gt; 的状态为 &lt;status&gt; 。</block>
  <block id="416d6da65e63e2c6b8bcafbc0d5f2259" category="paragraph">当备份状态不成功时，您尝试使用命令执行备份可用操作。</block>
  <block id="af36119cbeb706435b239296f7d12cbe" category="paragraph">成功备份后重试。</block>
  <block id="3b1ce5f5bb5cb708a20986b0f0464432" category="paragraph">SMO-13082 ：无法对备份 &lt;ID&gt; 执行操作 &lt;variable&gt; ，因为备份的存储资源已释放。</block>
  <block id="83c549dd3483f19f4d05bc4b5e2aef80" category="paragraph">您尝试使用命令挂载已释放存储资源的备份。</block>
  <block id="719d1ccf8a28fd81ef4d288606c55527" category="paragraph">您不能挂载，克隆或验证已释放存储资源的备份。</block>
  <block id="ac913e5e88ab172799de1b3bc0f0a265" category="section-title">与滚动升级过程（ 9000 系列）相关的错误消息</block>
  <block id="78b3dcf1a77da7f4e93fd423e45236a4" category="paragraph">下表显示了与滚动升级过程相关的常见错误：</block>
  <block id="073764d7938af320e3e1d0e0b1bc29fa" category="paragraph">SMO-09234 ：旧存储库中不存在以下主机。&lt; 主机名 &gt; 。</block>
  <block id="8e3b57dc7a7adf3308438a399371d39b" category="paragraph">您尝试执行主机滚动升级，而先前的存储库版本不存在此升级。</block>
  <block id="87219e10ef8c4aa2984ff5934d6f396d" category="paragraph">使用 SnapManager CLI 早期版本中的 repository show-repository 命令检查主机是否位于先前的存储库中。</block>
  <block id="c4a5ae6b4f75dae50f4647b3e3e8dd81" category="paragraph">SMO-09255 ：新存储库中不存在以下主机。&lt; 主机名 &gt; 。</block>
  <block id="a66d8c888ffa00b86255ca9b8ab24aae" category="paragraph">您尝试执行主机回滚，新存储库版本中不存在此主机。</block>
  <block id="6088a8304c5c9dd28fd64801a9e90800" category="paragraph">在更高版本的 SnapManager 命令行界面中使用 repository show-repository 命令检查主机是否位于新存储库中。</block>
  <block id="3a9a28fb9f0e614b546cc7d8249ef8c6" category="paragraph">SMO-09256 ：不支持回滚，因为指定主机 &lt;hostname&gt; 存在新的配置文件 &lt;proFiles&gt;.. 。</block>
  <block id="782a1cd4b99245341bdb5fcf55f7fa1c" category="paragraph">您已尝试回滚包含存储库中现有新配置文件的主机。但是，早期 SnapManager 版本的主机中不存在这些配置文件。</block>
  <block id="56eecf54616d25aae3f714840327ed44" category="paragraph">在回滚之前，删除较新版本或已升级版本的 SnapManager 中的新配置文件。</block>
  <block id="335007e4c728d81307459e3b696a6cef" category="paragraph">SMO-09257 ：不支持回滚，因为备份 &lt;backupid&gt; 已挂载到新主机中。</block>
  <block id="37c0417f455963a80a61b0b0904e21f5" category="paragraph">您尝试回滚已挂载备份的较高版本 SnapManager 主机。这些备份不会挂载在早期版本的 SnapManager 主机中。</block>
  <block id="6e433c49c82f5d7af571eb760ab47cf6" category="paragraph">卸载较高版本的 SnapManager 主机中的备份，然后执行回滚。</block>
  <block id="be01b81be2958a7a4e604bf056bf58df" category="paragraph">SMO-09258 ：不支持回滚，因为备份 &lt;backupid&gt; 已卸载到新主机中。</block>
  <block id="ccaeffed9e1e520ef968621333a9ac89" category="paragraph">您尝试回滚包含正在卸载的备份的较高版本 SnapManager 主机。</block>
  <block id="4f579ec06890afdb635f9d0734cf12b7" category="paragraph">在更高版本的 SnapManager 主机中挂载备份，然后执行回滚。</block>
  <block id="0743c7e787dbe4c00ce9020a20600b59" category="paragraph">SMO-09298 ：无法更新此存储库，因为它已在更高版本中具有其他主机。请改为对所有主机执行滚动升级。</block>
  <block id="8e2534906dbd4dad475290594acb47e2" category="paragraph">您对单个主机执行了滚动升级，然后更新了该主机的存储库。</block>
  <block id="faa6c367ac65c132d5248f06e6961900" category="paragraph">对所有主机执行滚动升级。</block>
  <block id="0a7a98c86af91d421c201cde56d5ab93" category="paragraph">SMO-09297 ：启用约束时出错。存储库可能处于不一致状态。建议还原您在当前操作之前所做的存储库备份。</block>
  <block id="c4f0aa3d55d695bc5c5391656fc1625e" category="paragraph">如果存储库数据库处于不一致状态，则您尝试执行滚动升级或回滚操作。</block>
  <block id="1e9db9f32d62c5132c38ef1437d0585a" category="paragraph">还原先前备份的存储库。</block>
  <block id="1126371a502efb606e48606eee30266a" category="section-title">执行操作（ 12 ， 000 系列）</block>
  <block id="9af23cedfb85c63bd6373a227bfb0e3d" category="paragraph">下表显示了与操作相关的常见错误：</block>
  <block id="2577687608a05758550102f446970bcb" category="paragraph">SMO-12347 [ 错误 ] ： SnapManager 服务器未在主机 &lt; 主机 &gt; 和端口 &lt; 端口 &gt; 上运行。请在运行 SnapManager 服务器的主机上运行此命令。</block>
  <block id="532c631f5ab0bc7ae9f2e2699bf48edc" category="paragraph">在设置配置文件时，您输入了有关主机和端口的信息。但是， SnapManager 无法执行这些操作，因为 SnapManager 服务器未在指定的主机和端口上运行。</block>
  <block id="a1576c8940c584b5005669ae3c0fdefe" category="paragraph">在运行 SnapManager 服务器的主机上输入命令。您可以使用 lsnrctl status 命令检查端口，并查看运行数据库的端口。如果需要，可在 backup 命令中更改端口。</block>
  <block id="5fc5dc16c6317b2f66d83686ffa1a42c" category="section-title">执行流程组件（ 13 ， 000 系列）</block>
  <block id="d895fde29ccb843b539276f9f839b4b9" category="paragraph">下表显示了与 SnapManager 的进程组件相关的常见错误：</block>
  <block id="dd99156ce7ba26db9a458ef6f4466af6" category="paragraph">SMO-13083 ：值为 "x" 的 Snapname 模式包含字母，数字，下划线，短划线和花括号以外的字符。</block>
  <block id="fa40f738d073dbde63f6e53c793b0db4" category="paragraph">在创建配置文件时，您自定义了 Snapname 模式；但是，您包含了不允许使用的特殊字符。</block>
  <block id="d1bfd4e894d9ec43d85675cea8f43258" category="paragraph">删除字母，数字，下划线，短划线和花括号以外的特殊字符。</block>
  <block id="516ae2337edd897e1cb15d99429e68ed" category="paragraph">SMO-13084 ：值为 "x" 的 Snapname 模式不包含相同数量的左括号和右括号。</block>
  <block id="7bc59254884fdf04cc4f9e6610b02531" category="paragraph">创建配置文件时，您自定义了 Snapname 模式；但是，左括号和右括号不匹配。</block>
  <block id="2d81eabde4061c9f2ddaaf8c4235b953" category="paragraph">在 Snapname 模式中输入匹配的括号和右括号。</block>
  <block id="a13a673f29534a68e5c01c3ddebbec6a" category="paragraph">SMO-13085 ：值为 "x" 的 Snapname 模式包含无效变量名 "y" 。</block>
  <block id="fa1cd2b80790240cc8531b84ecb55208" category="paragraph">在创建配置文件时，您自定义了 Snapname 模式；但是，您包含了一个不允许的变量。</block>
  <block id="ad127512872eee246c9487fa92da720f" category="inline-xref-macro">Snapshot 副本命名</block>
  <block id="b04a59aa2eadddd9e6e72d26bf7155d0" category="paragraph">删除有问题的变量。要查看可接受变量的列表，请参见 <block ref="e9e36a1caccd4ac5ea0176fc8b259cc6" category="inline-xref-macro-rx"></block>。</block>
  <block id="76abf51a00751404e94e6b6cd6f5c002" category="paragraph">值为 "x" 的 SMO-13086 Snapname 模式必须包含变量 "smID" 。</block>
  <block id="6e110403fa88bd0e087c09f4f538da84" category="paragraph">在创建配置文件时，您自定义了 Snapname 模式；但是，您省略了所需的 SMID 变量。</block>
  <block id="53e175b4c6852825f597bfd0aeeecf06" category="paragraph">插入所需的 SMID 变量。</block>
  <block id="71493be4630a0d55acc27d88e6f08145" category="section-title">与 SnapManager 实用程序（ 14 ， 000 系列）关联的错误消息</block>
  <block id="946be9f960664f4ef1d8d45242d03967" category="paragraph">下表显示了与 SnapManager 实用程序相关的常见错误：</block>
  <block id="2fe275039d8b85261f83b5ff5752ca2a" category="paragraph">SMO-14501 ：邮件 ID 不能为空。</block>
  <block id="e434ba01e81778cdc45f30fbb3dda3af" category="paragraph">您未输入电子邮件地址。</block>
  <block id="d68c7cd2cdc561bc55a5b8e6d8c4dd6c" category="paragraph">输入有效的电子邮件地址。</block>
  <block id="20a4ab959d1efa64d54303a353162e0f" category="paragraph">SMO-14502 ：邮件主题不能为空。</block>
  <block id="a10be1f349e99541f59e7d150910a389" category="paragraph">您未输入电子邮件主题。</block>
  <block id="4a59326b72b73072ca28ca5ff34381c3" category="paragraph">输入相应的电子邮件主题。</block>
  <block id="3a1e0f89cf8d42cd6fe696a29799f28d" category="paragraph">SMO-14506 ：邮件服务器字段不能为空。</block>
  <block id="713843c0e7159652b93ed54263e7734e" category="paragraph">您未输入电子邮件服务器主机名或 IP 地址。</block>
  <block id="b17762ef4374b5f7e0a315966b786048" category="paragraph">输入有效的邮件服务器主机名或 IP 地址。</block>
  <block id="6e3f0aff282e15412fb2bddc4066ed78" category="paragraph">SMO-14507 ：邮件端口字段不能为空。</block>
  <block id="46cf7b55b5a5c296b3c9e24bbbb2b07c" category="paragraph">您未输入电子邮件端口号。</block>
  <block id="f7459e2156458f38471a33d2c1100e91" category="paragraph">输入电子邮件服务器端口号。</block>
  <block id="390b1c348a10880ccabbd1f37226afd3" category="paragraph">SMO-14508 ：发件人邮件 ID 不能为空。</block>
  <block id="7cd56c718558cccc919b399e3b26865b" category="paragraph">您未输入发件人的电子邮件地址。</block>
  <block id="16dc78f3a59d14184bbba7daa35d9808" category="paragraph">输入有效的发件人电子邮件地址。</block>
  <block id="e4e31000539891ff1bdf913ffa7346b1" category="paragraph">SMO-14509 ：用户名不能为空。</block>
  <block id="fda30ca1d24e1a0c78bdb01f09c24ccc" category="paragraph">您启用了身份验证，但未提供用户名。</block>
  <block id="7700bdab3569183739a4424c5ac0c36d" category="paragraph">输入电子邮件身份验证用户名。</block>
  <block id="b69d86d0c0329b8209d5c2835be9b843" category="paragraph">SMO-14510 ：密码不能为空。请输入密码。</block>
  <block id="83a015958e92c6c65ded5251425dcc9e" category="paragraph">您已启用身份验证，但未提供密码。</block>
  <block id="03df93d158f9ef398e34ba50b97c722b" category="paragraph">输入电子邮件身份验证密码。</block>
  <block id="8b14074e862cf95cb18f48fcb81db920" category="paragraph">SMO-14550 ：电子邮件状态 &lt; 成功 / 失败 &gt; 。</block>
  <block id="dbf77c7c99d5abf829409d9db658d0f7" category="paragraph">端口号，邮件服务器或接收方的电子邮件地址无效。</block>
  <block id="0a7ec5de656bd13eb2ea01be807a5cb7" category="paragraph">在电子邮件配置期间提供正确的值。</block>
  <block id="da61baee4eb22c60389a419be208be35" category="paragraph">SMO-14559 ：发送电子邮件通知失败： &lt;error&gt; 。</block>
  <block id="e793c542dbade92a242d6d7fa4b7e9e6" category="paragraph">这可能是由于端口号无效，邮件服务器无效或收件人的邮件地址无效所致。</block>
  <block id="7e67ce21c2b4ffad70de21cc3e1f6a97" category="paragraph">SMO-14560 ：通知失败：通知配置不可用。</block>
  <block id="6326310c1be5e94d72460126540878e6" category="paragraph">通知发送失败，因为通知配置不可用。</block>
  <block id="82def94193d7bc59fc3a80f614179a9a" category="paragraph">添加通知配置。</block>
  <block id="188d9ec24b168ab173a804cad4a8fd00" category="paragraph">SMO-14565 ：时间格式无效。请以 HH ： MM 格式输入时间格式。</block>
  <block id="5e1cad6ae2bd786e8322c7c86f653f29" category="paragraph">您输入的时间格式不正确。</block>
  <block id="1110a7323d3753cf2b27a13e55f8630a" category="paragraph">以 HH ： MM 格式输入时间。</block>
  <block id="339bd6b436072768e184fa31f7f4ca01" category="paragraph">SMO-14566 ：日期值无效。有效日期范围为 1-31 。</block>
  <block id="bfebd60715ebe12562014f8df42472bb" category="paragraph">配置的日期不正确。</block>
  <block id="1e1467b3a86dd2f0711820c73bbf7125" category="paragraph">日期应介于 1 到 31 之间。</block>
  <block id="4dea5426ce987eec29539f9eeb86ca8b" category="paragraph">SMO-14567 ：日期值无效。有效日期范围为 1-7 。</block>
  <block id="84568b2de91405f9a9460a7b33c66bba" category="paragraph">配置的日期不正确。</block>
  <block id="bb98bf78749535f9e30df8242874f892" category="paragraph">输入日期范围 1 到 7 。</block>
  <block id="53982f98c179f44779bd4231cecfec84" category="paragraph">SMO-14569 ：服务器无法启动摘要通知计划。</block>
  <block id="b8d8ea52921b61f81e94c01adc720a32" category="paragraph">由于未知原因， SnapManager 服务器已关闭。</block>
  <block id="f1e540d06cc3bd91f6c999a2440796b3" category="paragraph">启动 SnapManager 服务器。</block>
  <block id="87c8ddcea9e16c0243dad49ea906c7e3" category="paragraph">SMO-14570 ：摘要通知不可用。</block>
  <block id="e85e2dfb46221c85987bb9b194eb25cf" category="paragraph">您尚未配置摘要通知。</block>
  <block id="abcc2466bf6453adf4f0fa9f40d2f5d8" category="paragraph">配置摘要通知。</block>
  <block id="4115ad3419d1f0d21afa032182eb1a76" category="paragraph">SMO-14571 ：无法同时启用配置文件和摘要通知。</block>
  <block id="02fdcad0cf8cc1ecdf29221e3cef8eb1" category="paragraph">您已选择配置文件和摘要通知选项。</block>
  <block id="ff59ab39b7eafc9aa68f3d48c7743c21" category="paragraph">启用配置文件通知或摘要通知。</block>
  <block id="601a17269f68b4a5aec7cbfa491a347e" category="paragraph">SMO-14572 ：提供成功或失败通知选项。</block>
  <block id="9e0be3e94983bf2dad9a2515b13ad187" category="paragraph">您尚未启用成功或失败选项。</block>
  <block id="f7c572b3bdceeb31d760b1d1725a155f" category="paragraph">您必须选择成功或失败选项，或者同时选择这两者。</block>
  <block id="e9e36a1caccd4ac5ea0176fc8b259cc6" category="paragraph"><block ref="e9e36a1caccd4ac5ea0176fc8b259cc6" category="inline-xref-macro-rx"></block></block>
  <block id="7d4e158a9b0cdf6e21279f02b399403f" category="summary">通过 SnapManager ，您可以暂停备份计划，直到备份计划恢复为止。</block>
  <block id="b1d48bb98b63701511fa12126b016889" category="doc">暂停备份计划</block>
  <block id="06e98aec5691c98bf351d7015a4e9d8d" category="paragraph">您可以暂停活动计划。如果您尝试暂停已暂停的备份计划，可能会遇到错误消息 " 无法暂停： schedule &lt;scheduleename&gt; 已处于暂停状态 " 。</block>
  <block id="70afe4f8a38997721e15c7a0edbfe685" category="list-text">要临时暂停备份计划，请输入以下命令： smo schedule suspend -profile profile_name-schedule-nameschedulename （ -quiet | -verbose ）</block>
  <block id="b03f135578658f6d97ed86552648e811" category="summary">您可以从主机服务器卸载 SnapManager 。</block>
  <block id="446f1b224aa991cb101eb4ceb0d091e8" category="doc">卸载 SnapManager</block>
  <block id="269670c1027e383cc22f07ef40f4cc68" category="list-text">卸载 SnapManager 之前，请停止主机服务器。</block>
  <block id="9e2616ae5add6cdb7805fe7072bff5f4" category="list-text">单击 * 开始 * &gt; * 控制面板 * &gt; * 添加或删除程序 * 。</block>
  <block id="556ebe12e8cb69bfd39aba7af979f6c9" category="list-text">选择 * SnapManager for Oracle* 。</block>
  <block id="615da270425b5ecb4fe6ddeed9358880" category="list-text">单击 * 卸载 * 。</block>
  <block id="00588b0a042b4f22b03894398cea592b" category="summary">SnapManager 在集群配置中运行。</block>
  <block id="11db64e2ef2a7a084cb0009949d9f692" category="doc">集群模式配置</block>
  <block id="d9f5f7a175f7401bd556047d03aed859" category="paragraph">SnapManager 支持与 SnapDrive 产品和主机实用程序套件支持的相同主机集群和配置。</block>
  <block id="8696f41637926f259d0f0ae372881e40" category="paragraph">SnapManager 还支持非集群配置，其中一个主机连接到单个存储系统，受支持的主机集群以及运行 Data ONTAP 控制器故障转移的存储系统。</block>
  <block id="b44a1b6bebef6104932df273ab6e0030" category="summary">您可以使用图形用户界面 \ （ gui ），命令行界面 \ （ cli\ ）或文本编辑器创建任务规范文件。这些文件用于对备份，还原或克隆操作执行预处理或后处理活动。</block>
  <block id="74aea44afb94637e49791995e62d535d" category="doc">创建任务规范文件</block>
  <block id="445187b9344f95003c432e3e19764fd0" category="paragraph">您可以使用图形用户界面（ GUI ），命令行界面（ CLI ）或文本编辑器创建任务规范文件。这些文件用于对备份，还原或克隆操作执行预处理或后处理活动。</block>
  <block id="9b8b306887f1771d337848b27f3584c8" category="list-text">使用 GUI ， CLI 或文本编辑器创建任务规范文件。</block>
  <block id="f4e0e1dc5862b55b88da3a99e00909b5" category="paragraph">您可以根据以下示例任务规范文件的结构创建规范文件：</block>
  <block id="e69055c82e41695a29a430874f8482f5" category="list-text">输入脚本名称。</block>
  <block id="4728fe8421ee2cdfa119e7300554dcee" category="list-text">输入参数名称以及分配给参数的值。</block>
  <block id="3af9dc5fe17e5796fe2d1e2872a2db56" category="list-text">将 XML 文件保存在正确的安装目录中。</block>
  <block id="9c71944691e5502f33dde833f9071031" category="section-title">任务规范示例</block>
  <block id="62ca3325ff8f23b3214e1bde056ab395" category="summary">SnapManager 会自动处理备份的挂载，以使其可供主机使用。如果您使用 Oracle Recovery Manager （ RMAN ）等外部工具访问备份中的文件，则也可以挂载备份。</block>
  <block id="f63031317943c22703787f9511919c30" category="paragraph">如果您使用的是 RMAN ，则必须使用挂载操作更改备份的状态（允许访问），并使用卸载操作更改备份的状态（从而删除访问）。</block>
  <block id="0ffa7e4669fe1a8cee688a6e603def92" category="paragraph">smo backup mount 命令可显示包含备份的 Snapshot 副本已挂载的路径列表。</block>
  <block id="1cc0c0ce993b04db85d2bc4f0a73f349" category="admonition">您可以选择在备份挂载操作成功或失败后收集转储文件。</block>
  <block id="eab7490da2dac34af4038dbb416d2fa2" category="list-text">要挂载备份，请输入以下命令： smo backup mount -profile profile_name ｛ labelLabel [data | -archivelogs] | -iddid ｝ （ -host-host] ）（ -dump ）（ -quiet | -verbose ）</block>
  <block id="6452200805c92da3873824fa4e9ea76d" category="paragraph"><block ref="6452200805c92da3873824fa4e9ea76d" category="inline-xref-macro-rx"></block></block>
  <block id="b64310a19fbad14fca8ac5ba96c1dbee" category="summary">SnapManager 使用配置文件存储对给定数据库执行操作所需的信息。配置文件包含有关数据库的信息，包括其凭据，备份和克隆。通过创建配置文件，您不必在每次对该数据库执行操作时都指定数据库详细信息。</block>
  <block id="6665926e084be2399ca03301c1b25b30" category="doc">什么是配置文件</block>
  <block id="ba903e79aea5edfce7a88b01e3a09106" category="paragraph">一个配置文件只能引用一个数据库。同一数据库可以由多个配置文件引用。使用一个配置文件创建的备份无法从其他配置文件访问，即使这两个配置文件都引用同一数据库也是如此。</block>
  <block id="73fc38ddbaf00d9515e9c25c848804f0" category="paragraph">配置文件信息存储在存储库中。存储库包含数据库的配置文件信息以及用作数据库备份的 Snapshot 副本的相关信息。实际 Snapshot 副本存储在存储系统上。Snapshot 副本名称存储在包含该数据库的配置文件的存储库中。对数据库执行操作时，必须从存储库中选择配置文件。</block>
  <block id="5e7f944bb3024f08a84c231145d9e59c" category="paragraph">下图说明了存储库如何可以包含多个配置文件，但每个配置文件只能定义一个数据库：</block>
  <block id="ee0fcd9d0a1357be8f42399119425210" category="image-alt">Prnt en drw SMO smsap rep prof</block>
  <block id="b3bc3cf23a8803cbd7819012fea02f86" category="paragraph">在上述示例中， Repository2 位于数据库 DB1 上，而 Repository1 位于数据库 DB4 上。</block>
  <block id="1de3211eb55abc3d2d6037a139dd01a8" category="paragraph">每个配置文件都包含与该配置文件关联的数据库的凭据。通过这些凭据， SnapManager 可以连接到数据库并使用该数据库。存储的凭据包括用于访问主机，存储库，数据库的用户名和密码对，以及使用 Oracle Recovery Manager （ RMAN ）时所需的连接信息。</block>
  <block id="20e4dfe2bcd9da1c9623c9c7edbed737" category="paragraph">您无法访问使用不同配置文件中的一个配置文件创建的备份，即使这两个配置文件都与同一数据库相关联也是如此。SnapManager 会锁定数据库，以防止同时执行两个不兼容的操作。</block>
  <block id="587043a3ef98030abbd2bc609c4506fc" category="paragraph">* 用于创建完整备份和部分备份的配置文件 *</block>
  <block id="4cff5d7f599b3b71b63d13a9a6675851" category="paragraph">您可以创建配置文件来执行完整备份或部分备份。</block>
  <block id="ca10ad2234a1f5561402c806f7953c67" category="paragraph">您为创建完整备份和部分备份而指定的配置文件既包含数据文件，又包含归档日志文件。SnapManager 不允许此类配置文件将归档日志备份与数据文件备份分开。完整和部分备份会根据现有备份保留策略进行保留。您可以根据适合自己的时间和频率计划完整备份和部分备份。</block>
  <block id="ec843de5f04bf73de25aca378e84c729" category="paragraph">* 用于创建仅数据文件备份和仅归档日志备份的配置文件 *</block>
  <block id="d4a7f6cb7b0b6b07eb4f132a343fe061" category="paragraph">使用 SnapManager （ 3.2 或更高版本），您可以创建配置文件，以便将归档日志文件的备份与数据文件分开。使用配置文件分离备份类型后，您可以为数据库创建仅数据文件备份或仅归档日志备份。您还可以创建一个同时包含数据文件和归档日志文件的备份。</block>
  <block id="c6a0f4891a5da219bb5ad6bc1140f841" category="paragraph">保留策略会在归档日志备份未分离时对所有数据库备份进行适用场景。分离归档日志备份后， SnapManager 允许您指定不同的保留期限。</block>
  <block id="a4735412b6cc0a42dcde6d7695659bd4" category="paragraph">* 保留策略 *</block>
  <block id="76f5480867a184bde477ac679439b2f2" category="paragraph">SnapManager 会通过考虑保留计数（例如 15 个备份）和保留期限（例如 10 天的每日备份）来确定是否应保留备份。如果备份的期限超过为其保留类设置的保留期限，并且备份数量超过保留数量，则备份将过期。例如，如果备份计数为 15 （表示 SnapManager 已成功创建备份 15 ），并且为 10 天的每日备份设置了持续时间要求，则五个最旧，成功且符合条件的备份将过期。</block>
  <block id="3878196b14086443194031e1725d5b82" category="paragraph">* 归档日志保留持续时间 *</block>
  <block id="6d446a3161fc80cfa8ab9f115ecbb835" category="paragraph">分隔归档日志备份后，它们将根据归档日志保留期限进行保留。无论归档日志保留期限如何，使用数据文件备份创建的归档日志备份始终会与这些数据文件备份一起保留。</block>
  <block id="b35b9f7c71128c5646522eec23b6d650" category="inline-xref-macro">管理配置文件以实现高效备份</block>
  <block id="b128eb40fcbd11bd84f0d6ac2066a716" category="paragraph"><block ref="b128eb40fcbd11bd84f0d6ac2066a716" category="inline-xref-macro-rx"></block></block>
  <block id="2d35ec2ce919ee3ceb37d945298fb58f" category="summary">您可以使用 notification set 命令配置邮件服务器。</block>
  <block id="61c9170ff18e743d81374c0515ae8e65" category="doc">smo notification set 命令</block>
  <block id="4e0a87846c1f53e2aac239536f159554" category="list-text">* —发件人电子邮件 email_address*</block>
  <block id="24a757211ca1ff78d3f42a4e083aca31" category="paragraph">指定发送电子邮件警报的发件人的电子邮件地址。在 SnapManager 3.2 for Oracle 中，您可以在指定电子邮件地址的域名时使用连字符（ - ）。例如，您可以将发件人电子邮件地址指定为 -sender-email07lbfmdatacenter@continental-corporation.com 。</block>
  <block id="c387e3410fb19d5da8305b6bc6214ecd" category="list-text">* — mailhost mailhost*</block>
  <block id="90787dad9fa284a14804adc334fa619c" category="paragraph">指定处理电子邮件通知的主机服务器的名称或 IP 地址。</block>
  <block id="b2b5e22e49200bdba358311028634322" category="list-text">* — mailport mailport*</block>
  <block id="e5431fd59e811159accaa3600ad624c6" category="paragraph">指定邮件服务器端口号。</block>
  <block id="564c601d17f67b8d57537835f8368782" category="list-text">* — authentication -username username -password password*</block>
  <block id="db9ff82780db0890e42b65d836c8eb96" category="paragraph">指定电子邮件地址的身份验证详细信息。您必须指定用户名和密码。</block>
  <block id="3a46791fea136cb2d1db9982f19963e2" category="paragraph">指定存储库数据库的详细信息。</block>
  <block id="f90e9c10b0c1f757ce4b74c7845f1434" category="paragraph">指定用于访问存储库数据库的传输控制协议（ Transmission Control Protocol ， TCP ）端口号。</block>
  <block id="f574c2085cb9e4c4086854f3f682f3e9" category="paragraph">指定存储库数据库的名称。您可以使用全局名称或系统标识符。</block>
  <block id="d4b88edaf219e5bc190a35a95fe84b08" category="paragraph">指定存储库数据库所在主机的名称或 IP 地址。</block>
  <block id="f8314b451f154ec2c074effe644704bd" category="paragraph">指定存储库登录详细信息。这是可选的。如果未指定，则 SnapManager 默认为操作系统身份验证连接模式。</block>
  <block id="daae1c7603018357f30a6357b5015309" category="paragraph">以下示例将配置邮件服务器：</block>
  <block id="3117492c2749daa7aebdd179755d967c" category="summary">此命令可用于创建克隆规范模板。</block>
  <block id="c21bf625761cc8a6a4788fd9c3663deb" category="doc">smo clone template 命令</block>
  <block id="07e6f2375457c568a879477c7353b937" category="list-text">* 配置文件名称 *</block>
  <block id="fa9b14f530c0c6ff80c5eb0e1933cdb9" category="paragraph">指定要创建克隆规范的数据库。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="5417deef5ac8b26a360f77dbc56a2e50" category="list-text">*-backup-id guid*</block>
  <block id="cec420aab5b042303ee45b39ba0b52b0" category="paragraph">使用指定 GUID 从备份创建克隆规范。GUID 由 SnapManager 在创建备份时生成。使用 smo backup list 命令显示每个备份的 GUID 。</block>
  <block id="564c3b9d902965475bbc7d5536e5dbfa" category="list-text">*-backup-label backup_laber_name*</block>
  <block id="8b16c8f67277565d951f269e3bc7b7c7" category="paragraph">使用指定的备份标签从备份创建克隆规范。</block>
  <block id="d12b7696c57ff749d5853f3239c220a6" category="paragraph">以下示例将从标签为 full_backup_sales 的备份创建一个克隆规范模板。SMO clone template 命令完成后，克隆规范模板即完成。</block>
  <block id="161b535ac7cdb1fb2c6fa5f109986ee3" category="inline-xref-macro">正在创建克隆规范</block>
  <block id="6a68ca3c9efac73b1f2137ad8efd1258" category="paragraph"><block ref="6a68ca3c9efac73b1f2137ad8efd1258" category="inline-xref-macro-rx"></block></block>
  <block id="8e1bb1ee0640377c1d846773deabcc43" category="inline-xref-macro">从备份克隆数据库</block>
  <block id="ea06c7d5c99bff1b2c73efe7c3650af9" category="paragraph"><block ref="ea06c7d5c99bff1b2c73efe7c3650af9" category="inline-xref-macro-rx"></block></block>
  <block id="b5a21724bb3c7a671256eebe9b10b850" category="summary">SnapManager 支持数据保护，以保护二级或三级存储系统上的备份。您必须在源卷和目标卷之间设置 SnapMirror 和 SnapVault 关系。</block>
  <block id="c98b209561080c55486c053a078c4519" category="doc">SnapManager 中的数据保护简介</block>
  <block id="1762754d590f0597ad4e6245b6ff16bb" category="paragraph">您可以使用命令行界面（ CLI ）和图形用户界面（ GUI ）中的备份后脚本来保护主存储系统上的备份。</block>
  <block id="9e6f7016fc138782770ea138896a11d6" category="summary">通过 SnapManager ，您可以安装和使用自定义脚本执行各种操作。SnapManager 提供了用于备份，还原和克隆操作的插件，您可以使用这些插件在备份，还原和克隆操作前后自动执行自定义脚本。</block>
  <block id="91a9813665dbbdbc57e9c0b03a700879" category="doc">验证插件脚本的安装</block>
  <block id="6dcd1ebf4390170868ab9bcdfd967581" category="list-text">输入以下命令：</block>
  <block id="9e9c0d7b625879dbb56656280a808c1b" category="paragraph">SMO plugin check -osaccount OS db 用户名</block>
  <block id="25043a058b7920c58b1dd83826597612" category="paragraph">如果不提供 -osaccount 选项，则会为管理员而不是指定的用户验证插件脚本安装。</block>
  <block id="d5e18d13e87facb88d9ac578eb9fb703" category="paragraph">以下输出指示已成功安装 policy1 ， pre-plugin1 和 pre-plugin2 脚本。但是，后插件 1 脚本无法运行。</block>
  <block id="e149f7e08fb64f7dfbcb478f39fbaf95" category="summary">使用 SnapManager 可以为配置文件设置密码，以防止未经授权的访问。</block>
  <block id="e5b4b9c1720baa1fa29c4dc67d2f33ff" category="doc">授权对配置文件的访问</block>
  <block id="99790c6f6f6e407058ddb0475d0d6a06" category="list-text">输入以下命令： smo credential set -profile -name profile_name [-password password]</block>
  <block id="88a5f022cb1821303da2c00a68f6d685" category="inline-xref-macro">smo credential set 命令</block>
  <block id="c619c833bea03c985084924a3206cc8f" category="paragraph"><block ref="c619c833bea03c985084924a3206cc8f" category="inline-xref-macro-rx"></block></block>
  <block id="e882bd5e73eda2cc5fdfd0229917ddfc" category="summary">您可以删除凭据，以便用户无法再访问特定存储库。使用此命令可以仅删除一个资源的凭据，而不是清除所有资源的用户凭据。</block>
  <block id="83ec824abd6b28cbb853cb948150ed9a" category="doc">删除存储库的用户凭据</block>
  <block id="7db2d40a8f9a55ee2e66eeb30198c89e" category="paragraph">您可以删除凭据，以便用户无法再访问特定存储库。使用此命令，您可以仅删除一个资源的凭据，而不是清除所有资源的用户凭据。</block>
  <block id="bae8014cf3e7926d8330b80823d6b9ad" category="list-text">要删除用户的存储库凭据，请输入以下命令： smo credential delete -repositor-dbnamerepo_service_name-host-login -usernamerepo_username-portrepo_port</block>
  <block id="1bda47556704fd32b640bb2fbac7216f" category="summary">通过回滚操作，您可以在执行滚动升级后还原到早期版本的 SnapManager 。</block>
  <block id="50bfe1b14807df0ab5e2a10258911ee2" category="doc">什么是回滚</block>
  <block id="ab72bc6a713606134ee63eeef745541d" category="admonition">在执行回滚之前，您必须确保可以解析存储库数据库下的所有主机。</block>
  <block id="407d0e83aa889d5c369512eb86541908" category="paragraph">执行回滚时，将回滚以下内容：</block>
  <block id="09913049119a772b880e728bfc49af76" category="list-text">使用要回滚的 SnapManager 版本创建，释放和删除的备份</block>
  <block id="64fb7265c5d69eca025268f2ebb5605b" category="list-text">从使用要回滚的 SnapManager 版本创建的备份创建的克隆</block>
  <block id="1b6696e20a136d27fc7b780ceaa6af4f" category="list-text">使用要回滚的 SnapManager 版本修改的配置文件凭据</block>
  <block id="7444b86c9ef5544ddda726dfed60cc4d" category="paragraph">不支持您使用的 SnapManager 版本中提供的功能，但回滚到的版本中不提供这些功能。例如，在从 SnapManager 3.3 或更高版本回滚到 SnapManager 3.1 时，为 SnapManager 3.3 或更高版本中的配置文件设置的历史记录配置不会回滚到 SnapManager 3.1 中的配置文件。这是因为历史记录配置功能在 SnapManager 3.1 中不可用。</block>
  <block id="2248a9c6fed9dad5499157721b69b8db" category="summary">您可以找到有关可能发生的一些最常见问题以及如何解决这些问题的信息。</block>
  <block id="6200d9c3fa4900a532885e5f469495ff" category="paragraph">下表介绍了常见问题和可能的解决方案：</block>
  <block id="2f109292b69c163091a1ac1e1987a010" category="cell">问题驱动型问题</block>
  <block id="01f9bd6c48512ce2524bffaeff696fd1" category="cell">可能的解决方案</block>
  <block id="047ff3ea88acf729db4a3fcee2757d4f" category="paragraph">目标数据库和侦听器是否正在运行？</block>
  <block id="9d6d61620d49733ea8c7a90a1cbff308" category="paragraph">运行 lsnrctl status 命令。确保已将数据库实例注册到侦听器中。</block>
  <block id="1d48c1da45f44a61bc0599d907ddcfa5" category="paragraph">存储是否可见？</block>
  <block id="d789877cfe730dbce91133dc2c4d9335" category="list-text">右键单击 My Computer ，然后选择 * 管理 * 。</block>
  <block id="693c56500d235d7088f6c619c82d87a2" category="list-text">单击 * 存储 * &gt; * SnapDrive * &gt; * 主机名 * &gt; * 磁盘 * 。</block>
  <block id="28a0be7e858d5facbad7026edfd78ba0" category="paragraph">SnapManager 服务器是否正在运行？</block>
  <block id="254afc65d40d6c63d5bb4d6432a4358f" category="paragraph">检查状态，然后使用服务配置启动服务器。</block>
  <block id="9151f60d518a5d83c406568ca12b2a82" category="paragraph">在使用图形用户界面（ GUI ）或命令行界面（ CLI ）启动与配置文件相关的 SnapManager 命令之前，服务器必须正在运行。您可以在不启动服务器的情况下创建或更新存储库，但要执行所有其他 SnapManager 操作，服务器必须正在运行。</block>
  <block id="c25a4e39e37440652bcf948bb6ac28a9" category="paragraph">要启动 SnapManager 服务器，请输入以下命令： smo_server start 。</block>
  <block id="a7573eed4591b70751b100c3b8db7dce" category="paragraph">是否已正确设置运行 SnapManager 所需的所有组件？</block>
  <block id="959073acea704788da88899fce141693" category="paragraph">运行 smo system verify 命令以验证是否已正确设置 SnapDrive 。</block>
  <block id="5ef2cbee7037dd8313a23cc3d5717d78" category="paragraph">您的 SnapManager 版本是否正确？</block>
  <block id="10cb194353592005d67f611d64cb98e2" category="paragraph">使用 smo version 命令检查 SnapManager 版本。</block>
  <block id="84f6c750fea42ad370e3a24f78d58b14" category="paragraph">您是否查看过 SnapManager 日志文件以确定错误消息是否有助于隔离问题描述？</block>
  <block id="2b275e2f8579031b69225356afd598b8" category="paragraph">SnapManager 会将所有日志条目记录到一组轮换日志文件中。日志文件位于 C ： \program_files\NetApp\SnapManager for Oracle\logs 。</block>
  <block id="746b96808029edac8fa3021471dee23f" category="paragraph">如果您使用的是 Windows 2008 ，则日志位于以下位置：</block>
  <block id="72d722a3afaa4cc5a7ee133e3b4476fa" category="list-text">操作日志：</block>
  <block id="1c8024802a9636b610385068e07b453d" category="list-text">C ： \Program Files\NetApp\SnapManager for Oracle\var\log\smo</block>
  <block id="257c334a916fe461d13d13cfa2e7033a" category="list-text">客户端日志：</block>
  <block id="22d1c5f707e91228ea38323473a59140" category="list-text">C ： \Users\Administrator\AppData\Roaming\NetApp\SMO\3.3.0\</block>
  <block id="888aaf5c04ad35476629824d1d2a90fe" category="paragraph">在以下位置查看日志可能也会很有帮助：</block>
  <block id="664641f6a32b0709e3696385d04a5a29" category="paragraph">C ： \Documents and Settings\hostname\Application Data\NetApp\SMO\3.3.0\log</block>
  <block id="7ebe910bf14df23ecf32db8d73552f69" category="paragraph">每个操作日志都会写入其自己的日志文件中，格式为 smo__of_date_time.log 。</block>
  <block id="26857752846c36daddef6172246d6942" category="paragraph">如果归档日志存储在未运行 Data ONTAP 的存储系统上，是否已将其排除在使用 SnapManager 进行备份的考虑范围之外？</block>
  <block id="269d3e3363758a08f1cd192fcbbbe538" category="paragraph">使用 SMO.config 文件可以排除某些归档日志文件。对于 Windows ，此文件位于以下位置： C ： \program_files\NetApp\SMO\properties\SMO.config</block>
  <block id="d8630899812095cda54016ad54725841" category="paragraph">使用文件中所述的格式排除本地归档日志。对于追加信息，请 `S" 设置配置属性` " 主题。</block>
  <block id="f1dff60cc07485de3c739c77255a5682" category="paragraph">您还可以在使用 SnapManager 命令行界面创建备份时排除归档日志目标。对于追加信息，请参见 "`创建数据库备份` " 主题。</block>
  <block id="c1a23b18853103a2124e530e4bf3dcca" category="paragraph">您还可以在使用 SnapManager 图形用户界面创建备份时排除归档日志目标。</block>
  <block id="d937b1c7999a5af87eebe7040b8b19de" category="paragraph">是否已在尝试在 Windows 上安装或升级 SnapManager 的目录中打开 MS-DOS 窗口？</block>
  <block id="6f970ef5a5df885630c2d554a864288a" category="paragraph">您将看到一条类似以下内容的错误消息： `dDirectory C ： \Program Files\NetApp\SnapManager for Oracle\bin is currently in use by another program` 。您或其他用户打开的任何当前引用此目录的窗口必须关闭，然后才能继续安装。关闭窗口，然后重新尝试安装或升级。</block>
  <block id="32d045488e49ce019ead9e9283973b13" category="paragraph">是否无法连接到存储库？</block>
  <block id="cc15878ebd4f85c199baaf6ca38a5aec" category="paragraph">如果连接到存储库失败，请对存储库数据库运行 lsnrctl status 命令并检查活动服务名称。当 SnapManager 连接到存储库数据库时，它会使用数据库的服务名称。根据侦听器的设置方式，此名称可能是短服务名称或完全限定服务名称。当 SnapManager 连接到数据库进行备份，还原或其他操作时，它会使用主机名和 SID 。如果存储库由于当前无法访问而未正确初始化，您将收到一条错误消息，询问是否要删除该存储库。您可以从当前视图中删除存储库，以便可以对其他存储库执行操作。此外，请检查相应的服务是否正在运行。</block>
  <block id="9e5d417ab380d525b6e797f60b243152" category="paragraph">系统是否可以解析主机名？</block>
  <block id="66ac0af423af7fb08dd64e86fd5ab94f" category="paragraph">检查指定的主机名是否位于其他子网上。如果您收到一条错误消息，指出 SnapManager 无法解析主机名，请在主机文件中添加主机名。将主机名添加到位于 C ： \Windows\system32\drivers\etc\hosts ： xxx.xxx.xxx.xxx 主机名 IP 地址的文件中</block>
  <block id="7f704ddd13e41d57b7d74160ed6d0d30" category="paragraph">SnapDrive 是否正在运行？</block>
  <block id="6966b0adbd4b55937efbafe9d0f7d030" category="paragraph">要查看 SnapDrive 的状态，请转到服务，然后选择 SnapDrive 服务。</block>
  <block id="7ed7b53fd5144b717435d76f7d4d7f3b" category="paragraph">哪些存储系统配置为可使用 SnapDrive 进行访问？</block>
  <block id="f7c210e68f982160dd133de880871b0e" category="paragraph">要查找为 SnapDrive 配置的存储系统，请执行以下步骤：</block>
  <block id="b963beae0260f1a41c886b44590792fc" category="list-text">右键单击 * 我的电脑 * ，然后选择 * 管理 * 。</block>
  <block id="3ecfb0018904ba349310a286268af100" category="list-text">单击 * 存储 * &gt; * SnapDrive * 。</block>
  <block id="100abdc44dc54c57819538bd71884e15" category="list-text">右键单击主机名，然后选择 * 传输协议设置 * 。</block>
  <block id="046a5be6afed79e5853829df744151dd" category="paragraph">如何提高 SnapManager 图形用户界面的性能？</block>
  <block id="357b7dcffb132a5fe7ad247dc59a8129" category="list-text">确保您具有存储库，配置文件主机和配置文件的有效用户凭据。</block>
  <block id="1e10ad9e7ed9c21f7581eecfa106c23d" category="paragraph">如果凭据无效，请清除存储库，配置文件主机和配置文件的用户凭据。重置先前为存储库，配置文件主机和配置文件设置的相同用户凭据。有关追加信息重新设置用户凭据的信息，请参见 `S" 清除凭据缓存后设置凭据` " 。</block>
  <block id="982bfee1c660400a3fd3026aea627827" category="list-text">关闭未使用的配置文件。</block>
  <block id="79e326852b447b9b4d1de3e93883b3f4" category="paragraph">如果打开的配置文件数量更多，则 SnapManager 图形用户界面性能会降低。</block>
  <block id="1c369be0e0dbd9a8bbe764ac94c1cb60" category="list-text">检查是否在 SnapManager 图形用户界面的 * 管理 * 菜单下的用户首选项窗口中启用了 * 启动时打开 * 。</block>
  <block id="545262d0de573074d0bb100421694bec" category="paragraph">如果启用了此选项，则 C ： \Documents and Settings\Administrator\Application Data\NetApp\SMO\3.3.0\GUI\state 中的用户配置（ user.config ）文件将显示为 openOnStartup=profile 。</block>
  <block id="bd71b11ec528b01e4075b63ac83c6824" category="paragraph">由于已启用 * 启动时打开 * ，因此您必须在用户配置（ user.config ）文件中使用 lastOpenProfile 检查 SnapManager 图形用户界面中最近打开的配置文件： lastOpenProfiles=Profile1 ， PROFILE2 ， PROFILE3 ， ...</block>
  <block id="24eb9be620432f3b9f3224d7f0df6632" category="paragraph">您可以删除列出的配置文件名称，并且始终保持最小数量的配置文件处于打开状态。</block>
  <block id="19f7867bfb10917eb34b58bc3c00b94b" category="list-text">在基于 Windows 的环境上安装新版本的 SnapManager 之前，请删除以下位置提供的 SnapManager 客户端条目：</block>
  <block id="a6d0d470e8be3ed277a5c84c2c847113" category="paragraph">C ： \Documents and Settings\Administrator\Application Data\NetApp</block>
  <block id="e1ba478c1bfba8c51c2a1f09fc3ace22" category="paragraph">如果在后台同时启动和运行多个 SnapManager 操作，则 SnapManager 图形用户界面需要较长时间才能刷新。右键单击备份（该备份已删除，但仍显示在 SnapManager 图形用户界面中）时，备份或克隆窗口中不会启用该备份的备份选项。</block>
  <block id="0c3980551955120871944988a23a2807" category="paragraph">您需要等待 SnapManager 图形用户界面刷新，然后检查备份状态。</block>
  <block id="5f1bd78dd378cc9f1fe2be37fd87c1d1" category="paragraph">如果 Oracle 数据库未设置为英语，您会怎么做？</block>
  <block id="874adde6e96ba0ff56bbf574f5ca31b0" category="paragraph">如果 Oracle 数据库的语言未设置为英语， SnapManager 操作可能会失败。请将 Oracle 数据库的语言设置为英语：</block>
  <block id="5a3dccd0dbe818e52368ac096158377f" category="list-text">确认未设置 NLS_LANG 环境变量： echo%NLS_LANG_%</block>
  <block id="44c38493c2c3241d902c325f1f1c6819" category="list-text">将以下行添加到位于 C ： \SnapManager_install_directory\service 的 wrapper.conf 文件中： set.NLS_LANG_=America_America.WE8MSWIN1252</block>
  <block id="2aa6069909f91a5556c75962a44326f4" category="list-text">重新启动 SnapManager 服务器： smo_server restart</block>
  <block id="2a823f3776565c5b6f8bb1d6f57bcc98" category="admonition">如果系统环境变量设置为 NLS_LANG ，则必须编辑脚本，以使其不会覆盖 NLS_LANG 。</block>
  <block id="de3889dc72dd7426671cef04268fdd0a" category="paragraph">如果存储库数据库指向多个 IP 且每个 IP 都有不同的主机名，则在备份计划操作失败时，您会怎么做？</block>
  <block id="9743bf83f43f51a40aee581c48bda7ed" category="list-text">停止 SnapManager 服务器。</block>
  <block id="178597b8edbb1fb0d20984cd297a75f2" category="list-text">从要触发备份计划的主机中删除存储库目录中的计划文件。</block>
  <block id="3d637d70db1ed2e91bd5ba65dfbc17c9" category="paragraph">计划文件名可以采用以下格式：</block>
  <block id="281da28fcbcccd2d28b993b13bb4822c" category="list-text">repository_repo_username#repository_database_name#repository_host#repo_port</block>
  <block id="b4f925bc97b7605457564dcc56ed7a4d" category="list-text">repository-repo_usernameerepository_database_name-repository_host-repo_port * 注意： * 您必须确保以与存储库详细信息匹配的格式删除计划文件。</block>
  <block id="f9061a7ba4170e7cd4246f734645f501" category="list-text">重新启动 SnapManager 服务器。</block>
  <block id="63a280f9fa7f65215ebabfd0e9b89ed2" category="list-text">从 SnapManager 图形用户界面打开同一存储库下的其他配置文件，以确保不会遗漏这些配置文件的任何计划信息。</block>
  <block id="88d2272b8aad9f32071cd2fea1320c74" category="paragraph">如果 SnapManager 操作失败并出现凭据文件锁定错误，您会怎么做？</block>
  <block id="e8725c72353a332b94bcee4129becbf5" category="paragraph">SnapManager 会在更新前锁定凭据文件，并在更新后将其解锁。如果同时运行多个操作，其中一个操作可能会锁定凭据文件以进行更新。如果另一个操作同时尝试访问锁定的凭据文件，则操作将失败并显示文件锁定错误。</block>
  <block id="37ef77200768833a23f4b6dd4c01a155" category="paragraph">根据同时运行的频率，在 SMO.config 文件中配置以下参数：</block>
  <block id="458414db0abfc551e1c96d6336a117b9" category="list-text">fileLock.retryInterval = 100 毫秒</block>
  <block id="118b599bd2f15c9d03fd11bcdd4e8195" category="list-text">fileLock.timeout = 5000 毫秒</block>
  <block id="c225d54c9ffa2976f934157de900b850" category="admonition">分配给参数的值必须以毫秒为单位。</block>
  <block id="e363e56a21201fdf97e90cb9be2fa43a" category="paragraph">如果备份验证操作的中间状态在 " 监控 " 选项卡中显示失败，即使备份验证操作仍在运行，您会怎么做？</block>
  <block id="38ff3e128e85df70136684de92274d3f" category="paragraph">此错误消息会记录在 sm_gui.log 文件中。您必须在日志文件中查看以确定 operation.s检测 信号间隔和 operation.s检测 信号阈值参数的新值，这些参数将解决此问题描述。</block>
  <block id="a5c434100632184153c8056232fb38ef" category="list-text">在 SMO.config 文件中添加以下参数：</block>
  <block id="f260f00f68346efd36446984bada6f57" category="list-text">operation.s检测 信号间隔 = 5000</block>
  <block id="c22d48382a320a99480a234aa92e50eb" category="list-text">operation.s检测 信号阈值 = 5000 SnapManager 分配的默认值为 5000 。</block>
  <block id="15bc33f9303fc9676a05ead2080a574e" category="list-text">为这些参数分配新值。</block>
  <block id="9d6bb2232761448cd23b5430ffff2259" category="list-text">重新启动 SnapManager 服务器并重新执行此操作。</block>
  <block id="2a88f06a56d539b18a7c67e3a9a9b516" category="paragraph">遇到堆空间问题描述时应如何操作？</block>
  <block id="889b01ff0f681134f26032135ffbedaa" category="paragraph">在 SnapManager for Oracle 操作期间遇到堆空间问题描述时，必须执行以下步骤：</block>
  <block id="d023dc06ce18ed96911a7e73e0c6fe62" category="list-text">导航到 SnapManager for Oracle 安装目录。</block>
  <block id="77aaa6c64a59e291fd80aa10e7b8c170" category="list-text">从 installationdirectory\bin\sunchjava 路径打开此启动 java 文件。</block>
  <block id="c1d77d8522145b46029426e7750dfc78" category="list-text">增加 java -Xmx160m java heave-space 参数的值。</block>
  <block id="8dfdda5b8e712539d7b3d53450366cb0" category="paragraph">例如，您可以将默认值 160 米增加到 200 米。</block>
  <block id="b2b0bbe274124d09413140b296cbdb4c" category="admonition">如果在早期版本的 SnapManager for Oracle 中增加了 Java heave-space 参数的值，则应保留该值。</block>
  <block id="c60463aba24a82b265e347851e020d8f" category="paragraph">如果 SnapManager 服务未在 Windows 环境中启动且显示以下错误消息，您会执行什么操作： Windows 无法在本地计算机上启动 Snap Manager 。有关详细信息，请查看系统事件日志。如果此服务不是 Microsoft 服务，请联系服务供应商，并参考特定于服务的错误代码 1 ？</block>
  <block id="16f1f62b8744c64300f99fb398ef87d1" category="paragraph">在 Installation_directory\service 的 wrapper.conf 文件中配置以下参数。</block>
  <block id="957e2960657e9c184d1508711880bd22" category="list-text">wrapper 启动超时参数定义了包装程序启动 Java 虚拟机（ JVM ）与应用程序已启动的 JVM 响应之间允许的最长时间。</block>
  <block id="f96483f0d7c59b9a4a5a304b0bfeb772" category="paragraph">默认值设置为 90 秒。但是，您可以更改大于 0 的值。如果指定的值无效，则会改用默认值。</block>
  <block id="d13ced20d7b1752829d8edc2b612dca8" category="list-text">wrapper.ping.timeout 参数定义了从包装程序 ping JVM 到 JVM 响应之间允许的最长时间。默认值设置为 90 秒。</block>
  <block id="791b3bc313a5cadfeedb949e4edaa3a0" category="paragraph">但是，您可以更改为大于 0 的值。如果指定的值无效，则会改用默认值。</block>
  <block id="07cf8108fd2aa28164e2110c9bf4c66c" category="summary">要从备用位置还原数据库备份，请使用以下主要步骤，本节将对其中的每个步骤进行进一步说明。</block>
  <block id="46bb3ed83e66f354612f5587df3dc3f2" category="doc">从备用位置还原备份概述</block>
  <block id="f9c83747a235ff15d603da67c67651e5" category="list-text">根据您的数据库布局以及需要还原的内容，执行以下操作之一：</block>
  <block id="b36df39c95763ac701f69a514d1e81d3" category="list-text">将所需的数据文件从磁带， SnapVault ， SnapMirror 或任何其他介质还原到数据库主机上挂载的任何文件系统。</block>
  <block id="7649c693c5d4a104d594538e3711edda" category="list-text">还原所需的文件系统并将其挂载到数据库主机上。</block>
  <block id="e6eeb1137d27a7c2846f2ea1af477849" category="list-text">连接到本地主机中所需的原始设备。</block>
  <block id="0ae1037a6baa3c6c3a6ea90b60d71f08" category="list-text">创建一个还原规范可扩展标记语言（ Extensible Markup Language ， XML ）文件，其中包含 SnapManager 从备用位置还原到原始位置所需的映射。将文件保存在 SnapManager 可以访问的位置。</block>
  <block id="1dd021033f22ad6529207508301b021f" category="list-text">使用 SnapManager 使用还原规范 XML 文件还原和恢复数据。</block>
  <block id="c6c99f8944e2a2c70cc993e1fa7c0b17" category="summary">您可以找到有关克隆操作期间可能发生的情况以及如何解决这些问题的信息。</block>
  <block id="4c933f02bc264decb521e5d751b8f989" category="doc">对克隆问题进行故障排除</block>
  <block id="9a717b6435e24f212d740a3a9a281b5d" category="cell">现象</block>
  <block id="7aebfa1e2291377e040de92d7f7f335f" category="cell">临时解决策</block>
  <block id="909450849abded7ec05490ff1706c9b3" category="paragraph">如果将归档目标设置为 use_DB_recovery_file_dest ，则克隆操作将失败。</block>
  <block id="29d1648c32d99ea02678234b5e290028" category="paragraph">当归档目标引用 use_DB_recovery_file_dest 时，闪存恢复区域（ Flash Recovery Area ， FRA ）会主动管理归档日志。在克隆或还原操作期间， SnapManager 不使用 FRA 位置，因此操作失败。</block>
  <block id="f5e45a50223b0cd3ebef5c2acced504d" category="paragraph">将归档目标更改为实际归档日志位置，而不是 FRA 位置。</block>
  <block id="aefa980bbf127e1e9e54e69ce8e290c8" category="paragraph">克隆操作失败，并显示以下错误消息： Cannot Perform operation ： Clone Create 。根发生原因： ORACLE-001 ：执行 SQL 时出错： [alter database open RESETLOGS ； ] 。命令返回： ora-01195 ：文件 1 的联机备份需要更多恢复才能保持一致。</block>
  <block id="f1e715b1a967fc51de22cd9afdb132bc" category="paragraph">如果 Oracle 侦听器无法连接到数据库，则会发生此问题描述。</block>
  <block id="f758cea613f4863b5f03ec0afdb2324c" category="paragraph">如果使用 SnapManager 图形用户界面克隆备份，请执行以下操作：</block>
  <block id="3c14db3fc8978de6f0874fecf4072acb" category="list-text">在存储库树中，单击 * 存储库 * &gt; * 主机 * &gt; * 配置文件 * 以显示备份。</block>
  <block id="a71b9cf1aea9dd7d7ae1955ba1b94d75" category="list-text">右键单击要克隆的备份，然后选择 * 克隆 * 。</block>
  <block id="1df39ae9316ae9b49d6338771bace1ad" category="list-text">在克隆初始化页面上，输入必需值并选择克隆规范方法。</block>
  <block id="b150f4993ac2bfd5da0c61a3e0b021b6" category="list-text">在克隆规范页面上，选择 * 参数 * 。</block>
  <block id="52ca9614c8e1a4e991e5e9bc713474da" category="list-text">单击 * + 参数 * 选项卡。</block>
  <block id="631f736d3b3e2dba04582d7a530e8c8b" category="list-text">在 * 参数 Name* 字段中，输入名称作为 local_listener ，然后单击 * 确定 * 。</block>
  <block id="99316b8459b1576a34789b2aa77a60ca" category="list-text">选中 local_listener 行的 * 覆盖默认值 * 复选框。</block>
  <block id="dc633c11536f490ec145d127e7bd93b0" category="list-text">单击任何参数，然后双击 local_listener 参数，并输入以下值：（ address= （ protocol=tcp ）（ host=&lt;yor_host_name&gt; ）（ port=&lt;port#&gt; ））</block>
  <block id="5f6f7dcee84875d2b9f0566017c167f9" category="list-text">单击 * 保存到文件 * 。</block>
  <block id="06a96732f5e17d0f179f50904263399b" category="list-text">单击 * 下一步 * 并继续执行克隆创建向导。</block>
  <block id="74a5ff2a53fb873e99cf446277d7fe7b" category="paragraph">如果使用命令行界面克隆备份，则必须在克隆规范文件的 * &lt;parameters&gt;* 标记中包含以下信息：</block>
  <block id="ebe4af0261e49d6f1ca6c707b345a512" category="paragraph">克隆操作失败，并显示一条错误消息，指出您正在使用的挂载点已在使用中。</block>
  <block id="ca610739f238f238477b352f5f4bb26e" category="paragraph">SnapManager 不允许您通过现有挂载点挂载克隆。因此，不完整的克隆不会删除挂载点。</block>
  <block id="b792a4fc4617cbb513a1f09fbd336e40" category="paragraph">指定要由克隆使用的其他挂载点，或者卸载有问题的挂载点。</block>
  <block id="4f00d10f13e9ff72db82d01f9a3662d1" category="paragraph">克隆操作失败，并显示一条错误消息，指出数据文件的扩展名不是 .dbf 。</block>
  <block id="b7a929eea23b0f2c23cb408cd07327d9" category="paragraph">某些版本的 Oracle NID 实用程序无法处理数据文件，除非这些文件使用扩展名 .dbf 。</block>
  <block id="73950495ebfa792fb3153927d23e94b1" category="list-text">重命名数据文件以使其扩展名为 .dbf 。</block>
  <block id="def9f6aa0332dcac367c80459910679b" category="list-text">重复备份操作。</block>
  <block id="ffe6430b96b4c00d6c3b95743b921e02" category="list-text">克隆新备份。</block>
  <block id="ba2b8a55ec2eab0f8750e018a6e62c47" category="paragraph">克隆操作因要求未满足而失败。</block>
  <block id="5248b509434d38ab75aae561fdbbd4ef" category="paragraph">您正在尝试创建克隆；但尚未满足某些前提条件。</block>
  <block id="98e09118a42280be906e7211e11e5ad9" category="paragraph">按照 _creating a cloner_ 中所述继续操作以满足前提条件。</block>
  <block id="db5245a0592a085f755bdfa89d0eca3e" category="paragraph">SnapManager for Oracle 无法克隆 Oracle 10gR2 （ 10.2.0.5 ）物理 Oracle 数据防护备用数据库。</block>
  <block id="45149bb031ac07951d0b83c1ff106ec9" category="paragraph">在对使用 Oracle Data Guard 服务创建的 Oracle 10gR2 （ 10.2.0.5 ）物理备用数据库执行脱机备份时， SnapManager for Oracle 不会禁用托管恢复模式。由于此问题描述，所做的脱机备份不一致。当 SnapManager for Oracle 尝试克隆脱机备份时，它甚至不会尝试对克隆的数据库执行任何恢复。由于备份不一致，克隆的数据库需要恢复，因此 Oracle 无法成功创建克隆。</block>
  <block id="dd141ce256a3f8c037773ac7ccc2271a" category="paragraph">将 Oracle 数据库升级到 Oracle 11gR1 （ 11.1.0.7 修补程序）。</block>
  <block id="ebb38d795e461f126ef45db64bd132da" category="summary">通过适用于 Oracle 的 SnapManager （ 3.2 或更高版本），您可以计划在非高峰时段定期进行数据库备份，以保持高性能。要计划备份，您可以创建一个配置文件，其中包括数据库信息和保留策略，然后设置备份计划。</block>
  <block id="8de3159917aac6f519f450be9cbfd666" category="doc">计划数据库备份</block>
  <block id="a3cb1326bdd497660defa98daef33e28" category="admonition">您必须以管理员身份计划备份。如果您尝试以非现有用户的身份计划备份， SnapManager 将显示错误消息： Invalid user ： username ： cannot create schedule backup for a given use.</block>
  <block id="ca2dec900b536e6bfcfaf73c9b4167c9" category="paragraph">以下是一些与计划相关的任务：</block>
  <block id="2894b0745f8a5f9f0d2b6659cafd460e" category="list-text">计划每小时，每天，每周，每月或一次进行数据库备份。</block>
  <block id="406f899542f49c9b2a94c0efe330b557" category="list-text">查看与配置文件关联的计划备份列表。</block>
  <block id="d333a3aeec9c3a1d66658d05e49653bc" category="list-text">更新计划的备份。</block>
  <block id="fd31f21ef9981c17c8ce903993bc74a0" category="list-text">临时暂停计划。</block>
  <block id="52dfb9daa97ca262a6eae94b4165e698" category="list-text">恢复暂停的计划。</block>
  <block id="94fef0a8b2467566daef9fc0bf660dbc" category="list-text">删除计划</block>
  <block id="ddda56c9b62f543b76978fd208cc5c23" category="admonition">如果正在为该计划运行计划备份，则会禁用 * 立即运行菜单操作 * 复选框。</block>
  <block id="dced0da9ff9c418e4ea18c0760321259" category="summary">安装 SnapManager 之前，您必须了解一般配置要求。</block>
  <block id="83dea226aee9e61b5355aae7b02097a1" category="doc">支持的常规配置</block>
  <block id="08e45e01507d91b323f7b661ec442ae8" category="paragraph">SnapManager 支持以下常规配置：</block>
  <block id="6503437b8eb695b285e2267dcfd8cec9" category="list-text">一种非集群配置，其中一个主机连接到一个存储系统</block>
  <block id="f9ff17ab08bfadf52449f64c2bfddc55" category="list-text">每个主机一个 SnapManager 服务器实例</block>
  <block id="517f434908c9e4ee63fb38037ebbdd99" category="list-text">包含运行 Data ONTAP 控制器故障转移的存储系统的任何拓扑</block>
  <block id="28babf3eaad34e695fdb1bb07d931737" category="paragraph">有关 SnapManager 支持的所有存储类型和版本的信息，请参见《 SnapManager 和 SnapDrive 兼容性表》。</block>
  <block id="68a439da5a8fdf42f619f34e804ce0d7" category="summary">SnapManager for Oracle 利用 Snapshot 副本， SnapRestore 和 FlexClone 技术简化并自动执行数据库备份，恢复和克隆。</block>
  <block id="409c0fad2c3520dcb625588c364e5e20" category="doc">SnapManager for Oracle 的功能</block>
  <block id="13a5fb83e17e3e72c4f294cdb031a6af" category="paragraph">SnapManager 为数据库管理员（ Database Administrator ， DBA ）提供了以下优势：</block>
  <block id="e52ca2b143d412ea88fda0ff7de9009b" category="list-text">使用数据库配置文件</block>
  <block id="e00c9baff8646aab82afe39591159881" category="list-text">您可以在配置文件中组织和保留主机和数据库信息。</block>
  <block id="b5dfaf2d2662bee58926c52adb645809" category="paragraph">在基于配置文件启动备份时，您可以重复使用此信息，而不必为每次备份重新输入此信息。此外，您还可以通过 SnapManager 使用配置文件快速监控操作。</block>
  <block id="320bb91f038b703d32d810960a0f46e3" category="list-text">在配置文件中，您可以定义 Snapshot 副本的命名模式并输入自定义（前缀或后缀）文本，以便所有 Snapshot 副本都可以使用符合业务策略的相同命名约定。</block>
  <block id="0ac0fee5d534495f47f69efaba48595a" category="list-text">您无需知道存储系统名称，因为数据库文件会自动映射到关联的存储。</block>
  <block id="ac56e4ed02c9bcc53a3d920e45ba0982" category="list-text">创建新配置文件时，您可以指定将归档日志备份与数据文件备份分开的选项。</block>
  <block id="b077d957cbc2923b55f8fd51651e1e20" category="paragraph">您还可以更新现有配置文件，以便将归档日志备份与数据文件备份分开。</block>
  <block id="69026e8dce5098ec42891bb81cb0a028" category="list-text">执行数据库备份操作</block>
  <block id="6c867c954831a564dd83e66ef715d9fc" category="list-text">备份完整和部分数据库</block>
  <block id="a2ce04eaa58c4276529a0e149162b09e" category="list-text">您可以以节省空间的方式快速创建完整备份或部分备份，从而可以更频繁地执行备份。</block>
  <block id="b20dcbaeb920308bbeefcea6393a47a1" category="paragraph">完整的数据库备份将所有数据文件，控制文件和归档日志文件都包含在一个备份中。</block>
  <block id="be2726a34dbd513aa77619b983dd5930" category="paragraph">部分数据库备份包含指定的数据文件或表空间，所有控制文件和所有归档日志文件。</block>
  <block id="28e63787477d46477ace866044affbbe" category="list-text">您可以使用后处理脚本保护到二级存储的备份。</block>
  <block id="2c61eff8f7f0aee824b72d508dcc6ac1" category="list-text">您可以按每小时，每周，每天，每月或无限制计划备份。</block>
  <block id="123af9318db46bf97fa0a9a5815c7571" category="list-text">单独备份数据文件和归档日志文件</block>
  <block id="946ae9532b67b616c39721aa600c2d11" category="list-text">通过 SnapManager （ 3.2 或更高版本），您可以分别备份数据文件和归档日志文件。要执行此操作，您必须指定在创建或更新配置文件时分隔归档日志文件的选项。</block>
  <block id="9dda3231216997d37a7974fc194a6dd3" category="list-text">您可以在保留策略中指定要保留数据文件备份的计数和持续时间。</block>
  <block id="6e86ed0ab11be152f561b9bd764638bb" category="list-text">您可以指定归档日志文件备份在归档日志保留期限内保留的持续时间。</block>
  <block id="fce03ef769939d2fe3bfa0a8ec39e263" category="list-text">SnapManager （ 3.2 或更高版本）还可以释放具有重复归档日志文件的归档日志备份，并仅保留具有唯一归档日志文件的归档日志备份，从而将归档日志备份整合为最少数量的备份。但是，可以选择禁用此整合。</block>
  <block id="20a393ae13d7740d49582c934873c1cb" category="list-text">管理归档日志文件</block>
  <block id="b8ba1238334438a424b77503214416e8" category="list-text">通过 SnapManager （ 3.2 或更高版本），您可以从归档日志目标位置对归档日志文件进行修剪。</block>
  <block id="859393988ad19d0b33e70c1a28224d0a" category="paragraph">清除包含这些归档日志文件的归档日志备份后，会释放经过修剪的归档日志文件占用的空间。</block>
  <block id="746bbacbfeec2973d65005ff8f06b996" category="list-text">SnapManager 可确保先备份归档日志文件，然后再将其从归档日志目标中删除。</block>
  <block id="646d06bab76c4fc970dc20a16f882fde" category="paragraph">未备份的归档日志文件不会进行修剪。</block>
  <block id="0c2dd5926501ac9fe45bae5a7ed9d64b" category="list-text">SnapManager 可确保将归档日志文件发送到数据防护备用数据库，同时从数据防护主数据库中删除归档日志文件。</block>
  <block id="c13b32f68e54a6a35b03cbe2756b6919" category="list-text">SnapManager 可确保归档日志文件通过 Oracle 的流捕获进程（如果有）捕获。</block>
  <block id="c76e3867213cff8946148c6510af0736" category="list-text">建议</block>
  <block id="c8bff3b09f83bab6b0ff0dc8a4830b7b" category="list-text">要有效管理归档日志目标空间，您必须创建归档日志备份，并对归档日志文件及其进行修剪。</block>
  <block id="833c8e99dacac4d6e6bf88127365bf2c" category="list-text">SnapManager 通过释放具有重复归档日志文件的归档日志备份，并仅保留具有唯一归档日志文件的归档日志备份，从而整合归档日志备份，以包含最少数量的备份。</block>
  <block id="3caec675e2f8d49af41ed12c53881037" category="paragraph">但是，可以选择禁用此整合。将释放包含重复归档日志文件的归档日志备份，并保留具有唯一归档日志的单个备份。</block>
  <block id="c23168caca7ad8e33c3f0b423dc60dc3" category="list-text">执行数据库还原操作</block>
  <block id="0fc2c51236bdeb7eb9b0a90a249db445" category="list-text">您可以执行基于文件的还原操作。</block>
  <block id="9ce26a73466c3879da430e4381dd3484" category="paragraph">在执行还原操作之前，您还可以预览还原操作并获取还原操作的文件分析。</block>
  <block id="a097515f1764fdc771850433cbddb334" category="list-text">您可以使用 SnapRestore 缩短恢复数据库的平均时间。</block>
  <block id="6c39cd968187b1fe44e57515aa29e016" category="list-text">通过 SnapManager （ 3.2 或更高版本），您可以使用备份中的归档日志文件自动恢复数据库，即使归档日志文件在归档日志目标中不可用也是如此。</block>
  <block id="4f201c70f0ec3e7aba2c982d345095ae" category="paragraph">SnapManager （ 3.2 或更高版本）还提供了一种在一定程度上使用外部位置的归档日志文件来恢复数据库的方法。</block>
  <block id="efb8a50cdc93264eabf9ba22c6bdb5dc" category="list-text">为测试和开发执行数据库克隆</block>
  <block id="1d27b3804813bdc2dfecbcf7837ab80a" category="list-text">您可以创建数据库的克隆，以便在生产环境之外设置数据库。</block>
  <block id="83df46530fc2215d9d69ef6c0a2ec7c8" category="paragraph">例如，您可以在开发和测试环境中进行克隆，以测试对重要系统的升级。</block>
  <block id="ec0ab14f456c1c263522126b2d3661ea" category="list-text">您可以克隆主存储系统上的数据库。</block>
  <block id="47c14a9084308299c26d430b98661a52" category="list-text">通过 SnapManager （ 3.2 或更高版本），您可以使用备份中提供的归档日志文件克隆数据文件备份。</block>
  <block id="8dec766cad398fde5378564f4d890390" category="list-text">只有在与归档日志备份一起进行时，才能克隆数据文件备份。</block>
  <block id="5ea8117ba4e264189cd778135d129bac" category="list-text">如果归档日志文件在特定范围内单独创建的归档日志备份中可用，则也可以克隆数据文件备份。</block>
  <block id="8009c32c47a397a7333511f52e13ee97" category="list-text">您还可以使用 Oracle 可访问的任何外部位置的归档日志文件在一定程度上克隆独立数据库的数据文件备份。</block>
  <block id="f843fdff421f99d20ec9f6a9ed49ec42" category="list-text">如果可以从外部位置进行备份，则可以在克隆期间指定外部位置，以便将克隆的数据库恢复到一致状态。</block>
  <block id="6c390a54cb2f2ede0924b1ef73d55967" category="list-text">不支持克隆仅归档日志备份。</block>
  <block id="0db377921f4ce762c62526131097968f" category="list-text">常规</block>
  <block id="c56458e4156b3f833282370ee2e92b49" category="list-text">与现有 Oracle 工具集成，例如 Recovery Manager （ RMAN ）。</block>
  <block id="e8172041c688778890b9b46b7ae05237" category="paragraph">SnapManager 为存储管理员提供了以下优势：</block>
  <block id="bbed6fa571bd691fbce8101bedb5b426" category="list-text">支持不同的 SAN 协议。</block>
  <block id="31d4dd201943857913934abf085f6ad9" category="list-text">用于根据最适合您环境的备份类型（完整或部分）优化备份。</block>
  <block id="2980c6ba0d1d68eda3328e86d07905b0" category="list-text">创建节省空间的数据库备份。</block>
  <block id="e6a489f1f991ce417ad50443fd59b872" category="list-text">创建节省空间的克隆。</block>
  <block id="04faf3ebdcd231c54f3aa89a24487cd1" category="paragraph">SnapManager 还支持以下 Oracle 功能：</block>
  <block id="6eee5fcefc94fc46f83d805b50a1aeef" category="list-text">SnapManager 可以使用 Oracle 的 RMAN 对其备份进行编目。</block>
  <block id="5d9ba6433e3aae3d6c5153393435549c" category="paragraph">如果使用 RMAN ， DBA 可以利用 SnapManager 备份并保留所有 RMAN 功能的值，例如块级还原。SnapManager 允许 RMAN 在执行恢复或还原时使用 Snapshot 副本。例如，您可以使用 RMAN 还原表空间中的表，并从 SnapManager 创建的 Snapshot 副本执行完整的数据库和表空间还原和恢复。RMAN 恢复目录不应位于要备份的数据库中。</block>
  <block id="779e38aaf193636fbba5a1dfe2ad212d" category="summary">SnapManager 通过提供从一个界面监控操作的方法，降低了数据库管理员跟踪不同操作状态所需的详细信息级别。</block>
  <block id="12c8557161d40b509cd508b291001de2" category="doc">跟踪详细信息并生成报告</block>
  <block id="6e02d9f230c61810a5a991f034ab8c7f" category="paragraph">管理员指定应备份的数据库后， SnapManager 会自动识别要备份的数据库文件。SnapManager 将显示有关存储库，主机，配置文件，备份和克隆的信息。您可以监控特定主机或数据库上的操作。</block>
  <block id="ad0ab2ebd9145cfb8e5f185141664e77" category="summary">此命令将恢复暂停的备份计划。</block>
  <block id="43cafa1692c67db9d26f59217e0b1354" category="doc">smo schedule resume 命令</block>
  <block id="fe8f1a38c88e5a2706b3e4d665f0e66a" category="paragraph">指定与要恢复暂停的备份计划的数据库相关的配置文件的名称。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="1566fbee394095d9a9b29d5eaca2d9fa" category="summary">您创建的任务前或任务后脚本必须遵循适用于 Oracle 插件的标准 SnapManager 结构。</block>
  <block id="d61a3f40f08d1c89bcdf7a6a09896ea1" category="paragraph">任务前和任务后脚本必须包括以下操作：</block>
  <block id="0ba4439ee9a46d9d9f14c60f88f45f87" category="list-text">检查</block>
  <block id="0d16430e9f0aa8879ba9dac2540543fc" category="list-text">描述</block>
  <block id="ec0cd3cb91fe82b9501f62a528eb07a9" category="list-text">执行</block>
  <block id="655fcdfb684da036563258406028bd8d" category="paragraph">如果未在任务前或任务后脚本中指定其中任一操作，则此脚本将无效。</block>
  <block id="5a4e6c2459516f69ef028662ef8b2f49" category="paragraph">对任务前或任务后脚本运行 SMO plugin check 命令时，这些脚本返回的状态显示错误（因为返回的状态值不是零）。</block>
  <block id="2a78ed76450c3cb42320882b3e055b31" category="cell">操作</block>
  <block id="e918213867a9776e96c4af87cee13e80" category="paragraph">SnapManager 服务器运行 plugin.sh -check 命令，以确保系统对插件脚本具有执行权限。您还可以在远程系统上检查文件权限。</block>
  <block id="18a6bc137c2f0838e438645a656b5d71" category="paragraph">SnapManager 服务器运行 plugin.sh -describe 命令以获取有关脚本的信息并与规范文件提供的元素匹配。插件脚本必须包含以下问题描述信息：</block>
  <block id="a9b6090232b988b9d437478c8862eb17" category="list-text">sm_pI_name ：脚本名称。您必须为此参数提供一个值。</block>
  <block id="39df962978f10eef62fd8b8b20431b7d" category="list-text">sm_pI_description ：脚本用途的问题描述。您必须为此参数提供一个值。</block>
  <block id="8f765693ce8a1893a3c2e6372bc6a118" category="list-text">sm_pI_context ：应运行脚本的环境，例如 root 或 oracle 。您必须为此参数提供一个值。</block>
  <block id="c145a5adb43355117d6b2da1b273240a" category="list-text">sm_pI_timeout ： SnapManager 等待脚本完成处理并终止执行的最长时间（以毫秒为单位）。您必须为此参数提供一个值。</block>
  <block id="f76a936c58940fde8b9bf0b5dd8570f4" category="list-text">sm_pI_parameter ：插件脚本执行处理所需的一个或多个自定义参数。每个参数都应列在一个新的输出行中，并包含参数的名称和问题描述。脚本完成处理后，环境变量将为脚本提供参数值。</block>
  <block id="5198a162a9f20c7e26b22c0f40a31c2f" category="paragraph">以下是后续 _ 活动脚本的示例输出。</block>
  <block id="2f670758d759f37361d68c3a88750f7b" category="paragraph">SnapManager 服务器运行 plugin.sh -execute 命令启动脚本以执行脚本。</block>
  <block id="86f47cfcfa12fd39bbfc0f4627363fe2" category="summary">使用此命令可以删除与一个配置文件，多个配置文件或存储库下的所有配置文件关联的 SnapManager 操作历史记录。</block>
  <block id="ada34eb1f471a5f17a06e3e33816e398" category="doc">smo history remove 命令</block>
  <block id="303d74d2c279c6e72ba2a93333f7d42a" category="paragraph">repository 后面的选项用于指定存储配置文件的数据库的详细信息。</block>
  <block id="3af110e979dcf63c7bbc595032c3ca12" category="list-text">* — dbname repo_dbname*</block>
  <block id="603b5cb30eae55fc01975449c8da45c8" category="paragraph">指定存储配置文件的数据库的名称。使用全局名称或 SID 。</block>
  <block id="4d84e50c8c74a8a44644494a1d8f05db" category="paragraph">启动存储库登录详细信息。</block>
  <block id="be0112c2319a7cf54dd58e51518b8814" category="paragraph">指定访问存储库的数据库所需的用户名。</block>
  <block id="c76747190f493aa4f9c57f627ad9a4ff" category="list-text">* — operation ｛ -operationsoperation_name ｝ [operation_name1 ， operation_name2] | -all*</block>
  <block id="c8768a110d69315817d91f61ff9ca1bb" category="paragraph">指定要配置历史记录的 SnapManager 操作。</block>
  <block id="b6db7c808a04f6d71752a9d908868d7d" category="summary">您可以将 SnapManager 配置为在 Oracle 工具 Recovery Manager （ RMAN ）中对其备份进行目录，以便使用 RMAN 执行块级恢复。RMAN 可以使用数据库的控制文件或单独的恢复目录数据库作为其存储库。</block>
  <block id="286e487a5c7ad03f9506def1d531d2a0" category="doc">使用 Oracle Recovery Manager （ RMAN ）执行块级恢复</block>
  <block id="5c72501433109e7bd3a3af0717e38c7b" category="paragraph">您可以将 SnapManager 配置为在 Oracle 工具 Recovery Manager （ RMAN ）中对其备份进行目录，以便使用 RMAN 执行块级恢复。RMAN 可以使用数据库的控制文件或单独的恢复目录数据库作为其存储库。</block>
  <block id="0ef63045a2ee85caff0f6bcd954921ae" category="list-text">要使用 SnapManager 执行完全脱机备份，请输入以下命令：</block>
  <block id="09f2c619bd5e14587b09c7d578f8ed5c" category="paragraph">SMO backup create -offline-full-profileprofile_name-labelbackup_label_name-verbose</block>
  <block id="4cd361459ea2bb087ed6c989579796c7" category="paragraph">其中：</block>
  <block id="1a6174014fa3124e1a03a7dc12c59abb" category="list-text">profile_name 是与备份关联的配置文件的名称</block>
  <block id="541395d8d7bdae48933a31116dbdd6a5" category="list-text">backup_label-name 是备份标签的名称</block>
  <block id="22807700a4daac00d7d90fd6ef14979c" category="list-text">要验证备份是否已使用 RMAN 进行编目，请在数据库主机的 RMAN 提示符处输入以下命令：</block>
  <block id="419647f09efaebc1b866d114fd1b6a76" category="paragraph">列出数据复制标记 tag tag tag ： name ；</block>
  <block id="d4ec1156a192e5f97a1c201058b04286" category="list-text">要验证数据库并确定是否有任何块损坏，请输入以下命令：</block>
  <block id="cc8082f9f264bd8be34faaab97705920" category="paragraph">dbv file=user01.dbf</block>
  <block id="77fbcc84f3e024d97589c478f27c5b59" category="paragraph">以下输出显示两个页面已损坏：</block>
  <block id="692023f40ecae13e9882f34cd6d8171b" category="list-text">要使备份中的文件可在主机上访问并可供 RMAN 访问，请使用以下命令挂载备份：</block>
  <block id="a9aa2f571a77280b2fa2f2a5f0fc5c5e" category="paragraph">SMO backup mount -profileprofile_name-labelLabel-verbose</block>
  <block id="d9d6e2b96c92466271fbdffce1187206" category="list-text">要恢复块，请在 RMAN 中输入以下命令：</block>
  <block id="d9436f30df2249509a18f84acd63518a" category="paragraph">块恢复数据文件 "`E ： \path\file.dbf` " block block_id ，来自标记 backup_RMAN_tag</block>
  <block id="33d2e2e896ae6a642d5f95f84ef55803" category="list-text">要验证块是否已修复，请使用以下命令：</block>
  <block id="14a8dc70ee00a115e7fa0a474e40c1db" category="paragraph">dbv file=filename.dbf</block>
  <block id="ecf98022fc03a9bd3349dfb675c7af3c" category="paragraph">以下输出显示没有页面损坏：</block>
  <block id="f102f5e99b5e232db61345535f08a4df" category="paragraph">已修复并还原所有损坏的块。</block>
  <block id="ea4b5062b889885b5c82184fe6437ff3" category="summary">使用此命令可以查看 SnapManager 操作的历史记录详细信息列表。</block>
  <block id="d776ef22aea673fb59d47d4aa876f360" category="doc">smo history list 命令</block>
  <block id="17b19bbd41b9284ba30b019cc6c37c2b" category="summary">使用此命令可以查看特定配置文件的详细历史记录信息。</block>
  <block id="366fbacd031c4fafde48908d78c7e507" category="doc">smo history show 命令</block>
  <block id="608f505e0e92437266fa43877e7fe10f" category="summary">SnapManager 以与所执行的克隆操作相关的环境变量的形式提供上下文信息。例如，您的脚本可以检索原始主机的名称，克隆数据库的名称以及备份的标签。</block>
  <block id="383f9b7983615de031b74f51dfa5e35c" category="doc">克隆操作的任务脚本中可用的变量</block>
  <block id="ff45327fc94f8e25df7e3201e364346a" category="paragraph">下表列出了可在脚本中使用的环境变量：</block>
  <block id="03df896fc71cd516fdcf44aa699c4933" category="cell">变量</block>
  <block id="520d0db389f362bf79ef56ca0af3dcab" category="cell">格式。</block>
  <block id="29efd0901cab8a5950177c4476ab6973" category="paragraph">sm_original_SID</block>
  <block id="fb2626e30cdff2c688fc12c3f9ebb8b2" category="paragraph">原始数据库的 SID</block>
  <block id="b45cffe084dd3d20d928bee85e7b0f21" category="paragraph">string</block>
  <block id="a1c9d619eafee41b34e602bc2efd8949" category="paragraph">sm_original_host</block>
  <block id="33451bf59c15071ac662bf342851b0f4" category="paragraph">与原始数据库关联的主机名</block>
  <block id="0ae8100cb142051ebda6e2546ee1a969" category="paragraph">sm_original_os_user</block>
  <block id="6a064916204b0e2c6c3d59032a0e898b" category="paragraph">原始数据库的操作系统所有者</block>
  <block id="2aeb10baab7341840adef448407b236a" category="paragraph">sm_original_os_Group</block>
  <block id="c81de46a12df1b90c8daefb9d9fe6374" category="paragraph">原始数据库的操作系统组</block>
  <block id="885f01fddad2a51cbf180f408e562b06" category="paragraph">sm_target_SID</block>
  <block id="dbb99c96a48311345353350d180b2850" category="paragraph">克隆数据库的 SID</block>
  <block id="c5b6ca3cadbd6ac9b51cb8737a467314" category="paragraph">sm_target_host</block>
  <block id="60766359d694f243af9ae6583017cedc" category="paragraph">与克隆数据库关联的主机名</block>
  <block id="3d52315a2715f0d4ec8723765b5191a3" category="paragraph">sm_target_os_user</block>
  <block id="f69c6ed131869d64117adebeb775069a" category="paragraph">克隆数据库的操作系统所有者</block>
  <block id="a8d4b368952526e5de871f34d37f357f" category="paragraph">sm_target_os_Group</block>
  <block id="b12ec196788866709cf7a57fac855638" category="paragraph">克隆数据库的操作系统组</block>
  <block id="0a3ec35eb990a29068d0aad43157d80b" category="paragraph">sm_target_DB_port</block>
  <block id="6a3f9c36519a6af69c3b814009bd9b1e" category="paragraph">目标数据库的端口</block>
  <block id="157db7df530023575515d366c9b672e8" category="paragraph">整型</block>
  <block id="ca9261ef965219f5bd5798cb998a501f" category="paragraph">sm_target_global_DB_name</block>
  <block id="a2d2d77d84428cf81b28e011b02c7a2f" category="paragraph">目标数据库的全局数据库名称</block>
  <block id="74576f2542a1700667da29822156069a" category="paragraph">sm_backup_label</block>
  <block id="02ec25f5cb81f3aa2ba1b27a62660c12" category="paragraph">用于克隆的备份的标签</block>
  <block id="51aca6fb32c996a4c5f85458e5dd1e15" category="summary">您可以查看计划的操作列表，并在必要时对其进行更新。您可以更新计划频率，计划开始时间， cronstring 表达式以及计划备份的用户。</block>
  <block id="b6f3693a939e0aa6d9f87db4ef055b72" category="doc">更新备份计划</block>
  <block id="d8b626dc45686404ea53f28d292996bb" category="list-text">要更新备份的计划，请输入以下命令： smo schedule update -profile profile_name-schedule-nameschedulename （ -schedule-commentschedule comment] -interval ｛ -hourly | -daily | -weekly | -monthly | -onetimeonly ｝ -start-timestarttime-cronstringcronstrictrunstringstrict-runasusunasuser （ -quiet ）</block>
  <block id="fac2c4e0a2aaf1e034c1505284483fac" category="summary">您可以计划在适合您的数据和环境的时间和频率进行备份。</block>
  <block id="83f8628fad656d0ecb998fa58e01443a" category="doc">创建备份计划</block>
  <block id="aa8c5686bf1e3cd7c582b52cf1b4734e" category="paragraph">从 SnapManager 3.2 for Oracle 中，您可以单独计划归档日志文件的备份。但是，您必须使用创建的配置文件来分隔归档日志文件。</block>
  <block id="c6b00102b25e7495da44e4eaf77cf7f2" category="paragraph">如果同时计划了数据文件和归档日志文件的备份，则 SnapManager 会先创建数据文件备份。</block>
  <block id="98d91b28dc162938b733e350c3d747e6" category="paragraph">如果将计划间隔选择为 -onetimeonly ，则所有修剪选项均可用。如果您选择的计划间隔不是 -onetimeonly ，则不支持修剪选项 -until -scn 和 -until 日期，并显示以下错误消息：您指定的归档日志修剪选项，计划间隔每小时的 -until -scn 或 -until 日期无效。为计划间隔指定 -onetimeonly 选项，或者使用选项 all 之一或 -before ｛ -months | -days | -weeks| -hours ｝ 对归档日志进行修剪。</block>
  <block id="75054c5f1584012b9b074e4287ff84d4" category="paragraph">在 Microsoft Windows Server 故障转移集群（ WSFC ）和 Microsoft 集群服务器（ MSCS ）环境中发生故障转移时，您必须重新启动适用于 Oracle 的 SnapManager 服务器，以便将服务（虚拟）地址映射到活动主机，并根据活动 SnapManager 主机调整 SnapManager 计划。</block>
  <block id="049d6fdcc05061b91a2223db99c80089" category="admonition">如果另一个存储库中存在相同的配置文件和计划名称，则不会在该存储库中启动备份计划操作。此操作将退出，并显示以下消息： operation is already running 。</block>
  <block id="08fe9e7139ba59277380a5a63cfce721" category="list-text">输入以下命令： SMO schedule create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain （ -hourly ； -daily ）； -weekly ； -monthly ； -unlimited] （ -data ）（ -filesfiles （文件））））；（ -tablesogs-tablesacespaces （ -tablespaces ）））） ｛ -online ； -unlimitedestinationsaces （ -ly-unlimited ）》（ -ly-unifly l.-untirescnsn _ -until-dateyyyy-mm-dd HH ： mm ： ss _ -before ｛ -months _ -weeks _ -days _ -hours ｝ -prune-destprune_dest1 ， prune_dest2] -schedule-nameschedule_name -schedule_comment_comment] -hh ｛ -hourly _ time _ source_source_source&gt; -time-time-source_source&gt; -time-source&gt; -time-time-source&gt; -sq.&lt;-time-time-time-time-sq.-time-sq.-time-time-sq.-time-sq.-time-sq.-time-sq.-time-sq.</block>
  <block id="3821868f1bac8f1a84a4e758365fd98c" category="paragraph">* 计划联机或脱机数据库的备份 *</block>
  <block id="acff10475801d1b16f6e48851f7023df" category="paragraph">指定 -offline 或 -online 以计划脱机或联机数据库的备份。如果指定了这些参数，则不能使用 -auto 。</block>
  <block id="d43c72ade23d2998556dcafa6582d5f0" category="paragraph">* 让 SnapManager 处理数据库的计划，而不管它是联机还是脱机 *</block>
  <block id="25c38d4981943f684c356856b21319c5" category="paragraph">指定 -auto 。如果指定 -auto ，则不能使用 -offline 或 -online 。</block>
  <block id="cb3089963ba8c807e7e0b0342812a8b8" category="paragraph">* 计划数据文件的备份 *</block>
  <block id="21229361edf403db616d063c62445299" category="paragraph">指定 -data -files 以列出以逗号分隔的文件。例如，使用文件名 f1 ， f2 ， f3 。</block>
  <block id="7812ed598e9c54cbf840f11e6644ce71" category="paragraph">* 计划对特定表空间进行部分备份 *</block>
  <block id="8b4adfffddb54bc65094f30ecaa95513" category="paragraph">指定 -tablespaces 以列出以逗号分隔的表空间。例如，使用 TS1 ， TS2 ， TS3 。</block>
  <block id="1e1b36975e2b5c68f71bba3854e45b64" category="paragraph">* 计划归档日志文件的备份 *</block>
  <block id="ed4c583b8e24e0974fe35337a9185ec8" category="paragraph">指定以下内容：</block>
  <block id="f6c7741fbf5f247cd4fe4f09a4397a3b" category="list-text">-archivelog 用于计划归档日志文件的备份</block>
  <block id="7cc385689ab12413938b5493888e3ca1" category="list-text">-backup-dest 用于计划要包括在备份中的归档日志文件目标</block>
  <block id="cddef53bbb27ff41054473e94384cade" category="list-text">-exclude-dest 用于计划要从备份中排除的归档日志目标</block>
  <block id="11aced464f570c3dff63aad5dafacf89" category="paragraph">* 指定保留类值 *</block>
  <block id="3ee469467d3b736f2fceed4dd65852db" category="paragraph">指定 -retain 并指示是否应根据以下保留类之一保留备份：</block>
  <block id="7dc2323db6861ac0da1930bbc93bcada" category="list-text">每小时</block>
  <block id="5a4ca9dbf30d6ac938b7851d5b8da84d" category="list-text">每天</block>
  <block id="ee06c61b1d06fe84339690ebabd67f2b" category="list-text">每周</block>
  <block id="8c3eb660ab6a38b44de6179cdb7035c9" category="list-text">每月</block>
  <block id="ac6f5786c19efe595ce000b3fe03ab87" category="list-text">-unlimited SnapManager 默认为每小时。</block>
  <block id="ec3345f941160515a63e092d4ddcd1bb" category="paragraph">* 计划对归档日志文件进行删减 *</block>
  <block id="1b4a1d7e91a1a4bac21af73a4143a070" category="paragraph">指定以下内容： * -prunelog 用于在计划备份时对归档日志文件进行修整。 * -prune-dest 用于指定从中对归档日志文件进行修剪的归档日志目标</block>
  <block id="1f8fc86ada990a260fa36755e795f76a" category="paragraph">* 包括计划名称 *</block>
  <block id="a1518ff7d3d02ff34f75ba8466b6f432" category="paragraph">指定 -schedule-name 。</block>
  <block id="45d1ffe0ff27bb86c43442554f7cb559" category="paragraph">* 按特定时间间隔计划数据库备份 *</block>
  <block id="84047fa85e41bfa6274ef69c705e40d2" category="paragraph">指定 interval 选项并从以下选项中选择时间间隔，以创建备份：</block>
  <block id="0f123ebb3ef76ec84b6d7cfaa1fc63d7" category="list-text">-onetimeonly</block>
  <block id="80992278c70a67fdd3be0940de4d559d" category="paragraph">* 配置计划 *</block>
  <block id="b0030d2ec03d781333e5bc47cf841bc1" category="paragraph">指定 -cronstring 并包含以下七个子表达式，用于描述各个选项：</block>
  <block id="adf8d5139977d7823822a9fd66378379" category="list-text">1 表示秒。</block>
  <block id="2336838eb744dabaeaef2aeec501bc32" category="list-text">2 表示分钟。</block>
  <block id="10fa6bed280abd1562d4542e56432197" category="list-text">3 表示小时。</block>
  <block id="45c302b1ee23c92fedc76286bf9f5d51" category="list-text">4 表示一个月中的一天。</block>
  <block id="f70dc4cf1258607369805397ea959ba8" category="list-text">5 表示月份。</block>
  <block id="a61d93b53e9fb820b4ca1fb23733db71" category="list-text">6 表示一周中的一天。</block>
  <block id="b847a36d2fc148eff02f892cb57329fb" category="list-text">（可选） 7 表示年份。* 注意： * 如果您在 -cronstring 和 -start-time 中使用不同的时间计划备份，则 -start-time 将覆盖和触发备份计划。</block>
  <block id="7498e7f463662cce65b54aaed17e2726" category="paragraph">* 添加有关备份计划的注释 *</block>
  <block id="3083916dc5e2d050d54ba6b787261d62" category="paragraph">指定 -schedule-comment ，后跟问题描述字符串。</block>
  <block id="e0b83b5b9818a2759b570d7a341c3804" category="paragraph">* 指定计划操作的开始时间 *</block>
  <block id="c18fe423e0416bf7a56bf0bb16a0a971" category="paragraph">以 yyyy-mm-dd hh ： mm 格式指定 -start-time 。</block>
  <block id="b03bcd41f154997501dd9da4d886d1bc" category="paragraph">* 在计划备份时更改计划备份操作的用户 *</block>
  <block id="fbd50d51a6adb8ec46a170b40dcab94c" category="paragraph">指定 -runasuser 。此操作将以创建计划的用户（ root 用户或 Oracle 用户）身份运行。但是，如果您拥有数据库配置文件和主机的有效凭据，则可以使用自己的用户 ID 。</block>
  <block id="9352ee758dd01cc7cfc6d979e7fe4b95" category="paragraph">* 使用任务前和任务后规范 XML 文件 * 启用备份计划操作的任务前或任务后活动</block>
  <block id="9dffe04a9aee799b082c25e21e588848" category="paragraph">指定 -taskSpec 选项，并提供任务规范 XML 文件的绝对路径，以便在备份计划操作之前或之后执行预处理或后处理活动。</block>
  <block id="cb56408566c3899e3fbff464c6e625bf" category="summary">您可以运行 smo_server status 命令来查看 SnapManager 主机服务器的状态。</block>
  <block id="e65581651b9935428bdf87fa617e0770" category="doc">smo_server status 命令</block>
  <block id="5ed13eb461375007b1e03bd8ae5b15c4" category="paragraph">指定控制台中仅显示错误消息。默认情况下会显示错误和警告消息。</block>
  <block id="fb195ee9487bb0e50997cbabe408a703" category="paragraph">指定控制台中显示错误，警告和信息性消息。</block>
  <block id="5b16de7903b2e7b18478a1b328e6434d" category="paragraph">以下示例显示了主机服务器的状态：</block>
  <block id="b09fe5d7b374beb0a17e0651e7088785" category="summary">根据您的环境，您可以更改分配给配置参数的默认值。</block>
  <block id="2f6f5c99f802938464789cddafab705d" category="doc">编辑配置参数</block>
  <block id="1d9f5f3551b350effcec319f0070b55c" category="list-text">从以下默认位置打开配置文件：</block>
  <block id="d8a86cb3f0b6ff9439856d26bcf70572" category="paragraph">默认安装位置 \properties\SMO.config</block>
  <block id="b70fae9eb8340ebf21ad152f5320d7bf" category="list-text">更改配置参数的默认值。</block>
  <block id="f918ceeae155d87cfbb7db7284bfb796" category="admonition">您还可以添加配置文件中未包含的受支持配置参数，并为其分配值。</block>
  <block id="718117b398d633d73ee88f05dcc97054" category="list-text">重新启动适用于 Oracle 服务器的 SnapManager 。</block>
  <block id="26c7d3d63e9958ef57af062cec9464d1" category="summary">要升级 SnapManager 的环境必须满足特定的软件，硬件，浏览器，数据库和操作系统要求。有关这些要求的最新信息，请参见互操作性表。</block>
  <block id="612ad81b603c283be40c9abccee2c40b" category="doc">正在准备升级 SnapManager</block>
  <block id="39022c7a7c84ce036afbdbbade4315b6" category="paragraph">在升级之前，您必须确保执行以下任务：</block>
  <block id="bb5e784f4368fa27bc0b54654f717c54" category="list-text">完成所需的安装前任务。</block>
  <block id="5ec6f56b780188a08581cbfad2861791" category="list-text">下载最新的 SnapManager for Oracle 安装包。</block>
  <block id="7f69a9a00611c84c7170de0ea29214df" category="list-text">在所有目标主机上安装和配置适当版本的 SnapDrive for Windows 。</block>
  <block id="b13274879ecf88e0b5e293ac401aaa8a" category="list-text">为现有 SnapManager for Oracle 存储库数据库创建备份。</block>
  <block id="4965fa93b91d3d30566caaa810f284dc" category="inline-link">互操作性表： support.netapp.com/NOW/products/interoperability</block>
  <block id="4971f019a1bf462fe97259c6660b3a4b" category="paragraph"><block ref="4971f019a1bf462fe97259c6660b3a4b" category="inline-link-rx"></block></block>
  <block id="775e6b474c14505db5e7173606f4e4fd" category="summary">SnapManager 提供了一个配置参数列表，您可以根据需要编辑这些参数。配置参数存储在 SMO.config 文件中。但是， SMO.config 文件可能不包含所有受支持的配置参数。您可以根据需要添加配置参数。</block>
  <block id="04605bd2ec6c8912fd2a205ac0044a25" category="doc">SnapManager 配置参数</block>
  <block id="aed447f87336a82187e2233bf1787245" category="paragraph">下表列出了所有受支持的 SnapManager 配置参数，并说明了何时使用这些参数：</block>
  <block id="cd9e2696abed13adafba0fa0a5d8d59c" category="list-text">rety.hourly.count</block>
  <block id="5dc5e68f8a20843b316214191ca73ff2" category="list-text">rety.hourly.duration</block>
  <block id="80e9fb036772efd294eec929df2e15db" category="list-text">Retain 。 monthly 。 count</block>
  <block id="7199ae9a237e622af3c62bf0027fe1ef" category="list-text">Retain 。 monthly 。 duration</block>
  <block id="e80f78d820e8454eebb017e42a7fba74" category="paragraph">这些参数用于在创建配置文件时设置保留策略。例如，您可以分配以下值： retain.hourly.count = 12</block>
  <block id="ffef5f11612bc244e058a5e1bcb9eebb" category="paragraph">rety.hourly.duration = 2</block>
  <block id="f09d33664df70c5b9fdacfef6625d3b3" category="paragraph">rety.monthy.count = 2</block>
  <block id="1f3752ab070c8b9ff1f7bad0989769b3" category="paragraph">rety.monthly" 持续时间 = 6</block>
  <block id="626a4087d72b3a6cead40bfea009d1a1" category="paragraph">Restore.temporaryVolumeName</block>
  <block id="2a5bb57782922bbd4cf7018926a3728e" category="paragraph">此参数为临时卷分配一个名称。当 SnapManager 使用间接方法从二级存储还原数据时，它需要主存储上的一个临时卷来存放数据的临时副本，直到将其复制到数据库文件并恢复数据库为止。没有默认值。如果不指定值，则必须在使用间接方法的 restore 命令中输入一个名称。例如，您可以分配以下值： restore.temporaryVolumeName = SMO_temp_volume</block>
  <block id="a860b01f0f5389e22425bf8652a762e6" category="paragraph">host.credentials.persist</block>
  <block id="959c2485e79ec0497da8f941addef78d" category="paragraph">此参数允许 SnapManager 存储主机凭据。默认情况下，不会存储主机凭据。但是，如果您的自定义脚本运行在远程克隆上，并且需要访问远程服务器，则需要存储主机凭据。您可以通过为 host.credentials.persist 分配 true 来启用主机凭据存储。SnapManager 会对主机凭据进行加密并进行保存。</block>
  <block id="166ced7efea0583df422237165e48910" category="paragraph">已显示 restorePlanMaxFilesDisplayed</block>
  <block id="d3db8ac26613460760d706311b517557" category="paragraph">使用此参数可以定义要在还原预览中显示的最大文件数。默认情况下， SnapManager 在还原预览中最多显示 20 个文件。但是，您可以更改为大于 0 的值。例如，您可以分配以下值：</block>
  <block id="599e3e480cc7d99b807d0c685f93ed15" category="list-text">已显示的 restorePlanMaxFilesDisplayed = 30</block>
  <block id="aaef2b5b70f5d53d991b0c875a19cca5" category="admonition">如果指定的值无效，则会显示默认文件数。</block>
  <block id="6fa443d0ad7e8eee8671cf87868060aa" category="paragraph">snapshot.list.timeout.min</block>
  <block id="c49d4c8b685c9f694643221409ddb252" category="paragraph">使用此参数可以定义在执行任何 SnapManager 操作时 SnapManager 必须等待 snap list 命令执行的时间（以分钟为单位）。默认情况下， SnapManager 等待 30 分钟。但是，您可以更改为大于 0 的值。例如，您可以分配以下值：</block>
  <block id="df3337725050dd5e94e7bb4fd721ce36" category="list-text">snapshot.list.timeout.min = 40</block>
  <block id="82b8359b04c16919074756e8cbaa7fa5" category="admonition">如果指定的值无效，则使用默认值。</block>
  <block id="2739facb223e3ac5929b9b46852227c2" category="paragraph">对于任何 SnapManager 操作，如果 snap list 命令执行时间超过分配给 snapshot.list.timeout.min 的值，则此操作将失败并显示超时错误消息。</block>
  <block id="952faebc2841ab925f76923eb91f21ad" category="paragraph">pruneIfFileExistsInOtherDestination</block>
  <block id="c718f1930a1aeb90f8be517683c416d8" category="paragraph">使用此修剪参数可以定义归档日志文件的目标。归档日志文件存储在多个目标位置。在对归档日志文件进行删减时， SnapManager 需要知道归档日志文件的目标位置。您可以分配的可能值如下：</block>
  <block id="95892449d03fcc26f5b4d2fc92134931" category="list-text">要从指定目标对归档日志文件进行 prune 操作，必须将 false 分配给 pruneIfFileExistsInOtherDestination 。</block>
  <block id="39fe0a65f8d2e943f2f192698924ec69" category="list-text">要从外部目标对归档日志文件进行 prune 操作，必须将 true 分配给 pruneIfFileExistsInOtherDestination 。</block>
  <block id="4bd23c6b73595afb19a02ba5f51df750" category="paragraph">prune.archivelogs.backedup.from.otherdestination</block>
  <block id="ac217890e0c5e1b914a64854f848b4ef" category="paragraph">使用此修剪参数可以修剪从指定归档日志目标备份或从外部归档日志目标备份的归档日志文件。您可以分配的可能值如下：</block>
  <block id="24172f0dd0912d088994943cab9b5c86" category="list-text">如果要从指定目标对归档日志文件进行修剪，并且使用 -prune-dest 从指定目标备份归档日志文件，则必须将 false 分配给 prune.archivelogs.backedup.from.otherdestination 。</block>
  <block id="691aa5ac1d22c51843c521527ab16956" category="list-text">如果要从指定目标对归档日志文件进行修剪，并且归档日志文件至少从任何其他目标备份一次，则必须将 true 分配给 prune.archivelogs.backedup.from.otherdestination 。</block>
  <block id="3738e7887cc3e3ab21ab1b274c986802" category="paragraph">max.archivelog.files.toprune.atMIME</block>
  <block id="e44b25eb3ed7a37d22abb21274a6fc62" category="paragraph">使用此修剪参数可以定义在给定时间可以修剪的归档日志文件的最大数量。例如，您可以分配以下值： max.archivelog.files.toprune.atatMIME = 998</block>
  <block id="a3fe93b160d91e1fa56800aab81492e6" category="admonition">可以分配给 max.archivelog.files.toprune.atatime 的值必须小于 1000 。</block>
  <block id="d32c9d9e4deb1e2803798c840c75526a" category="paragraph">archivelogs.consolidate</block>
  <block id="20a1f7d675f67474da963470cb388ce8" category="paragraph">如果为 archivelogs.consolidate 分配 true ，则此参数允许 SnapManager 释放重复的归档日志备份。</block>
  <block id="e4a13c2e14076f2681704c9918b7ea38" category="paragraph">后缀 .backup.label-with 。 logs</block>
  <block id="c81e0bd1d6ce38e8f687b616288e029a" category="paragraph">通过此参数，您可以指定要添加的后缀，以区分数据备份和归档日志备份的标签名称。例如，当您将日志分配给后缀 .backup.label-band.logs 时， _logs 会作为后缀添加到归档日志备份标签中。然后，归档日志备份标签将为 arch_logs 。</block>
  <block id="6d566cc43ac7e79bf483cd8728954a30" category="paragraph">backup.archivelogs.beyond.missingfiles</block>
  <block id="a269e7bf006e6a42bba6c2b61f56f43b" category="paragraph">此参数允许 SnapManager 在备份中包含缺少的归档日志文件。活动文件系统中不存在的归档日志文件不会包含在备份中。如果要包括所有归档日志文件，即使这些文件不在活动文件系统中，也必须为 backup.archivelogs.beyond.missingfiles 分配 true 。</block>
  <block id="0ab731c8ee520213cf968f77c10b50b9" category="paragraph">您可以分配 false 来忽略缺少的归档日志文件。</block>
  <block id="65bf1f8777385329b02fb71ec39f0c36" category="paragraph">vrctl.timeout</block>
  <block id="a7c122dafb48615db5016ab8e2c37013" category="paragraph">通过此参数，您可以定义 rfctl 命令的超时值。* 注： * 服务器控制（ Server Control ， srvctl ）是一个用于管理 RAC 实例的实用程序。</block>
  <block id="4ca30205f14cf3b0b3732a9d9fd6a286" category="paragraph">如果 SnapManager 执行资源管理器命令所需时间超过超时值，则 SnapManager 操作将失败，并显示以下错误消息： Error ： Timeout occurred while executing command ：资源管理器状态。</block>
  <block id="07191b35ea06ce71c87ecbe2595dc93d" category="paragraph">snapshot.restore.storageNameCheck</block>
  <block id="8d2c4a26a0d93f1fe96bc25824e0588d" category="paragraph">此参数允许 SnapManager 对从 7- 模式 Data ONTAP 迁移到集群模式 Data ONTAP 之前创建的 Snapshot 副本执行还原操作。分配给此参数的默认值为 false 。如果您已从 7- 模式 Data ONTAP 迁移到集群模式 Data ONTAP ，但希望使用迁移前创建的 Snapshot 副本，请设置 snapshot.restore.storageNameCheck=true 。</block>
  <block id="66f788b8521285d25128bd50cbfbd4f9" category="paragraph">services.common.disableAbort</block>
  <block id="1225e13d71d8fc44f5af6523fd481018" category="paragraph">此参数用于在长时间运行的操作失败时禁用清理。您可以设置 services.common.disableAbort=true.For 示例，如果您执行的克隆操作运行时间较长，但由于 Oracle 错误而失败，则可能不希望清理此克隆。如果设置了 services.common.disableAbort=true ，则不会删除此克隆。您可以修复 Oracle 问题描述并从克隆操作失败的位置重新启动该操作。</block>
  <block id="d718f02c2d81db67b09705ff369d5bcd" category="list-text">backup.bay.dnfs.layout</block>
  <block id="01365826d7b7571b28a190ff0eb93c2d" category="list-text">backup.sleep.dnfs.secs</block>
  <block id="e2e6b21091358562f5386a93240126d2" category="paragraph">这些参数用于激活 Direct NFS （ DNFS ）布局中的休眠机制。使用 DNFS 或网络文件系统（ NFS ）创建控制文件备份后， SnapManager 会尝试读取这些控制文件，但可能找不到这些文件。要启用休眠机制，请确保 backup.leep.dnfs.layout=true 。默认值为 true 。</block>
  <block id="d0804e137300d0b5da3f6c91765692eb" category="paragraph">启用休眠机制时，必须将休眠时间分配给 backup.sleep.dnfs.secs 。分配的睡眠时间以秒为单位，该值取决于您的环境。默认值为 5 秒。</block>
  <block id="506c2c0c7f5b70af3df68c45c46f45a7" category="paragraph">例如：</block>
  <block id="da71e1df4899fb6cd0e8138e27d70220" category="list-text">backup.leep.dnfs.layout=true</block>
  <block id="dd4f41890826d651c597cdabfb6ee3ed" category="list-text">backup.sleep.dnfs.secs=2</block>
  <block id="367167037cf5e9568440a528eb0b7859" category="list-text">override.default.backup.pattern</block>
  <block id="c6ebf7874125a9d8789410848b7856fe" category="list-text">new.default.backup.pattern</block>
  <block id="d09469c0b89758fc7d54703a24278c91" category="paragraph">如果不指定备份标签， SnapManager 将创建一个默认备份标签。您可以使用这些 SnapManager 参数自定义默认备份标签。要启用备份标签自定义，请确保 override.default.backup.pattern 的值设置为 true 。默认值为 false 。</block>
  <block id="ea9f599ea6209708a56d07db3ce764e8" category="paragraph">要为备份标签分配新模式，您可以将数据库名称，配置文件名称，范围，模式和主机名等关键字分配给 new.default.backup.pattern 。关键字应使用下划线分隔。例如， new.default.backup.pattern=dbname_profile_hostname_scope_mode 。</block>
  <block id="50e525ae1fc57968fa44a25e9ec46fbc" category="admonition">时间戳会自动包含在生成的标签末尾。</block>
  <block id="a87b28ecb26fd8aa8858676bb1e62704" category="paragraph">allow.underscore.in.clone.sid</block>
  <block id="7c5f1c58ae8f2e274b9cb47bbb13fa0a" category="paragraph">Oracle 支持在 Oracle 11gR2 的克隆 SID 中使用下划线。使用此 SnapManager 参数可以在克隆 SID 名称中包含下划线。要在克隆 SID 名称中包含下划线，请确保 allow.underscore.in.clone.sid 的值设置为 true 。默认值为 true 。</block>
  <block id="a3b6cbebfec76720abc2cc872d41896f" category="paragraph">如果您使用的 Oracle 版本早于 Oracle 11gR2 ，或者不希望在克隆 SID 名称中包含下划线，请将此值设置为 false 。</block>
  <block id="7b784b93466bfae2a080d38f350e55a6" category="paragraph">oracle.parameters.with.comma</block>
  <block id="2d443cebde4bc7f32330450f752406da" category="paragraph">使用此参数可以指定逗号（，）作为值的所有 Oracle 参数。执行任何操作时， SnapManager 会使用 oracle.parameters.with.comma 检查所有 Oracle 参数并跳过值拆分。</block>
  <block id="81dff1c0f19f281eb98593eb8f769c59" category="paragraph">例如，如果值为 NLS_numeric_characters= ，则指定 oracle.parameters.with.comma=nls_numeric_characters 。如果存在多个 Oracle 参数，并以逗号作为值，则必须在 oracle.parameters.with.comma 中指定所有参数。</block>
  <block id="b37685a7b7cb2bf91262e6ccbdb82fc7" category="list-text">archivedLogs.exclude</block>
  <block id="446419316792eccdf723b2e6de0209c6" category="list-text">archivedLogs.exclude.fileslike</block>
  <block id="97321074892d4da883ec6468479ea24a" category="list-text">db-unique-name&gt;.archivedLogs.exclude.fileslike</block>
  <block id="959574ee67efc1e5aeec8f60ab947cea" category="paragraph">如果数据库不在启用了 Snapshot 副本的存储系统上，而您希望对该存储系统执行 SnapManager 操作，则 SnapManager 可以通过这些参数从配置文件和备份中排除归档日志文件。 * 注： * 在创建之前，必须在配置文件中包含排除参数 配置文件。</block>
  <block id="7b74e2862453739c31302c5a98900f4a" category="paragraph">分配给这些参数的值可以是顶层目录或存在归档日志文件的挂载点，也可以是子目录。</block>
  <block id="d00f2a22b1e7a549260681d35779e4e4" category="paragraph">要排除归档日志文件包含在配置文件中并进行备份，您必须包括以下参数之一：</block>
  <block id="22513a87f7afbb3e3e995966a44592ff" category="list-text">archivedLogs.exclude 指定一个正则表达式，用于从所有配置文件或备份中排除归档日志文件。</block>
  <block id="75530a11301f75642e557f0190621b85" category="paragraph">与正则表达式匹配的归档日志文件将从所有配置文件和备份中排除。</block>
  <block id="4a42b00b0626058bcc38c76186897477" category="paragraph">例如，您可以设置 archivedLogs.exclude = J ： \\arch\\.* 。</block>
  <block id="6a236b8ff4d2a574fd4ff92e14abf9d1" category="admonition">如果目标具有文件分隔符，则必须在此模式中添加一个额外的斜杠符号（ \ ），并且此模式必须以双斜杠模式（ \\.* ）结尾。</block>
  <block id="44f6e6216d87a850efcfb79f948e9c2f" category="list-text">archivedLogs.exclude.fileslike 指定一个 SQL 表达式，用于从所有配置文件或备份中排除归档日志文件。</block>
  <block id="20c903d3612171aeb352f47d1dd5edc4" category="paragraph">与 SQL 表达式匹配的归档日志文件将从所有配置文件和备份中排除。</block>
  <block id="082a6fccdec3a2ea85a85aae118a67b1" category="paragraph">例如，您可以设置 archivedLogs.exclude.fileslike = J ： \\ARCH2\\% 。</block>
  <block id="2a63b9f0b39fd0e3e48032a83d07c365" category="admonition">如果目标具有文件分隔符，则必须在此模式中添加一个额外的斜杠符号（ \ ），并且此模式必须以双斜杠模式（ \\% ）结尾。</block>
  <block id="b2dbb2459eb9a154d8153be13efeb363" category="list-text">db-unique-name&gt;.archivedLogs.exclude.fileslike 指定一个 SQL 表达式，用于仅从使用指定 db-unique-name 为数据库创建的配置文件或备份中排除归档日志文件。</block>
  <block id="0351d4c64438e62041b65cad7637ffbc" category="paragraph">与 SQL 表达式匹配的归档日志文件将从配置文件和备份中排除。</block>
  <block id="ccdda04f973530af782fabc431cc76fd" category="paragraph">例如，您可以设置 mydb.archivedLogs.exclude.fileslike = J ： \\ARCH2\\% 。</block>
  <block id="281064f7341399126dacc8e3b3c20272" category="summary">使用 SnapManager 可以为预处理活动，后处理活动以及备份，还原和克隆操作的策略任务创建脚本。您必须将脚本放置在正确的安装目录中，才能执行 SnapManager 操作的预处理活动，后处理活动和策略任务。</block>
  <block id="dfe1e8792b8dd40b28eddb9c8223b221" category="doc">创建任务前，任务后和策略脚本</block>
  <block id="82887b9f891b517eb3c810f4a38bb740" category="paragraph">* 预处理和任务后脚本内容 *</block>
  <block id="8b208e9cb1d14db1341707a28b2152b9" category="paragraph">所有脚本都必须包括以下内容：</block>
  <block id="3732b0b03dbb22c744754fc247ea2cb8" category="list-text">特定操作（检查，描述和执行）</block>
  <block id="29a4e645385d932689be442430413f10" category="list-text">（可选）预定义的环境变量</block>
  <block id="fee2e96b9d68a7eb0e56df29d7a40303" category="list-text">特定错误处理代码（返回代码（ RC ））</block>
  <block id="3467a25901bbdc46af9e1c28a932c69c" category="admonition">您必须包含正确的错误处理代码才能验证脚本。</block>
  <block id="0ff4cc2b47fa6386f7f14e1c4252fe6e" category="paragraph">可以将任务前脚本用于多种用途，例如，在 SnapManager 操作开始之前清理磁盘空间。例如，您还可以使用任务后脚本来估计 SnapManager 是否有足够的磁盘空间来完成此操作。</block>
  <block id="014d59365db352c509707eec779d09c4" category="paragraph">* 策略任务脚本内容 *</block>
  <block id="73333caf4d09f64506fc535de3f855f0" category="paragraph">您可以执行策略脚本，而无需执行检查，描述和执行等特定操作。该脚本包含预定义的环境变量（可选）和特定的错误处理代码。</block>
  <block id="28cc5486cefcbf077abebf428141e6d9" category="paragraph">策略脚本会在执行备份，还原和克隆操作之前执行。</block>
  <block id="f7630dd513bee71d9fd4b1040b5cea8f" category="paragraph">* 支持的格式 *</block>
  <block id="fd735106083cdf46ef4b4d5bbef31a3d" category="paragraph">扩展名为 .cmd 的命令文件可用作预处理脚本和后处理脚本。</block>
  <block id="b5cada54a23cb31cf8286633657e580a" category="admonition">如果选择 shell 脚本文件，则 SnapManager 操作不会响应。要解决此问题，您必须在插件目录中提供命令文件，然后重新执行 SnapManager 操作。</block>
  <block id="42b4476b2bc979ca377e2dee4a032431" category="paragraph">* 脚本安装目录 *</block>
  <block id="260f9120a782f5ada17810baf64720f6" category="paragraph">脚本的安装目录会影响脚本的使用方式。您可以将脚本放置在目录中，并在执行备份，还原或克隆操作之前或之后执行此脚本。您必须将脚本放置在表中指定的目录中，并在指定备份，还原或克隆操作时以可选方式使用该脚本。</block>
  <block id="d677f5cb7a463cf3e8cbac280be41578" category="admonition">在使用脚本执行 SnapManager 操作之前，您必须确保 plugins 目录具有可执行权限。</block>
  <block id="ecfc2dffe568c10a67dbc6d3724cfde2" category="cell">活动</block>
  <block id="3500ba09d0538297440ca620c9dd46bf" category="cell">备份</block>
  <block id="2bd339d85ee3b33e513359ce781b60cc" category="cell">还原</block>
  <block id="ff24590464659ee8cdec688128c35f89" category="cell">克隆</block>
  <block id="d397d6750cedf9d79f3600af61a1641e" category="paragraph">预处理</block>
  <block id="23ef8d1f5e3baddfdd3c13578889b2ef" category="paragraph">&lt;default_installation_directory&gt;\plugins\backup\create\pre</block>
  <block id="484eec9efe560492c450f878412cf225" category="paragraph">&lt;default_installation_directory&gt;\plugins\restore\create\pre</block>
  <block id="fd3ad7c2496295d2aa4bea8b98ff0d58" category="paragraph">&lt;default_installation_directory&gt;\plugins\clone\create\pre</block>
  <block id="cfdfd7a511fdb9beee47cecedc48297c" category="paragraph">后处理</block>
  <block id="a8e4a425e956c31bbaba037439e3dac9" category="paragraph">&lt;default_installation_directory&gt;\plugins\backup\create\post</block>
  <block id="bbd8f445edcad46a8f02c6d433a93a8b" category="paragraph">&lt;default_installation_directory&gt;\plugins\restore\create\post</block>
  <block id="d1664e88037a2c436862d50d4c1a1e5f" category="paragraph">&lt;default_installation_directory&gt;\plugins\clone\create\post</block>
  <block id="a15a11b71b603c87be865ef866bdc09b" category="paragraph">基于策略</block>
  <block id="51d362c47193636c50d225bcf2b4eb88" category="paragraph">&lt;default_installation_directory&gt;\plugins\backup\create\policy</block>
  <block id="e9700bc6438515bc1624296b3656a1f5" category="paragraph">&lt;default_installation_directory&gt;\plugins\restore\create\policy</block>
  <block id="33b9904c5faac5defa15d3828c360a0c" category="paragraph">&lt;default_installation_directory&gt;\plugins\clone\create\policy</block>
  <block id="ed0a6f25c0bdd1e73acb211f1ade34c6" category="paragraph">* 脚本位置示例 *</block>
  <block id="56a05103e15b5598717687f20d2b0c2a" category="paragraph">以下是安装目录路径中可用的备份和克隆操作的任务前和任务后脚本示例：</block>
  <block id="3201c39dae69bf56d7aab2bc0202a578" category="list-text">&lt;default_installation_directory&gt;\plugins\examples\backup\create\pre</block>
  <block id="9ac26334d57348d849205f201d581313" category="list-text">&lt;default_installation_directory&gt;\plugins\examples\backup\create\post</block>
  <block id="ccb5d581db5609d555ed9e7fd5631860" category="list-text">&lt;default_installation_directory&gt;\plugins\examples\clone\create\pre</block>
  <block id="d058d9d976b524ab9cff90a7c7de79d0" category="list-text">&lt;default_installation_directory&gt;\plugins\examples\clone\create\post</block>
  <block id="c2fd827b23a367699557475eca2c3569" category="paragraph">* 可以在脚本中更改的内容 *</block>
  <block id="3462f2384487a394e67e4558691c1755" category="paragraph">如果要创建新脚本，则只能更改描述和执行操作。每个脚本都必须包含以下变量： context ， timeout 和 parameter 。</block>
  <block id="f521424bd359c0eedd45624ed998c541" category="paragraph">您在脚本的描述功能中所述的变量必须在脚本开头声明。您可以在 parameter=（ ）中添加新参数值，然后使用 execute 函数中的参数。</block>
  <block id="726566f1b2a920b427d2e6c487f12019" category="section-title">示例脚本</block>
  <block id="bef1c806e9bf5dbc6002438dd34acbb8" category="paragraph">下面是一个脚本示例，其中包含用户指定的返回代码，用于估算 SnapManager 主机中的空间：</block>
  <block id="a90dc4a5ec05929b94f4f1dd2b875ffc" category="paragraph">版权所有 © 1994--2017 NetApp ， Inc. 。保留所有权利。Printed in the U.S.</block>
  <block id="81d926dccbed77c67f8bcd08657b4d29" category="summary">在更新配置文件时，您可以将配置为在数据库操作完成时接收电子邮件通知。</block>
  <block id="7246ede394ebff1258799ae1bbc9d5a4" category="doc">为现有配置文件配置电子邮件通知</block>
  <block id="bc25ffeb57ef019a7702fa63a276d3f8" category="list-text">您必须配置用于发送警报的电子邮件地址。</block>
  <block id="66c0c3d3481e7d0b655680ba668cb705" category="list-text">您必须输入一个或多个要将警报发送到的电子邮件地址。</block>
  <block id="8caf7c54202c5f0bd0dc346d4c40397d" category="paragraph">您可以对多个地址使用逗号分隔列表。您必须确保逗号和下一个电子邮件地址之间没有空格。您也可以选择向电子邮件添加主题。</block>
  <block id="aef009987890117a5702523d774dccdb" category="list-text">输入以下命令： smo profile update -profileprofile "-profile-passwordprofile_password]] ｛ -database-dbnamedb_dbname-host db_host "-siddb_sid] ｛ -login -usernamedb_username-password db_password-port db_port]] ｛ -rmAN ｛ -controlfile _ ｛ -sidem_s1_durman_mail-try_trusername]</block>
  <block id="c508352434ad859cd01035d1cff03cab" category="paragraph">您可以使用 Success 选项仅接收成功数据库操作的通知，而使用 Failure 选项则仅接收失败数据库操作的通知。</block>
  <block id="81ac2ab6d50197def61f62315445f831" category="summary">您可以在 SnapManager 命令中包含 -dump ，以便在 SnapManager 操作成功或失败后收集转储文件。</block>
  <block id="504bc47b2b4b200ebdb4a2cc8ff72e50" category="doc">如何收集转储文件</block>
  <block id="823e70c02a121add4a063def7180b56d" category="paragraph">您可以为以下 SnapManager 操作收集转储文件：</block>
  <block id="3c827dd2a69c3f03d150a2126db19444" category="list-text">正在创建配置文件</block>
  <block id="f0175488e0b5272c3ce6395d45c13de7" category="list-text">正在更新配置文件</block>
  <block id="7a8b4c9b4782ce14f37bfa3c00d2425a" category="list-text">创建备份</block>
  <block id="f64c1e2c96a38a457897b489d6260a5f" category="list-text">验证备份</block>
  <block id="27966c807d6bf6667ade7b1d6b710a1d" category="list-text">删除备份</block>
  <block id="accb60cfd368530147456b0118bb3cf6" category="list-text">释放备份</block>
  <block id="bf978c86ecc8747aa8262a776248e0f0" category="list-text">卸载备份</block>
  <block id="ff65beb8309bf6b8fc5db2fad59fd4bd" category="list-text">还原备份</block>
  <block id="1235d9636a2437a2228699427a45a6be" category="list-text">创建克隆</block>
  <block id="de9d5af561e21fde64c402ee117c0523" category="list-text">正在删除克隆</block>
  <block id="d2f64b1d045997cfbd05e4eabd86d885" category="admonition">创建配置文件时，只有在操作成功时，才能收集转储文件。如果在创建配置文件时遇到错误，则必须使用 smsystem dump 命令。对于成功的配置文件，您可以使用 smooperation dump 和 smoprofile dump 命令收集转储文件。</block>
  <block id="938f1047c15f00fdd0cbfc8e4cfa15e1" category="paragraph">* 示例 *</block>
  <block id="fb5880f60bdaa20b3798e262f7c2ecbc" category="summary">启动 SnapManager 主机服务器后，您可以通过在主机上的提示符处输入命令来使用 SnapManager 。</block>
  <block id="77df8e834ac2b52bf9d54bb6ed1624c2" category="doc">使用 SnapManager 命令</block>
  <block id="17c987215b57098647325cb96147fc7d" category="list-text">要执行操作，请执行以下操作：</block>
  <block id="8f4d68da62467b6c0464d18c417d4084" category="list-text">对于 Windows 主机，请转到 * 开始 * &gt; * 所有程序 * &gt; * NetApp* &gt; * SnapManager for Oracle* &gt; * 启动 SMO 命令行界面（命令行界面） *</block>
  <block id="52362f14c98bb24347ac6aa350ec01cd" category="summary">此命令会将该存储库的配置文件到存储库映射加载到本地主机上主目录中的文件。</block>
  <block id="4a67ff5a523df804fe5104ea138c01e0" category="doc">smo profile sync 命令</block>
  <block id="141fcabd6b9062071f0e5ce70dfe60d5" category="paragraph">指定要同步配置文件的存储库数据库。</block>
  <block id="3049168460289a4c3350b651e23f56a8" category="list-text">* —主机 *</block>
  <block id="78a360a7f9c9c17b3c667470d14d80c5" category="paragraph">指定数据库主机。</block>
  <block id="682af606f13b54f85c96569b9e2deb3d" category="list-text">* 端口 *</block>
  <block id="ceec6749c96e35b785542cd4a5edd5bc" category="paragraph">指定主机的端口。</block>
  <block id="13c58c207319f86e8a561232ad6be781" category="paragraph">指定主机用户的登录过程。</block>
  <block id="a3085f648fca0d38fed58a902e98c57d" category="list-text">* 用户名 *</block>
  <block id="48771266a75faffb2a0730b7cad1a118" category="paragraph">指定主机的用户名。</block>
  <block id="a6780c8e6692794c967e9d850f0bde82" category="paragraph">以下示例显示了用于同步数据库的配置文件到存储库映射的命令的结果。</block>
  <block id="47a6bfd9f3b4f783b83ef5be3a1366e9" category="summary">使用此命令可以将更高版本的 SnapManager 回滚或还原到升级后的原始版本。</block>
  <block id="7329c475ecd9bd3ebece929c4aa41c79" category="doc">smo reback reback 命令</block>
  <block id="03f25177730038ecdd706fac7c8294c3" category="list-text">*-rollbackhost host_and_target_database*</block>
  <block id="120d8c6bc6c51793adeec25c9d686be7" category="paragraph">指定要从较高版本的 SnapManager 回滚到原始较低版本的主机的名称。</block>
  <block id="868852927ffed973b2df30a923dc704d" category="list-text">* —强制 *</block>
  <block id="4a211e3d905029fe6c48742f1eb6c2a9" category="paragraph">尝试强制更新存储库。SnapManager 会提示您在更新之前备份当前存储库。</block>
  <block id="065ef179d8b97a7a30cb598efae7bee2" category="list-text">* — noprompt-*</block>
  <block id="a33773bb3b596c4316b7e8e13b24c12e" category="paragraph">在更新存储库数据库之前不会显示提示符。使用 -noproPrompt 选项可确保不显示此提示符，从而可以更轻松地使用脚本更新存储库。</block>
  <block id="b3d1ee376e2deb2ba0bb621ce68f50b2" category="paragraph">以下示例将更新 SALESDB 数据库中的存储库。</block>
  <block id="7bece22e4639764a6548e5a3cb2df8d4" category="summary">您可以找到有关建议的常规数据库布局和存储配置的信息，以避免与磁盘组，文件类型和表空间相关的问题。</block>
  <block id="88c6a055617305f2a6f4ac76a051654c" category="doc">常规布局和配置</block>
  <block id="c7fff5ef6b7bd7182977d6e03ebfe133" category="list-text">请勿在数据库中包含多种类型的 SAN 文件系统中的文件。</block>
  <block id="098d72bc5433c515bdd914088457b7e5" category="paragraph">构成数据库的所有文件必须位于同一类型的文件系统上。</block>
  <block id="c6fa070382abc0104015b25e17c857c5" category="list-text">SnapManager 需要 4 k 块大小的倍数。</block>
  <block id="c7e3ca203b3762d5d98270a2afb591e3" category="list-text">如果要向 Oracle 恢复管理器（ RMAN ）注册 SnapManager 备份，则必须创建启用了 RMAN 的配置文件。</block>
  <block id="2541c61d9ed73cec9536af5df4d7392b" category="paragraph">以下是卷分隔的一些准则：</block>
  <block id="e05268dafbf79a5d0ee909228b043118" category="list-text">卷中只能包含一个数据库的数据文件。</block>
  <block id="f913f03f185e170bcbed4ea9f0e84856" category="list-text">以下每个文件分类都必须使用单独的卷：数据库二进制文件，数据文件，联机重做日志文件，归档重做日志文件和控制文件。</block>
  <block id="63081b3847292bddfd3d73c0d5fe54ce" category="list-text">您无需为临时数据库文件创建单独的卷，因为 SnapManager 不会备份临时数据库文件。</block>
  <block id="6f3c9de292807fe1c682d10e7511953d" category="paragraph">有关详细信息，请参见 _Oracle SnapManager 最佳实践 _ 。</block>
  <block id="01ec84bb99382ef48fa17d7cda22ba27" category="summary">此命令将删除用于存储数据库配置文件和关联凭据的存储库。只有在存储库中没有配置文件时，才能删除存储库。</block>
  <block id="a09b135450132d148802f6d85a3c3bd8" category="doc">smo repository delete 命令</block>
  <block id="3466a142de61e949725cb37d72417132" category="paragraph">尝试强制删除存储库，即使操作不完整也是如此。如果操作不完整， SnapManager 会发出提示，询问您是否确实要删除存储库。</block>
  <block id="2c4acf50f4d7ec39b7210c8d01f27f0e" category="paragraph">删除存储库之前不会提示您。使用 -noproPrompt 选项可确保不显示此提示符，从而可以更轻松地使用脚本删除存储库。</block>
  <block id="bcc2a4793e8247687bf12bf068bd9ddf" category="section-title">命令示例</block>
  <block id="7f2d304db94efd8394f555f56325d3cc" category="paragraph">以下示例将删除 SALESDB 数据库中的存储库。</block>
  <block id="2c15c5c04b23c700e81499bde14bda44" category="summary">您可以运行 backup list 命令以显示有关配置文件中备份的信息，包括有关保留类和保护状态的信息。</block>
  <block id="6611531aa4952f3e44f3822e42ab045c" category="doc">smo backup list 命令</block>
  <block id="5d4b1c62b1bcf04a04a3a3c6195689b7" category="paragraph">指定要列出备份的配置文件。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="00873e85be4adc32e96d7515fbee94c9" category="list-text">* - 分隔符 *</block>
  <block id="eca0ddbd03d32bd0332d220c7e22471a" category="paragraph">在单独的行上显示每行。行中的属性以指定的字符分隔。</block>
  <block id="9e4a8a9dcce1857ab21e225af9452fe5" category="paragraph">在控制台中显示错误，警告和信息性消息。包括 -verbose 选项以显示备份 ID 。</block>
  <block id="ba55f2b4af1633c4a00e84c4a56196c9" category="paragraph">以下示例列出了 SALES1 配置文件的备份：</block>
  <block id="90ac8d29321b67796b0dc683985bbb04" category="inline-xref-macro">查看备份列表</block>
  <block id="8478d28a46c968c435b8d5a82c1fe45d" category="paragraph"><block ref="8478d28a46c968c435b8d5a82c1fe45d" category="inline-xref-macro-rx"></block></block>
  <block id="83d88b980e244f9795f019d6be57c644" category="summary">SnapManager 使用 FlexClone 技术为数据库备份创建可写的节省空间克隆。您可以在不更改备份源的情况下修改克隆。</block>
  <block id="9866e50d10e63c83bfd075d82aa60496" category="doc">数据库备份克隆</block>
  <block id="717589b0beca77937b79db5741ca5d6f" category="paragraph">您可能需要克隆数据库，以便在非生产环境中进行测试或升级。您可以克隆驻留在主系统上的数据库。克隆可以与数据库位于同一主机上，也可以位于不同主机上。</block>
  <block id="a7fc1c70a605dfd5a34b47c3532a4511" category="paragraph">借助 FlexClone 技术， SnapManager 可以使用数据库的 Snapshot 副本，以避免创建整个物理磁盘到磁盘副本。与物理副本相比， Snapshot 副本所需的创建时间更短，占用的空间更少。</block>
  <block id="d08c4c688cc58fa0fa7d82e3f78aba98" category="paragraph">有关 FlexClone 技术的详细信息，请参见 Data ONTAP 文档。</block>
  <block id="fb297cb007e5fc655e4d718eabe9c295" category="inline-link">Data ONTAP 文档： mysupport.netapp.com/documentation/productsatoz/index.html\]<block ref="becbe90d853340c5493f9860521b5be8" category="inline-link-rx"></block></block>
  <block id="b124d71d83dd41cffd1ea97889c925c8" category="paragraph"><block ref="b124d71d83dd41cffd1ea97889c925c8" category="inline-link-rx"></block></block>
  <block id="4ce7b475278fca7567b2591bee4ad476" category="summary">在执行回滚之前，您必须确保环境满足特定要求。</block>
  <block id="210eec2da6d00b44af4f2997dd8ce9b5" category="doc">执行回滚的前提条件</block>
  <block id="60a8698af3f21d1022ec2a45be82555c" category="list-text">如果您使用的是 SnapManager 3.3 或更高版本，并且希望回滚到 SnapManager 3.1 之前的版本，则需要先回滚到 3.2 ，然后再回滚到所需的版本。</block>
  <block id="cdda858448f4447844f9ab0a0af1975b" category="list-text">必须备份用于执行任何外部数据保护或数据保留的外部脚本。</block>
  <block id="0dbb48987f0bd2752616fb2eeb73d576" category="list-text">必须安装要回滚到的 SnapManager 版本。</block>
  <block id="3e52426c60ebf9e56a64d231b96c25b6" category="admonition">如果要从 SnapManager 3.3 或更高版本回滚到 SnapManager 3.1 之前的版本，则必须先安装 SnapManager 3.2 并执行回滚。回滚到 3.2 后，您可以安装 SnapManager 3.1 或更早版本，然后再回滚到该版本。</block>
  <block id="7eef20a15df837c586ad1a04d396013f" category="list-text">必须安装要回滚到的 SnapManager 版本支持的 SnapDrive for Windows 版本。</block>
  <block id="ce602d937de0b816739bcb5f12d58be2" category="paragraph">有关安装 SnapDrive 的信息，请参见 SnapDrive 文档集。</block>
  <block id="9e809cb75de51a56c38e8ed9f5a573ab" category="list-text">必须备份存储库数据库。</block>
  <block id="23d9298a56c3323afa9a71d75a822d95" category="list-text">如果要回滚的主机正在使用存储库，则不能对使用同一存储库的其他主机执行 SnapManager 操作。</block>
  <block id="5553d91091b7bb91ae94e9fbd442298b" category="paragraph">在其他主机上计划或运行的操作将等待回滚完成。</block>
  <block id="95776b8da5f43bb03fca0420b73334b6" category="list-text">指向同一存储库数据库的配置文件必须在 SnapManager 服务器主机中使用不同的名称创建。</block>
  <block id="95c10b648df13549b5054c3d316e41f5" category="paragraph">如果使用同名配置文件，则涉及该存储库数据库的回滚操作将失败，并且不会发出警告。</block>
  <block id="cbf1a84d20cad8e9bfc10ce1fb5077b6" category="list-text">不能在要回滚的主机上执行 SnapManager 操作。</block>
  <block id="63d9ee0d136beffe52b93cb821d817b5" category="paragraph">如果某个操作正在运行，则必须等待该操作完成，然后再继续回滚。</block>
  <block id="9069218ff46e20d6a4d20631e5600062" category="admonition">回滚操作会随着要回滚的主机的累积备份数增加而运行较长时间。回滚的持续时间可能因与给定主机关联的配置文件和备份数量而异。</block>
  <block id="48a626e0aa8f83f748d9b3d20f1e0dde" category="inline-xref-macro">安装适用于 Oracle 的 SnapManager</block>
  <block id="b4331427098f9cf7074a80b4b0b119ba" category="paragraph"><block ref="b4331427098f9cf7074a80b4b0b119ba" category="inline-xref-macro-rx"></block></block>
  <block id="2064870f0c66084f55f08fefbff68f3c" category="inline-link">NetApp 支持站点上的文档： mysupport.netapp.com</block>
  <block id="e8c633725cd5f28bc22ea85a56b9d67e" category="paragraph"><block ref="e8c633725cd5f28bc22ea85a56b9d67e" category="inline-link-rx"></block></block>
  <block id="d059682572948e032332b47238c328ae" category="summary">您可以使用 clone show 命令查看有关特定克隆的详细信息。</block>
  <block id="17bba60b5e3f8de7be32a822f76d7221" category="paragraph">clone show 命令可显示以下信息：</block>
  <block id="ceb49d06e135cfc0ba8ad5a24db90460" category="list-text">克隆系统标识符和克隆 ID</block>
  <block id="6bedec2e711c78d31e4337e038630293" category="list-text">克隆操作状态</block>
  <block id="363f07410b3c60061f76b0f090ecf92d" category="list-text">克隆创建开始和结束日期或时间</block>
  <block id="26f9e8d45426b4f2491f172ff5073a35" category="list-text">克隆标签</block>
  <block id="3859b014e750f6925ae335f9ff83298c" category="list-text">克隆注释</block>
  <block id="a8b78e7c4e2f8fc3019322bdf80fbf49" category="list-text">备份标签和 ID</block>
  <block id="6d75a53f3497a91632eb53863b237177" category="list-text">源数据库</block>
  <block id="50e965bdf14f6d65a97bc70216a470c1" category="list-text">备份开始和结束时间</block>
  <block id="1aeed2fc1553edc00bae49fcfa5aab64" category="list-text">数据库名称，表空间和数据文件</block>
  <block id="592c49810640f4b0b20c8c4c7a248ffc" category="list-text">包含数据文件的主机名和文件系统</block>
  <block id="71e6fb094e28045407be944832ce2789" category="list-text">支持克隆的存储系统卷和 Snapshot 副本</block>
  <block id="1ae607f1dccccba1b6e028b65e8f1f65" category="list-text">输入以下命令： smo clone show -profile profile_name [-label label | -id guid]</block>
  <block id="d6a9f696ba6f33480cb2b956e63108b4" category="paragraph"><block ref="d6a9f696ba6f33480cb2b956e63108b4" category="inline-xref-macro-rx"></block></block>
  <block id="db5eb5b28e34f769476b96fab050258b" category="summary">您可以使用 smo system dump 命令获取有关 SnapManager 主机和环境的日志信息。您可以指定不同的日志级别来收集有关特定操作，配置文件或主机和环境的信息。</block>
  <block id="e1dd9246e05850ee031a153571b6fa5e" category="doc">创建系统级转储文件</block>
  <block id="6b501fe2209cc8e7fa16e2370b5ff52c" category="list-text">输入以下命令： smo system dump</block>
  <block id="1dc541d5c79737a52d1f2b1c802fccd8" category="paragraph">生成的转储</block>
  <block id="32f54892e1384364af48367036e74101" category="summary">您可以指定一种命名约定或模式来描述与您创建或更新的配置文件相关的 Snapshot 副本。您还可以在所有 Snapshot 副本名称中包含自定义文本。</block>
  <block id="78825b5d76b034546534b033fe15748a" category="paragraph">您可以在创建配置文件时或创建配置文件后更改 Snapshot 副本命名模式。更新后的模式仅适用于尚未发生的 Snapshot 副本；现有的 Snapshot 副本将保留先前的 snapname 模式。</block>
  <block id="b36a187d2310d463b7c163f4257d1f80" category="paragraph">以下示例显示了为卷创建的两个 Snapshot 副本名称。列出的第二个 Snapshot 副本的名称中间有 _F_H_1_ 。"1" 表示它是备份集中创建的第一个 Snapshot 副本。列出的第一个 Snapshot 副本是最新的，并且具有 "2" ，这意味着它是创建的第二个 Snapshot 副本。"1" Snapshot 副本包括数据文件； "2" Snapshot 副本包括控制文件。由于必须在数据文件 Snapshot 副本之后创建控制文件 Snapshot 副本，因此需要两个 Snapshot 副本。</block>
  <block id="1ee9142f1c0059ed14ce3ce13eb1489f" category="paragraph">默认模式包括所需的 SMID ，如下所示：</block>
  <block id="0055c6dfc2c06fe529309e5f6d8e8829" category="list-text">默认模式： SMO_ ｛ profile ｝ _ ｛ db-SID ｝ _ ｛ scope ｝ _ ｛ mode ｝ _ ｛ smid ｝</block>
  <block id="f709ed990eb504f6aef6072124f75951" category="list-text">示例： smo_my_profile_rc51_f_h_2_8abc01e915a55ac50115a55Acc8d0001_0</block>
  <block id="f5e8f51791da4f5a8eebdfcf3ac37198" category="paragraph">您可以在 Snapshot 副本名称中使用以下变量：</block>
  <block id="8b26e8d4341220969322ce9d72b349a1" category="cell">变量名称</block>
  <block id="f2b79ea7fccde09a23cd5487aed8b66d" category="cell">示例值</block>
  <block id="2c08407b8bab5d350b5162fdbd743db3" category="paragraph">SMID （必需）</block>
  <block id="7aea8093af733a80c44473f5a0e141bd" category="paragraph">创建 Snapshot 副本名称时， SnapManager 唯一 ID 是唯一必需的元素。此 ID 可确保您创建唯一的 Snapshot 名称。</block>
  <block id="64599db5941f1d0693648cd45579e8cd" category="paragraph">8abc01e915 a55ac50115a55Acc8d0001_0</block>
  <block id="f9ce5e3b724aec6c290bf56e6463e367" category="paragraph">类（可选）</block>
  <block id="afacf0a09f054797621a2d6cb8385e7a" category="paragraph">与配置文件备份关联的保留类，以每小时（ h ），每天（ d ），每周（ w ），每月（ m ）或无限制（ u ）表示。</block>
  <block id="8277e0910d750195b448797616e091ad" category="paragraph">D</block>
  <block id="a65b6dd5800bba32d35379fea6ca7d3a" category="paragraph">注释（可选）</block>
  <block id="9bf521942292162975d5dc42697e57b0" category="paragraph">与配置文件的备份关联的注释。Snapshot 副本名称完成后，此字段中的空格将转换为下划线。</block>
  <block id="6841ef0768d93855e7fac244d57e6063" category="paragraph">sample_comtion_spaces_replaced</block>
  <block id="d2799712ccf42c55f220f2bf97e126e9" category="paragraph">日期（可选）</block>
  <block id="abd14ac9c5087d1212af3dee68d01a48" category="paragraph">为配置文件执行备份的日期。如果需要，日期值将填充为零。（ YYYYMMD ）</block>
  <block id="8cfc8d2be7600d334ab29a8b6ab43a5b" category="paragraph">20070218</block>
  <block id="bc4a3b44db2d9d28021236c106fbc593" category="paragraph">DB-host （可选）</block>
  <block id="fa738b7708d5940bf6b5e7eee9ed8996" category="paragraph">与要创建或更新的配置文件关联的数据库主机名。</block>
  <block id="9e16ca214759ca9cbb92b3c8e6b8cfff" category="paragraph">my_host</block>
  <block id="bd4aff584a271ffffd539540ac4312cf" category="paragraph">DB-name （可选）</block>
  <block id="6f694e7e4a6a6336f349050807d8020c" category="paragraph">与您创建的 Snapshot 副本关联的数据库名称。</block>
  <block id="1562c33354e681aacb335764472939ea" category="paragraph">RAC5</block>
  <block id="f490cf5339fd960ced4f9ade61522c4e" category="paragraph">DB-SID （可选）</block>
  <block id="7302af704168b5118844f702edd88572" category="paragraph">与您创建的 Snapshot 副本关联的数据库 SID 。</block>
  <block id="3abdad7dc8b9128ccb53a63521bebe38" category="paragraph">rac51</block>
  <block id="d4be4667e2072d28264fccb402dcc720" category="paragraph">标签（可选）</block>
  <block id="775c6470d8b8a77ce8ecdb8d17306999" category="paragraph">与配置文件备份关联的标签。</block>
  <block id="c13a049f19f244466e2bf658298bba50" category="paragraph">sample_label</block>
  <block id="394ac0d1becf7668400acc2d75dd7cff" category="paragraph">模式（可选）</block>
  <block id="1db1367e726051b13ff5d55a3f77d043" category="paragraph">指定备份是联机完成（ h ）还是脱机完成（ c ）。</block>
  <block id="2510c39011c5be704182423e3a695e91" category="paragraph">H</block>
  <block id="4cadd805683fe3b32c916508a048fd5e" category="paragraph">配置文件（可选）</block>
  <block id="aa8b759239856b1a0d7cd1ace05e413d" category="paragraph">与您创建的备份关联的配置文件名称。</block>
  <block id="a65f9179300dba6f5e7fd3a8f5efcdaf" category="paragraph">my_profile</block>
  <block id="66dac87c036a7b2feaf3707cabe5d9b7" category="paragraph">范围（可选）</block>
  <block id="1b869d2a79c431420f5dcf260c521107" category="paragraph">指定备份是全满（ f ）还是部分（ p ）。</block>
  <block id="8fa14cdd754f91cc6554c9e71929cce7" category="paragraph">F</block>
  <block id="c152f3c2af100e9d288188ba16524211" category="paragraph">时间（可选）</block>
  <block id="07a86f9d199ead9271eea5e3a1fc4263" category="paragraph">为配置文件执行备份的时间。此变量的时间值使用 24 小时制时钟，必要时使用零填充。例如， 5 ： 32 和 8 秒显示为 053208 （ hhmmss ）。</block>
  <block id="330bf17e1ffdc9e23d8404880ad9e184" category="paragraph">170530</block>
  <block id="6468657a54847dba3e8549a357632803" category="paragraph">时区（可选）</block>
  <block id="ad900fb23bda37a5c4c4b7bc5878bfe3" category="paragraph">为目标数据库主机指定的时区。</block>
  <block id="33a61062aa4da2b795b7f9616c138b89" category="paragraph">估计</block>
  <block id="3b4083570026cb43f60eaf722c44a9dc" category="paragraph">用户文本（可选）</block>
  <block id="79cf06c7c626e20170e75f0b0976da0a" category="paragraph">您可以输入的自定义文本。</block>
  <block id="d6e4a9b6646c62fc48baa6dd6150d1f7" category="paragraph">生产</block>
  <block id="323ed0bae7fbc79731748f3d61b1971c" category="paragraph">* 注： * SnapManager for Oracle 不支持在 Snapshot 副本的名称的长格式中使用冒号（：）符号。</block>
  <block id="4a96c5d8a864b88062cd4340e436c54f" category="paragraph">If you have suggestions for improving this document, send us your comments by email.</block>
  <block id="bf25194d33ec7a97201c744c76650d65" category="paragraph"><block ref="bf25194d33ec7a97201c744c76650d65" category="inline-link-macro-rx"></block></block>
  <block id="fa51a4c50cc86e32101d91538461e431" category="paragraph">To help us direct your comments to the correct division, include in the subject line the product name, version, and operating system.</block>
  <block id="62bfeaf755f01414c52d6107b9c9bcfa" category="summary">通过 SnapManager ，您可以在更新配置文件时重命名此配置文件。在配置文件上设置的 SnapManager 功能以及重命名前可以执行的操作会保留给重命名的配置文件。</block>
  <block id="159450f946c35ff2f4294060a2c491e2" category="doc">正在重命名配置文件</block>
  <block id="29bd92f4ad5c3342abc730161d91d317" category="list-text">重命名配置文件时，必须确保此配置文件不运行任何 SnapManager 操作。</block>
  <block id="bc30bca35a04248a643fbc940bafe822" category="paragraph">您可以从 SnapManager 命令行界面（ CLI ）和图形用户界面（ GUI ）重命名配置文件。更新配置文件时， SnapManager 会验证并更新存储库中的配置文件名称。</block>
  <block id="a7029e1eb9ef4790acbea273d98ecfed" category="admonition">SnapManager 不支持在多配置文件更新窗口中重命名配置文件。</block>
  <block id="efea7c176523ac66f701a1fc2ad3963e" category="paragraph">提供新的配置文件名称后，新的配置文件名称将添加到客户端凭据缓存中，而先前的配置文件名称将被删除。从客户端重命名配置文件时，仅会更新该客户端的凭据缓存。您需要从每个客户端执行 SMO profile sync 命令，以使用新配置文件名称更新新的凭据缓存。</block>
  <block id="232dd65e6323296a62caebd075d03410" category="paragraph">您可以使用 smo credential set 命令设置配置文件的密码。</block>
  <block id="6664a8f6f740c7b40ece39e2a9e65ede" category="paragraph">如果配置文件名称包含在 Snapshot 副本命名模式中，则在重命名配置文件时，配置文件的新名称将会更新。对配置文件执行的所有 SnapManager 操作都使用新的配置文件名称。使用早期配置文件创建的备份仍使用早期配置文件名称，并用于执行其他 SnapManager 操作。</block>
  <block id="1b7cf628e9b8485a403e79f6fa431ca3" category="paragraph">如果要对 SnapManager 服务器主机执行滚动升级，则必须确保在重命名配置文件之前执行完整升级。</block>
  <block id="a8eec99ce2dea5d788013e9e7fe677c4" category="paragraph">配置文件的新名称仅从发出请求的 SnapManager 客户端更新。连接到 SnapManager 服务器的 SnapManager 客户端不会收到配置文件名称更改的通知。您可以检查操作日志以了解配置文件名称的更改。</block>
  <block id="9ffa2d21f983bb2c9efa739cda67a129" category="admonition">如果计划的备份操作在重命名配置文件时开始，则计划的操作将失败。</block>
  <block id="264c71bddf00f8d860372187275d1d7a" category="list-text">输入以下命令： smo profile update -profileprofile "-new-profilenew_profile_name]</block>
  <block id="33797154243118954e6f7c816dff1190" category="summary">您可以运行 operation dump 命令来创建包含有关操作的诊断信息的 JAR 文件。</block>
  <block id="df17a7b315325d9e7606b4bd36419ad0" category="doc">smo operation dump 命令</block>
  <block id="47155abc99beb4836c619b116f815f64" category="paragraph">指定要为其创建转储文件的配置文件。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="d9249518a814252e6cd38e7a87e454f8" category="paragraph">为操作创建转储文件并分配指定标签。</block>
  <block id="d485c742fe46d93f4eca4d159a4adc6e" category="paragraph">使用指定 GUID 为操作创建转储文件。此 GUID 由 SnapManager 在操作开始时生成。</block>
  <block id="d0def446f257835b3946cedb14a933a0" category="paragraph">以下示例将为备份创建转储文件：</block>
  <block id="955dfbcfaa8936bbb9b9f82aebce7b40" category="inline-xref-macro">转储文件</block>
  <block id="fef458902628cb331d4150ccd57bbfa7" category="paragraph"><block ref="fef458902628cb331d4150ccd57bbfa7" category="inline-xref-macro-rx"></block></block>
  <block id="0017d64f70c7e77d62edaad47ca2bc23" category="summary">您可以运行 history set 命令来配置要查看其历史记录的操作。</block>
  <block id="cdbc821d607d628858d37dcf1cbdbc73" category="doc">smo history set 命令</block>
  <block id="ddb49837475b98847b63ef8df432d0bd" category="paragraph">指定配置文件的名称。此名称最长可为 30 个字符，并且在主机中必须是唯一的。</block>
  <block id="1b52634d6fdb802538727b8fb984c2db" category="paragraph">指定存储配置文件的数据库的详细信息。</block>
  <block id="3a9e10b0db9fe1c7cda4f65696e55fcb" category="paragraph">指定存储配置文件的数据库的名称。您可以使用全局名称或系统标识符。</block>
  <block id="a15221436e34a0c19c66556dce1d8dff" category="paragraph">指定要为其配置历史记录的 SnapManager 操作。</block>
  <block id="6c0cb482bcd2335d6516af60ccb9916a" category="list-text">* —保留 ｛ -countretain_count ｝ 个字： -dailydaily_count ； -monthly-monthly_count ； -weeklyweekly_count ｝ 个字</block>
  <block id="c99a00ef02dd677dd457f46b1e0f0ac5" category="paragraph">指定创建备份，验证备份，还原和恢复以及创建克隆操作的保留类。保留类会根据操作计数，天数，周数或月数进行设置。</block>
  <block id="1f42b4e6635876b7c77f6a43ffead707" category="paragraph">以下示例显示了有关备份操作的信息：</block>
  <block id="512034172e75a7e607b94d3966b58745" category="summary">您可以运行 backup create 命令在一个或多个存储系统上创建数据库备份。</block>
  <block id="7f2934c46b871ddd0e8629658723d1a3" category="doc">smo backup create 命令</block>
  <block id="054e49495248cc5b1b42b005fbdf505e" category="admonition">运行此命令之前，必须使用 profile create 命令创建数据库配置文件。</block>
  <block id="1273aa345caf3179c1aca5c90ab8b184" category="paragraph">指定与要备份的数据库相关的配置文件的名称。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="38d8bb542a60160a9e4fd8601457d40d" category="list-text">* — auto 选项 *</block>
  <block id="d1f7172dc38fc55135c3a5ca18cd760c" category="paragraph">如果数据库处于已挂载或脱机状态， SnapManager 将执行脱机备份。如果数据库处于打开或联机状态， SnapManager 将执行联机备份。如果将 -force 选项与 -offline 选项结合使用，则即使数据库当前处于联机状态， SnapManager 也会强制执行脱机备份。</block>
  <block id="b3da585b6e16e59424118fe1e72df43f" category="list-text">* —联机选项 *</block>
  <block id="984ad3906d43955fdfb46ff986f7cccc" category="paragraph">指定联机数据库备份。</block>
  <block id="1cbd102d14b22ebbe7da7c10a10c44bf" category="list-text">如果本地实例处于关闭状态，并且至少有一个实例处于打开状态，则可以使用 -force 选项将本地实例更改为已挂载状态。</block>
  <block id="e013c2363a4c317b24ee1cbce454c04a" category="list-text">如果没有实例处于 OPEN 状态，您可以使用 -force 选项将本地实例更改为 OPEN 状态。</block>
  <block id="cd41c8950e07e529027559cdf908d945" category="list-text">* - 脱机选项 *</block>
  <block id="e862cd6b3171592fa2ab8291f9561d1f" category="paragraph">指定数据库处于关闭状态时的脱机备份。如果数据库处于打开或挂载状态，备份将失败。如果使用 -force 选项，则 SnapManager 会尝试更改数据库状态以关闭数据库以进行脱机备份。</block>
  <block id="9f54af4881fe1b32ed85d5a82e1884bd" category="list-text">* 完整选项 *</block>
  <block id="7f7b5388e7bc9b5b9366433962da1e70" category="paragraph">备份整个数据库。其中包括所有数据，归档日志和控制文件。无论您执行哪种类型的备份，都会备份归档的重做日志和控制文件。如果只想备份数据库的一部分，请使用 -files 选项或 -tablespaces 选项。</block>
  <block id="ce0fbe1e9f7282c77f90fa50f3729003" category="list-text">* 数据选项 *</block>
  <block id="3166aa83c58a94761b27efdd5d0fd9fb" category="list-text">* 文件列表 *</block>
  <block id="6273c7d9035d97a0f65d28b3e6cbb35d" category="paragraph">仅备份指定的数据文件以及归档的日志和控制文件。使用空格分隔文件名列表。如果数据库处于 OPEN 状态， SnapManager 将验证相应的表空间是否处于联机备份模式。</block>
  <block id="f91a3e364ab1da569daa73e35b1c4bd8" category="list-text">* —表空间表空间 *</block>
  <block id="b15edf78b5e10e3ebd355a5e4c33face" category="paragraph">仅备份指定的数据库表空间以及归档的日志和控制文件。使用空格分隔表空间名称。如果数据库处于 OPEN 状态， SnapManager 将验证相应的表空间是否处于联机备份模式。</block>
  <block id="689ddeea0b4e516fa5bb7a5bce1a3ce3" category="paragraph">指定此备份的可选名称。此名称在配置文件中必须是唯一的。此名称可以包含字母，数字，下划线（ _ ）和连字符（ - ）。不能以连字符开头。如果不指定标签， SnapManager 将创建 scope_type_date 格式的默认标签：</block>
  <block id="0d68286cae77a2e602787010c41e6fa5" category="list-text">范围为 F 表示完整备份， P 表示部分备份。</block>
  <block id="3035ec78ad19ac7a09e7294b03390e49" category="list-text">键入 C 表示脱机（冷）备份，键入 H 表示联机（热）备份，键入 A 表示自动备份，例如 P_A_20081010060037IST 。</block>
  <block id="e7588b17e0555b5d6a0bf0b9fb8c75e9" category="list-text">date 是备份的年份，月份，日期和时间。</block>
  <block id="a08fe0f079780ceb4a6c8c89a6782676" category="paragraph">SnapManager 使用 24 小时制时钟。</block>
  <block id="d1b7517863c4e5e64ee026341eccf6fd" category="paragraph">例如，如果您在数据库于 2007 年 1 月 16 日下午 5 ： 45 ： 16 脱机的情况下执行完整备份东部标准时间， SnapManager 将创建标签 F_C_20070116174516EST 。</block>
  <block id="2687a343f64aa3bb88e4dd649451b869" category="list-text">* —注释字符串 *</block>
  <block id="8e2a6f6169242f458946dc16a747cf30" category="paragraph">指定用于描述此备份的可选注释。将字符串用单引号（ ' ）括起来。</block>
  <block id="11bc8e91b53b239f516208957c597cd1" category="admonition">某些 shell 会去除引号。在这种情况下，必须使用反斜杠（ \ ）包含引号。例如，您可能需要输入以下内容： ` ' this is a comation\'` 。</block>
  <block id="19674269d67e08ed1a82712d3bcce2c2" category="list-text">* —验证选项 *</block>
  <block id="820318f08a05defffae18739959ce644" category="paragraph">运行 Oracle 数据库实用程序，验证备份中的文件是否未损坏。</block>
  <block id="94fefd4b9815cf76742e7b11d99daf82" category="admonition">如果指定 -verify 选项，则备份操作将在验证操作完成之前完成。</block>
  <block id="9c9ee07fb5e368ea5a548134ff83bc09" category="list-text">* 强制选项 *</block>
  <block id="531522e5e88a7ff2221fcac5e03cd72b" category="paragraph">如果数据库未处于正确状态，则强制更改状态。例如， SnapManager 可能会根据您指定的备份类型和数据库所处的状态将数据库的状态从联机更改为脱机。</block>
  <block id="56eafe9feed15baae601466ca0b394ee" category="list-text">如果本地实例处于关闭状态，并且至少有一个实例处于打开状态，则使用 -force 选项会将本地实例更改为已挂载状态。</block>
  <block id="161807a1240555676bab5e5b9f21ae6a" category="list-text">如果没有实例处于 OPEN 状态，则使用 -force 选项会将本地实例更改为 OPEN 状态。</block>
  <block id="a05c57357fca3f2bffdb8fb0e3d8bd19" category="list-text">* —保留 ｛ -hourly ； -daily ； -weekly ； -monthly ； -unlimited ｝ *</block>
  <block id="6edf035facd6b18b01c9ab401c10860a" category="paragraph">指定备份应保留在每小时，每天，每周，每月还是无限制的基础上。如果未指定 -retain 选项，则保留类默认为 -hourly 选项。要永久保留备份，请使用 -unlimited 选项。unlimited 选项使备份不符合保留策略删除的条件。</block>
  <block id="6f554d7800d474bf889657b256374795" category="list-text">* — archivelog 选项 *</block>
  <block id="b1a0b873f1b610732bde1da20ad2ed94" category="paragraph">创建归档日志备份。</block>
  <block id="7536e636ee0712473eedf1796f46f856" category="list-text">*-backup-dest path1 ， [ ， [path2]]*</block>
  <block id="8f733a8c73b295f99ffc0339b3545ec8" category="paragraph">指定要为归档日志备份备份而备份的归档日志目标。</block>
  <block id="cd349e60a3c7b4013ed3ff8ac849ef07" category="list-text">*-exclude-dest path1 ， [ ， [path2]]*</block>
  <block id="bb3e88d3cbb4a8ba671197c147692a90" category="paragraph">指定要从备份中排除的归档日志目标。</block>
  <block id="b146dc2d522d103ecf0f50a89d992940" category="list-text">* -prunelog ｛ -all | -until -scnuntil -scntil-scn | -until -dateyyyy-mm-dd ： HH ： mm ： ss | -before ｛ -months | -days | -weeks | -hours ｝ *</block>
  <block id="ea4a98f4534f5e3c08f520abd19d1628" category="paragraph">根据创建备份时提供的选项，从归档日志目标中删除归档日志文件。all 选项将从归档日志目标中删除所有归档日志文件。直到 -til-scn 选项将删除归档日志文件，直到指定系统更改编号（ SCN ）为止。直到日期选项将删除归档日志文件，直到指定时间段为止。before 选项将删除指定时间段（天，月，周，小时）之前的归档日志文件。</block>
  <block id="b20d3702b7d2c8e0a91552e9ea6f2eb6" category="list-text">-prune-dest prune_dest1 ， prune_dest2*</block>
  <block id="22b3bd2c2798243f88574e6471a86260" category="paragraph">在创建备份时，从归档日志目标中删除归档日志文件。</block>
  <block id="4f9945821699567eb9d79da3a2cb6055" category="list-text">* — taskspectaskspec*</block>
  <block id="b853cd77eaf4cd445a36939b6b25716c" category="paragraph">指定可用于备份操作的预处理活动或后处理活动的任务规范 XML 文件。在提供 -taskspec. 选项时，应提供 XML 文件的完整路径。</block>
  <block id="2e86948dd31567dee795c054717de799" category="list-text">* 转储选项 *</block>
  <block id="baabf13d083036ceb60d976363ca908b" category="paragraph">在数据库备份操作成功或失败后收集转储文件。</block>
  <block id="e2d0e0aad9ee29fed587d9cdd39f2ddb" category="paragraph">以下命令将创建完整的联机备份，创建备份到二级存储，并将保留策略设置为每日：</block>
  <block id="9d575d3418483faf936cf2a3d9a556f2" category="inline-xref-macro">创建数据库备份</block>
  <block id="52deca875cee1216e367ada2ed4a375a" category="paragraph"><block ref="52deca875cee1216e367ada2ed4a375a" category="inline-xref-macro-rx"></block></block>
  <block id="15cd5946cd3adcd7d4962cc72fe15a76" category="inline-xref-macro">smo profile create 命令</block>
  <block id="fb1c76cfafc68e885702f60ff6120232" category="paragraph"><block ref="fb1c76cfafc68e885702f60ff6120232" category="inline-xref-macro-rx"></block></block>
  <block id="fdf138e8e32b475cac4e95dfa4a6845c" category="summary">如果主机上未安装 SnapManager ，则可以使用 Java Web Start 。Java Web Start 将下载 SnapManager 组件并启动图形用户界面（ GUI ）。支持的 JRE 版本为 1.5 ， 1.6 和 1.7 。</block>
  <block id="a3ce501ae6a1c70515cb2af72f8a5263" category="doc">使用 Java Web Start 下载并启动图形用户界面</block>
  <block id="65ac70b2787abfaf135067ac5ef6b778" category="paragraph">您必须确保满足以下条件：</block>
  <block id="e1549d03ea953026442a3230a7859b92" category="list-text">SnapManager 服务器正在运行。</block>
  <block id="c7e2fab7a8d6cf9e2fca771f14e7a01d" category="list-text">此时将打开 Web 浏览器窗口。</block>
  <block id="3452a5b67f5a032574f950fec9af4f86" category="list-text">在 Microsoft Internet Explorer Web 浏览器窗口中，输入<block ref="4a94d1f3eea68294a5015b779384b20a" category="inline-link-rx"></block>。</block>
  <block id="0185bb49acace5ba1649f5080a26ae21" category="paragraph">smo-server.domain.com 是安装 SnapManager 的完全限定主机名和域， port 是 SnapManager 服务器的侦听端口（默认为 272.14 ）。</block>
  <block id="ce00a7fdd8a95fd87db0573294090c2b" category="admonition">您必须在浏览器窗口中输入 https 。</block>
  <block id="e046363ee5274a9c84adb5bac2284a1c" category="paragraph">显示消息 There is a problem with the site's security certificate" ...Do you want to proceed ？将显示</block>
  <block id="16ce35c51c0a563c3ea0b0119449b500" category="list-text">单击 * 是 * 或 * 继续 * 。</block>
  <block id="0369f1b36c822d342c83242a53c5564d" category="list-text">单击标记为 Click here to download and install JRE 6.0 and the application 的链接。</block>
  <block id="2bd79fb23ab23252040de4e67a8eaae9" category="paragraph">标记为 Download Java Web Start 的链接，并显示消息 This site might requireed the following ActiveX control ： Java Plug-in 1.6"... " 此时将显示 Click here to install 。</block>
  <block id="614d609fd5b71a19f97a762f265b493c" category="list-text">在安装窗口中，执行以下步骤：</block>
  <block id="c96438f4513d187f67a26e33ddf11f94" category="list-text">单击标记为 Click here to install... 的消息</block>
  <block id="456dfc2728250a69c4f1682d79feaedb" category="paragraph">此时将显示一个 * 安装 Active X Control* 菜单。</block>
  <block id="7318b6877f2612b12f8a218ee05c7572" category="list-text">选择 * 安装 Active X Control...* 。</block>
  <block id="061fbd8a11a2a78b3af625c4fc134fb2" category="paragraph">包含以下文本的消息 Internet Explorer - Security Warning ： "Do you want to install this software ？名称：此时将显示 Java 插件 1.6 。</block>
  <block id="f19e5d93360a2cdbfe64b6c513e8d263" category="list-text">单击 * 安装 * 。</block>
  <block id="092c5e56a6fa630aa0d0eeb28cb93a86" category="paragraph">此时将显示一个 "Java Plug-in 1.6." 窗口，用于安装 J2SE Runtime Environment 1.6 。</block>
  <block id="63d37d4dc34cb391ba526adc107b7742" category="paragraph">此时将显示一个窗口，要求您安装 J2SE Runtime Environment 1.6 。</block>
  <block id="054e771af04e4e3086e4c7451d3603dd" category="list-text">在 License Agreement 页面上，选择 * 我接受许可协议中的条款 * ，然后单击 * 下一步 * 。</block>
  <block id="fa886a3e3132cc593b7f5162b1eeaf26" category="list-text">在设置类型页面上，选择 * 典型 * 并单击 * 下一步 * 。</block>
  <block id="74a4f8fe78f2525bee881fa6de736253" category="list-text">在安装完成窗口中，单击 * 完成 * 。</block>
  <block id="7725c17829b6bfd26716efcd488c31c0" category="paragraph">SnapManager 开始下载。</block>
  <block id="fc0c858885ea3def1ed631405d1c3521" category="paragraph">出现文件下载对话框，并显示消息是否要保存此文件？此时将显示 application.jnlp 。</block>
  <block id="4c5ee99903651e8534c54fb5d49983b6" category="list-text">在文件下载窗口中，执行以下步骤：</block>
  <block id="e2463945c00e4af0dd89aaef15883ca0" category="list-text">在 Windows 客户端上安装最新版本的 JRE 1.6 。</block>
  <block id="4d9e19666ca193091298bb57888348a7" category="list-text">运行以下命令以验证是否已安装 Java ： java -version</block>
  <block id="f5792ae943642ec1d0056e7da2cda630" category="paragraph">输出应指示 Java 版本 1.6.0_24 （即 Java 1.6 ）或更高版本。</block>
  <block id="8ba68e9ac7ce01891ca7bd23db5190cf" category="list-text">使用 Java Web Start Launcher 程序将 Windows 配置设置更改为始终打开扩展名为 jnlp 的文件。</block>
  <block id="8e6c9f247d0b0c8d0bd51e1216b8d53a" category="paragraph">更改 Windows 配置设置的步骤因所使用的 Windows 版本而异。</block>
  <block id="a187b5a35c46b6334d017ab621bd5f17" category="list-text">输入您在步骤 1 中指定的 SnapManager URL 。</block>
  <block id="53e60395f5d8caf11303a79f636c6c64" category="paragraph">此时将在 Windows 客户端上开始下载 SnapManager ，并显示警告 - 安全对话框。</block>
  <block id="965d3ecba72eaa0b7a11b0e5abcdc23e" category="list-text">执行以下步骤：</block>
  <block id="b2eda04a2f3908dee340508717bc6249" category="paragraph">消息内容和按钮标签因平台而异。</block>
  <block id="1bf66755fe6e157329b5fee11fd80b71" category="list-text">在警告 - 安全性对话框中，单击 * 是 * 。</block>
  <block id="6202455fa633476fd7a8e3259108d014" category="paragraph">此时将显示一个对话框。</block>
  <block id="e8cd53f2f3c0bb027a6b237278f95910" category="list-text">在主机名不匹配对话框中，单击 * 运行 * 。</block>
  <block id="7cdf9f379e7093f1db8f6b3b82ccc107" category="paragraph">此时将显示警告 - 安全性对话框，其中包含有关 SnapManager 应用程序签名的消息。</block>
  <block id="578bc32fa7fb64f85285089af892edcf" category="list-text">单击 * 运行 * 。</block>
  <block id="191c3f7d73139217da83b676ee7f6f37" category="paragraph">标题为 "Java 安装程序 - 安全警告 " 的对话框以及消息警告安全性 - 应用程序的数字签名存在错误。是否要运行此应用程序，将显示。</block>
  <block id="98db528c28661c28acf35a97f084824a" category="paragraph">浏览器将下载并启动适用于 Oracle 图形用户界面的 SnapManager 。</block>
  <block id="d06480c85fa07c322c285a70ef201c46" category="summary">通过 SnapManager ，您可以为数据库用户设置访问存储库的凭据。您可以使用凭据限制或阻止对 SnapManager 主机，存储库，配置文件和数据库的访问。</block>
  <block id="9d5062d00c512c53dc79baf277245b5d" category="doc">授权访问存储库</block>
  <block id="9bfdc9bb391037fc413913f6bf9698ae" category="paragraph">如果使用 credential set 命令设置凭据，则 SnapManager 不会提示您输入密码。</block>
  <block id="68ed72776738f604c4b13becc5bc254d" category="paragraph">您可以在安装 SnapManager 或更高版本时设置用户凭据。</block>
  <block id="1817b5c2c2cd5b872467f8d141262339" category="paragraph">SMO 凭据集 -repository -dbname repo_service_name -host repo_host -login -username repo_username （ -password repo_password ） -port repo_port</block>
  <block id="6f5ec72216be708471dcdfc8ffa2402c" category="summary">您可以运行 clone delete 命令删除克隆。如果克隆正在由任何操作使用，则不能删除该克隆。</block>
  <block id="d0d0aa5f6fd70848fc7c2762f3aa1cf1" category="doc">smo clone delete 命令</block>
  <block id="3da122fb0a1c9f525e2d63b4f36b7030" category="paragraph">指定包含要删除的克隆的配置文件的名称。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="bea4dec5132ccb8bf8e60796cade16b7" category="paragraph">即使存在与克隆关联的资源，也会删除此克隆。</block>
  <block id="ed51a36e722fbe1652864e4683ff9095" category="paragraph">指定要删除的克隆的 GUID 。GUID 由 SnapManager 在创建克隆时生成。您可以使用 smo clone list 命令显示每个克隆的 GUID 。</block>
  <block id="7294e1052c931751a2a520bf90f18457" category="list-text">* 标签名称 *</block>
  <block id="e40b6f9194e564decb79b96547a29de8" category="paragraph">指定要删除的克隆的标签。</block>
  <block id="eff274bf7b7c7fcede42dc21cc94cd79" category="list-text">* — sysspassword sysspassword*</block>
  <block id="46741c1e8a856769dd3d03f3538831b6" category="paragraph">指定 sys 特权用户的密码。</block>
  <block id="cc095d5772c38458f801db878685e7ed" category="admonition">如果为 sys 特权用户提供的数据库凭据与为 sys 特权用户提供的数据库凭据不同，则必须为 sys 特权用户提供密码。</block>
  <block id="e545a3185216a3e134838d92b97ec788" category="paragraph">用于输入数据库登录详细信息。</block>
  <block id="4b97c0320162c400fc4f2fbbb18887fe" category="paragraph">指定访问数据库所需的用户名。</block>
  <block id="c54188838f02c9f5f202d906b6bd6e85" category="paragraph">指定访问数据库所需的密码。</block>
  <block id="2121dea2e35bb8dc4607b307b1409d18" category="paragraph">指定用于访问配置文件所述数据库的 TCP 端口号。</block>
  <block id="d7218869a84e1cd6438d9e22f7a0af42" category="paragraph">指定在克隆删除操作后收集转储文件。</block>
  <block id="03bf1dca58b5362373a2870eb2b1d37a" category="paragraph">以下示例将删除此克隆：</block>
  <block id="af0f18fa20b095d2fd2c8453b1ba86de" category="summary">SnapManager 会将信息组织到配置文件中，然后配置文件会与存储库关联。配置文件包含有关所管理数据库的信息，而存储库包含有关对配置文件执行的操作的数据。</block>
  <block id="995416416b8751b107177beee997cbe9" category="doc">什么是存储库</block>
  <block id="5504d11641388b38bcd09010bbb62b73" category="paragraph">存储库会记录备份的时间，备份的文件以及是否从备份创建了克隆。当数据库管理员还原数据库或恢复数据库的一部分时， SnapManager 会查询存储库以确定备份的内容。</block>
  <block id="5541383233c466fb4a85405bbaf09dea" category="paragraph">由于存储库会存储备份操作期间创建的数据库 Snapshot 副本的名称，因此存储库数据库不能位于同一数据库中，也不能位于 SnapManager 正在备份的同一数据库中。执行 SnapManager 操作时，必须至少启动并运行两个数据库（ SnapManager 存储库数据库和由 SnapManager 管理的目标数据库）。</block>
  <block id="9a3807250146aaabeaa9a83378809f61" category="paragraph">如果您尝试在存储库数据库关闭时打开图形用户界面（ GUI ），则 sm_gui.log 文件中会记录以下错误消息： [warering] ： SMO-01106 ：查询存储库时出错：没有更多数据可从套接字中读取。此外，如果存储库数据库已关闭， SnapManager 操作将失败。有关不同错误消息的详细信息，请参见 _Troubleshooting Known Issages_ 。</block>
  <block id="72514ea378f7967d46b46558c0042bd3" category="paragraph">您可以使用任何有效的主机名，服务名称或用户名来执行操作。要使存储库支持 SnapManager 操作，存储库用户名和服务名称只能包含以下字符：字母字符（ A-Z ），数字（ 0-9 ），减号（ - ），下划线（ _ ）和句点（ . ）。</block>
  <block id="6c6d49667ce3daed8688076b79c2fa24" category="paragraph">存储库端口可以是任何有效的端口号，存储库主机名可以是任何有效的主机名。主机名必须包含字母字符（ A-Z ），数字（ 0-9 ），减号（ - ）和句点（ . ），但不能包含下划线（ _ ）。</block>
  <block id="4d61335a5e98b73b5bdd04e45f9cc474" category="paragraph">必须在 Oracle 数据库中创建存储库。SnapManager 使用的数据库应按照 Oracle 数据库配置过程进行设置。</block>
  <block id="ed4181cb4fd12eadc5d94df89e25f1f8" category="paragraph">一个存储库可以包含有关多个配置文件的信息；但是，每个数据库通常只与一个配置文件相关联。您可以有多个存储库，每个存储库包含多个配置文件。</block>
  <block id="6a6c84754838cbb9c2aa8fcc6de39dd1" category="summary">您可以在创建新配置文件时为其自定义电子邮件主题。</block>
  <block id="61c0799511e58b7a8b08e941236355cf" category="doc">自定义新配置文件的电子邮件主题</block>
  <block id="dadf53ca5ac495b28303883e7eea6811" category="paragraph">您可以使用 ｛ profile ｝ _ ｛ operation-name ｝ _ ｛ db-SID ｝ _ ｛ db-host ｝ _ ｛ start-date ｝ _ ｛ end-date ｝ _ ｛ status ｝ 模式自定义电子邮件主题，也可以输入您自己的文本。</block>
  <block id="7d97481b1fe66f4b51db90da7e794d9f" category="paragraph">配置文件</block>
  <block id="8c7181c59e9a71eb23540025695af0a7" category="paragraph">用于数据库操作的配置文件名称</block>
  <block id="53ce027b3a6aefebd991efb40ded8dd7" category="paragraph">程序 1</block>
  <block id="4ca981cef8e3bf234f69c444d17fd3f1" category="paragraph">操作名称</block>
  <block id="ac1da4e0109038ca68aa7657c9106905" category="paragraph">数据库操作名称</block>
  <block id="f649dc14735d5fd722dab5c124f596e5" category="paragraph">备份，数据备份，数据和归档日志备份</block>
  <block id="a0fff8b3a1cafec483ba5a380b23eed9" category="paragraph">DB-SID</block>
  <block id="a69ca3ba439549331374b552a1a8091c" category="paragraph">数据库 1</block>
  <block id="9b7b2d36bdf352b754a307f11b22dcf3" category="paragraph">数据库主机</block>
  <block id="35a847fec3e6a7a6fbf3aae3c86243ef" category="paragraph">主机 A</block>
  <block id="c78476e8943b77662f089b3a85611089" category="paragraph">开始日期</block>
  <block id="fdaa947c1a3c2cc2623c959fbb4cdfd8" category="paragraph">数据库操作的开始时间，格式为 mmdd ： hh ： ss yyyy</block>
  <block id="21a6b631b5b913060c79d5c5785ac0c5" category="paragraph">2012 年 4 月 27 日 21 ： 00 ： 45 PST</block>
  <block id="dbadd085ebc635a4fd9e8a076da2fa0a" category="paragraph">结束日期</block>
  <block id="54a1c4e3eac28bfdb6b00a4a8f1b9652" category="paragraph">数据库操作的结束时间，格式为 mmdd ： hh ： ss yyyy</block>
  <block id="cedc2796021754aad001ab5e5d81d42e" category="paragraph">2012 年 4 月 27 日 21 ： 10 ： 45 PST</block>
  <block id="9acb44549b41563697bb490144ec6258" category="paragraph">status</block>
  <block id="505a83f220c02df2f85c3810cd9ceb38" category="paragraph">success</block>
  <block id="a772061d3ab13f0184409749f7dba665" category="paragraph">如果未为变量提供任何值，则 SnapManager 将显示以下错误消息： missing value （ s ） -Subject 。</block>
  <block id="40651a69b5c1af205f1a4634fe6e3f37" category="list-text">输入以下命令： smo profile create -profileprofile "-profile-passwordprofile_password] -repositor-dbnamerepo_service_name-host-portrepo_port-login-usernamerepo_username-database-dbnamedb_dbname-hosterdb_host "-sidb_service_username-try_trusername-zh.-zhun-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-</block>
  <block id="2a2e2fc0ea1add27cde4b714846eb1f9" category="summary">SnapManager 启动部分列出了启动 SnapManager 时执行的任务。如果您只是了解 SnapManager ，也可以使用本节。</block>
  <block id="a2987c9f396eac7a3d9b6caee35dfeca" category="doc">启动 SnapManagerfor Oracle</block>
  <block id="48c136b1048c1204a36995fd38893b6a" category="paragraph">在使用 SnapManager 之前，您应已执行以下操作：</block>
  <block id="9c0b09abed85137cda385b1b33aec9fe" category="list-text">已下载并安装 SnapManager 软件。</block>
  <block id="c917e9839d01ceb285792a0d5e542a4c" category="list-text">已确定使用图形用户界面还是命令行界面。</block>
  <block id="b53e0a8a72fc8b053c709431dac5fc37" category="summary">如果已安装 SnapDrive for Windows ，请在使用 SnapManager 之前验证是否可以创建 Snapshot 副本。</block>
  <block id="89ddc12aaf42b038c2b5e8be551a89be" category="doc">验证 SnapDrive for Windows</block>
  <block id="934ac836573e99226b25d79cb36c5957" category="list-text">从开始菜单中，右键单击 * 我的电脑 * ，然后选择 * 管理 * 。</block>
  <block id="bf104101addbcdb1f23812d143dbcdd1" category="list-text">在计算机管理窗口中，单击 * 存储 * &gt; * SnapDrive * 。</block>
  <block id="6151a1bfd78cc81e165bf19a8e8df165" category="list-text">选择一个磁盘。</block>
  <block id="2fcf5374563e56c6188fa05a4ef5bdd4" category="paragraph">有关使用 SnapDrive 的详细信息，请参见 _Windows SnapDrive 安装和管理指南 _ 。</block>
  <block id="681b8ccaf82bc6bef1cf1741593c1091" category="paragraph">如果您已成功找到 SnapDrive 产品的磁盘信息，则 SnapDrive 工作正常。</block>
  <block id="992c3d24ba3df1cde9ed3061e1be20a5" category="inline-link">_Windows SnapDrive 安装和管理指南 _ ： mysupport.netapp.com/documentation/productsatoz/index.html\]<block ref="becbe90d853340c5493f9860521b5be8" category="inline-link-rx"></block></block>
  <block id="8b0b890e5a3f307221ce0604e963905d" category="paragraph"><block ref="8b0b890e5a3f307221ce0604e963905d" category="inline-link-rx"></block></block>
  <block id="de945caf504c659ea35fb86c3ba1e99d" category="summary">您可以创建新的 POST 脚本，也可以使用 default_install_directory\plugins\backup\create\post 中提供的脚本。</block>
  <block id="47b09274e97bfd1d29e435bfa29b7bc8" category="doc">创建或更新 POST 脚本</block>
  <block id="3e20c1e6006ec3adcb75f53a3ab9d862" category="paragraph">您必须以特定方式对脚本进行结构调整，以便可以在 SnapManager 操作的上下文中执行该脚本。根据预期操作，可用输入参数和返回代码约定创建脚本。</block>
  <block id="1da6cc75bedc5d46fdbab56d62c78fe6" category="list-text">创建新脚本或使用可用的示例脚本。</block>
  <block id="0c8a8bbb594fbd7438ee42b00d41f42e" category="list-text">根据需要修改或包括函数，变量和参数。</block>
  <block id="3438b4e7002d30063e3406d323236171" category="list-text">保存自定义脚本。</block>
  <block id="260495ac8345f9f14417535722f56c9b" category="list-text">在后处理任务规范 XML 文件中添加脚本名称和所需输入，或者通过选择正确的脚本和输入参数从图形用户界面提供输入。</block>
  <block id="6e538d69d985abdff9c6d205146f6a9b" category="admonition">您不必在任务规范 XML 文件中提供二级存储详细信息。</block>
  <block id="4716711f540d229fb78f39f757564e44" category="inline-xref-macro">为 SnapManager 操作创建任务规范文件和脚本</block>
  <block id="920ffedcfa3efd6cd2ec4c68fd14b4a8" category="paragraph"><block ref="920ffedcfa3efd6cd2ec4c68fd14b4a8" category="inline-xref-macro-rx"></block></block>
  <block id="b09a2bae3e50ff9b07ca618d1aa3f1fd" category="summary">您可以选择备份整个数据库或只备份一部分数据库。如果选择备份数据库的一部分，则可以选择备份一组表空间或数据文件。您可以选择对表空间和数据文件进行单独备份。</block>
  <block id="92b3ddb20fd53b8a4531d62cf062b2d9" category="doc">什么是完整备份和部分备份</block>
  <block id="01a306342fa188792990a0285d5d4b39" category="paragraph">下表列出了每种备份类型的优势和后果：</block>
  <block id="f7b2ceb71d1db781418644d81e747782" category="cell">优势</block>
  <block id="90843c066e7c75581a9005b9579c151d" category="cell">缺点</block>
  <block id="bbd47109890259c0127154db1af26c75" category="paragraph">已满</block>
  <block id="e8f49a28a3c0c404d6df325392c7d2b0" category="paragraph">最大限度地减少 Snapshot 副本的数量。对于联机备份，在整个备份操作期间，每个表空间都处于备份模式。SnapManager 会为数据库使用的每个卷创建一个 Snapshot 副本，并为日志文件占用的每个卷创建一个 Snapshot 副本。</block>
  <block id="93182ce2a75baac761ada22436753dd8" category="paragraph">对于联机备份，在整个备份操作期间，每个表空间都处于备份模式。</block>
  <block id="44ffd38a6dea695cbe2b34efdcc6cf27" category="paragraph">部分</block>
  <block id="0d282f21a1e49f4e578dd66e61a31bba" category="paragraph">最大限度地减少每个表空间在备份模式下花费的时间。SnapManager 按表空间对其所获取的 Snapshot 副本进行分组。每个表空间都处于备份模式，时间长度足以创建 Snapshot 副本。这种对 Snapshot 副本进行分组的方法可以最大限度地减少联机备份期间日志文件中的物理块写入。</block>
  <block id="aea76449cdf0baa3bcd7015bdf589b45" category="paragraph">备份可能需要在同一个卷中为多个表空间创建 Snapshot 副本。此方法可通过发生原因 SnapManager 在备份操作期间为单个卷创建多个 Snapshot 副本。</block>
  <block id="18e536f37f81be1f37df8ce337745d1b" category="paragraph">* 注： * 尽管您可以执行部分备份，但您必须始终对整个数据库执行完整备份。</block>
  <block id="dc1616f4cf2c04c6dc8ef1adf1357801" category="summary">您可以找到有关安装和使用 SnapManager 所涉及的基本任务的信息。</block>
  <block id="d34c9784b0e787732cf5eae02f9f66e8" category="doc">从何处获取更多信息</block>
  <block id="0945359809dad1fbf3dea1c95a0da951" category="cell">文档</block>
  <block id="cd1abbd2ef550fbe1174d54e82daafbd" category="paragraph">SnapManager 问题描述页面</block>
  <block id="878a1dcb0d56472e2654f1cb72afc20d" category="paragraph">此页面提供了有关 SnapManager 的信息，指向联机文档的指针以及指向 SnapManager 下载页面的链接，您可以从该页面下载软件。</block>
  <block id="0696c270f49d31712e7f6293b9e22d20" category="paragraph">_7- 模式 Data ONTAP SAN 配置指南 _</block>
  <block id="0373910e51252c7b97dcbea9f4942604" category="inline-link">mysupport.netapp.com</block>
  <block id="07bf41f52809749170f38c5721efea72" category="paragraph">本文档可从获取<block ref="7bc6752d2076d2c755eaebbdfeb91d23" category="inline-link-rx"></block>。</block>
  <block id="d47d545f6b961f0379e45cbe2eec75eb" category="paragraph">它是一个动态的联机文档，其中包含有关在 SAN 环境中设置系统的要求的最新信息。它提供了有关存储系统和主机平台，布线问题，交换机问题和配置的最新详细信息。</block>
  <block id="06e5f77d3b446783bb2ff59ca24b57a0" category="paragraph">SnapManager 和 SnapDrive 兼容性列表</block>
  <block id="7347ac6635d17dff22f5422c2e91f0ac" category="inline-link">mysupport.netapp.com/matrix</block>
  <block id="1f3aa6db33406ec72ee4ccdb92a2ca15" category="paragraph">本文档位于互操作性一节中<block ref="78df661d49efb9c2c170fb8f29cfc5fb" category="inline-link-rx"></block>。</block>
  <block id="a885f3443d6d53fa42bbacd01072d30f" category="paragraph">这是一份动态的联机文档，其中包含特定于 SnapManager 及其平台要求的最新信息。</block>
  <block id="be111a8c83cc76719b7776a5394d40af" category="paragraph">《 SnapManager 发行说明》</block>
  <block id="72d89b3c201121142fd3ee7ed25473a7" category="paragraph">本文档随 SnapManager 一起提供。您也可以从下载副本<block ref="7bc6752d2076d2c755eaebbdfeb91d23" category="inline-link-rx"></block>。它包含使配置平稳启动和运行所需的任何最后一分钟信息。</block>
  <block id="c8b193f16d04dfd3afafb284000bf27d" category="paragraph">NetApp 主机连接和支持套件文档</block>
  <block id="7742fee692b2edb6378824b484e772ef" category="paragraph"><block ref="31509d9d2ecd7357c2d79b6100170edf" category="inline-link-rx"></block>。</block>
  <block id="22725c4e2c7408f59ad27f8931cf8b3e" category="paragraph">系统配置指南 _</block>
  <block id="e6f8afdf2375a7f92775326f9127ba5a" category="paragraph">《 Data ONTAP 块访问管理指南》</block>
  <block id="31509d9d2ecd7357c2d79b6100170edf" category="paragraph"><block ref="31509d9d2ecd7357c2d79b6100170edf" category="inline-link-rx"></block></block>
  <block id="33c0408667c5ae019e0c1597725dcf7b" category="paragraph">主机操作系统和数据库信息</block>
  <block id="f3ec3dd7d888edbb751d9a5222294f25" category="paragraph">这些文档提供了有关主机操作系统和数据库软件的信息。</block>
  <block id="588af1b6e8b9ec5cb6021e7148a2c817" category="summary">您可以验证环境以确保 SnapDrive 和 SnapManager 设置正确。</block>
  <block id="3e8d3b6cb819fd88ed192e7c5a43552e" category="doc">验证环境</block>
  <block id="8de467c547b49bf291a9cb86a71042ec" category="paragraph">下载，安装和设置所需的前提条件。确保已安装 SnapManager 且主机服务器正在运行。</block>
  <block id="393b22eb6fd7d5488cdaa4e37d96dcf2" category="list-text">要验证是否已安装 SnapDrive 并可从 root 帐户运行，请运行以下命令： smo system verify</block>
  <block id="8f6caf2b7ec21f442c800303eb271d1b" category="inline-xref-macro">smo system verify 命令</block>
  <block id="4de7c8d43a32983e4b65bf37f60516e4" category="paragraph"><block ref="4de7c8d43a32983e4b65bf37f60516e4" category="inline-xref-macro-rx"></block></block>
  <block id="bbeb9f4e10e92696502f244e5073949f" category="summary">SnapManager 提供了一种在执行克隆操作前后使用自定义脚本的方法。例如，您可能已经创建了一个自定义脚本，用于验证克隆数据库 SID 并确保命名策略允许此 SID 。使用 SnapManager 克隆插件，您可以包括自定义脚本，并在 SnapManager 克隆操作之前或之后自动运行这些脚本。</block>
  <block id="da3fc51902d86ebd88cfd801aa9c1bdd" category="doc">克隆数据库并使用自定义插件脚本</block>
  <block id="450d2a93fb35da47f554d9da405118e8" category="list-text">查看插件脚本示例。</block>
  <block id="081043b48df79314490af7a068c126ab" category="list-text">从头开始创建脚本或修改某个示例插件脚本。</block>
  <block id="40daa9a14ea87df907b8d4d4aa72daed" category="paragraph">根据 SnapManager 插件脚本准则创建自定义脚本。</block>
  <block id="deadcdb9b89f6cfd07cfb7fca6bb2aee" category="list-text">将自定义脚本置于指定的目录位置。</block>
  <block id="9dbb063e33939d0bfafa1a1dfb3a2546" category="list-text">更新克隆规范 XML 文件，并提供有关克隆过程中应使用的自定义脚本的信息。</block>
  <block id="b71df60090e4175f9c5d377d8a314a25" category="list-text">使用 SnapManager 命令验证自定义脚本是否正常运行。</block>
  <block id="4d860cdbdaa4674f03c70d2ee7b49618" category="list-text">启动克隆操作时，请包含脚本名称和可选参数。</block>
  <block id="1c063489690dce10c599db185a34e876" category="summary">如果备份根据保留策略过期， SnapManager 将根据保留设置确定是否删除备份。删除备份是默认行为。您可以更改此默认行为并选择释放未受保护的备份。</block>
  <block id="4a5a937c1f32a9f3f636c42a08636e2d" category="doc">更改保留策略的默认行为</block>
  <block id="5657eb9ab22132539176f78ba5325efd" category="paragraph">默认情况下， Snap Manager 会在备份到期时将其删除。</block>
  <block id="559c4b4393e20b07de538179ec38a295" category="list-text">访问以下默认位置：</block>
  <block id="480fa830fdc716afa9175656187caab7" category="paragraph">默认 SMO 安装位置 \properties\SMO.config</block>
  <block id="eef333cf2e88f72f00e17c6f52ff8f6e" category="list-text">编辑 SMO.config 文件。</block>
  <block id="64f450b6e0960819f2da8978f7a35691" category="list-text">将 SMO.config 文件中的 retain.alwaysFreeExpiredBackups 属性设置为 true 。</block>
  <block id="2dee7555d3a80ceb1edd74194746c829" category="paragraph">例如， retain.alwaysFreeExpiredBackups = true</block>
  <block id="acc478465280460225fc963c60bd96da" category="inline-xref-macro">smo backup update 命令</block>
  <block id="731bcf37ad57880e368089c42f104018" category="paragraph"><block ref="731bcf37ad57880e368089c42f104018" category="inline-xref-macro-rx"></block></block>
  <block id="303b694a43bf0ad35b1216c7143c2be1" category="summary">此命令会在单个主机或多个主机及其关联目标数据库上执行滚动升级，从较低版本的 SnapManager 升级到较高版本。升级后的主机只能使用更高版本的 SnapManager 进行管理。</block>
  <block id="c989da984a9c06c3aac8aef0fc1c8f9b" category="doc">smo repository rollingupgrade 命令</block>
  <block id="79aba8acad5b59d98794f5178e2ba491" category="list-text">* —升级主机 host_and_target_database*</block>
  <block id="856bb858f8d64f46c27d9d5df502da05" category="paragraph">指定要从较低版本的 SnapManager 滚动升级到较高版本的主机的名称。</block>
  <block id="9829a577ab3b2eaf5cf54f7ccc05a290" category="summary">您可以释放备份，这样无需删除备份元数据即可删除 Snapshot 副本。此功能可释放备份占用的空间。您可以使用 smo backup free 命令释放备份。</block>
  <block id="93de02a0ee34a03ed23a837fb9585986" category="paragraph">要使备份符合释放条件，您必须确保满足以下条件：</block>
  <block id="e86e0826cdc7b1c8f7984f6bdaeade9c" category="list-text">备份成功</block>
  <block id="97f3b82cf72bf441f926b84322c283b9" category="list-text">不会挂载备份</block>
  <block id="ab6e79fd92d32fd214b87caead80e66c" category="list-text">备份没有克隆</block>
  <block id="d2d2a4e90969f239bf6b050251f0ed23" category="list-text">不能使用无限制保留策略保留备份</block>
  <block id="ffda1a416206cbdb678fdd7d5985f041" category="list-text">备份尚未释放</block>
  <block id="ef078815a2aafbdca024816164e1dd5c" category="paragraph">您可以将 -dump 选项指定为可选参数，以便在备份可用操作成功或失败后收集转储文件。</block>
  <block id="e8406d530592a5e47b686af47e4e80ad" category="list-text">输入以下命令： smo backup free -profileprofileprofile_name ｛ -labelLabel [data | -archivelogs] | -idi| -all ｝ -force 【 -dump] 【 -quiet 】【 -force]</block>
  <block id="6193ef78d21e21720dd098f9acea4558" category="inline-xref-macro">smo backup free 命令</block>
  <block id="e219c9aa495cd8e7216946b2f478a2cd" category="paragraph"><block ref="e219c9aa495cd8e7216946b2f478a2cd" category="inline-xref-macro-rx"></block></block>
  <block id="a279fc021ee29552f9059bb983d3d4f4" category="summary">您应了解使用 SnapManager 时可能发生的一些已知问题，以及如何解决这些问题。</block>
  <block id="7500c002e8ef313c08a5c0ebb954ed2c" category="doc">对已知问题进行故障排除</block>
  <block id="b1c9b929c88899fdcc5201fc6687e57f" category="section-title">SnapManager for Oracle 无法识别集群模式配置文件</block>
  <block id="af744b6ffa6e2307a1b5cdd70b0c9a48" category="paragraph">如果 SnapManager for Oracle 安装目录的 cmode_profiles.config 文件中不存在集群模式配置文件名称，则可能会触发以下错误消息：</block>
  <block id="0e68d173bdec2d6c37472f03bfb2e475" category="paragraph">请使用 SnapDrive 配置集 -dfm user_name appliage_name 配置 DFM 服务器。</block>
  <block id="a2d144c6db9a080b3e6c57c847b2b141" category="paragraph">此外，在升级适用于 Oracle 的 SnapManager 时，如果删除 /opt/netapp/smO/* 文件夹，则具有集群模式配置文件名称的 cmode_profiles.config 文件也会被删除。此问题描述还会触发相同的错误消息。</block>
  <block id="c4bd0e395846fa37206c2bd11c042697" category="paragraph">* 临时解决策 *</block>
  <block id="837d7e1a6e5e19f0e8e88b2764b0e552" category="paragraph">更新配置文件： smo profile update-profile &lt;profile_name&gt;</block>
  <block id="a994ab388df3529195996fe6552f05d9" category="admonition">如果 SnapManager for Oracle 安装在 /opt/netapp/smo/ 路径中，则文件位置为 /opt/netapp/smO/cmode_profile/cmode_profiles.config 。</block>
  <block id="57700e8b27e3c21f5c69edd76b89c1f9" category="section-title">服务器无法启动</block>
  <block id="21d62dcc29e82a4b131a62882fe0eeba" category="paragraph">启动服务器时，您可能会看到类似以下内容的错误消息：</block>
  <block id="fef0b4902a12d3e8bae8e001f635e379" category="paragraph">SMO-01104 ：调用命令 SMO-17107 时出错： SnapManager 服务器无法在端口 8074 上启动，因为以下错误： java.net.BindException: 地址已在使用中</block>
  <block id="b234726b634c8dabbb911bd299fc309a" category="paragraph">这可能是因为 SnapManager 侦听端口（默认为 272.14 和 27215 ）当前正在由其他应用程序使用。</block>
  <block id="a518a181e6b393104daaa2cdb35fbae9" category="paragraph">如果 SMO_server 命令已在运行，但 SnapManager 未检测到现有进程，则也可能发生此错误。</block>
  <block id="5502ab2b697f6462a39b230b5b5a06f7" category="paragraph">您可以重新配置 SnapManager 或其他应用程序以使用不同的端口。</block>
  <block id="b6b8da0a5195d43201431727e17ee5e8" category="paragraph">要重新配置 SnapManager ，请编辑以下文件： C ： \Program Files\NetApp\SnapManager for Oracle\properties\SMO.config</block>
  <block id="3bef39b782134c50b29f52485b1a4c84" category="paragraph">您可以分配以下值：</block>
  <block id="37551aba1229098ce100568fb1a93c52" category="list-text">SMO Server.port=27214</block>
  <block id="82ee5e28030ea3a27938c24f90ce9db1" category="list-text">SMO Server.rmiRegistry.port=27215</block>
  <block id="867006c01a0e502775bb66a6b8e61891" category="list-text">remote.registry.ocijdbc.port= 27215</block>
  <block id="5bdc35828f01c04d1935e8261d08b9ee" category="paragraph">remote.registry.ocijdbc.port 必须与 Server.rmiRegistry.port 相同。</block>
  <block id="d73b91503dceb0017d78a9037753c563" category="paragraph">要启动 SnapManager 服务器，请执行以下步骤：</block>
  <block id="9fd949ecba73eb5667e5dbc583f44712" category="list-text">单击 * 开始 * &gt; * 控制面板 * &gt; * 管理工具 * &gt; * 服务 * 。</block>
  <block id="91408527bc92510f6a4e72198df32451" category="list-text">您可以通过以下三种方式之一启动服务器：</block>
  <block id="f274ea37b67e0f0ee39ab4a9bc1af16b" category="list-text">在左侧面板中，单击 * 启动 * 。</block>
  <block id="f45e1ba71a911ec88a6dc16f8a07d6c6" category="list-text">右键单击 NetApp SnapManager 3.3 for Oracle ，然后从下拉菜单中选择 * 启动 * 。</block>
  <block id="7b7dff091375f41eba0f984b7a79964b" category="list-text">双击适用于 Oracle 的 NetApp SnapManager 3.3 ，然后在打开的属性窗口中，单击 * 启动 * 。</block>
  <block id="cc398349f5b0285f02ada6804573ba07" category="section-title">如果目标名称属于其他目标名称，则无法管理归档日志文件目标名称</block>
  <block id="9a31415daefdd5c8fa56321a7318b11b" category="paragraph">创建归档日志备份时，如果用户排除了属于其他目标名称的目标，则其他目标名称也会被排除。</block>
  <block id="6121b5d7740f57e903c8d74755133416" category="paragraph">例如，假设有三个可供排除的目标： E ： \\arch ， G ： \\arch 和 H ： \\arch 。创建归档日志文件备份时，如果使用命令排除 E ： \\arch</block>
  <block id="9d9d89641cb3ece4d8abdfa1aecbc833" category="paragraph">， SnapManager for Oracle 将排除以 E ： \\arch 开头的所有目标。</block>
  <block id="a2bda899bb3112d162304f734edd7172" category="list-text">在 v$archive_dest 中配置目标后，添加路径分隔符。例如，将 E ： \\arch 更改为 E ： \\arch\ 。</block>
  <block id="02a4fb7a98c054100f6be1c63d393059" category="list-text">创建备份时，请包括目标，而不是排除任何目标。</block>
  <block id="43cf993f7f8bbf4bbbd3c1706f47e8d8" category="section-title">存储库数据库大小会随着时间而增加，而不会随着备份数量而增加</block>
  <block id="3dabbd21acf0451e45e88b68d2a97234" category="paragraph">由于 SnapManager 操作会在存储库数据库表的架构中插入或删除数据，从而导致索引空间使用量较高，因此存储库数据库大小会随着时间的推移而增加。</block>
  <block id="ba716f33f5f7ff8abf3ba3e527de07a0" category="paragraph">您必须根据 Oracle 准则监控和重建索引，以控制存储库架构占用的空间。</block>
  <block id="b8180f2cea8fbe870991a4f8c6ce3421" category="section-title">存储库数据库关闭时，无法访问 SnapManager 图形用户界面， SnapManager 操作失败</block>
  <block id="312ea46defb9bb16216ad3ae3bf9af85" category="paragraph">SnapManager 操作失败，在存储库数据库关闭时，您无法访问图形用户界面。</block>
  <block id="0567ca00c09924e91b21fb9cf90fede6" category="paragraph">下表列出了您可能要执行的不同操作及其例外情况：</block>
  <block id="456d0deba6a86c9585590550c797502d" category="cell">操作</block>
  <block id="d5f1381c5f97f928df4ef8d18c2a27c0" category="cell">例外情况</block>
  <block id="488c06d3ee87f55803d7c7e08233470e" category="paragraph">打开已关闭的存储库</block>
  <block id="4c2beacfc035da68b94c0255c5683d29" category="paragraph">sm_gux.log 中记录了以下错误消息： [WARN ] ： SMO-01106 ：查询存储库时出错： closed Connection java.sql.SQLException ： closed Connection 。</block>
  <block id="aabd7eb65f6a78018ab27bf9801bbc5f" category="paragraph">按 F5 刷新已打开的存储库</block>
  <block id="363b254c0a708842a0a44c50a9c0b8e8" category="paragraph">GUI 中会显示存储库异常，同时 sm_gui.log 文件中会记录 NullPointerException 。</block>
  <block id="2b1c633d6023facd9487ba04822da705" category="paragraph">正在刷新主机服务器</block>
  <block id="12c0562b21508a2ddfd99051aa3c5da1" category="paragraph">sumo_gui.log 文件中记录了 NullPointerException 。</block>
  <block id="7d7838cad385f78104afc12f49d96433" category="paragraph">创建新配置文件</block>
  <block id="0d6e2def4d76a94a099669a71394ba1d" category="paragraph">配置文件配置窗口中显示 NullPointerException 。</block>
  <block id="5a257245b48df2450acc4cd36325d93b" category="paragraph">刷新配置文件</block>
  <block id="dda1e2afe2bb148378a22a3555e31550" category="paragraph">sm_gux.log 中记录了以下 SQL 异常： [ 警告 ] ： SMO-01106 ：查询存储库时出错：已关闭连接。</block>
  <block id="e383df11e6ff835266280db343aecce1" category="paragraph">访问备份</block>
  <block id="0ec0c3ceca2bbaf5462c3b6c26f1266e" category="paragraph">sm_gux.log 中记录了以下错误消息：无法延迟初始化收集。</block>
  <block id="9a8f863c9ba238dd903384659ec3b23f" category="paragraph">查看克隆属性</block>
  <block id="da8d5e9c3b9db163822cbbe52f65a7b2" category="paragraph">sm_gui.log 和 sumo_gui/log 中记录了以下错误消息：无法延迟初始化收集。</block>
  <block id="a3b75dea3ff6da9da8b8f384682c8cee" category="paragraph">要访问 GUI 或执行任何 SnapManager 操作，必须确保存储库数据库正在运行。</block>
  <block id="b1f39e66594deba5cfd7abbaee057ec5" category="section-title">无法为克隆的数据库创建临时文件</block>
  <block id="e096939a8e989cc0ccfc8259a60402d2" category="paragraph">如果目标数据库的临时表空间文件放置在与数据文件的挂载点不同的挂载点中，则克隆创建操作会成功，但 SnapManager 无法为克隆的数据库创建临时文件。</block>
  <block id="de1478caec5e2a73398d58e2c35e261a" category="paragraph">您必须执行以下任一操作：</block>
  <block id="ae77d6d245a1660285ef67e23ea39125" category="list-text">确保目标数据库的布局，以便将临时文件放置在与数据文件相同的挂载点。</block>
  <block id="ea905049c142ad7653808aad4aaed62b" category="list-text">在克隆的数据库中手动创建或添加临时文件。</block>
  <block id="48bef0bc745321e492d78f48d947efcc" category="section-title">备份 Data Guard 备用数据库失败</block>
  <block id="c02f82c742112e520ce1abc6ce88cdf1" category="paragraph">如果使用主数据库的服务名称配置了任何归档日志位置，则 Data Guard 备用数据库的备份将失败。</block>
  <block id="4e977880943aa2a2aa6cf256623747ab" category="paragraph">在图形用户界面中，必须清除与主数据库的服务名称对应的 * 指定外部归档日志位置 * 。</block>
  <block id="92e55166999a0c8ab277b37ab705ae39" category="summary">SnapManager 操作（备份，还原和克隆）可以处于不同状态，每个状态表示操作的进度。</block>
  <block id="a64af8f4f515a016c73a474bcea22917" category="doc">什么是 SnapManager 操作状态</block>
  <block id="f22928151f529d6be42716cbbdc67e06" category="paragraph">SnapManager 操作（备份，还原和克隆）可以处于不同状态，每个状态都指示操作的进度。</block>
  <block id="efa80e37fcfe0c35d79a8176affa34a0" category="cell">操作状态</block>
  <block id="66d02c2f8a582446f8dd8752366002b5" category="paragraph">已成功</block>
  <block id="33c99cd8724e27cbb848991374d46d56" category="paragraph">操作已成功完成。</block>
  <block id="5bda814c4aedb126839228f1a3d92f09" category="paragraph">正在运行</block>
  <block id="233f2409a51a7ff0286c3d2ef03ecb77" category="paragraph">操作已启动，但尚未完成。例如，备份需要两分钟时间，计划在上午 11 ： 00 进行。当您在上午 11 ： 01 查看 * 计划 * 选项卡时，该操作显示为正在运行。</block>
  <block id="b9c7179b2bfc286ab57eaad42111c308" category="paragraph">未找到操作</block>
  <block id="1773f4df7fdb8dbb003d7939d1f68336" category="paragraph">计划未运行或上次运行的备份已删除。</block>
  <block id="d7c8c85bf79bbe1b7188497c32c3b0ca" category="paragraph">失败</block>
  <block id="21159d75519fc02812e553eb94ae56c6" category="paragraph">操作失败。SnapManager 已自动执行中止过程并已清理此操作。</block>
  <block id="69c6514d9f424933c1d004ddfb882c77" category="section-title">可恢复和不可恢复的事件</block>
  <block id="dc13030bc5de71d9dd05648bd0677ae6" category="paragraph">可恢复的 SnapManager 事件存在以下问题：</block>
  <block id="b260b9ddd4c5c9e4782055693289fe9f" category="list-text">数据库不会存储在运行 Data ONTAP 的存储系统上。</block>
  <block id="5b5dc7d84c404504ae09df3d5c66e9d8" category="list-text">未安装 SnapDrive for Windows 或无法访问存储系统。</block>
  <block id="3ed010c84742d3907206caa8ea350bc4" category="list-text">如果卷空间不足，已达到 Snapshot 副本的最大数量或发生意外异常， SnapManager 将无法创建 Snapshot 副本或配置存储。</block>
  <block id="03ef668dc3b771524ebd6fef4ad0165a" category="paragraph">发生可恢复的事件时， SnapManager 会执行中止过程，并尝试将主机，数据库和存储系统恢复到启动状态。如果中止过程失败， SnapManager 会将此意外事件视为不可恢复的事件。</block>
  <block id="4301f53b810c832ddd5e971bd7769558" category="paragraph">发生以下任一情况时，将发生不可恢复（带外）事件：</block>
  <block id="3158da38bb616749d3f43d9b80095a12" category="list-text">发生系统问题描述，例如主机出现故障时。</block>
  <block id="7d4ce244c98bbaa6e9d7ea3519c2450b" category="list-text">SnapManager 进程已停止。</block>
  <block id="3fac8f68f8929829c370ded1b509514e" category="list-text">当存储系统发生故障，逻辑单元号（ LUN ）或存储卷脱机或网络发生故障时，带内中止操作将失败。</block>
  <block id="0d24037c1f1fa597024762766f9bee71" category="paragraph">发生不可恢复的事件时， SnapManager 会立即执行中止过程。主机，数据库和存储系统可能未恢复到初始状态。在这种情况下，您必须在 SnapManager 操作失败后执行清理，方法是删除孤立的 Snapshot 副本并删除 SnapManager 锁定文件。</block>
  <block id="b8ee07351bfe0d7738821fe5b272a4ca" category="paragraph">如果要删除 SnapManager 锁定文件，请导航到目标计算机上的 $ORACLE_HOME 并删除 sm_lock_TargetDBName 文件。删除此文件后，必须重新启动适用于 Oracle 服务器的 SnapManager 。</block>
  <block id="5054d5dc7095c987bc4a8f141af14930" category="summary">您可以根据保留设置以报告形式查看特定或所有 SnapManager 操作的历史记录。</block>
  <block id="dc0f09e007c930752507c15614356b3a" category="doc">查看 SnapManager 操作历史记录列表</block>
  <block id="b386243c088fe4c7fb0f59fc15ff3f59" category="list-text">要查看 SnapManager 历史记录操作的列表，请输入以下命令： smo history list -profile ｛ -name ， profile_name [profile_name1 ， profile_name2] | -all-repository-login （ -passwordrepo_password ） -usernamerepo_username-dberepo_dbname-hoespo_host-portrepo_operation2 ， -quiet 操作数组名称</block>
  <block id="186de54aa4561d0b6b64443e803b9f9c" category="summary">您可以运行 backup delete 命令删除未自动删除的备份，例如用于创建克隆的备份或失败的备份。您可以删除无限制保留的备份，而不更改保留类。</block>
  <block id="0c61da395e471884aed80eca1f09e1e5" category="doc">smo backup delete 命令</block>
  <block id="2cec7411e53a600733d30b893d130831" category="paragraph">指定与要删除的备份关联的数据库。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="2852906df505a0057a409bffb2da486f" category="paragraph">指定具有指定 GUID 的备份。GUID 由 SnapManager 在创建备份时生成。您可以使用 smo backup list 命令显示每个备份的 GUID 。</block>
  <block id="d1d23866872f72254130c96db77323dc" category="paragraph">指定具有指定标签的备份。或者，也可以将备份范围指定为数据文件或归档日志。</block>
  <block id="a3cfb9770384c6412b5fe45036b308dc" category="list-text">* - 全部 *</block>
  <block id="9b33c58aee594f38cb57ccfa102de89b" category="paragraph">指定所有备份。要仅删除指定的备份，请使用 -id 或 -label 选项。</block>
  <block id="6698bb43a47b0fab2df2b1f81177c2e9" category="paragraph">在备份删除操作成功或失败后收集转储文件。</block>
  <block id="f09635991db3fb9a700b2fb19e56766a" category="paragraph">强制删除备份。即使释放与备份关联的资源时出现问题， SnapManager 也会删除备份。例如，如果备份已使用 Oracle Recovery Manager （ RMAN ）进行编目，但 RMAN 数据库不再存在，则包含 -force 将删除备份，即使该备份无法与 RMAN 连接也是如此。</block>
  <block id="b121f3a7d6bbb825e9313ecf3e3f54ea" category="paragraph">以下示例将删除备份：</block>
  <block id="e1afe0cbc059a0989f918dc8750f41ac" category="paragraph"><block ref="e1afe0cbc059a0989f918dc8750f41ac" category="inline-xref-macro-rx"></block></block>
  <block id="2b0aab7d4c7b6727ee533bcf268e869b" category="paragraph"><block ref="2b0aab7d4c7b6727ee533bcf268e869b" category="inline-xref-macro-rx"></block></block>
  <block id="565b4a4b1f38f9d0f33db9ffc9dbfc8a" category="summary">您必须确保在主存储系统和二级存储系统上安装并启用数据保护所需的许可证。</block>
  <block id="a0c1c57bd68a21cc36928b63652b8619" category="doc">SnapManager 中的数据保护所需的许可证</block>
  <block id="dca29e68929205c5d88d17a590c41a74" category="paragraph">主存储系统可接收 Oracle 数据库的最新事务更新，存储数据并为数据库提供本地备份保护。主存储系统还维护数据库数据文件，日志文件和控制文件。二级存储系统充当受保护备份的远程存储。</block>
  <block id="da92f0f52a4b1f64c2ddbd25a83f6d3c" category="paragraph">要保护数据，必须在主存储系统上安装并启用以下许可证：</block>
  <block id="0e25d66bf3ae9da3b55ee17a57075d80" category="admonition">如果要在二级存储系统上启用数据保护，还必须在二级存储系统上安装和启用这些许可证。</block>
  <block id="900c5c2a7bc9bfc326c45c3b0543b718" category="list-text">以 7- 模式（ 7.3.1 或更高版本）运行的 Data ONTAP 或集群模式 Data ONTAP （ 8.2 或更高版本）</block>
  <block id="6fa08a2dd92ea2f0abc911743eca31e3" category="list-text">克隆需要 FlexClone 。</block>
  <block id="96c5dca0f8c968f3f6b88fff95bd3408" category="paragraph">此外，只有在将 SnapDrive 配置为在 SAN 环境中使用 FlexClone 时，存储区域网络（ SAN ）才需要 FlexClone 。</block>
  <block id="2ad28445e279b0fdcb3e1a078e7b5043" category="list-text">相应的协议，例如 Internet 小型计算机系统接口（ iSCSI ）或光纤通道（ FC ）</block>
  <block id="8487f021de4a831a08b70c92896f7049" category="summary">您需要创建一个具有 sysdba 角色的 Oracle 用户，该用户可连接到数据库并执行数据库操作。</block>
  <block id="a4eaffc976582237960d2248007d1bdb" category="doc">为目标数据库创建 Oracle 用户</block>
  <block id="948f95730f147fb54d71a3181257aa3e" category="paragraph">SnapManager 可以使用目标数据库中具有 sysdba 权限的任何 Oracle 用户，例如默认的 "sys" 用户。您还可以在目标数据库中创建一个用户，以供 SnapManager 独占使用。</block>
  <block id="d866e878a3a2933e5c89aa9ef47c17be" category="list-text">登录到 SQL * Plus 。</block>
  <block id="d63b9169aab60e3d948dc9bc1df021aa" category="paragraph">在命令提示符处，输入以下命令： sqlplus "/" as sysdba"</block>
  <block id="ee551f73341ee31d79840701026b4b9b" category="list-text">要创建一个用户，例如使用管理员密码的 smo_oper （例如 adminpw1 ），请在 SQL 提示符处输入以下命令： sql &gt; create user SMO_oper identified by adminpw1 ；</block>
  <block id="794a52aa9fda01f8a9fde3accaf4452f" category="list-text">输入以下命令为 Oracle 用户授予 sysdba 权限： sql &gt; 将 sysdba 授予 smo_oper ；</block>
  <block id="e5b5de73be6e432894a4c18ccc54997e" category="summary">您可以从 NetApp 支持站点下载适用于 Oracle 的 SnapManager 安装包。</block>
  <block id="ef2f0d900bc744477aadbce9b212dc20" category="list-text">登录到 NetApp 支持站点。</block>
  <block id="f7b04dd84d38ceaf795f8466e7f8b027" category="list-text">在 NetApp 支持站点页面上，单击 * 下载 * &gt; * 软件 * 。</block>
  <block id="07f57af9892c73238eddda5961c50bea" category="list-text">在软件下载表中，转至 SnapManager 产品行，然后从选择平台下拉列表中选择 * Oracle （ Windows ） * 。</block>
  <block id="05ff9017ade4661d59fe98b0a98d68de" category="list-text">单击 * 执行 * 。</block>
  <block id="a25a31410465b05348811f75b710b3b7" category="paragraph">此时将列出 SnapManager 版本。</block>
  <block id="6908945ba88b6a9afb0ddc36ef398018" category="list-text">对于要安装的 SnapManager 版本，请单击 * 查看并下载 * 。</block>
  <block id="0338aaab0bb0a6296939db3bac69dd18" category="paragraph">此时将显示问题描述页面。</block>
  <block id="274f0d78c8ee996009e8b290617d599f" category="admonition">您应阅读此页面上提供的信息。</block>
  <block id="8a8c992788429c092351076568ade4bf" category="list-text">在此页面底部，单击 * 继续 * 。</block>
  <block id="6da6e722263e2565781cc30a2b515c4f" category="paragraph">此时将显示许可证协议页面。</block>
  <block id="e17905dd31e746ef069a3367c5d92d78" category="list-text">单击 * 接受 * 。</block>
  <block id="5850497c9d91640662a702ac4692dc1d" category="paragraph">此时将显示下载页面。</block>
  <block id="2952b3258b087fb3041d989227e67ad3" category="list-text">下载适用于您的主机的安装包。</block>
  <block id="8a8ae7b8ac8bf5893a39597e4e2de4f3" category="paragraph">您可以将安装文件下载到要安装 SnapManager for Oracle 的计算机上的任何位置。</block>
  <block id="1b60fea206ea995fc39930a965b91986" category="inline-link">NetApp 支持站点： mysupport.netapp.com</block>
  <block id="9cda50990f342117c59d5ff6a1ecfe57" category="paragraph"><block ref="9cda50990f342117c59d5ff6a1ecfe57" category="inline-link-rx"></block></block>
  <block id="dda5035310ea20c477b6717255a19606" category="summary">您可以运行 backup free 命令来释放备份的 Snapshot 副本，而无需从存储库中删除备份元数据。</block>
  <block id="5a3ff0dddc0939e83658dd1d025a5a19" category="paragraph">指定与要释放的备份关联的配置文件。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="a85671c1f115d960000fd57a6b6e62f7" category="paragraph">使用指定 GUID 指定备份的资源。GUID 由 SnapManager 在创建备份时生成。您可以使用 smo backup list 命令显示每个备份的 GUID 。包括 -verbose 选项以显示备份 ID 。</block>
  <block id="19e979e0f8c1a562edb3413064988c7e" category="paragraph">指定具有指定标签的备份。</block>
  <block id="e7ca037076ef6db86c2baeb9c967264d" category="paragraph">指定所有备份。要删除指定的备份，请使用 -id 或 -label 选项。</block>
  <block id="142a3cb95d0e62ea451c98c759c2138d" category="paragraph">强制删除 Snapshot 副本。</block>
  <block id="6c36b7a7c5da01bfeb571e7ca0171998" category="paragraph">以下示例将释放备份：</block>
  <block id="d60746a97007400e43eb4fe2229d3ff1" category="paragraph"><block ref="d60746a97007400e43eb4fe2229d3ff1" category="inline-xref-macro-rx"></block></block>
  <block id="b71b831c5030cad66a0139fe77a8dac7" category="summary">SnapManager for Oracle 使用克隆规范 XML 文件，其中包括要在克隆操作中使用的映射，选项和参数。SnapManager 使用此信息确定克隆的文件的放置位置以及如何处理诊断信息，控制文件，参数等。</block>
  <block id="4618add15a2a7bdb4284119774c6ede6" category="paragraph">您可以使用 SnapManager 图形用户界面（ GUI ），命令行界面（ CLI ）或文本编辑器创建克隆规范文件。</block>
  <block id="4184bfac6a0b6df6f23acebd8ba1e59b" category="paragraph">使用文本编辑器创建克隆规范文件时，必须将其另存为 .xml 文件。您可以将此 XML 文件用于其他克隆操作。</block>
  <block id="91ea9449ac10d27bf76316911c3edb9b" category="paragraph">您还可以创建克隆规范模板，然后对其进行自定义。您可以使用 smo clone template 命令，也可以在 GUI 中使用克隆向导。</block>
  <block id="7076b6f5234cf2224b9fc6ddf8799a89" category="paragraph">SnapManager for Oracle 会向其生成的任何克隆规范模板添加版本字符串。对于缺少版本字符串的任何克隆规范文件， SnapManager for Oracle 将采用最新版本。</block>
  <block id="dbd38f2eaa42494ac1de7a5eab43530e" category="paragraph">如果要执行远程克隆，请勿更改克隆规范文件中数据文件，重做日志文件和控制文件的默认位置。如果更改默认位置， SnapManager 将无法在不支持 Snapshot 功能的数据库上创建克隆或创建克隆。因此，自动创建配置文件失败。</block>
  <block id="c67eb31300dd9d03e1669b62bb82ccd0" category="admonition">虽然挂载点和 ASM 磁盘组信息可从图形用户界面编辑，但您只能更改文件名，而不能更改文件位置。</block>
  <block id="a704fa13f6cfff494c37c72a846630a5" category="paragraph">您可以使用相同或不同的参数和值组合多次执行任务。</block>
  <block id="b1bc05c60da7f2e02302f8670ee037b3" category="list-text">打开一个文本文件并输入文本，如以下示例所示：</block>
  <block id="7534068290eb222fddc552ec29b809d6" category="list-text">在存储规范组件中，输入数据文件的挂载点。</block>
  <block id="1640eae65f8ef56bb663acc6fcc6c8ed" category="paragraph">存储规范列出了为克隆创建的新存储的位置，例如数据文件挂载点和原始设备。这些项必须从源映射到目标。</block>
  <block id="5f0971860a4621936ce9625421e791ee" category="paragraph">以下示例显示了在克隆规范中使用的数据文件挂载点语法：</block>
  <block id="0620f45033be694fdda5aba34c43b5ab" category="list-text">在数据库规范组件中，将控制文件信息标识为要为克隆创建的控制文件列表。</block>
  <block id="27df267da959d5c81ab80a1c9a8a037a" category="paragraph">数据库规范用于指定克隆的数据库选项，例如控制文件，重做日志，归档日志和 Oracle 参数。</block>
  <block id="8ae4a21442247bd9d5d408162690b91e" category="paragraph">以下示例显示了克隆规范中使用的控制文件语法：</block>
  <block id="6297199dfc2081a172996ec6568f637a" category="list-text">指定克隆的重做日志结构。</block>
  <block id="182a2d384fc5b20f8198031137ecb832" category="paragraph">以下示例显示了用于克隆的重做日志目录结构：</block>
  <block id="4f73bb495ea5e23480e3b150a57d1f73" category="list-text">指定应在克隆的数据库中设置为不同值的 Oracle 参数。如果使用的是 Oracle 10 ，则必须指定以下参数：</block>
  <block id="6cd3346685cfcab6c90577836eef1e46" category="list-text">后台转储</block>
  <block id="84a2b6436ddb40c75b8b3e5ad743656f" category="list-text">核心转储</block>
  <block id="359255015904bd40555f0a8b762e369e" category="list-text">用户转储</block>
  <block id="d0b1609e1c906658cc0956805fd94772" category="list-text">（可选）归档日志</block>
  <block id="f2ee649283466878b959f9c0d452d56d" category="admonition">如果参数值设置不正确，则克隆操作将停止，您将收到错误消息。</block>
  <block id="a93bc74626253367556109ec5fa02b6a" category="paragraph">如果未指定归档日志的存储位置，则 SnapManager 将在 nodarchivelog 模式下创建克隆。SnapManager 会将此参数信息复制到克隆的 init.ora 文件中。</block>
  <block id="130925df1cbf0104c859fb289ec52246" category="paragraph">+ 以下示例显示了克隆规范中使用的参数语法：</block>
  <block id="7647ef4c908d4743ffe196c25e1f8479" category="paragraph">+ 您可以通过在参数元素中使用默认元素来使用默认值。在以下示例中， OS_authentication_prefix 参数将采用默认值，因为指定了默认元素：</block>
  <block id="dab76afccd44fb3af30791a3520fbd6e" category="paragraph">+ 您可以使用空元素指定一个空字符串作为参数的值。在以下示例中， OS_authentication_prefix 将设置为空字符串：</block>
  <block id="31704550e94155275c1d7ec52d19e08d" category="paragraph">+ 注意：您可以通过不指定任何元素来使用源数据库的 init.ora 文件中的值作为参数。</block>
  <block id="7ae3241470f4cf0aad75c112cdafe84f" category="paragraph">+ 如果参数具有多个值，则可以提供以逗号分隔的参数值。例如，如果要将数据文件从一个位置移动到另一个位置，则可以使用 db_file_name_convert 参数并指定以逗号分隔的数据文件路径，如以下示例所示：</block>
  <block id="f5cb34067c550cf0329cbe4bd8589a66" category="paragraph">+ 如果要将日志文件从一个位置移动到另一个位置，则可以使用 log_file_name_convert 参数并指定以逗号分隔的日志文件路径，如以下示例所示：</block>
  <block id="a6748fe3d434833f11c8c71099cc9837" category="list-text">可选：指定要在克隆联机时对其执行的任意 SQL 语句。</block>
  <block id="391050173439eb66e2519db22f6af372" category="paragraph">您可以使用 SQL 语句执行诸如在克隆的数据库中重新创建临时文件等任务。</block>
  <block id="ff0baef68a0f5f15dce5cd1ca072faed" category="admonition">您必须确保 SQL 语句末尾不包含分号。</block>
  <block id="023fc724d1b386db3d182c13c95aa427" category="paragraph">以下是在克隆操作中执行的示例 SQL 语句：</block>
  <block id="3611610460749e86374c2bac8d5d292c" category="section-title">克隆规范示例</block>
  <block id="4a31b7c41ad91ec88fe7c670af4e32b1" category="paragraph">以下示例显示了 Windows 环境的克隆规范结构，其中包括存储和数据库规范组件：</block>
  <block id="b7f5490a9ca85bf63225bd062ee2371c" category="paragraph"><block ref="b7f5490a9ca85bf63225bd062ee2371c" category="inline-xref-macro-rx"></block></block>
  <block id="2c828bf9842f5a363906181fdc28e364" category="inline-xref-macro">在当前状态下克隆数据库</block>
  <block id="bfb41a953d1da0ea1d6846d337144b99" category="paragraph"><block ref="bfb41a953d1da0ea1d6846d337144b99" category="inline-xref-macro-rx"></block></block>
  <block id="cd8efeca4412405118e2202a0c3e5101" category="inline-xref-macro">将数据库克隆到备用主机的注意事项</block>
  <block id="638055d783a8010ac750142ecef64d99" category="paragraph"><block ref="638055d783a8010ac750142ecef64d99" category="inline-xref-macro-rx"></block></block>
  <block id="72ee755f2cad2133a57d9b731ca56a66" category="summary">SnapManager 在 Windows 上不支持某些 SnapManager 功能，平台和 Oracle 技术。</block>
  <block id="a82ba357f3366bda88fae533a7ce477b" category="doc">Windows 不支持 SnapManager 功能和 Oracle 技术</block>
  <block id="b20b44ae15612d4fd391a487839385b0" category="paragraph">SnapManager 不支持以下功能，平台和 Oracle 技术：</block>
  <block id="e4b8400d64ded24d50d4a8569dc7ef74" category="list-text">通过集成 Protection Manager ，可以实现基于策略的数据保护</block>
  <block id="bdd8c6191186da37fd69dd63ac9ae004" category="list-text">Operations Manager 提供基于角色的访问控制（ Role-Based Access Control ， RBAC ）</block>
  <block id="b2d18e4028f1937a4b430d7c5509c923" category="list-text">快速还原或基于卷的 SnapRestore （ VBSR ）</block>
  <block id="25c0305dfdc1e02814116467a7b1157d" category="list-text">克隆拆分操作</block>
  <block id="8a9480fc6b044eb6784151bae4632be7" category="list-text">使用任何协议的 Oracle Real Application Clusters （ RAC ）</block>
  <block id="a40e89e6df329081833f67f70299f93d" category="list-text">使用任何协议的 Oracle 自动存储管理（ ASM ）</block>
  <block id="f3a78e25ce9f95fc3c61ccc39f32fb4d" category="list-text">Oracle Direct NFS （ DNFS ）</block>
  <block id="f79ea08a0eda21ab85e0160c92801e84" category="list-text">Itanium-64 平台</block>
  <block id="a70b7d95f02201042d28a07e3b020114" category="admonition">Windows 操作系统支持的硬件平台为 32 位和 64 位（ Windows x86 和 Windows x86_64 ）。</block>
  <block id="0e43be08a9561732f2e57e53678146a5" category="summary">SnapManager 包括控制文件，并可选择在每次备份时包含归档日志文件。归档日志文件用于恢复操作。</block>
  <block id="d15680d0907510978771247d2c9b49b5" category="doc">关于控制文件和归档日志文件处理</block>
  <block id="1e11a19089cde82a484ec69d56b11b8b" category="paragraph">数据库使用控制文件来标识数据库文件的名称，位置和大小。SnapManager 会在每个备份中包含控制文件，因为在还原过程中会使用控制文件。</block>
  <block id="c41c5ce0a1a0b600e74dc371f1db9033" category="paragraph">对数据库所做的更改会使用联机重做日志进行跟踪，这些日志最终会归档，称为归档重做日志（或归档日志）。通过 SnapManager （ 3.2 或更高版本），您可以使用不同的保留和频率分别备份数据文件和归档日志文件。SnapManager 只能对归档日志进行备份，也可以对数据文件和归档日志进行组合备份。SnapManager 可全面自动管理归档日志，不需要任何手动干预即可恢复数据库，还可以在创建备份后从一个或多个归档日志目标中删除归档日志。</block>
  <block id="b5c6f9f52a099f8526505e9c117a7c68" category="admonition">要查看备份中包含哪些表空间和数据文件，请使用 backup show 命令或备份属性窗口。</block>
  <block id="97a21c7863a29ec1216e22dfcc5d2438" category="paragraph">下表说明了 SnapManager 在每次操作期间如何处理控制和归档日志文件：</block>
  <block id="625703909c99d4e4d53a32ef6270c121" category="cell">操作类型</block>
  <block id="a2ac419c4fdc56d78883735b2970e499" category="cell">控制文件</block>
  <block id="eb87aead4ea27ee3b719d7c86e0c9def" category="cell">归档日志文件</block>
  <block id="7900c15c008d638f94bb4b3ef43caf2c" category="paragraph">随每个备份一起提供</block>
  <block id="c234fd71b56a44055114f79cfebef918" category="paragraph">可以包含在每个备份中</block>
  <block id="027701c69fc1639d506ce930541899bb" category="paragraph">可以单独还原，也可以与表空间或数据文件一起还原</block>
  <block id="1d86254a7e7bec8746c5fc42ff0f9ff4" category="paragraph">可用于恢复过程</block>
  <block id="9cc9b677fca3f72b573744c843f0f6d7" category="summary">在主存储系统和二级存储系统之间建立 SnapMirror 或 SnapVault 关系时，您可以通过 SnapManager 使用后脚本保护数据库备份。您可以从 SnapManager 命令行界面和 GUI 对备份操作的后处理活动使用默认后处理脚本。</block>
  <block id="e92e3e7df5be51203582f3067fa7cd55" category="doc">使用后脚本保护数据库备份</block>
  <block id="74ed4a2e253064a7e882bdc17224f51e" category="paragraph">您可以使用 default_install_directory\plugins\backup\create\post 中提供的以下默认后处理脚本：</block>
  <block id="c1452b7ffb47546b413166cd47bf5624" category="list-text">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则为 SnapMirror 后脚本 mirror_the_backup.cmd</block>
  <block id="23898c5b2230367951fd89149c8f011d" category="list-text">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则为 SnapVault PostScript_the_backup.cmd</block>
  <block id="ab62acbaedecd43244cc09afaf93e273" category="list-text">如果使用的是集群模式 Data ONTAP ，则为 SnapMirror 后脚本 mirror_the_backup_cDOT.cmd</block>
  <block id="09391988a2955990b6f60c670fadbd7d" category="list-text">如果使用的是集群模式 Data ONTAP ，则为 SnapVault PostScript_the_backup_cDOT.cmd</block>
  <block id="cb05ba5c41cbb0c457fb4d593e68912e" category="paragraph">有关详细信息，请参见 default_install_directory\plugins 上的 readme.txt 。</block>
  <block id="f28de36787370f9f1199d24eedf2245f" category="paragraph">SnapManager 3.1 或更早版本仅为克隆操作提供预处理或后处理脚本。SnapManager 3.2 或更高版本为备份和还原操作提供了预处理和后处理脚本。您可以使用这些脚本在备份或还原操作之前或之后运行。</block>
  <block id="8c64d8db9fd784d39f64928702bf07fe" category="admonition">提供的脚本仅供参考。它们已通过适用于 Windows 的 SnapDrive 7.0 或更高版本的测试，但可能不适用于所有环境。您应根据二级保护要求自定义脚本。这些脚本不适用于 6.2 之前的 SnapDrive 版本。</block>
  <block id="a86671a982a1359268a91710ac2114d3" category="summary">存储库可存储与不同 SnapManager 操作相关的信息，例如备份时间，备份的表空间和数据文件，使用的存储系统，创建的克隆以及创建的 Snapshot 副本。</block>
  <block id="7a246ee82b5c1bdf2844b2643a8af63b" category="paragraph">存储库数据库不能位于同一数据库中，也不能位于 SnapManager 正在备份的同一数据库中。这是因为存储库会存储在备份操作期间创建的数据库 Snapshot 副本的名称。必须在与要备份的数据库不同的数据库中创建存储库。这意味着您必须至少有两个数据库： SnapManager 存储库数据库和由 SnapManager 管理的目标数据库。运行 SnapManager 服务时，两个数据库都必须已启动且正在运行。</block>
  <block id="03891bb9676cee45045c13d13e47ad90" category="admonition">存储库数据库关闭时，不能使用 GUI 或命令行界面执行任何 SnapManager 操作。</block>
  <block id="511131cbde9f6eeb22c879995e0571d4" category="summary">此命令将停止 SnapManager 主机服务器，并在根目录输入。</block>
  <block id="d264466d61ee2493232770742f3a550f" category="doc">smo_server stop 命令</block>
  <block id="39851f529163e5544cc2800edc8206a7" category="paragraph">指定控制台上仅显示错误消息。默认情况下会显示错误和警告消息。</block>
  <block id="79f293675eee6accb9a245e2dff0b5c6" category="paragraph">指定控制台上显示错误，警告和信息性消息。</block>
  <block id="4a6efb886998dd4041a5f0f9248eeb8c" category="paragraph">以下示例使用 smo_server stop 命令。</block>
  <block id="82a6a76554f7296f5bf05dfda2f3ad3b" category="summary">您可以运行 backup restore 命令来还原数据库或数据库的一部分的备份，然后可以选择恢复数据库信息。</block>
  <block id="13213a9eb6300cbb983019665296aefe" category="doc">smo backup restore 命令</block>
  <block id="c9b541928da6762bf349e1b0ea97c5c8" category="paragraph">指定要还原的数据库。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="f2c78006eca2a527ef7a87880f479ea5" category="paragraph">使用指定标签还原备份。</block>
  <block id="888087338d4c09511e1a14edb849e950" category="paragraph">使用指定 GUID 还原备份。GUID 由 SnapManager 在创建备份时生成。您可以使用 smo backup list 命令显示每个备份的 GUID 。</block>
  <block id="27601221372db7cd71c7514e3c1a5cfa" category="list-text">* 选择全部或指定文件 *</block>
  <block id="75950ed2c167a1aebee4ff0571d3b4fa" category="paragraph">您也可以选择使用以下选项之一：</block>
  <block id="a4bc5764f02f2a17b45cae215a383924" category="list-text">-complete ：还原备份中的所有数据文件。</block>
  <block id="ee2897f7eadf250a3b937dc78b0f504c" category="list-text">-tablespaceslist ：仅从备份还原指定的表空间。</block>
  <block id="c2f8915255aaa1cd4085b66f6e14506f" category="paragraph">必须使用空格分隔列表中的名称。</block>
  <block id="a2e9f80bae7d9cf2c0acb4434b2e5b35" category="list-text">-fileslist ：仅从备份还原指定的数据文件。</block>
  <block id="5b97fb4408928a3ef2bfef07061c53bd" category="paragraph">必须使用空格分隔列表中的名称。如果数据库正在运行，则 SnapManager 可确保包含文件的表空间处于脱机状态。</block>
  <block id="86ed0d0b60ee9cac2090dfdaef8cd012" category="list-text">* —控制文件 *</block>
  <block id="a6f83bf0814adb3f3e2952273b63301f" category="paragraph">还原控制文件。使用 SnapManager ，您可以通过一次操作从备份中还原控制文件以及数据文件。controlfiles 选项与其他还原范围参数无关，例如 -complete ， -tablespaces 和 -files 。</block>
  <block id="22a1390a3e0463ecfc1c2dcdb2112772" category="list-text">* —恢复 *</block>
  <block id="8967965fbd471a6b1256ce490929ff31" category="paragraph">还原数据库后恢复数据库。您还必须使用以下选项之一指定希望 SnapManager 将数据库恢复到的点：</block>
  <block id="6af6e795be155baac205de061898ebdc" category="list-text">-nologs ：将数据库恢复到备份时间，不应用任何日志。</block>
  <block id="9906f90f5ef956947d26bf2379807c8c" category="paragraph">您可以将此参数用于联机或脱机备份。</block>
  <block id="100a28f9fee0479d1e07b2c6c26f16d6" category="list-text">-alllogs ：将数据库恢复到最后一个事务或提交，并应用所有必需的日志。</block>
  <block id="e1e7cbc31317563ba19cc22b6d89a6ba" category="list-text">-until date ：将数据库恢复到指定的日期和时间。</block>
  <block id="4e4cfa1e3f43b3373cb083cb09fab1b1" category="paragraph">您必须使用年 - 月 - 日：小时：分钟：秒（ yyyy-mm-dd ： hh ： mm ： ss ）格式。对于小时，请根据数据库设置使用 12 小时或 24 小时格式。</block>
  <block id="135b4bba0b40369796589e35cc38426f" category="list-text">-直到 SCN ：将数据文件前滚到指定的系统更改号（ SCN ）。</block>
  <block id="3a4a728c4f76dd3e41ca947e59db6497" category="list-text">-using-backup-controlfile ：使用备份控制文件恢复数据库。</block>
  <block id="63650a3ca642c57507f55f095490e80b" category="list-text">*-restorestor*</block>
  <block id="7539fda674f6f38dbb617a1493167322" category="paragraph">用于将数据还原到活动文件系统，并通过提供每个原始 Snapshot 副本到其活动文件系统的映射从指定数据进行还原。如果未指定选项， SnapManager 将从主存储上的 Snapshot 副本还原数据。您可以指定以下选项之一：</block>
  <block id="576bbc652bd46cd60fdd08dad470baa0" category="list-text">-restorspecies ：指定要还原的数据和还原格式。</block>
  <block id="a3c001ed31f1a7e13a9c305785c64dce" category="list-text">* —预览 *</block>
  <block id="74542bd5d9bcaa9dda45d0c616774820" category="paragraph">显示以下信息：</block>
  <block id="380213509c4a0fab2197248f66c28e0c" category="list-text">将使用哪个还原机制（存储端文件系统还原，存储端文件还原或主机端文件副本还原）来还原每个文件</block>
  <block id="d09d56de25b11f88e1fd6193ca4deed1" category="list-text">为什么不使用更高效的机制来还原每个文件，指定 -verbose 选项时如果使用的是 -preview 选项，则必须了解以下信息：</block>
  <block id="7abccf82dc03ba40a8da26e6546b4378" category="list-text">force 选项不会影响命令。</block>
  <block id="c49ff9477209723c7d9015d8e4c6654a" category="list-text">recover 选项不会影响命令。要预览还原操作，必须挂载数据库。如果要预览还原计划，并且当前未挂载数据库，则 SnapManager 会挂载数据库。如果无法挂载数据库，则此命令将失败， SnapManager 会将数据库返回到其原始状态。</block>
  <block id="7a056c5e0913b2f682e2cb9dfbe59134" category="paragraph">预览选项最多可显示 20 个文件。您可以配置 SMO.config 文件中要显示的最大文件数。</block>
  <block id="2adb65daaf804b22aaf4880f71ecea14" category="list-text">* —从位置恢复 *</block>
  <block id="9abf8b05cac0b226890c61b206322b19" category="paragraph">指定归档日志文件的外部归档日志位置。SnapManager 会从外部位置获取归档日志文件，并使用这些文件进行恢复过程。</block>
  <block id="2f23c4aeeb9b948a53fe4a89b5e9c33f" category="list-text">* — taskspec*</block>
  <block id="f33c5ca67eb458cd53bc38bc56b5b535" category="paragraph">指定还原操作的预处理活动或后处理活动的任务规范 XML 文件。您必须提供任务规范 XML 文件的完整路径。</block>
  <block id="08f50ccd93790cc10362a6287fda4c44" category="paragraph">指定在还原操作后收集转储文件。</block>
  <block id="3407bdc4a421076633619314c4deb3fd" category="paragraph">如有必要，将数据库状态更改为低于其当前状态。</block>
  <block id="1072e83eb4fb957b0180f7c2ccf1bfc3" category="paragraph">默认情况下， SnapManager 可以在操作期间将数据库状态更改为更高的状态。要使 SnapManager 将数据库更改为更高状态，不需要此选项。</block>
  <block id="e496919ed84756a09f727f05e366af7a" category="paragraph">在控制台中显示错误，警告和信息性消息。您可以使用此选项来了解为何无法使用效率更高的还原进程来还原文件。</block>
  <block id="4b28f7872df9608d03d7ed5872ecec9a" category="paragraph">以下示例将还原数据库以及控制文件：</block>
  <block id="170573f8001dff743d5a69ac766827d9" category="inline-xref-macro">还原数据库备份</block>
  <block id="16ff9bcae399105c7b61c3a66f3352d9" category="paragraph"><block ref="16ff9bcae399105c7b61c3a66f3352d9" category="inline-xref-macro-rx"></block></block>
  <block id="3655de7d409e0500bdaa3127b574a34f" category="inline-xref-macro">从备用位置还原备份</block>
  <block id="91f915ff8c4649fc8deb74ef916a5f1d" category="paragraph"><block ref="91f915ff8c4649fc8deb74ef916a5f1d" category="inline-xref-macro-rx"></block></block>
  <block id="d3e24a3a94db472ecaad1b6561666a0f" category="inline-xref-macro">正在创建还原规范</block>
  <block id="4213e5ec1782768baea2407290b2b719" category="paragraph"><block ref="4213e5ec1782768baea2407290b2b719" category="inline-xref-macro-rx"></block></block>
  <block id="33cf794ab755a21a665c5ae7da581e6a" category="summary">通过 SnapManager for Oracle ，您可以在 Windows 环境中执行备份操作后使用脚本来存储 qtree 。</block>
  <block id="c92c736e5ee5d04cd6606e24f2be6bde" category="doc">使用后处理任务规范来存储 qtree</block>
  <block id="03437cccda77b8a870f1d83bd4113a47" category="list-text">创建任务规范 XML 文件。</block>
  <block id="ef77297d10101d1e8df001f06d8ef29a" category="list-text">在 XML 文件中，输入脚本名称作为输入参数。</block>
  <block id="29eb94e8790ab081bb8f8374554fa20a" category="list-text">保存任务规范 XML 文件。</block>
  <block id="c4d878de652cf93fbc6dbd8c20f69053" category="list-text">使用以下命令创建数据库到二级存储的受保护备份。</block>
  <block id="6100ec660b2ddaa9a37f91620e1f202c" category="paragraph">创建受保护的备份时，您必须在 -taskSpec 选项后面提供已保存任务规范 XML 文件的完整路径。</block>
  <block id="8868e52877ea0278aef3fab1ab7118ee" category="paragraph">示例： smobackup create -profile test_profile -full -online -taskspec" C ： \\mirror\\snapvault.xml"</block>
  <block id="0e7ace409e1a9ff59e852cd450617de1" category="paragraph">以下示例显示了使用 7- 模式 Data ONTAP 时的后处理任务规范结构：</block>
  <block id="6c656e71886c57dc69600f64975b8405" category="paragraph">以下示例显示了使用集群模式 Data ONTAP 时的后处理任务规范结构：</block>
  <block id="98f170a5cde2f657f65321e15d13e1d8" category="summary">此命令确认运行 SnapManager 所需的环境的所有组件均已正确设置。</block>
  <block id="046dcaea35de2e6e39529dfb0a466a96" category="section-title">system verify 命令示例</block>
  <block id="a500f7007956e74241d6b5203bd07f95" category="paragraph">以下示例使用 smo system verify 命令。</block>
  <block id="3bf67ed3ddb1d93bb00eeb6606510547" category="summary">您可以在要管理一个或多个数据库的主机上安装 SnapManager 。每个主机只能安装一个 SnapManager 实例。</block>
  <block id="53a71e910568835603f6758ce1824b5e" category="list-text">您必须已完成所需的安装前任务。</block>
  <block id="b2dd3f0c9513afccad623080efee71ea" category="list-text">必须下载最新的 SnapManager 安装包。</block>
  <block id="f1457da07494efd14f73320685462a1a" category="list-text">必须在所有目标主机上安装和配置适用于 Windows 的适当版本的 SnapDrive 。</block>
  <block id="af57e763296b0450a17d209b52528d8f" category="paragraph">有关安装和配置 SnapDrive for Windows 的信息，请参见 _Windows SnapDrive 安装和管理指南 _ 。</block>
  <block id="1fdb41ad1ff355d13327aa6ccb876bd1" category="list-text">双击 SnapManager 安装文件：</block>
  <block id="360c1667f42539007ab7a22e61543b8b" category="paragraph">netapp.smo.windows-x86-version.exe</block>
  <block id="34d82afb81eeb6968b6f6af5a88e3943" category="paragraph">netapp.smo.windows-x64-version.exe</block>
  <block id="6b2f893c03895eac51071fdd5eac3fb8" category="list-text">在简介窗口中，单击 * 下一步 * 。</block>
  <block id="f2875a1f39c246124e3e0cadd05bf74d" category="list-text">在选择安装文件夹窗口中，单击 * 下一步 * 接受默认安装位置或选择新位置。</block>
  <block id="d4ab69df195e365310ead4742b867245" category="list-text">ORA_DBA 组，您可以指定该服务是必须在重新启动后自动启动还是应手动启动。</block>
  <block id="4606aa247c75132d4a8b040700f63b84" category="paragraph">完成安装后，您可以验证安装是否成功：</block>
  <block id="54410f02d228bef24180933117fdcf0b" category="list-text">启动 SnapManager 服务器：</block>
  <block id="c1b33c3820cf5994ec62fd83ad1388f9" category="list-text">在 Windows 服务窗口中，选择 * 适用于 Oracle* 的 NetApp SnapManager 版本。</block>
  <block id="47b005d0fec3e0f10e532028ab532197" category="list-text">验证 SnapManager 系统是否正常运行：</block>
  <block id="85988fdf4b326518d1ad3c5a2558d293" category="list-text">单击 * 开始 * &gt; * 程序 * &gt; * NetApp * &gt; * 适用于 Oracle* 的 SnapManager &gt; * 启动 SMO 命令行界面（ CLI ） * 。</block>
  <block id="bb7bbbffe05f39d14cf595b774449198" category="list-text">在命令行界面（ CLI ）中，输入以下命令： smo system verify the following message is displayed ： operation ID number succeeded.</block>
  <block id="138f2069b309fb787f82cad1fcba99d6" category="paragraph">number 是操作 ID 编号。</block>
  <block id="15863b7c176977702c3b9d561c4c5e4d" category="summary">您可以运行 storage list 命令以显示与特定配置文件关联的存储系统列表。</block>
  <block id="45f97a6cd7eae4bdb51a97343a8b5acc" category="doc">smo storage list 命令</block>
  <block id="f39f773f2d32754ef940e762896a0976" category="paragraph">以下示例显示了与配置文件 mjullian 关联的存储系统：</block>
  <block id="8336001584dcb347bf630f138ecefb4a" category="summary">开始使用 SnapManager 之前，您必须了解与 Oracle 数据库相关的限制。</block>
  <block id="dbf60407410a73df17fa242fa3a62a0e" category="doc">与 Oracle 数据库相关的限制</block>
  <block id="04d95abe67172d164d10876b529b9aad" category="paragraph">限制如下：</block>
  <block id="d5cbbf4880f652c41455f9b1c6d63ce8" category="list-text">SnapManager 支持 Oracle 10gR2 ， 11gR1 ， 11gR2 和 12_c_ ，但不支持将 Oracle 10gR1 用作存储库或目标数据库。</block>
  <block id="57e7477f58dd2ebd421df73eb834cdad" category="list-text">SnapManager 不支持使用扫描 IP 地址代替主机名。</block>
  <block id="87c1300e685bccc159916cf93b7edf77" category="paragraph">扫描 IP 是 Oracle 11gR2 中的一项新功能。</block>
  <block id="e722d9c89d1b5b9800b34b5757f4b302" category="list-text">SnapManager 不支持 Oracle 集群文件系统（ OCFS ）。</block>
  <block id="18f6d6d71bba870ac97b19cdaae7df24" category="list-text">SnapManager 3.2 已弃用对 Oracle Database 9i 的支持。</block>
  <block id="93591708a3f6330056f9ad5396d584d9" category="list-text">SnapManager 3.3.1 已弃用对 Oracle 数据库 10gR2 （ 10.2.0.5 之前的版本）的支持。</block>
  <block id="3d0085eac1512712aace9273e1d54ee1" category="admonition">参考互操作性表确定支持的不同 Oracle 数据库版本。</block>
  <block id="6bb246067ff3f5453fac3cd982c3de78" category="summary">此命令将删除不再需要的备份计划。</block>
  <block id="f9206a0d6fc8cb27fcb192fc88176dd1" category="doc">smo schedule delete 命令</block>
  <block id="ddbdd5a800c4a62f31a21ffad01c9e56" category="paragraph">指定与要删除备份计划的数据库相关的配置文件的名称。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="29636ad57a84720f5207c14b08435431" category="summary">您可以删除任何一个受保护资源的凭据，例如配置文件，存储库或主机。这样，您就可以仅删除一个资源的凭据，而不是清除所有资源的用户凭据。</block>
  <block id="2e013b3ac52fc1cd17491771dd8c8414" category="doc">删除单个资源的凭据</block>
  <block id="4c5fb979891f13a054d06c3acd83bf99" category="paragraph">您可以删除任何一个受保护资源的凭据，例如配置文件，存储库或主机。这样，您就可以仅删除一个资源的凭据，而不是清除所有资源的用户凭据。</block>
  <block id="cc0824102496a71872a6c62742a3d49d" category="inline-xref-macro">smo credential delete 命令</block>
  <block id="a6aad63af8c8be8f6f3c8a8745ca4019" category="paragraph"><block ref="a6aad63af8c8be8f6f3c8a8745ca4019" category="inline-xref-macro-rx"></block></block>
  <block id="3524f2c0e4243227cf574f7d936a2f6d" category="summary">您可以运行 profile delete 命令来删除数据库的配置文件。</block>
  <block id="26450549d78b8ed14b5242e7aa0c2620" category="doc">smo profile delete 命令</block>
  <block id="a307be84dd65c77e1aace1cdf1d7f65a" category="paragraph">指定要删除的配置文件。</block>
  <block id="eec7a524a2bd48c519f4f096bcc34b44" category="paragraph">以下示例将删除此配置文件：</block>
  <block id="8bab3d6de53741e5c2ff8db938019ea2" category="inline-xref-macro">正在删除配置文件</block>
  <block id="4026691f11a4c88c4aea3b26b6e1f63d" category="paragraph"><block ref="4026691f11a4c88c4aea3b26b6e1f63d" category="inline-xref-macro-rx"></block></block>
  <block id="1821dfc8e1eae3e771b42104e706270f" category="summary">此命令将显示当前配置文件的列表。</block>
  <block id="440001d542ceb1c40f950991c1bc0cca" category="doc">smo profile list 命令</block>
  <block id="72a3a57bb5bddb7e12707e42e5bb769c" category="paragraph">以下示例将显示现有配置文件及其详细信息。</block>
  <block id="43c8ca65b24fd038e769e6bfb845d3e4" category="summary">您可以根据业务需求对 SnapManager 存储库进行组织。您可以通过多种方式对其进行组织，包括按应用程序类型和使用情况进行组织。</block>
  <block id="d9e756a71401361e1b86de4d1c16f0e8" category="doc">如何组织存储库</block>
  <block id="fb8acfa72cff4675005fe93179adac67" category="paragraph">您可以通过多种方式组织存储库。这种方式有两种：</block>
  <block id="a1fa27779242b4902f7ae3bdd5c6d508" category="cell">Type</block>
  <block id="93932ba537ba6424fb935c090e4d40a9" category="cell">特性</block>
  <block id="f259a383c98045d19dfbbbf1316b531d" category="paragraph">按应用程序</block>
  <block id="ab49e004531ec54437e3b58ae37b3a1e" category="paragraph">如果您有多个运行不同应用程序的 Oracle 数据库，则可以为每种应用程序类型创建一个 SnapManager 存储库。每个 SnapManager 存储库都具有特定应用程序类型的数据库的配置文件。该应用程序类型的所有生产，开发和测试数据库都将由同一个 SnapManager 存储库进行管理。此选项有助于对类似数据库进行分组并简化克隆。但是，如果您有多种应用程序类型，则可能需要管理多个 SnapManager 存储库，如果您选择实施另一种应用程序类型，则需要创建另一个 SnapManager 存储库。由于这些 SnapManager 存储库将管理生产数据库，因此其中每个存储库都必须位于高可用性服务器上，这可能会很贵。此外，必须在同一个 SnapManager 存储库中管理生产数据库以及相同类型的开发和测试数据库，这可能是一个安全问题描述。</block>
  <block id="8431dcf15c533df46c968c354032fea6" category="paragraph">按使用情况</block>
  <block id="c8007e0194b6452e8d59943d14ec61e5" category="paragraph">您可以根据使用情况（例如生产，开发，测试和培训）在 SnapManager 存储库之间分布数据库。此选项会将存储库数量限制为您拥有的不同类型的数据库。由于所有生产数据库都由一个 SnapManager 存储库管理，因此只能为生产数据库管理员授予对此存储库的访问权限。此外，如果您选择为新应用程序类型部署另一个数据库，则只需在相应的 SnapManager 存储库中注册该数据库，而无需创建新存储库。只能为包含所有生产数据库配置文件的 SnapManager 存储库提供高可用性。</block>
  <block id="790159f0a491286c94ea6464bd8317ef" category="paragraph">SnapManager for Oracle 和 SnapManager for SAP 不应共享同一个存储库。对于适用于 Oracle 的 SnapManager 和适用于 SAP 的 SnapManager ，如果您的环境中安装了不同的存储库（不同的 Oracle 数据库用户），则必须对每个产品使用不同的存储库。在相同或不同的数据库中使用不同的存储库，可以为每个产品提供独立的升级周期，从而提高灵活性。</block>
  <block id="b3783b2c7ef48e1a8b37bf0c8502abc3" category="summary">通过 SnapManager ，您可以从原始卷中 Snapshot 副本的位置以外的其他位置还原数据文件和控制文件。</block>
  <block id="70c874f8559ac2a8d0734aef116523af" category="doc">从备用位置还原文件</block>
  <block id="19e37b0ca395d0e5dc30fb4980d661f2" category="paragraph">原始位置是指备份时文件在活动文件系统上的位置。备用位置是指将从中还原文件的位置。</block>
  <block id="46e8d0dfb4ac9e6f118386bb4646c7cc" category="paragraph">您可以从备用位置进行还原，以便将数据文件从中间文件系统还原到活动文件系统。</block>
  <block id="db33a21adc8a766b26b9dcc38d6db44d" category="paragraph">恢复由 SnapManager 自动执行。从外部位置恢复文件时， SnapManager 使用 recovery automatic from location 命令。</block>
  <block id="73a4c1a79e35911b86a76dbc10f69cef" category="paragraph">SnapManager 还使用 Oracle 恢复管理器（ RMAN ）来恢复文件。Oracle 应可识别要恢复的文件。文件名应采用默认格式。从闪存恢复区域恢复时， SnapManager 会提供 Oracle 的转换路径。但是， Oracle 无法从闪存恢复区域恢复，因为它无法生成正确的文件名。理想情况下，闪存恢复区域是要与 RMAN 配合使用的目标。</block>
  <block id="e4ee4370b8dba322506b316fa124445f" category="summary">您可以确定用于创建配置文件的 SnapManager 数据库的系统标识符（ SID ）。</block>
  <block id="20b25011635ca868f3329c2534c6b170" category="doc">确定要备份的现有数据库</block>
  <block id="292bb38f05bae1781905be392afdd58f" category="paragraph">非 SAP 系统的标准 Oracle 用户 ID 为 Oracle 。</block>
  <block id="581ed670a2299fc899cc63e5e13a4c21" category="list-text">验证 Oracle 服务 OracleServiceSID 。</block>
  <block id="73ec4c3899c3091298cc9f68a941adaa" category="paragraph">如果此服务称为 OracleServiceFASDB ，则数据库 SID 为 FASDB 。</block>
  <block id="96fe0a139a8b3215cc2799c56c001d18" category="summary">保留类为 " 无限制 " 的备份不能直接删除或释放。要删除或释放这些备份，必须先分配另一个保留类，例如每小时，每天，每周或每月。要删除或释放不受保留策略限制的备份，必须先更新此备份，使其符合删除或释放条件。</block>
  <block id="6d5cc325eeb79f7732350feee4b337e9" category="doc">释放或删除保留策略免除备份</block>
  <block id="00063fcc8395d69e0ff7067b1424457b" category="list-text">要更新备份以使其符合保留策略删除的条件，请输入以下命令： smo backup update -profileprofile_name ｛ -labelLabel 【 data | -archivelogs] | -ididid ｝ -retain （ -hourly | -daily | -weekly | -monthly ）</block>
  <block id="23a14c7159a32b42978b3979f00178fe" category="list-text">更新备份以使其符合删除条件后，您可以删除备份或释放备份资源。</block>
  <block id="244f2d7a47b0e9d87ddd20993ab35cdd" category="list-text">要删除备份，请输入以下命令： smo backup delete -profileprofile_name ｛ -labelLabel [data | -archivelogs] | -iddid | -all ｝</block>
  <block id="edf1cb06b96a594e852f015af742aeff" category="list-text">要释放备份资源，而不是删除备份，请输入以下命令： smo backup free -profileprofileprofile_name ｛ -labelLabel 【 data | -archivelogs] | -iddid | -all ｝ （强制）【 -dump] （ -quiet | -verbose ）</block>
  <block id="7f6435059cc760380d9ebdc345f2a567" category="summary">此命令可更新有关克隆的信息。您可以更新此注释。</block>
  <block id="61fee49e13fef42edba7921a3b7bba0c" category="doc">smo clone update 命令</block>
  <block id="71f281021f59746a57170b7e6ca5abce" category="paragraph">指定包含要更新的克隆的配置文件的名称。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="e304f9b7c6c1428f054931b02bfd6428" category="list-text">* ID ID*</block>
  <block id="a7d12bffcf68a7fb9ea159aa18dc8d3c" category="paragraph">指定克隆的 ID 。此 ID 由 SnapManager 在创建克隆时生成。使用 smo clone list 命令显示每个克隆的 ID 。</block>
  <block id="9a4b832f2c4aa64d4d28ec306d2868a1" category="paragraph">指定克隆的标签。</block>
  <block id="cc646ff096374d5aefe562235b6f806e" category="list-text">* —注释 *</block>
  <block id="a4ad1c2f690d9d554805d9db755fee91" category="paragraph">显示在创建克隆时输入的注释。这是一个可选参数。</block>
  <block id="60f46040f7fe09bd2fbc71546ed47667" category="paragraph">以下示例将更新克隆注释。</block>
  <block id="b3c664aaa7d410cdd1ffa759c9cce24a" category="summary">SnapManager 提供了一些脚本，您可以使用这些脚本作为示例来创建自己的脚本，也可以作为自定义脚本的基础。</block>
  <block id="752248847f70cccf030cbbe556728bd2" category="doc">查看插件脚本示例</block>
  <block id="861645291858d901f4f89da3323d267e" category="paragraph">您可以在以下位置找到插件脚本示例：</block>
  <block id="b45f6ada84033d953f77f28466dd0819" category="list-text">&lt;default_install_directory&gt;\plugins\examples\backup\create</block>
  <block id="a0ed096d23844aa7405e9482bda01546" category="list-text">&lt;default_install_directory&gt;\plugins\examples\clone\create</block>
  <block id="6ed7a1f6babf4f525dd11cf1c403c2e7" category="list-text">&lt;default_install_directory&gt;\plugins\windows\examples\backup\create\post</block>
  <block id="a3ea958ffbbd740dbb5506e1f834a73f" category="paragraph">包含示例插件脚本的目录包含以下子目录：</block>
  <block id="185b5d0d9c420fd6fd119153275eee36" category="list-text">策略：包含配置后始终在克隆操作上运行的脚本。</block>
  <block id="2432304790da7110be1f7ece159e8d12" category="list-text">PRE ：包含配置后在克隆操作之前运行的脚本。</block>
  <block id="713368a46f2ee29c4d06beed55da2940" category="list-text">POST ：包含配置后在克隆操作之后运行的脚本。</block>
  <block id="79e7d990b8a36f36d96fac1ac22a66fa" category="paragraph">下表介绍了示例脚本：</block>
  <block id="c8fdae1aaa6ac34db5781ebb5331bf7c" category="cell">脚本名称</block>
  <block id="11eb872bf84dc858429f693c5472ef7f" category="cell">脚本类型</block>
  <block id="752f196d54161bffef3d4c38e89b2527" category="paragraph">validate_sid.sh</block>
  <block id="af1254ec880ae83095668b80f94ff121" category="paragraph">包含对目标系统上使用的 SID 的其他检查。该脚本将检查 SID 是否具有以下特征：</block>
  <block id="8d293fb1a3432e2807cb89b9faf703a5" category="list-text">包含三个字母数字字符</block>
  <block id="27383fa65981b5560da57352414fe426" category="list-text">以字母开头</block>
  <block id="51359e8b51c63b87d50cb1bab73380e2" category="paragraph">策略</block>
  <block id="cc561bef4dbd2996ec2b2478f3e1042d" category="paragraph">cleanup.sh</block>
  <block id="a92643431d871bce229b3c535764e00d" category="paragraph">清理目标系统，以便准备好存储新创建的克隆。根据需要保留或删除文件和目录。</block>
  <block id="aea7dd6633627d594fbb1137328ddc6e" category="paragraph">预请求</block>
  <block id="6ecf4e436391c13b2244712536279617" category="paragraph">mirror_the_backup.cmd</block>
  <block id="bd7abafb66cf79a2503621ac6673f90b" category="paragraph">在使用 7- 模式 Data ONTAP 的 Windows 环境中执行备份操作后，对卷进行镜像。</block>
  <block id="4bb80b3f4ccba89f1e792c98db5908ec" category="paragraph">任务后</block>
  <block id="203a606ac8022d4425c50402d98fe3c0" category="paragraph">vault_the_backup.cmd</block>
  <block id="d4365b2bb28cdeaa93d499d704d02094" category="paragraph">如果您使用的是在 7- 模式下运行的任一 Data ONTAP ，则在 Windows 环境中执行备份操作后存储 qtree 。</block>
  <block id="0338429f1c0b9235f0de6f6e4fdc0b7f" category="paragraph">mirror_the_backup_cDOT.cmd</block>
  <block id="849f34a00d2a6440a194b215813a7395" category="paragraph">在使用集群模式 Data ONTAP 的 Windows 环境中执行备份操作后对卷进行镜像。</block>
  <block id="30f4bd2665c82064aabeb449e573897e" category="paragraph">vault_the_backup_cDOT.cmd</block>
  <block id="c581fc6b381be6afa92dccabaff96cf7" category="paragraph">在使用集群模式 Data ONTAP 的 Windows 环境中执行备份操作后，将存储 qtree 。</block>
  <block id="245cee6ea07f250df77b914ceb857ab4" category="paragraph">默认情况下，随 SnapManager 提供的脚本使用 bash shell 。在尝试运行任何示例脚本之前，您必须确保操作系统上已安装对 bash shell 的支持。</block>
  <block id="a9537979c02674d70135149d30470263" category="list-text">要验证是否正在使用 bash shell ，请在命令提示符处输入以下命令： bash</block>
  <block id="27fe23fb2bad7e419a1f574bb548cba6" category="paragraph">如果未看到错误，则表示 bash shell 运行正常。</block>
  <block id="cd4f5948f1c7ec6dae23372a0bf04c7a" category="paragraph">或者，您也可以在命令提示符处输入 which — bash 命令。</block>
  <block id="94f34afd48e7a82549111e94eb1e20df" category="list-text">在以下目录中找到此脚本：</block>
  <block id="ed5ee13d4c12bc5beec38e9cd5f8d2d3" category="paragraph">&lt;installdir&gt;\plugins\examples\clone\create</block>
  <block id="02d3873ae76f7cac4b564492be24d8b3" category="list-text">在 vi 等脚本编辑器中打开此脚本。</block>
  <block id="9c59cc3f2b06cd51184a010a113b28ae" category="paragraph">以下示例自定义脚本将验证数据库 SID 名称，并防止克隆的数据库中使用无效名称。它包括三个操作（检查，描述和执行），这些操作是在运行脚本后调用的。该脚本还包括错误消息处理，代码为 0 ， 4 和 &gt;4 。</block>
  <block id="5250ff353a5ce88743b93c7aeb235a41" category="summary">您必须了解无法执行回滚的情形。但是，对于其中某些情形，您可以在执行回滚之前执行一些额外任务。</block>
  <block id="b4ad288269750efdd0d14b9ebc600549" category="doc">执行回滚的限制</block>
  <block id="b1c5330a5037804f5f8510828a56cb1e" category="paragraph">在以下情况下，您无法执行回滚或必须执行其他任务：</block>
  <block id="85496248a5f4fe6aa13087724bd8007c" category="list-text">如果在执行滚动升级后执行以下操作之一：</block>
  <block id="3839dc35dfddb7669b98362a617764af" category="list-text">创建新配置文件。</block>
  <block id="f2dba6157d31d702c8adbcfc44a9b699" category="list-text">更改备份的挂载状态。</block>
  <block id="395aa58d628adc5e046d7e6052bca80e" category="paragraph">在这种情况下，您必须先将挂载状态更改为其原始状态，然后再执行回滚。</block>
  <block id="60b71f68969c52b8e5e666e50063f8f3" category="list-text">还原备份。</block>
  <block id="9d742b3fef2f7bcb90d37adf07bfaa75" category="list-text">将身份验证模式从数据库身份验证更改为操作系统（ OS ）身份验证。</block>
  <block id="f231aba15560cb8b9a16621cf1bc6280" category="paragraph">在这种情况下，执行回滚后，您必须手动将身份验证模式从操作系统更改为数据库。</block>
  <block id="22c53776618eda0b151ef752542d900f" category="list-text">配置文件的主机名发生更改</block>
  <block id="8ca4cb069bad521964d5fa3d29455644" category="list-text">如果配置文件是分开的，以便创建归档日志备份</block>
  <block id="a1fa662eed9f43dd8d44f3644d755012" category="paragraph">在这种情况下，您无法回滚到低于 SnapManager 3.2 的版本。</block>
  <block id="c4220def4f0d129a8ce7df6f1084fd71" category="summary">转储文件位于客户端系统中，便于访问。如果您需要对与配置文件，系统或任何操作相关的问题进行故障排除，这些文件将非常有用。</block>
  <block id="568267e19fc70b71ed4a0486ba6760ea" category="doc">如何查找转储文件</block>
  <block id="8cf8825e814a58d5e77f5d97c130c22a" category="paragraph">转储文件位于客户端系统上用户的主目录中。</block>
  <block id="1bdeb4e05b871eaf902821fe2904bc0f" category="list-text">如果使用的是图形用户界面（ GUI ），则转储文件位于：</block>
  <block id="56adf8e8db02c4d42d5fdd855c340309" category="list-text">如果您使用的是命令行界面（ CLI ），则转储文件位于：</block>
  <block id="5de40d3616b5161bbba3fd4626abd5f8" category="paragraph">转储文件包含 dump 命令的输出。文件的名称取决于提供的信息。下表显示了转储操作的类型以及生成的文件名：</block>
  <block id="74bdcfde5c4f406ba61c81c80b83033b" category="cell">转储操作的类型</block>
  <block id="bb1c3b8e187ed84f5d25387111105296" category="cell">生成的文件名</block>
  <block id="2da3d5a99305e07371a6a14722d8a23e" category="paragraph">带有操作 ID 的 operation dump 命令</block>
  <block id="0a5033f0b4357a2b36018bdbb54e199c" category="paragraph">smo_dump_operation-id.jar</block>
  <block id="5fe14f3ceda91769b0c9ca28a2ebae3f" category="paragraph">无操作 ID 的操作转储命令</block>
  <block id="bcbe4b60bf88ac15d7588b5fba278b46" category="paragraph">SMO 操作 dump -profile vh1-verbose 此时将显示以下输出：</block>
  <block id="79c15f48a1ca1b8ca2b67093f9241afe" category="paragraph">system dump 命令</block>
  <block id="95051f86b92801794396bfaf891e3c56" category="paragraph">smo_dump_host-name.jar</block>
  <block id="398fa31d5fca7d269caf7e6093545183" category="paragraph">profile dump 命令</block>
  <block id="4e4ac8025df0e3ffb757c61818b6a243" category="paragraph">smo_dump_profile-name_host-name.jar</block>
  <block id="2d36be5d18bccc1d0df9acb3a6eaa55a" category="summary">此命令将重新启动 SnapManager 主机服务器，并以 root 身份输入。</block>
  <block id="476aaeb75005d5f63826d404a70b6f08" category="doc">smo_server restart 命令</block>
  <block id="f0f7c867937f7b4101fb0550b58e1e0e" category="paragraph">以下示例将重新启动主机服务器。</block>
  <block id="d4fd858d3abe9befe199b9e7b24ff58d" category="summary">SnapManager 可以释放重复的仅归档日志备份，从而在每次进行备份时整合仅归档日志备份。默认情况下，整合处于启用状态。</block>
  <block id="8316d157edc544dc3121e568705e3468" category="doc">整合归档日志备份</block>
  <block id="5229108bf64b036421d0206f8d9d067d" category="paragraph">SnapManager 可识别归档日志文件位于其他备份中的仅归档日志备份，并释放这些备份以使用唯一归档日志文件保持最少数量的仅归档日志备份。</block>
  <block id="11d2555856284845848171753b48d968" category="paragraph">如果归档日志保留期限为 archivelog only 备份，则会根据归档日志保留期限删除这些备份。</block>
  <block id="731759fbfa3d8c2dfa9699b00cd75b8e" category="paragraph">如果数据库在归档日志整合期间处于关闭或挂载状态，则 SnapManager 会将数据库更改为挂载状态。</block>
  <block id="09d30ee6e22416a8d532491189b3be7d" category="paragraph">如果归档日志文件的备份或修剪失败，则不会执行整合。只有在成功备份和成功修剪操作之后，才会整合仅归档日志的备份。</block>
  <block id="e14e329014715f2bdfad079f154f9c08" category="list-text">要整合仅归档日志备份，请修改配置参数整合，并在 SnapManager 配置文件（ SMO.config ）中将此值设置为 true 。</block>
  <block id="d132e9021a5dad066d24da047c98aa6e" category="paragraph">设置参数后，将整合仅归档日志备份。</block>
  <block id="dedc59d23e884bca38fee44393bbb2d3" category="paragraph">如果新创建的仅归档日志备份在任何早期的仅归档日志备份中包含相同的归档日志文件，则会释放早期的仅归档日志备份。</block>
  <block id="15ee71f95209e6ff5d104dce0e5b58c1" category="admonition">SnapManager 不会整合随数据文件备份一起创建的归档日志备份。SnapManager 整合了仅归档日志备份。</block>
  <block id="c1cf98b0d685d7409dbad54a521ef262" category="admonition">即使用户从归档日志目标手动删除归档日志文件，或者归档日志文件损坏且可能包含在备份中， SnapManager 也会整合归档日志备份。</block>
  <block id="6c06927d16511fb12aaaa5a26dd068ac" category="list-text">要禁用归档日志备份的整合，请修改配置参数 consolidation ，并在 SnapManager 配置文件（ SMO.config ）中将此值设置为 false 。</block>
  <block id="c7dc9a0af75b1a2d7dbfc3374d61a5bf" category="summary">您可以运行 system dump 命令来创建包含有关服务器环境的诊断信息的 JAR 文件。</block>
  <block id="28e9906ea0c8fee9060a94c956354841" category="doc">smo system dump 命令</block>
  <block id="a175330527cbc52002dbb5803eda09a2" category="section-title">system dump 命令示例</block>
  <block id="38a202414a5db9d3a2285ee9b6eedd7c" category="paragraph">以下示例使用 smo system dump 命令创建 JAR 文件：</block>
  <block id="14641aabb4928239e1b19df7637745a5" category="summary">升级到更高版本的 SnapManager 后，您必须更新现有存储库。您可能还需要修改分配给现有备份的备份保留类。</block>
  <block id="f4a902d72fa75f7afb926ad327b51e04" category="doc">升级后任务</block>
  <block id="177390c03880bc8cf8bbbee203961b13" category="admonition">升级到 SnapManager 3.3 或更高版本后，如果要使用数据库（ DB ）身份验证作为唯一的身份验证方法，则需要将 sqlnet.authentication_services 设置为 none 。RAC 数据库不支持此功能。</block>
  <block id="c0ba57931454582bc01ca89e87fea4fd" category="summary">您可以验证是否已正确设置现有配置文件。验证配置文件时， SnapManager 会检查环境中是否存在您指定的配置文件，并验证是否已设置此配置文件以及此配置文件中的数据库是否可访问。</block>
  <block id="a52fd85be7b3c2e8bdc2ba8e7d86adde" category="doc">正在验证配置文件</block>
  <block id="5a20bd7817f59ccabf543c974ff86438" category="list-text">要验证配置文件是否设置正确，请输入以下命令： smo profile verify -profile profile_name</block>
  <block id="ceac82073dedc484cbe1f8e73e252e62" category="inline-xref-macro">smo profile verify 命令</block>
  <block id="86e81329757f402a48109d44550c9621" category="paragraph"><block ref="86e81329757f402a48109d44550c9621" category="inline-xref-macro-rx"></block></block>
  <block id="9fda49d8d7c1af4eb0aa6d81c4248b42" category="summary">您可以运行 profile show 命令来显示有关配置文件的信息。</block>
  <block id="d07bd72392a5513a801d246dccb9c39f" category="doc">smo profile show 命令</block>
  <block id="bb2f89a9833a003f9508082b88c9bd43" category="summary">您可以使用 backup restore 命令还原主存储上的数据库备份。</block>
  <block id="6b6eca66217cecc918e9d33dd429d9e3" category="doc">在主存储上还原备份</block>
  <block id="a2e7d04cf79ce14648d160c05eb9fa2d" category="paragraph">您可以使用 backup restore 命令选项指定 SnapManager 是应还原全部备份还是部分备份。此外，您还可以通过 SnapManager 在单个用户操作中从备份还原控制文件以及数据文件或表空间。您可以使用 -control files 和 -complete 来还原控制文件以及表空间和数据文件。</block>
  <block id="83692863beb05cb910bcbbb2b27eeb11" category="paragraph">您可以选择以下选项之一来还原备份：</block>
  <block id="de6cf194e82b7217bee8fbf66f9f0e4c" category="cell">如果要还原 ...</block>
  <block id="b2ab9468407024b9e52fcb8768240b7f" category="cell">使用 ...</block>
  <block id="cc2350928eb3f484daa3c36ce52581e7" category="paragraph">包含所有表空间和数据文件的整个备份</block>
  <block id="ed5728c4bc224a6e496599788d78b168" category="paragraph">-complete</block>
  <block id="78bcdb7d280a423603bce319c6f57385" category="paragraph">特定表空间的列表</block>
  <block id="a5e81a4a59a41d0dac184c7552e20137" category="paragraph">-tablespaces</block>
  <block id="cab020fe14221314dfae8f31b2ddac92" category="paragraph">特定数据文件</block>
  <block id="248d9da2c0d74a21dcc355578c72ff8d" category="paragraph">文件</block>
  <block id="b7c06a6e31e4e76a27fcf05ab1155d74" category="paragraph">仅限控制文件</block>
  <block id="bc3e74e880ee63b58b7270c25d7a8045" category="paragraph">-controlfiles</block>
  <block id="b3c7858030819fe3edfee7987accb0e5" category="paragraph">表空间，数据文件和控制文件</block>
  <block id="ce9d051293fbe87a240b0499f6f00f64" category="paragraph">-complete -controlfiles</block>
  <block id="60d8ca5eba7d34f71b50af0dad25ab47" category="paragraph">您也可以通过指定 -restorspeciate 从备用位置还原备份。</block>
  <block id="767819caa202fa8a0edb29c8c48d3fcc" category="paragraph">如果包括 -recover ，则可以将数据库恢复到：</block>
  <block id="7cabcd008c01f1b3b9800528fbaee67e" category="list-text">数据库中发生的最后一个事务（所有日志）</block>
  <block id="916ba3dd8939fd521566222fa575e6fe" category="list-text">特定日期和时间</block>
  <block id="4b435e268a4b864e04f20b58737203ed" category="list-text">特定 Oracle 系统变更编号（ SCN ）</block>
  <block id="accc4de9423d8e55d4241599e7439a8f" category="list-text">备份时间（无日志）</block>
  <block id="22c304d05147880bdbc038acafba923f" category="list-text">仅还原</block>
  <block id="5c2fa2ee17481909bd764ad9e7ffd721" category="admonition">日期和时间恢复以及 SCN 恢复均为时间点恢复。</block>
  <block id="fe2968a5cb5377340e4908c60ba33005" category="paragraph">通过 SnapManager （ 3.2 或更高版本），可以使用归档日志文件自动恢复已还原的数据库备份。即使归档日志文件位于外部位置，但如果指定 -recovery-from-location 选项， SnapManager 也会使用外部位置的归档日志文件来恢复还原的数据库备份。</block>
  <block id="17e48e214d3204a2fdeaaf53bddc8eec" category="paragraph">在为恢复还原的备份指定外部归档日志位置时，必须确保将外部位置名称包含在大写中。在文件系统中，所有文件夹和子文件夹名称都必须为大写，因为 Oracle 会将目标路径转换为大写，并要求外部目标路径，文件夹名称和子文件夹名称采用大写。如果以小写形式指定外部归档日志目标路径，则 Oracle 可能无法识别指定路径，并且无法还原数据库。</block>
  <block id="62f9c06ec3a3188f51378772aa6d4832" category="paragraph">SnapManager 为 Oracle 提供了外部位置。但是， Oracle 无法识别外部目标中的文件。在闪存恢复区域目标中会注意到此行为。这是 Oracle 存在的问题，临时解决策始终需要备份此类数据库布局中的归档日志文件。</block>
  <block id="3d0ec8f6831632442f4399b335d5efe9" category="paragraph">如果提供的 SCN 或日期不一致，则恢复将在上次恢复的一致点停止，并显示错误消息 Recovery succeeded ， but insufficient 。您必须手动将恢复恢复为一致状态。</block>
  <block id="af522f60c5bcf67d51ec169abe174689" category="paragraph">为了在未应用任何日志的情况下进行恢复， SnapManager 会恢复到备份期间创建的最后一个归档日志文件的最后一个 SCN 。如果数据库在执行此 SCN 之前保持一致，则数据库将成功打开。如果数据库此时不一致，则 SnapManager 仍会尝试打开该数据库，如果该数据库已经一致，则该数据库将成功打开。</block>
  <block id="95c259937f0d073f9cae1be0f0c1298d" category="admonition">SnapManager 不支持恢复仅归档日志备份。</block>
  <block id="8168c5e20aa5dbf6d9577bcf981bd8d3" category="paragraph">如果归档日志目标不是支持 Snapshot 的存储，则可以使用 SnapManager 使用配置文件恢复已还原的数据库备份。在对不支持 Snapshot 的存储执行 SnapManager 操作之前，您应在 SMO.config 中为 archivedLogs.exclude 添加目标。</block>
  <block id="1f9535fd534de6be2443734f39ad9f62" category="paragraph">在创建配置文件之前，您必须确保已设置 EXCLUDE 参数。只有在 SnapManager 配置文件中设置了 exclude 参数后，才会成功创建配置文件。</block>
  <block id="300bc6f6837d76455e92be47aa0261ef" category="paragraph">如果备份已挂载，则 SnapManager 不会再次挂载备份，而是会使用已挂载的备份。如果备份由其他用户挂载，而当前用户无权访问先前挂载的备份，则其他用户必须提供权限。所有归档日志文件都对组所有者具有读取权限；如果备份由其他用户组挂载，则当前用户可能无法获得这些权限。用户可以手动为已挂载的归档日志文件授予权限，然后重试还原或恢复。</block>
  <block id="ab727807fce8991c3f7b21119a317df8" category="paragraph">您可以将 -dump 选项指定为可选参数，以便在还原操作成功或失败后收集转储文件。</block>
  <block id="47cd4a8e6bef9dc808e57dc576981d15" category="list-text">输入以下命令： smo backup restore -profile profile_name-label label-complete-recover -alllogs （ -recovery-from-locationpath ， path2]-dump-verbose ）</block>
  <block id="c9530ecf364e41643e58a297160cd62f" category="paragraph">SMO backup restore -profile targetdb1_prop1 -label full_bkup_sales _nov_08 — complete -recover -alllogs -verbose</block>
  <block id="a6d31d3bc1d995f8c9d6e6199b6ecc87" category="list-text">要还原不同情形下的数据，请完成以下操作之一：</block>
  <block id="80409fdfd3b97320a16921a220fea096" category="cell">命令示例</block>
  <block id="308e478a1b8b93f51c66d20e4a15d694" category="paragraph">* 在不使用控制文件的情况下完成数据库并恢复到特定的 SCN 编号（ 3794392 ）。在这种情况下，存在当前控制文件，但所有数据文件均已损坏或丢失。将数据库从现有的完整联机备份还原并恢复到该 SCN.* 之前的某个位置</block>
  <block id="74b9dd8e8b27d09267ba5cbd63b74d01" category="paragraph">SMO backup restore -profile targetdb1_prop1 -label full_bkup_sales _nov_08 -complete -recover -until 3794392 -verbose</block>
  <block id="8ced6574e3cbbe0d15edbd6e0eb62c93" category="paragraph">* 在不使用控制文件的情况下完成数据库并恢复到一个日期和时间。 *</block>
  <block id="e8ca67983acc23a68389bed5da51b0d6" category="paragraph">SMO backup restore -profile targetdb1_prop1 -label full_bkup_sales _nov_08 -complete -recover -until 2008-9-15 ： 15 ： 29 ： 23 -verbose</block>
  <block id="ac4d15803cf99923572e8dbc560a7214" category="paragraph">* 在不使用控制文件的情况下完成数据库，并恢复到数据和时间。在这种情况下，存在当前控制文件，但所有数据文件均已损坏或丢失，或者在特定时间后发生逻辑错误。将数据库从现有的完整联机备份还原并恢复到发生故障前的日期和时间。 *</block>
  <block id="5628f6e6f0270ed8cd3fd51674191136" category="paragraph">SMO backup restore -profile targetdb1_prop1 -label full_bkup_sales _nov_08 -complete -recover -until "2008-9-15 ： 15 ： 29 ： 23" -verbose</block>
  <block id="e85bc6193ce48f1df30ce3f9e4aebc1c" category="paragraph">* 不含控制文件的部分数据库（一个或多个数据文件），并使用所有可用日志进行恢复。在这种情况下，存在当前控制文件，但一个或多个数据文件已损坏或丢失。使用所有可用日志恢复这些数据文件并从现有的完整联机备份中恢复数据库。 *</block>
  <block id="6051b08078090c82053e4033bad8f5bd" category="paragraph">SMO 备份还原 -profile targetdb1_prop1 -label full_bkup_sales _nov_08 -files E ： \disks\s02.dbf E ： \disks\Sales03.dbf E ： \disks\Sales04.dbf -recover -alllogs -verbose</block>
  <block id="ccf981fb359a7dfbe44f26b5c71959ed" category="paragraph">* 不含控制文件的部分数据库（一个或多个表空间），使用所有可用日志进行恢复。在这种情况下，存在当前控制文件，但一个或多个表空间被丢弃，或者属于该表空间的多个数据文件之一损坏或丢失。使用所有可用日志还原这些表空间并从现有的完整联机备份中恢复数据库。 *</block>
  <block id="1d9b5f72423421364ca846be97e78cd1" category="paragraph">SMO backup restore -profile targetdb1_prop1 -label full_bkup_sales _nov_08 -tablespaces users -recover -alllogs -verbose</block>
  <block id="955cc29ec8f6e41a2dd24be50971c63b" category="paragraph">* 仅控制文件并使用所有可用日志进行恢复。在这种情况下，数据文件存在，但所有控制文件均已损坏或丢失。仅还原控制文件，并使用所有可用日志从现有的完整联机备份中恢复数据库。 *</block>
  <block id="98ca2172cd02a0a2e5285c5abc653eea" category="paragraph">SMO backup restore -profile targetdb1_prop1 -label full_bkup_sales _nov_08 -controlfiles -recover -alllogs -verbose</block>
  <block id="ae66fe5e0c599f7e32c9d0e3e8a23e2b" category="paragraph">* 在不使用控制文件的情况下完成数据库，并使用备份控制文件和所有可用日志进行恢复。在这种情况下，所有数据文件都会损坏或丢失。仅还原控制文件，并使用所有可用日志从现有的完整联机备份中恢复数据库。 *</block>
  <block id="0a8ce3065b3a46ba21c08c6c7b5f5070" category="paragraph">SMO backup restore -profile targetdb1_profile1 -label full_bkup_sales _nov_08 -complete -using-backup-controlfile -recover -alllogs -verbose</block>
  <block id="8c384b1b8ff3f453d3274d725ebcc8fe" category="paragraph">* 使用外部归档日志位置的归档日志文件恢复已还原的数据库。 *</block>
  <block id="ffaaca33823d596aa6b2d38bc9ac7837" category="paragraph">SMO backup restore -profile targetdb1_profile1 -label full_bkup_sales _nov_08 -complete -using-backup-controlfile -recover -alllogs -recovery-from-location E ： \archive -verbose</block>
  <block id="a381f93fe5fef3348c9bd5753c7049c4" category="list-text">使用 -recovery-from-location 选项指定外部归档日志位置。</block>
  <block id="306cb55aca74b0ffb4bfafc1aeb7df18" category="paragraph"><block ref="306cb55aca74b0ffb4bfafc1aeb7df18" category="inline-xref-macro-rx"></block></block>
  <block id="f2a9e109ae579d96ea5a13500c32e21b" category="summary">您可以运行 backup update 命令来更新备份保留策略。</block>
  <block id="75fd7b09e0e1437bdb6811a10bce415f" category="paragraph">指定要更新备份的配置文件。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="c8044192148931bee5afbe5718493396" category="paragraph">使用指定 GUID 验证备份。GUID 由 SnapManager 在创建备份时生成。您可以使用 smo backup list 命令显示每个备份的 GUID 。</block>
  <block id="236c5ee96101c46f45c1542b0ea17ae0" category="paragraph">将备份标签和备份范围指定为数据文件或归档日志。</block>
  <block id="994a37833bfe262a460e3c0170c56d0c" category="list-text">* — comment comtion_text*</block>
  <block id="9895e4e14ed049d624ab4dd1ed1d0121" category="paragraph">输入有关备份更新的文本（最多 200 个字符）。您可以包含空格。</block>
  <block id="4142d16ea22514adeb383bc6c7927089" category="list-text">* —保留 ｛ -hourly ； -daily ； -weekly ； -monthly ； -unlimited ｝ *</block>
  <block id="fe59b2c0199b73bda8ac415ec8f081a7" category="paragraph">指定备份应保留在每小时，每天，每周，每月还是无限制的基础上。如果未指定 -retain ，则保留类默认为 -hourly 。要永久保留备份，请使用 -unlimited 选项。unlimited 选项使备份不符合删除条件。</block>
  <block id="9baae1033c728ada8524e1da95b3e153" category="paragraph">以下示例将更新备份，将保留策略设置为无限制：</block>
  <block id="61867f9f3c98425a5e48548e5fa7b8b4" category="inline-xref-macro">更改备份保留策略</block>
  <block id="04a0d78821b7d013a8a507c1d9eb98cd" category="paragraph"><block ref="04a0d78821b7d013a8a507c1d9eb98cd" category="inline-xref-macro-rx"></block></block>
  <block id="4c1d9933f407da78951c35650b5fe7de" category="inline-xref-macro">永久保留备份</block>
  <block id="c7fef34516f4ef6acb442efd56d0a737" category="paragraph"><block ref="c7fef34516f4ef6acb442efd56d0a737" category="inline-xref-macro-rx"></block></block>
  <block id="07e30c290c7ca8dd6c9216a1016908ec" category="paragraph"><block ref="07e30c290c7ca8dd6c9216a1016908ec" category="inline-xref-macro-rx"></block></block>
  <block id="f9f5207f98895792c8b20c16cae12266" category="summary">您可以通过运行 version 命令来确定本地主机上运行的产品版本。</block>
  <block id="0849bd7bea8748dfc1e7c7346ef059bc" category="doc">正在检查 SnapManager 软件版本</block>
  <block id="e94c609730d95f562fed20234cfb4ff5" category="list-text">要检查 SnapManager 版本，请输入以下命令： smo version</block>
  <block id="7fb2f5d6fa52be1167f1c74847b5a882" category="inline-xref-macro">smo version 命令</block>
  <block id="fbc498caa587db093839ebf39281775c" category="paragraph"><block ref="fbc498caa587db093839ebf39281775c" category="inline-xref-macro-rx"></block></block>
  <block id="fa7f7e99ff0c68cd9e9877c52cf002d0" category="summary">DBA 可以为备份分配特定的保留类，包括每小时，每天，每周或每月。分配特定保留类后，在此更改下执行的备份便可被删除。</block>
  <block id="90f19eb55c299bd2fd97995445bc0657" category="doc">使用特定保留类分配备份</block>
  <block id="671a5fd31bb528f6213fd7e48e663f6d" category="list-text">要分配特定的备份保留类，请输入以下命令： smo backup update -profileprofileprofile_name ｛ -labelLabel [data | -archivelogs] | -idi| all ｝ -retain （ -hourly _ -daily _ -weekly _ -monthly ）</block>
  <block id="db5893a6135965aff59586f09fb41a99" category="summary">SnapManager 提供了执行策略驱动型数据管理，计划和创建定期数据库备份，在数据丢失或发生灾难时从这些备份还原数据以及创建数据库克隆所需的工具。您可以使用后处理脚本在主存储上创建备份，并在二级存储上创建受保护的备份。</block>
  <block id="20514c73472aebff99c8ae67923d10b5" category="doc">什么是 SnapManagerfor Oracle</block>
  <block id="0bd11912d10ba39e1a3f5578fd31cb17" category="paragraph">SnapManager 在与最新数据库版本集成时会利用 NetApp 技术。SnapManager 与以下 NetApp 应用程序和技术相集成：</block>
  <block id="948dbbdcffcc5a7b7ff5748de9d1c058" category="list-text">SnapDrive 可自动执行存储配置任务，并简化为存储创建无错误，主机一致的 Snapshot 副本的过程。</block>
  <block id="69aa77d1c1f8800616ebf23ca8b4b216" category="list-text">Snapshot （ Data ONTAP 的一项功能）可为数据库创建时间点副本。</block>
  <block id="85a019f5f22ea9b3cad26c1839e2bb2a" category="list-text">SnapVault （ Data ONTAP 的一项许可功能）利用基于磁盘的备份实现可靠的低开销数据库备份和恢复。</block>
  <block id="38c97407d2364b95c460eb2ef366ce0b" category="list-text">SnapMirror （ Data ONTAP 的一项许可功能）以简单，可靠且经济高效的方式在全局网络中高速复制数据库数据。</block>
  <block id="2dafedab4d7928d7460504c6eb21b584" category="list-text">SnapRestore （ Data ONTAP 的一项许可功能）可在数秒内恢复整个数据库，而不管容量或文件数量如何。</block>
  <block id="610fb3636262d5863d3f4302320ae173" category="list-text">FlexClone （ Data ONTAP 的一项许可功能）有助于从 Snapshot 备份快速创建节省空间的数据库克隆。</block>
  <block id="dbf464ef5192e98e14ee7555dd2914be" category="paragraph">SnapManager 可跨 SAN （ FC 和 iSCSI ）协议运行。</block>
  <block id="413b093330d1bb11ad214e098378e031" category="paragraph">SnapManager 还可与原生 Oracle 技术集成，例如 Oracle 恢复管理器（ RMAN ）。</block>
  <block id="5580f7db4c2c41b306869debe04d6873" category="summary">您可以使用命令行界面（ CLI ）或图形用户界面（ GUI ）访问 SnapManager 。</block>
  <block id="bb16aa429e1ec5d8a6a17f808ff39ca7" category="doc">访问 SnapManager</block>
  <block id="fa82775b2111ba8456015cc0e5fa1e1c" category="paragraph">您可以通过以下方式执行不同的 SnapManager 操作：</block>
  <block id="f6b8b12a2777d1f57ce843fabddad4b3" category="list-text">在与数据库主机位于同一网络的主机上的命令行界面中输入命令。</block>
  <block id="ec6e0b57b2abb112f7766b48130f0702" category="paragraph">有关所有命令的列表及其选项和参数的说明，请参见命令参考一章。</block>
  <block id="33d5af994647eb26685258f32659967f" category="paragraph">要访问命令行界面，请单击 * 开始 * &gt; * 所有程序 * &gt; * NetApp * &gt; * 适用于 Oracle* 的 SnapManager &gt; * 启动 SMO 命令行界面（ CLI ） * 。</block>
  <block id="ba58b35edac3e47823b842347a32edc0" category="list-text">通过在与数据库主机位于同一网络的主机上访问 GUI 。</block>
  <block id="34c21887b4a805afb71e4f27b9a6f30c" category="paragraph">GUI 提供了简单易用的向导，可帮助您执行不同的操作。</block>
  <block id="e978569767f88986fe6290491b73547c" category="inline-xref-macro">SnapManager for Oracle 命令参考</block>
  <block id="f5b7305f8441a5fc3e36d5da5c29059a" category="paragraph"><block ref="f5b7305f8441a5fc3e36d5da5c29059a" category="inline-xref-macro-rx"></block></block>
  <block id="a323c300079b799ec0c339db61b451ef" category="summary">使用此命令可以删除 SnapManager 操作的历史记录。</block>
  <block id="aba36d39d95616e45734d121e682fe46" category="doc">smo history purge 命令</block>
  <block id="7897713b3b7344f64c6266137369ebe1" category="summary">SnapManager for Oracle 使用任务规范可扩展标记语言（ Extensible Markup Language ， XML ）文件，该文件指示备份，还原和克隆操作的任务前和任务后。您可以在 XML 文件中为备份，还原和克隆操作前后要执行的任务添加任务前脚本和任务后脚本名称。</block>
  <block id="06613032f2b64c0037c96e8d351644c0" category="paragraph">在 SnapManager （ 3.1 或更早版本）中，只能对克隆操作运行任务前和任务后脚本。在适用于 Oracle 的 SnapManager （ 3.2 或更高版本）中，您可以为备份，还原和克隆操作运行任务前和任务后脚本。</block>
  <block id="b20ff0242c750121c817da20a2c0aa37" category="paragraph">在 SnapManager （ 3.1 或更早版本）中，任务规范部分是克隆规范 XML 文件的一部分。在 SnapManager 3.2 for Oracle 中，任务规范部分是一个单独的 XML 文件。</block>
  <block id="04cb83ab33c5d10da72436806f92091b" category="admonition">SnapManager 3.3 或更高版本不支持使用在 SnapManager 3.2 之前的版本中创建的克隆规范 XML 文件。</block>
  <block id="8a4d50cde1b64e40304228e3c667fca2" category="paragraph">在适用于 Oracle 的 SnapManager （ 3.2 或更高版本）中，您必须确保满足以下条件才能成功执行 SnapManager 操作：</block>
  <block id="a7459e481d8524aceae9a17d5fa5e8d4" category="list-text">对于备份和还原操作，请使用任务规范 XML 文件。</block>
  <block id="5839d0d0bfaf3767212cca4f021ec161" category="list-text">对于克隆操作，请提供两个规范文件：一个克隆规范 XML 文件和一个任务规范 XML 文件。</block>
  <block id="3aef70156d05eb8c6a9bc1cd779efb89" category="paragraph">如果要启用任务前或任务后活动，您可以选择添加任务规范 XML 文件。</block>
  <block id="deff4a1793232b56879a1b1eccbe49a5" category="paragraph">您可以使用 SnapManager 图形用户界面（ GUI ），命令行界面（ CLI ）或文本编辑器创建任务规范文件。要启用适当的编辑功能，您必须对文件使用 .xml 扩展名。您可能需要保存此文件，以便将来执行备份，还原和克隆操作时使用它。</block>
  <block id="56de20bb1fe05056d9b0b2cbd91a63e0" category="paragraph">任务规范 XML 文件包括两个部分：</block>
  <block id="1c89e74720535fcc9538d6f69eecdf3b" category="list-text">预任务部分包括可在备份，还原和克隆操作之前运行的脚本。</block>
  <block id="2db77819262ee9b6d4cae060cbba7344" category="list-text">后任务部分包含可在备份，还原和克隆操作之后运行的脚本。</block>
  <block id="2dec6f230d5190d2e2657418eceaabaa" category="paragraph">任务前和任务后部分中包含的值必须遵循以下准则：</block>
  <block id="2486e151ef8cbc0b3dee740abfa13234" category="list-text">任务名称：任务名称必须与脚本名称匹配，该脚本将在运行 plugin.sh -describe 命令时显示。</block>
  <block id="18c789229466417dd0d35a12287280cc" category="admonition">如果不匹配，则可能会收到以下错误消息： The file not found.</block>
  <block id="a0c675228f1e2afe4dfdb41c8c301efa" category="list-text">参数名称：参数的名称必须是可用作环境变量设置的字符串。</block>
  <block id="79f989b5d8f26ec39d440d90ebc81d09" category="paragraph">该字符串必须与自定义脚本中的参数名称匹配，该脚本会在运行 plugin.sh -describe 命令时显示。</block>
  <block id="bc54978d61ba8eba716b3f529730840f" category="admonition">任务规范 XML 文件不应包含任何策略。</block>
  <block id="d42083b6967bce23ca39f32392a10451" category="paragraph">在 SnapManager 图形用户界面中，您可以设置参数值并保存 XML 文件。您可以使用备份创建向导，还原或恢复向导以及克隆创建向导的任务启用页面加载现有任务规范 XML 文件，并将选定文件用于任务前或任务后活动。</block>
  <block id="a1784d5bbcc5714ff95e399f5f22c5b0" category="paragraph">可以使用相同或不同的参数和值组合多次执行任务。例如，您可以使用 " 保存 " 任务保存多个文件。</block>
  <block id="a52e5762c76037ef08a356389336df5d" category="admonition">无论任务规范文件的文件扩展名如何， SnapManager 都会使用任务规范文件中提供的 XML 标记来执行备份，还原和克隆操作的预处理或后处理活动。</block>
  <block id="d3876ed6c17726f5db46444d8ead5d98" category="summary">您可以更改备份的属性，使其符合保留策略中的删除条件或不符合删除条件。</block>
  <block id="1a48281686150148163cf4641354b99d" category="paragraph">创建备份时，您可以设置其保留策略。您可以稍后选择将该备份保留较保留策略允许的时间长，或者指定您不再需要该备份并希望保留策略对其进行管理。</block>
  <block id="e49c46cc37d39b1b87f298685b47ecea" category="summary">使用 SnapManager 可以指定发送电子邮件警报的邮件服务器详细信息。</block>
  <block id="0377cfadbe4b235ac0b5610cf68342d5" category="doc">为存储库配置邮件服务器</block>
  <block id="a2850c5d6d839dddb954ca10590e8763" category="paragraph">通过 SnapManager ，您可以指定发件人的电子邮件服务器主机名或 IP 地址，以及需要电子邮件通知的存储库数据库名称的电子邮件服务器端口号。您可以将邮件服务器端口号配置为 0 到 65535 之间的范围；默认值为 25 。如果您需要对电子邮件地址进行身份验证，则可以指定用户名和密码。</block>
  <block id="7578f984f58c04165b22bb25d568dfe5" category="paragraph">您必须指定处理电子邮件通知的主机服务器的名称或 IP 地址。</block>
  <block id="58af12742765f8e2e45686b2511ab56a" category="list-text">要将邮件服务器配置为发送电子邮件警报，请输入以下命令： smo notification set -sender-emailemailemailemail_address-mailhostmailhost-mailportport "-authentication-usernameusername-passwordpassword] -repositor-portrepo_port-dbnamerepo_service_name-host-login-usernamerepo_username</block>
  <block id="3e25c7552c50a6abb3a5d4512430584b" category="paragraph">【强制】</block>
  <block id="30f242b767eda772a7b44c0b00880d1d" category="cell">要执行以下操作 ...</block>
  <block id="dc9a9ec5cd47b9884a1ba9d741218b53" category="paragraph">* 指定发件人的电子邮件地址。 *</block>
  <block id="c1017215195b03a93840b1af976ead34" category="paragraph">指定 -sender-email 选项。在 SnapManager 3.2 for Oracle 中，您可以在指定电子邮件地址的域名时使用连字符（ - ）。例如，您可以将发件人电子邮件地址指定为 -sender-emailuser@org-corp.com 。</block>
  <block id="b84a1a731e304a47c671f843443999c1" category="paragraph">* 指定发件人的电子邮件服务器主机名或 IP 地址。 *</block>
  <block id="1e282e0116747e01f758517629f5bbc7" category="paragraph">指定 -mailhost 选项。</block>
  <block id="6c68afbae0cac590e9ad775d6c55a29e" category="paragraph">* 为需要电子邮件通知的存储库数据库名称指定电子邮件服务器端口号。您可以将邮件服务器端口号配置为从零到 65535 的范围；默认值为 25.*</block>
  <block id="f1e2c09b8e490f65cb2f793bc85ded71" category="paragraph">指定 -mailport 选项。</block>
  <block id="5e3e51eb2a73eb4b96967af2cc1d0cfe" category="paragraph">* 如果需要对电子邮件地址进行身份验证，请指定用户名和密码。 *</block>
  <block id="d3263c49a1c955e25d15c6bcd3e313af" category="paragraph">指定 -authentication 选项，后跟用户名和密码。</block>
  <block id="8327975fe15ea4939fa7099471aec966" category="paragraph">以下示例将配置邮件服务器。</block>
  <block id="fb54c484a48ae3c993e2933e689cded2" category="summary">管理员可以选择恢复暂停的备份计划。</block>
  <block id="078875db88b9cc48a2eb3a0f1c8c830d" category="doc">恢复备份计划</block>
  <block id="06bb526c018465aca3d2fa8a448c456e" category="paragraph">如果您尝试恢复活动计划，可能会遇到错误消息： "cannot resume ： schedule &lt;scheduleename&gt; already in resume state" 。</block>
  <block id="cf74bb90ecf1591e9cab2be878aa2d70" category="list-text">要恢复暂停的备份计划，请输入以下命令： smo schedule resume -profile profile_name-schedule-nameschedulename （ -quiet | -verbose ）</block>
  <block id="6d147ae8fe1eeb8ee12e9e17e5e7420f" category="summary">为多个配置文件启用摘要电子邮件通知后，您可以禁用这些配置文件，使其不再接收电子邮件警报。</block>
  <block id="6f0b47a032f22103fba39768561c2c9e" category="doc">为多个配置文件禁用电子邮件通知</block>
  <block id="8b283777d953121e408e765b3ae4046b" category="paragraph">通过 SnapManager ，您可以为这些配置文件执行的数据库操作禁用摘要电子邮件通知。在 SnapManager 命令行界面中，输入 notification remove-summary-notification 命令，以禁用多个配置文件的摘要电子邮件通知以及不需要电子邮件通知的存储库数据库的名称。</block>
  <block id="0ce3faec0bec1653210cd2f3c714623e" category="list-text">要为存储库数据库上的多个配置文件禁用摘要通知，请输入以下命令： smo notification remove-summary-notification -repository-portrepo_port-dbnamerepo_service_name-host-login-usernamerepo_username</block>
  <block id="69233420458e0c9a8d6c4ed219d8de39" category="paragraph">以下示例显示了对存储库数据库上的多个配置文件禁用摘要通知：</block>
  <block id="d6026e9c235391e6b07beeddadcc8def" category="summary">您可以使用 smo backup list 命令检查为配置文件创建的备份以及备份状态。对于每个配置文件，命令首先显示有关最新备份的信息，然后继续显示所有备份的信息。</block>
  <block id="c3c6642d988af97c06e51644f466c694" category="list-text">输入以下命令： smo backup list -profileprofileprofile_name -delimitcharacter] 【 data | -archivelogs] 【 -quiet | -verbose 】</block>
  <block id="92859ceaae7b7385c1ccad99fca652a2" category="paragraph"><block ref="92859ceaae7b7385c1ccad99fca652a2" category="inline-xref-macro-rx"></block></block>
  <block id="9c1e9321bb784df46f88c2d6beb32110" category="summary">SnapManager 3.2 或更高版本不支持 Oracle 数据库 9i ， SnapManager 3.3.1 或更高版本不支持 Oracle 数据库 10gR2 （ 10.2.0.4 之前的版本）。</block>
  <block id="62e1bbb1c2b92fff1241b2df7b0b3841" category="doc">已弃用的 Oracle 数据库版本</block>
  <block id="baab6177b6b63aaec9738fe9b8036607" category="paragraph">如果您使用的是 Oracle 9i 或 10gR2 （ 10.2.0.4 之前的版本）数据库，并且要升级到 SnapManager 3.2 或更高版本，则无法创建新的配置文件；此时将显示警告消息。</block>
  <block id="b24018bb556061203e3610f7aeeeeb4e" category="paragraph">如果您使用的是 Oracle 9i 或 10gR2 （ 10.2.0.4 之前的版本）数据库，并且要升级到 SnapManager 3.2 或更高版本，则必须执行以下操作之一：</block>
  <block id="5cc01ad89970775c41b77c8b41a3ff69" category="list-text">将 Oracle 9i 或 10gR2 （ 10.2.0.4 之前的版本）数据库升级到 Oracle 10gR2 （ 10.2.0.5 ）， 11gR1 或 11gR2 数据库，然后升级到 SnapManager 3.2 或 3.3 。</block>
  <block id="e0cf069d3a16e38f6b56cf1e7054f02f" category="paragraph">如果要升级到 Oracle 12_c_ ，则必须升级到 SnapManager 3.3.1 或更高版本。</block>
  <block id="f48b9096e777dd57a921a7aa405b5971" category="admonition">只有 SnapManager 3.3.1 才支持 Oracle 数据库 12_c_ 。</block>
  <block id="72f108dee34ff0eac689a087bb982d4f" category="list-text">使用修补版本的 SnapManager 3.1 管理 Oracle 9i 数据库。</block>
  <block id="fb975f42d394e048d4711dbf1001ee8e" category="paragraph">如果要管理 Oracle 10gR2 ， 11gR1 或 11gR2 数据库，可以使用 SnapManager 3.2 或 3.3 ；如果要管理 Oracle 12__c_ 数据库以及其他受支持的数据库，则可以使用 SnapManager 3.3.1 或更高版本。</block>
  <block id="d857d3ed0b5b27ca234fd1d1d8945d48" category="summary">SnapManager 以与正在执行的备份操作相关的环境变量的形式提供上下文信息。例如，您的脚本可以检索原始主机的名称，保留策略的名称以及备份的标签。</block>
  <block id="817efcad22e002fb4a96401b91ba0211" category="doc">备份操作的任务脚本中可用的变量</block>
  <block id="f9186a20eee7144b24f0fcabf682d23c" category="paragraph">sm_operation_ID</block>
  <block id="bf21ab873193f96e1573473740f9676a" category="paragraph">指定当前操作的 ID</block>
  <block id="33c5f22ae2f4fc986dd70c306f060724" category="paragraph">sm_profile_name</block>
  <block id="54838489fb928d7aeb2e5c00d567aaaa" category="paragraph">指定所用配置文件的名称</block>
  <block id="0f939090db015cb512b53199cfc5c604" category="paragraph">sm_SID</block>
  <block id="67ab1dc7ddb217dbc94babe1ea960ac6" category="paragraph">指定数据库的系统标识符</block>
  <block id="814f11798938a401588f51116e20e2b9" category="paragraph">sm_host</block>
  <block id="bb48189000ad2c948bc3ab74204bf327" category="paragraph">指定数据库的主机名</block>
  <block id="0ceca497d99fe381e9895c2595e3c16d" category="paragraph">sm_os_user</block>
  <block id="7d3eaf37876cce552ce57e9cd749c0a2" category="paragraph">指定数据库的操作系统（ OS ）所有者</block>
  <block id="eabf94aee6503a660c35986c24616646" category="paragraph">sm_os_Group</block>
  <block id="28a56d512cde3e60a40bbc55a7e8f119" category="paragraph">指定数据库的操作系统组</block>
  <block id="db8d3c8837494ffae5c8b54d2aaab02c" category="paragraph">sm_backup_type</block>
  <block id="6950eff97023162528000b24cc826390" category="paragraph">指定备份的类型（联机，脱机或自动）</block>
  <block id="edaf80f65751064d2415322b9ba4c5d6" category="paragraph">指定备份的标签</block>
  <block id="fbd201dd8d763e86fe0a34ff90958a23" category="paragraph">sm_backup_ID</block>
  <block id="c2a1a54a5d633b7168311b7f879c4ee0" category="paragraph">指定备份的 ID</block>
  <block id="e644e99fda91b3acf447cc9ad4c1aea4" category="paragraph">sm_backup_retention</block>
  <block id="2c6dd3f00c8ab50d044ab98b4a9cd269" category="paragraph">指定保留期限</block>
  <block id="807deddcfef5676dce4d17953ced212e" category="paragraph">sm_backup_profile</block>
  <block id="a9185d509d1f31c6a055e184f265f087" category="paragraph">指定用于此备份的配置文件</block>
  <block id="482d6533f17a0fddb01eccdfaf78dbaf" category="paragraph">sm_allow_database_shutdown</block>
  <block id="fa4d88582395b6e4b377c8c29150633d" category="paragraph">指定是要启动还是关闭数据库如果需要，可以从命令行界面使用 -force 选项。</block>
  <block id="84e2c64f38f78ba3ea5c905ab5a2da27" category="paragraph">boolean</block>
  <block id="58a55ef300f1fc478253bb3f10608859" category="paragraph">sm_backup_scope</block>
  <block id="00b77eeacb317d0bb9aa81c0b8a2f095" category="paragraph">指定备份范围（完整或部分）</block>
  <block id="f935640ed40955bf5aefb9925ce9fe9c" category="paragraph">sm_target_filer_name</block>
  <block id="b06878ab8c9aad9f1ce903c8b9fa0f19" category="paragraph">指定目标存储系统名称 * 注： * 如果使用多个存储系统，则存储系统名称必须用逗号分隔。</block>
  <block id="457f91218cd48f1dc263f98287e9fd8e" category="paragraph">sm_target_volume_name</block>
  <block id="49a4c3948405bfe8897fcc4a5b937e26" category="paragraph">指定目标卷名称 * 注： * 目标卷名称必须以存储设备名称作为前缀，例如 sm_target_filer_name/sm_target_volume_name 。</block>
  <block id="3754a6a49a16960d2f1fee26c8a12ff9" category="paragraph">sm_host_file_system</block>
  <block id="972569da2961771875de3795c1297b43" category="paragraph">指定主机文件系统</block>
  <block id="c39eed3a8f72103633fada8b5010272a" category="paragraph">sm_snapshot_names</block>
  <block id="3bd58f51084dff889d0ff816226bcf69" category="paragraph">指定 Snapshot 列表 * 注： * Snapshot 副本的名称必须以存储系统名称和卷名称作为前缀。Snapshot 副本的名称以逗号分隔。</block>
  <block id="40dc9d32a47b792341870cbd4383fa70" category="paragraph">string array</block>
  <block id="a9119c343a4cd2d92c4fd7224ca0743d" category="paragraph">sm_archive_logs_directory</block>
  <block id="8c8b9016c91c15530caa4105eb5af096" category="paragraph">指定归档日志目录 * 注： * 如果归档日志位于多个目录中，则这些目录的名称以逗号分隔。</block>
  <block id="e47352c19ecb8d4144d29af088c9fd37" category="paragraph">sm_redo 日志目录</block>
  <block id="cf6f086727f82ac65678a30c1c9b0f61" category="paragraph">指定重做日志目录 * 注： * 如果重做日志位于多个目录中，则这些目录的名称以逗号分隔。</block>
  <block id="3e83a8c15a2ed504f676b83e316bce81" category="paragraph">sm_control_files_directory</block>
  <block id="03e6e64f266f6ce1f014f915bcb0af1e" category="paragraph">指定控制文件目录 * 注： * 如果控制文件位于多个目录中，则这些目录的名称以逗号分隔。</block>
  <block id="ffa07d5101e7f5b614b29d396ff508d2" category="paragraph">sm_data_files_directory</block>
  <block id="c13047e13106ad72ca7a320a4ac4f4b7" category="paragraph">指定数据文件目录 * 注： * 如果数据文件位于多个目录中，则这些目录的名称以逗号分隔。</block>
  <block id="acf0d09710ee2f2dd6c1124d35d8d842" category="paragraph">用户定义的</block>
  <block id="49d9a39e5d1648e36582896fedb6a735" category="paragraph">指定用户定义的其他参数。用户定义的参数不可用于用作策略的插件。</block>
  <block id="0d578adf467399b9c67cf43ee33e9d82" category="paragraph">用户定义的</block>
  <block id="dc03661da1ee039b10aabc471383dcf8" category="summary">适用于 Oracle 的 SnapManager （ 3.2 或更高版本）整合了归档日志备份，以使归档日志文件的备份数量保持在最低水平。SnapManager for Oracle 可识别并释放包含归档日志文件的备份，这些文件是其他备份的子集。</block>
  <block id="a9df470cd05add5355cb68455f0108e6" category="doc">归档日志整合</block>
  <block id="3d4dda6fab3e4fb95ed25a6903d4fc6a" category="summary">您可以运行 password reset 命令重置配置文件的密码。</block>
  <block id="b556d45ad9aef79cc7141cff33bc56f8" category="doc">smo password reset 命令</block>
  <block id="5c12130f70bd0fd10d5f72b7fc95b551" category="paragraph">指定要重置密码的配置文件的名称。</block>
  <block id="ef11530232081c1cbb090368b47516e3" category="paragraph">指定配置文件的新密码。</block>
  <block id="8b2464c3a538c208d7ff438e23d3ebf2" category="list-text">-repository-hostadmin-password admin_password*</block>
  <block id="41eca22a8f6b20320d6caf0ec881ebb0" category="paragraph">指定具有存储库数据库本地管理员权限的授权用户凭据。</block>
  <block id="f0dc71ad0f4c34f5beaa8dd3aa6d312f" category="summary">SnapManager 支持使用后处理脚本备份本地存储资源上的数据。</block>
  <block id="0ba7491209eff42b44e5b09d3f197fba" category="doc">备份数据库</block>
  <block id="1906a5c6562804607533f1549bfc64d5" category="paragraph">SnapManager 提供了以下选项来备份，还原和恢复数据库中的数据：</block>
  <block id="f36431ee87aa0f802964836d345256ec" category="list-text">备份整个数据库或其中一部分数据库。</block>
  <block id="842214d0b8252e7e1e9f64926f7e3f69" category="paragraph">如果您备份了其中一部分，请指定一组表空间或一组数据文件。</block>
  <block id="9197e3cf54bcce673d23c427ecbdc324" category="list-text">分别备份数据文件和归档日志文件。</block>
  <block id="dfeb1cfa336556b63ee4a65dc97f95cb" category="list-text">将数据库备份到主存储（也称为本地存储），并通过使用后处理脚本将其备份到二级存储来对其进行保护。</block>
  <block id="daa3dc0cc71ded5490dcf7876c1e405a" category="list-text">计划例行备份。</block>
  <block id="bf5b91ddddee485b6efefb4ca86e286e" category="paragraph">* SnapManager （ 3.2 或更高版本）与早期 SnapManager 版本有何不同 *</block>
  <block id="dd695f975a2fb456e3f71054060f6975" category="paragraph">通过 SnapManager （ 3.1 或更早版本），您可以创建包含数据文件，控制文件和归档日志文件的完整数据库备份。</block>
  <block id="d3bb0a49c397735c38cc37f8766ffa4f" category="paragraph">SnapManager （ 3.1 或更早版本）仅管理数据文件。归档日志文件可使用 SnapManager 以外的解决方案进行维护。</block>
  <block id="cd63d54d09e894f113a45de99d9f076a" category="paragraph">SnapManager （ 3.1 或更早版本）在管理数据库备份时具有以下限制：</block>
  <block id="0b8f5f8864b35a332859fe49482100a4" category="list-text">性能影响</block>
  <block id="faf708e6fd9e3a03c19899949369dfc6" category="paragraph">在执行完整备份，联机数据库备份（当数据库处于备份模式时）时，数据库的性能会在创建备份之前的一段时间内下降。在 SnapManager （ 3.2 或更高版本）中，可以进行有限的数据库备份和频繁的归档日志备份。频繁进行归档日志备份有助于防止数据库置于备份模式。</block>
  <block id="4e8d600b4eb9049b257872be71983f87" category="list-text">手动还原和恢复</block>
  <block id="51751f1e41ba2e9ab5711ead95abe478" category="paragraph">如果所需的归档日志文件不在活动文件系统中，数据库管理员必须确定哪个备份包含归档日志文件，挂载数据库备份并恢复还原的数据库。此过程非常耗时。</block>
  <block id="c173df0e4c01df99f354cb8fd8bd224c" category="list-text">空间限制</block>
  <block id="dc00255c454cdfa443913a9036c0b12a" category="paragraph">创建数据库备份后，归档日志目标将变为已满，从而导致数据库在存储上创建足够空间之前无法响应。在 SnapManager （ 3.2 或更高版本）中，可以从活动文件系统中删减归档日志文件，以便定期释放空间。</block>
  <block id="c1ef514c92477be0f4925bea0aefbef9" category="paragraph">* 为什么归档日志备份很重要 *</block>
  <block id="1e335368eb067d1b57974f6ef5d3628a" category="paragraph">执行还原操作后，要将数据库前滚，需要使用归档日志文件。Oracle 数据库上的每个事务都会捕获到归档日志文件中（如果数据库处于归档日志模式）。数据库管理员可以使用归档日志文件还原数据库备份。</block>
  <block id="c7dd3cd6e44d790b9f3775d88c8ec8df" category="paragraph">* 仅归档日志备份的优势 *</block>
  <block id="56ce10c3b980e50ec19bc2c8c0c8f844" category="list-text">为仅归档日志备份提供单独的保留期限</block>
  <block id="833c2353cd053e3e8a137b10c2a1a47e" category="paragraph">恢复所需的仅归档日志备份的保留期限可以更短。</block>
  <block id="993668516f2b4294891fd96212c00f24" category="list-text">使用后处理脚本保护仅归档日志备份</block>
  <block id="3b50ab26b3ad4944e41ef5e6305926be" category="list-text">提高数据库的性能</block>
  <block id="a63cd97141778fba383c8aab9402c378" category="list-text">整合归档日志备份</block>
  <block id="598c42d9a75a6fd521e89aa814ce60e3" category="paragraph">SnapManager 会通过释放重复的归档日志备份来整合每次进行备份时的归档日志备份。</block>
  <block id="6fc333cae2990e7c3aad2a39a3484fef" category="summary">您可以参考示例脚本并根据环境创建自定义脚本，以执行镜像和存储。示例脚本位于 default_install_directory\plugins\backup\create\post 。</block>
  <block id="2639a89ae353e4ab44ed781151d4be84" category="doc">示例后脚本</block>
  <block id="40fb65fabc3c054f83d63dddf1f1f951" category="paragraph">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则可以使用此示例脚本镜像备份。它包括三个操作（检查，描述和执行），并在脚本末尾执行这些操作。该脚本还包括错误消息处理，代码为 0 到 4 和 &gt; 4 ：</block>
  <block id="e55a14ef5f068060722629e229d5dd2c" category="paragraph">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则可以使用此示例脚本来存储备份。它包括三个操作（检查，描述和执行），并在脚本末尾执行这些操作。该脚本还包括错误消息处理，代码为 0 到 4 和 &gt; 4 ：</block>
  <block id="4b41aeeb92e42890a4e62ef896b28d79" category="paragraph">如果您使用的是集群模式 Data ONTAP ，则可以使用此示例脚本镜像备份。它包括三个操作（检查，描述和执行），并在脚本末尾执行这些操作。该脚本还包括错误消息处理，代码为 0 到 4 和 &gt; 4 ：</block>
  <block id="2f18d2aa480a824aec0a158977d11979" category="paragraph">如果您使用的是集群模式 Data ONTAP ，则可以使用此示例脚本来存储备份。它包括三个操作（检查，描述和执行），并在脚本末尾执行这些操作。该脚本还包括错误消息处理，代码为 0 到 4 和 &gt; 4 ：</block>
  <block id="8f02ba9737e5c932e54fa4240f569edc" category="summary">您可以为备份，还原和克隆操作创建任务前，任务后和策略任务脚本，编写脚本并在参数中包含预定义的环境变量。您可以创建一个新脚本，也可以修改其中一个 SnapManager 示例脚本。</block>
  <block id="2a0aaf72d8a447e8c4a4b854f33f5226" category="doc">正在创建任务脚本</block>
  <block id="dfe61ae8926dec51ad762c9a677fb7a2" category="paragraph">开始创建脚本之前，请确保：</block>
  <block id="3829064d914812fe3d6f8622efc44849" category="list-text">您必须以特定方式对脚本进行结构调整，才能在 SnapManager 操作环境中运行该脚本。</block>
  <block id="a27fe81ae00118156c1596ba3c70e5d2" category="list-text">您必须根据预期操作，可用输入参数和返回代码约定创建脚本。</block>
  <block id="6cb0a9ec45514d04a2655283aa0d4d3a" category="list-text">您必须包含日志消息并将这些消息重定向到用户定义的日志文件。</block>
  <block id="50815df96f376b24ca5e48204d6e3227" category="list-text">通过自定义示例脚本创建任务脚本。</block>
  <block id="ed7dc5789cb36687315d95140bf88b49" category="paragraph">执行以下操作：</block>
  <block id="e20bb4c4e27f8bdd21d826292ae37caa" category="list-text">在以下安装目录中找到一个示例脚本：</block>
  <block id="3aeebf6de21bced6450004145df32d54" category="list-text">在脚本编辑器中打开脚本。</block>
  <block id="5e8d622fac6c9d6f22d07a44f652705b" category="list-text">使用其他名称保存此脚本。</block>
  <block id="9e46dc44edbfbef532cad1ea0f694b91" category="list-text">根据需要修改函数，变量和参数。</block>
  <block id="a2f1a27d37fdafe50e02ed6bcf8b6997" category="list-text">将此脚本保存在以下目录之一：</block>
  <block id="c9a748944cd2cd57642c40ac88b4e88d" category="paragraph">* 备份操作脚本 *</block>
  <block id="963ff29e2b0ba9c3d14eca4c6c8587da" category="list-text">&lt;default_install_directory&gt;\plugins\backup\create\pre ：在执行备份操作之前执行此脚本。指定备份创建时也可以选择使用它。</block>
  <block id="d5a5bacb09ce4e851e3884acdf2978e6" category="list-text">&lt;default_install_directory&gt;\plugins\backup\create\post ：在执行备份操作后执行此脚本。指定备份创建时也可以选择使用它。</block>
  <block id="967d95a5abe7d58e16868b7d3e94fe9f" category="list-text">&lt;default_install_directory&gt;\plugins\backup\create\policy ：始终在执行备份操作之前执行脚本。SnapManager 始终对存储库中的所有备份使用此脚本。* 还原操作脚本 *</block>
  <block id="6f5129be088f3c57aa07d32efe5e82ee" category="list-text">&lt;default_install_directory&gt;\plugins\restore\create\pre ：在执行备份操作之前执行此脚本。指定备份创建时也可以选择使用它。</block>
  <block id="673a82fffee81b67bcbe0534ca33294a" category="list-text">&lt;default_install_directory&gt;\plugins\restore\create\post ：在执行备份操作后执行此脚本。指定备份创建时也可以选择使用它。</block>
  <block id="af7357bfd46903f82ad57d802dd8cd49" category="list-text">&lt;default_install_directory&gt;\plugins\restore\create\policy ：始终在执行备份操作之前执行脚本。SnapManager 始终对存储库中的所有备份使用此脚本。* 克隆操作脚本 *</block>
  <block id="936da56fe497f1b8cb621964199ac98c" category="list-text">&lt;default_install_directory&gt;\plugins\clone\create\pre ：在执行备份操作之前执行此脚本。指定备份创建时也可以选择使用它。</block>
  <block id="6059bab21dcd033a7e939cc6bd844aa9" category="list-text">&lt;default_install_directory&gt;\plugins\clone\create\post ：在执行备份操作后执行此脚本。指定备份创建时也可以选择使用它。</block>
  <block id="b3a6c708b552b90b85d9b2ae266938ed" category="list-text">&lt;default_install_directory&gt;\plugins\clone\create\policy ：始终在执行备份操作之前执行脚本。SnapManager 始终对存储库中的所有备份使用此脚本。</block>
  <block id="7c82281514a0cd4bf44f5f8332e6ff55" category="summary">通过 SnapManager ，您可以使用后处理脚本在主（本地）存储以及二级（远程）存储上创建备份。</block>
  <block id="8f5dec3e1dcec6043cbcdc322088969c" category="doc">使用 Snapshot 副本创建备份</block>
  <block id="92511cc2c9293ac05ea5e09e18820489" category="paragraph">作为 Snapshot 副本创建的备份是数据库的虚拟副本，与数据库存储在同一物理介质中。因此，备份操作所需时间更短，所需空间也明显少于完整的磁盘到磁盘备份。使用 SnapManager 可以备份以下内容：</block>
  <block id="08ce175391ac54154ddaaa6debbc2e1c" category="list-text">所有数据文件，归档日志文件和控制文件</block>
  <block id="00979d8067afebdf83f024ac2c3a122a" category="list-text">选定数据文件或表空间，所有归档日志文件和控制文件</block>
  <block id="d75e921b266af6853f760d0d161d49af" category="paragraph">通过 SnapManager 3.2 或更高版本，您可以选择备份以下内容：</block>
  <block id="0c43f1be68392f7ff42ad72233583305" category="list-text">所有数据文件和控制文件</block>
  <block id="0367b252132c1242dda11ceff56e2791" category="list-text">选定数据文件或表空间以及控制文件</block>
  <block id="45c894488140417feb3e390d1a1100fa" category="admonition">数据文件，归档日志文件和控制文件可以位于不同的存储系统，存储系统卷或逻辑单元号（ LUN ）上。如果同一个卷或 LUN 上有多个数据库，您也可以使用 SnapManager 备份数据库。</block>
  <block id="1943075668373b5ff25e22ae218ef3c3" category="summary">此命令可显示有关存储库的信息。</block>
  <block id="fca0e76b063487d8e26a588a797c930b" category="doc">smo repository show 命令</block>
  <block id="892f3ba746a53e0afbb7e8662af58245" category="paragraph">以下示例显示了有关 SALESDB 数据库中存储库的详细信息。</block>
  <block id="af6bd0927b66f5fe5dbcebce6eb02c4b" category="summary">SnapManager 可以灵活地还原完整数据库，特定表空间，文件，控制文件或这些实体的组合。使用 SnapManager ，您可以使用基于文件的还原过程还原数据。</block>
  <block id="7299bfea35cd79c786a3ef91e8df60ae" category="doc">完全或部分还原数据库</block>
  <block id="50c0d1f1faaeba6bd00b4776ea95d966" category="paragraph">通过 SnapManager ，数据库管理员（ DBA ）可以预览还原操作。通过预览功能， DBA 可以逐个文件查看每个还原操作。</block>
  <block id="5d53a961017dc16fec18542023ce4a29" category="paragraph">DBA 可以指定 SnapManager 在执行还原操作时将信息还原和恢复到的级别。例如， DBA 可以将数据还原和恢复到特定时间点。还原点可以是日期和时间，也可以是 Oracle 系统更改编号（ SCN ）。</block>
  <block id="1505f1f6e0fcbfdc45976b9059ecf015" category="paragraph">DBA 可以使用 SnapManager 还原数据库，并使用其他工具恢复信息。在这两个操作中，不需要使用 SnapManager 即可。</block>
  <block id="56eafdd0f1b9542a54e02f16da58dafa" category="paragraph">通过 SnapManager （ 3.2 或更高版本），您可以自动还原和恢复数据库备份，而无需 DBA 干预。您可以使用 SnapManager 创建归档日志备份，然后使用这些归档日志备份还原和恢复数据库备份。即使备份的归档日志文件在外部归档日志位置进行管理，您也可以指定该外部位置，以便这些归档日志有助于恢复已还原的数据库。</block>
  <block id="8c22652d8d5ab4e562ec380d6cbe03a2" category="summary">在克隆到数据库所在主机以外的主机之前，必须满足某些要求。</block>
  <block id="bc38211cec54a5665e45bcbeb5e150e0" category="paragraph">下表显示了源和目标主机设置要求：</block>
  <block id="9a105b0f2f8fbba94a533e26794065d4" category="cell">前提条件设置</block>
  <block id="9b97b7bd5e0a87be7bf218224ada83cf" category="cell">要求</block>
  <block id="2d242bb36ec91b32005f9296ff03a912" category="paragraph">架构</block>
  <block id="f031da5a8e366e61174065bb2c312682" category="paragraph">源主机和目标主机上的必须相同</block>
  <block id="60144c3ebab3a171f2fa61aaee53b284" category="paragraph">操作系统和版本</block>
  <block id="dcbe39b1090cfff6e715b6ae7649725c" category="paragraph">必须在源主机和目标主机上安装并运行</block>
  <block id="2daf1cb573c2c61422faf64610cf9402" category="paragraph">凭据</block>
  <block id="b4148d245c6f71d2d2f61aedc77369a1" category="paragraph">必须为用户设置以访问目标主机</block>
  <block id="30162ed78b6c10f731411f2fc440c24f" category="paragraph">Oracle</block>
  <block id="1e20ffa2ca0b112d70c6aa76ae197aa6" category="paragraph">源主机和目标主机上都必须安装相同的软件版本。</block>
  <block id="68660fc786897c2fa3f8c53cc40adfcf" category="paragraph">目标主机上必须运行 Oracle 侦听器。</block>
  <block id="f076e0c22bfaf5169ebe3968dfbf6b67" category="paragraph">兼容存储堆栈</block>
  <block id="3971ff04e492ea201361a5a378c02fac" category="paragraph">用于访问数据文件的协议</block>
  <block id="eae639a70006feff484a39363c977e24" category="paragraph">domain</block>
  <block id="8e3e27f5df2492b516d449c35fd6e12b" category="paragraph">远程主机和数据库所在的主机都必须位于域中，而不是工作组中</block>
  <block id="4f9c3d03c82ae1a8860c1db668248551" category="summary">在环境中部署 SnapManager 之前，您应了解不同的要求。</block>
  <block id="1589a52b0d63f6c32a63851f8a5fe526" category="doc">运行 SnapManager 的要求</block>
  <block id="6950c002a7f7ac497fbe14a515b8308a" category="paragraph">在使用 SnapManager 之前，您必须查看所有所需产品的兼容性列表。您还必须查看以下内容：</block>
  <block id="fb329af1d7938ffdd045bfe563eb5108" category="list-text">互操作性一节中的 SnapManager 和 SnapDrive 兼容性列表，用于了解本节列出的所有主机，存储系统和其他组件的最新版本和修补程序信息。</block>
  <block id="774e6bddd6ac46fa80f205f3b967100b" category="list-text">NetApp FCP 和 iSCSI 产品配置指南。</block>
  <block id="67c771186d5f797a4f104a09c266f07b" category="admonition">在某些平台上， SnapManager 需要特定的 Oracle 版本。</block>
  <block id="b90e56f0f4c7d8be6d5ccfb08d9bcafa" category="paragraph">有关主机和存储系统的建议配置的详细信息，请参见文档套件。</block>
  <block id="427460ea6929ed4cdcf34ec0d1605e14" category="admonition">如果您需要文档套件中未提及的 SnapManager 配置，请联系您的销售代表。</block>
  <block id="147a92ccd75067b0fedcc675a85753c6" category="summary">通过 SnapManager ，您可以执行灵活的克隆，以便可以手动将克隆的数据库恢复到所需的时间点，而无需使用重置日志打开数据库。您也可以手动将克隆的数据库配置为 Data Guard 备用数据库。</block>
  <block id="3d0aa456d1201446867141685e7a5025" category="doc">克隆数据库备份而不重置日志</block>
  <block id="8fdcb530c455d6256202883e2a879090" category="paragraph">如果您可以在创建克隆时选择 -no-resetlogs 选项，则 SnapManager 将执行以下活动来创建克隆的数据库：</block>
  <block id="c63a89927867a9e09d4686a829499a79" category="list-text">在启动克隆操作之前，执行预处理任务活动（如果指定）</block>
  <block id="7cd21d88257b5573a2cd105286738e46" category="list-text">使用用户指定的 SID 创建克隆的数据库</block>
  <block id="b350e36283543811845c5aeb640fbc7d" category="list-text">执行对克隆的数据库发出的 SQL 语句。</block>
  <block id="9870fb820f4707883dee0c68ad55a25c" category="paragraph">仅会成功执行可在挂载状态下执行的 SQL 语句。</block>
  <block id="215654f82f314afb6ecde83a8327452f" category="list-text">执行后处理任务活动（如果指定）。</block>
  <block id="15e3ad955025e2b70ef383ce3029f386" category="paragraph">* 要手动恢复克隆的数据库，需要执行哪些任务 *</block>
  <block id="086adbf75b47c15a1316f2fba84a55f4" category="list-text">使用挂载路径中的归档日志文件手动挂载归档日志备份并恢复克隆的数据库。</block>
  <block id="9d2dd76d6d1a302664c96ad61d034bcd" category="list-text">执行手动恢复后，使用 -resetlogs 选项打开已恢复的克隆数据库。</block>
  <block id="13e55b5ba29782b9f3d18305065443e9" category="list-text">根据需要创建临时表空间。</block>
  <block id="06e9237f366b6259d5b358add07f4b22" category="list-text">运行 DBNEWID 实用程序。</block>
  <block id="9e4e84c82ca7b2d6e5939c3fb0162490" category="list-text">为克隆的数据库的凭据授予 sysdba 权限。</block>
  <block id="cc778ad9ae0f6074df121c056148f7ba" category="paragraph">在使用 -no-resetlogs 选项克隆数据库备份时， SnapManager 会使克隆的数据库保持挂载状态，以便手动恢复。</block>
  <block id="25159a2a67b14a70dcd14dc9f4fe365e" category="admonition">使用 -no-resetlogs 选项创建的克隆数据库不是完整的数据库。因此，您不能对此数据库执行任何 SnapManager 操作，但 SnapManager 不会限制您执行任何操作。</block>
  <block id="b8a60b736e604ad0587d0121202d7fe6" category="paragraph">如果未指定 -no-resetlogs 选项，则 SnapManager 将应用归档日志文件，并使用 resetlogs 打开数据库。</block>
  <block id="3e06b084f0c5f83fa051fda86ce05d7e" category="list-text">输入以下命令： smo clone create -profileprofileprofile_name "-backup-labelbackup_name _ -backup-idbackup_id _ current] -newsidnew_sid-clonesefull_path_to_clonesorfile-no-resetlogs</block>
  <block id="7099d18f2e483ec33ba4f502dae3194e" category="paragraph">如果您尝试同时指定 -no-resetlogs 和 recovery-from-location 选项，则 SnapManager 不允许同时指定这两个选项，并显示错误消息： SMO-04084 ： You must specify one of the options ： -no-resetlogs or -recovery-from-location 。</block>
  <block id="db52668147d15e3eaa33878b65bed889" category="summary">创建备份时，您可以计划在指定时间对归档日志文件进行删减。</block>
  <block id="f18db052dbc42bcc3d714eb2d07269bc" category="doc">计划归档日志文件删减</block>
  <block id="6eb455df3da87e6cdb4180159ab2fbd6" category="paragraph">通过 SnapManager ，您可以定期从活动文件系统对归档日志文件进行修剪。</block>
  <block id="851116a065c2fd128e1c045fd490bc40" category="list-text">输入以下命令： SMO schedule create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain （ -hourly ； -daily ）； -weekly ； -monthly ； -unlimited] （ -data ）（ -filesfiles 文件文件文件）））；（ -tablesogs-tablespaces （ -tablespaces ）））） ｛ -online ； -unlimited ； -unlimited ； -unifirestingsaces （ -unlimited ） "-prunelog ｛ -all | -untirescunntisnscn _ -before ｛ -dateyyy-mm-dd HH ： mm ： ss _ -monthsmonths _ -weeksweeks _ -daysdays _ -hourshours ｝ -prune-destprune_string1 ，， prune_dest2 ） -schedule-namesyyymsdays _ 时间间隔 _ 用户 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _ 时间 _</block>
  <block id="6daf010b71f6758139994f062d7f25d0" category="list-text">-prunelog 用于计划对归档日志文件进行删减</block>
  <block id="f3042d78510531afc65fd8a7e7c0de66" category="list-text">-prune-dest 以从归档日志目标位置对归档日志文件进行 prune</block>
  <block id="d2a04b968c1f5216e395f7f43d3488d7" category="paragraph">指定 -schedule-name 选项。</block>
  <block id="ed439ea18d8a1bee4db7a315140abbf9" category="paragraph">* 按特定时间间隔计划对归档日志文件进行删减 *</block>
  <block id="e4bf185cfde44abaf2ae6caeff565385" category="paragraph">指定间隔选项，并指示是否应根据以下间隔类对归档日志文件进行修剪：</block>
  <block id="b9f6133db252c3a8a0fca5dd7ab02fd2" category="paragraph">* 添加有关计划操作的注释 *</block>
  <block id="9115f8d0b0c349b9e06006a401c034be" category="paragraph">指定 -schedule-comment 选项，后跟问题描述字符串。</block>
  <block id="2bf211a234126579c669e92ff4e648c5" category="paragraph">以 yyyy-mm-dd hh ： mm 格式指定 -start-time 选项。</block>
  <block id="7749d400f443ccff48585578be38ec3e" category="summary">如果您需要其他日志来调试失败的 SnapManager 操作，则必须设置外部环境变量 server.log.level 。此变量将覆盖默认日志级别并转储日志文件中的所有日志消息。例如，您可以将日志级别更改为 DEBUG ，这样可以记录其他消息，并有助于调试问题。</block>
  <block id="b1c8c519817cfc4e43ac0f2c24d0082a" category="doc">收集其他日志信息以简化调试</block>
  <block id="5c844b26d06c2f0f1fc3123ced7fec6e" category="paragraph">SnapManager 日志位于以下位置：</block>
  <block id="a6256855ee67be3a23c3ad29c71d30cb" category="list-text">SnapManager_install_directory\log</block>
  <block id="9da6835b4c2ef85aa38ec09117d1e1de" category="paragraph">要覆盖默认日志级别，必须执行以下步骤：</block>
  <block id="1c97a08bc2532d9f0b4ebf8e23672f3c" category="list-text">在 SnapManager 安装目录中创建 platform.override 文本文件。</block>
  <block id="2bbebd1eb0d1b24ec177b090ae491f9d" category="list-text">在 platform.override 文本文件中添加 server.log.level 参数。</block>
  <block id="17bf21fddf50c776ea374e3c5ebd5ad6" category="list-text">分配一个值（跟踪，调试，信息，警告，错误， fatal ， or progress ）。</block>
  <block id="e0d8d8ea9d8d5cd45f556ba06ade7369" category="paragraph">例如，要将日志级别更改为 error ，请将 server.log.level 的值设置为 error 。</block>
  <block id="5bf45f5b65eeb4492c8de781d9a6552b" category="paragraph">SERVER.log.level= 错误</block>
  <block id="aecd7299889caacff72f249f92de85d9" category="admonition">如果不需要其他日志信息，您可以从 platform.override 文本文件中删除 server.log.level 参数。</block>
  <block id="2dddc6c0dfe863de6b4ad890a1b6d730" category="paragraph">SnapManager 根据用户在 SMO.config 文件中定义的以下参数值管理服务器日志文件的卷：</block>
  <block id="7fe1487e8b078e9ea707bb06a73708b2" category="list-text">log.max_log_files</block>
  <block id="2c039937760e0be65be3b3b5c42c28e4" category="list-text">log.max_log_file_size</block>
  <block id="3a31c11c9ebf598079745673f92887df" category="list-text">log.max_rolling_operation_factory_logs</block>
  <block id="a46606d742f03a150e3834b43657ef6f" category="summary">为存储库数据库配置摘要电子邮件通知后，您可以使用 summary notification 命令将新配置文件添加到摘要通知中。</block>
  <block id="aca5e96cafee2b6e07eb46e7a22aa4dd" category="doc">将新配置文件添加到摘要电子邮件通知中</block>
  <block id="b282d6f3f5b2b3851184878a5db65569" category="list-text">输入以下命令： smo profile create -profileprofileprofileprofile_name "-profile-passwordprofile_password] -repositor-dbnamerepo_service_name-host-host-portrepo_port-login-usernamerepo_username-database-patternedb_dbname-hostdb_host [-siderman_password]</block>
  <block id="baef0f35a75d8a155df8732b64818dde" category="summary">如果您不希望存储系统在每次成功执行备份操作时都从 SnapManager 服务器接收消息，则必须禁用 AutoSupport 。</block>
  <block id="396ec0f6c772a1beebd69c0a24ad7655" category="doc">在 SnapManager 中禁用 AutoSupport</block>
  <block id="74f6d60aefe5a20cde84d763e5880b27" category="paragraph">默认情况下，如果配置文件不包含 auto_support.on 参数，则会启用 AutoSupport 。在这种情况下，您必须在配置文件中添加 auto_support.on 参数并将值设置为 false 。</block>
  <block id="80ba66b87bfe3cd43eac82e9758ca014" category="list-text">在 SMO.config 配置文件中，将 auto_support.on 参数的值设置为 false 。</block>
  <block id="7f06cc101e8fe9c171a08f66e002b480" category="paragraph">auto_support.on=false</block>
  <block id="50cbb4dfb6de79059c1f7db475c4cc3d" category="summary">安装 SnapManager 后，您必须根据所使用的环境执行一些其他配置任务。</block>
  <block id="9c825690e3c0bdfd012a569920f8895e" category="doc">正在配置 SnapManager</block>
  <block id="ff258d15362938515de1f394685880c1" category="summary">您可以运行 profile dump 命令来创建包含有关配置文件的诊断信息的 .jar 文件。</block>
  <block id="71c4c85f2a09de2386a9d6bdc16677cd" category="doc">smo profile dump 命令</block>
  <block id="1bdae119ca87902c6867465321e3380d" category="paragraph">以下示例将为配置文件 SALES1 创建转储：</block>
  <block id="04af5b17abf0ceb2574fede0df45cbe3" category="summary">《 SnapManager for Oracle 3.4.2 安装和管理指南》</block>
  <block id="091af7b23f310c94c6c082a427b321c4" category="doc">《安装和管理指南》</block>
  <block id="9c47ad167c93c0f0a387aac0759de50b" category="paragraph">本指南介绍如何在 Windows 环境中安装和管理适用于 Oracle 的 SnapManager 3.4.2 ，包括如何安装，升级，卸载和配置产品，如何备份，还原和克隆数据库。</block>
  <block id="f8e40e482dab766e28ad5fc29c66e95a" category="summary">您可以删除主机的凭据，使用户无法再访问它。使用此命令可以仅删除一个资源的凭据，而不是清除所有资源的所有用户凭据。</block>
  <block id="94be6253242dbea7759c737e2e19840a" category="doc">删除主机的用户凭据</block>
  <block id="4b8e2117404c2afb17cde2aaf67b9749" category="paragraph">您可以删除主机的凭据，使用户无法再访问它。使用此命令，您可以仅删除一个资源的凭据，而不是清除所有资源的所有用户凭据。</block>
  <block id="74391d39be31cb1c3c6736a92f81ed69" category="list-text">要删除用户的主机凭据，请输入以下命令： smo credential delete -host-namehost_name-username-username</block>
  <block id="aac34b8275deb27d6334fdbc94da8c8e" category="summary">在您的环境中部署 SnapManager 之前，您应了解不同操作所需的其他应用程序和技术。</block>
  <block id="2e41017f3da5069bc38153329e7b1d29" category="doc">SnapManager for Oracle 部署注意事项</block>
  <block id="72966e6dc1ce2f2d08a394acdcea361d" category="paragraph">下表列出了不同的应用程序和技术：</block>
  <block id="13816363e2eaa66d7be294be0dbaef8c" category="paragraph">数据 ONTAP</block>
  <block id="5f2bb47623579acbb15e22423e7f39a5" category="paragraph">SnapManager 利用 NetApp 工具和技术，包括 Snapshot 副本。</block>
  <block id="dbd7ea359010c0a71928473dc19865ae" category="paragraph">适用于 Windows 的 SnapDrive</block>
  <block id="34ddc07a0ae29415942bdaa02050c3dc" category="paragraph">SnapManager 使用 SnapDrive 功能。您必须先安装 SnapDrive ，然后再运行 SnapManager 服务。SnapManager 负责处理与 SnapDrive 的所有交互。必须为您的存储系统和协议选项正确配置 SnapDrive for Windows 。</block>
  <block id="144923124b4f0aad59c3519a201cf71c" category="paragraph">SnapManager 可使用 SnapRestore 缩短恢复数据库的平均时间。每个存储系统都应具有一个 SnapRestore 许可证。</block>
  <block id="b9d879901c0778e13dab9ec4ac4e5249" category="paragraph">FlexClone 是 Data ONTAP 中的一项许可功能。</block>
  <block id="07bc6187c8492f06c97fb2121cffe4c7" category="paragraph">FC 和 iSCSI 协议</block>
  <block id="37c17b43f40c387d529e26a899329eea" category="paragraph">您需要拥有相应协议的许可版本。</block>
  <block id="db6d3cc327b689d1703e67a416506ad9" category="summary">通过 SnapManager ，您可以创建符合保留策略的备份，这些策略指定应在本地存储上保留多少成功的备份。您可以指定在配置文件中为给定数据库保留的成功备份数。</block>
  <block id="62bd36d19e8e4dd72a571ec4c5aeb260" category="paragraph">您可以为以下项创建备份：</block>
  <block id="62dc35e836aa42cc15167389c9a83431" category="list-text">主存储上每天备份 10 天</block>
  <block id="f2a650a561ccdaad66fe70e084d46334" category="list-text">主存储上每月备份 2 个月</block>
  <block id="578aa2b22a99b582fda8c2101456ea5b" category="list-text">在二级存储上进行 7 天的每日备份</block>
  <block id="c426d2610befdbb2d75ba11803aa27cf" category="list-text">在二级存储上每周备份 4 周</block>
  <block id="ef8d1a60bb5a595a1d00a6c7c6606552" category="list-text">在二级存储上每月备份 6 个月</block>
  <block id="1fbb72dec1d3b872a78c0c8528ce15bd" category="paragraph">对于 SnapManager 中的每个配置文件，您可以更改以下非受限保留类的值：</block>
  <block id="769cb50c95fd3a43c659aa73aba99e5b" category="list-text">每小时</block>
  <block id="c512b685438f41daa7386329a3b8f8d3" category="list-text">每天</block>
  <block id="6c25e6a6da95b3d583c6ec4c3f82ed4d" category="list-text">每周</block>
  <block id="9030e39f00132d583da4122532e509e9" category="list-text">每月</block>
  <block id="d79b4fd27e664221c9929318748ef6e5" category="paragraph">SnapManager 会通过考虑保留计数（例如 15 个备份）和保留期限（例如 10 天的每日备份）来确定是否应保留备份。如果备份的期限超过为其保留类设置的保留期限，或者备份数量超过保留数量，则备份将过期。例如，如果备份计数为 15 （ SnapManager 已成功创建备份 15 ），并且为 10 天的每日备份设置了持续时间要求，则五个最旧的成功备份将过期。</block>
  <block id="48fef6c54964a0d336e04d838bffde07" category="paragraph">备份过期后， SnapManager 会释放或删除已过期的备份。SnapManager 始终会保留上次创建备份。</block>
  <block id="2921428eeb6dbf9ae4605fa3ee2d9cd7" category="paragraph">SnapManager 仅会计入保留计数中成功备份的数量，不会考虑以下因素：</block>
  <block id="c9e3a5b2deb1b1d3ac277edc41b921a5" category="cell">备份不包含在保留计数中</block>
  <block id="a6f019b2d34dc9e72957f5a606a4bca6" category="cell">其他详细信息</block>
  <block id="00dcc3d1df42f4ccc60386376bc13b2b" category="paragraph">备份失败</block>
  <block id="1991096450192a8be575e15302c79ecd" category="paragraph">SnapManager 会保留有关备份成功和失败的信息。虽然备份失败只需要极少的存储库空间，但您可能希望将其删除。失败的备份会保留在存储库中，直到您删除它们为止。</block>
  <block id="573983b95f2efe758bbc9f8649d5bffd" category="paragraph">指定为无限制保留的备份或其他保留类的备份</block>
  <block id="fc03d7d4731c9e847b87cc8c857c0898" category="paragraph">SnapManager 不会删除指定无限制保留的备份。此外， SnapManager 仅考虑同一保留类中的备份（例如， SnapManager 仅考虑每小时保留计数的每小时备份）。</block>
  <block id="3f8283a394dcb860ef703a46b59abb8d" category="paragraph">从本地存储挂载的备份</block>
  <block id="ccb79dfa45c5c2e2181e661c05bd3709" category="paragraph">挂载 Snapshot 副本后，这些副本也会进行克隆，因此不符合保留条件。如果 Snapshot 副本已克隆，则 SnapManager 无法删除这些副本。</block>
  <block id="492c4f46949496cbfe60caa05a62f083" category="paragraph">用于在本地存储上创建克隆的备份</block>
  <block id="8ee5718edfe6c79907e1a306d6251892" category="paragraph">SnapManager 会保留用于创建克隆的所有备份，但不会将其视为备份保留计数。</block>
  <block id="0739e14295dacadca98cc3b91b58db16" category="paragraph">SnapManager 为每个保留类提供默认保留计数和持续时间。例如，对于每小时保留类计数，默认情况下， SnapManager 会保留四个每小时备份。您可以在创建或更新配置文件时覆盖这些默认值并设置这些值，也可以更改 SMO.config 文件中保留计数和持续时间的默认值。</block>
  <block id="bf0cf7045ecde89a0cf82f4f78ad4bbf" category="paragraph">如果本地备份根据其保留策略过期，则会删除这些备份。</block>
  <block id="86b93c46fff09509b1d2d06a282cee4f" category="paragraph">与联机数据库备份过程不同，在仅归档日志备份操作中， SnapManager 不会归档重做日志文件。在执行仅归档日志备份操作之前，您必须添加任务前脚本以归档重做日志文件。任务前脚本必须运行 alter system switch logfile 命令。</block>
  <block id="b94571cfc73d87abf77642a82f892580" category="paragraph">以下示例显示了 SnapManager 根据三个每日备份保留策略（将计数设置为保留 3 ）对各种类型的备份执行的操作：</block>
  <block id="18b40254b80a105267fecd2be9600ccc" category="cell">备份日期</block>
  <block id="ec53a8c4f07baed5d8825072c89799be" category="cell">Status</block>
  <block id="a96efa3b52e2e5d8d1e4ffffbfe79c11" category="cell">已执行保留策略操作</block>
  <block id="0097010c0da9f8bcad918d781a74dc63" category="paragraph">5/10</block>
  <block id="30ae8fff8898dc197acd49d9c0797d20" category="paragraph">成功</block>
  <block id="02bce93bff905887ad2233110bf9c49e" category="paragraph">保留</block>
  <block id="98e1d2d96454cfee53bc07a0fd27dda3" category="paragraph">这是最新成功的备份，因此会保留该备份。</block>
  <block id="0dc5d704487a2d5743a6386dd973b19b" category="paragraph">5/9</block>
  <block id="4003fb3e1c530604e8e18ef0cd5fa12c" category="paragraph">成功，已克隆</block>
  <block id="72ef2b9b6965d078e3c7f95487a82d1c" category="paragraph">跳过</block>
  <block id="77d1e436f8b3c2dea3b7f08dfd5a04b3" category="paragraph">SnapManager 不会在保留策略计数中考虑用于克隆的备份。成功备份的计数会省略此备份。</block>
  <block id="55e13911b029af22125d9eb6e811b87c" category="paragraph">5/8.</block>
  <block id="9292924fb1e123b18875f4a76a5b0287" category="paragraph">成功，已挂载</block>
  <block id="1020a516aee4b0a26cd62e5c8fa16ca8" category="paragraph">SnapManager 不会在保留策略计数中考虑挂载的备份。成功备份的计数会省略此备份。</block>
  <block id="d7fec4ed8ff04c693a48c17bd1b18431" category="paragraph">5/7.</block>
  <block id="f3be7e97ca4c7f58bccc95c16dca80dc" category="paragraph">失败的备份不会计入在内。</block>
  <block id="cc0310ef83f235d514749627bfad3ae5" category="paragraph">5/5.</block>
  <block id="f43d2071532d55c8254287346a526924" category="paragraph">SnapManager 可确保这第二次成功的每日备份。</block>
  <block id="282378af16d40c95feb08c098af613a5" category="paragraph">5/3.</block>
  <block id="13d8c4e63bc3e1cd4928691c2e949b63" category="paragraph">SnapManager 可确保这是第三次成功的每日备份。</block>
  <block id="99b01551c53dc043e875560ea220ab25" category="paragraph">5/2</block>
  <block id="f2a6c498fb90ee345d997f888fce3b18" category="paragraph">删除</block>
  <block id="3ef0e3df7f66870a33fa710719560349" category="paragraph">SnapManager 会计算此成功备份的数量，但在 SnapManager 每天成功完成三次备份后，此备份将被删除。</block>
  <block id="816ca665e2a71d71e5ce0d10245e6fcb" category="summary">此命令用于更新备份计划。</block>
  <block id="18af32c1c35277c0ad9fa47653f0771a" category="doc">smo schedule update 命令</block>
  <block id="b4542439a79fef1ca02b3607a7df80f3" category="paragraph">指定与要计划备份的数据库相关的配置文件的名称。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="88499e7f3e8ced62f3437ff5f3ccbffe" category="paragraph">指定为计划提供的名称。</block>
  <block id="46f0fb11313e252e63484815b07f07fe" category="list-text">-schedule-comment schedule_comtion*</block>
  <block id="34e08edb7b804eac152efe83327d4277" category="paragraph">指定用于描述备份计划的可选注释。</block>
  <block id="48da46ef49fed2fc0edcbbdfbd7ef27f" category="list-text">-interval ｛ -hourly | -daily | -weekly | -monthly | -onetimeonly ｝ *</block>
  <block id="6d62663c2084443e2c3d25048fc6e1e7" category="paragraph">指示创建备份的时间间隔。您可以将备份计划为每小时，每天，每周，每月或仅一次。</block>
  <block id="5a1c59190229a613f0a0a878956a82b7" category="list-text">* — cronstring cron_string*</block>
  <block id="9fa09ca99f4102f04753af11a70db06c" category="paragraph">指定使用 cronstring 计划备份。cron 表达式用于配置 CronTrigger 实例。cron 表达式是由七个子表达式实际构成的字符串：</block>
  <block id="b136f3b0dcd9bbb1d3a43e0d69b4d36d" category="list-text">1 表示秒</block>
  <block id="9ada545e3e1eec81bf3a1f7de9a8c4bd" category="list-text">2 表示分钟</block>
  <block id="d6fa53d564a8f93de6ab033157863658" category="list-text">3 表示小时</block>
  <block id="6787e28c41c0598aae0f97bda57de8fd" category="list-text">4 表示一个月中的一天</block>
  <block id="fa5f539f1a09d55cf7bd4fc27d794023" category="list-text">5 表示月份</block>
  <block id="ba2557e80a455ea59172aebca939407f" category="list-text">6 表示一周中的一天</block>
  <block id="a5be489a335747027a761ead94ec1122" category="list-text">7 表示年份（可选）</block>
  <block id="3edba1a6c38319e931b6d6872ffdc987" category="list-text">-start-time yyyy-mm-dd HH ： MM*</block>
  <block id="93773542b436e0f831861f70f22971a6" category="paragraph">指定计划操作的开始时间。计划开始时间应采用 yyyy-mm-dd HH ： mm 格式。</block>
  <block id="93755dd70295e9735d2065b5ca53749f" category="list-text">* — runasuser runasuser*</block>
  <block id="39fd9f279e14d3994f7c5907b6b0999a" category="paragraph">指定在计划备份时更改计划备份操作的用户。</block>
  <block id="58700da72b429a12d18c92851997d5e0" category="paragraph">指定可用于备份操作的预处理活动或后处理活动的任务规范 XML 文件。应提供 XML 文件的完整路径，并提供 -taskspec.</block>
  <block id="d28cd02b5b3a149845c51c337b77dd0e" category="summary">您必须了解 SnapManager 支持的不同数据库版本和配置。您必须执行基本数据库布局和配置设置，以确保操作成功。</block>
  <block id="e63b3c70e18a428123ed507e537a4e77" category="doc">数据库版本支持和配置概述</block>
  <block id="529173d369529453bbc813753d4fc3d4" category="paragraph">适用于 Oracle 的 SnapManager 可与 Oracle 版本 10gR2 （ 10.2.0.5 ）， 11gR1 ， 11gR2 （ 11.2.0.1 和 11.2.0.2 ），和 12_c_ 集成；可与原生 Oracle 技术（如恢复管理器（ RMAN ）集成；并可跨光纤通道（ FC ）和 Internet 小型计算机系统接口（ iSCSI ）协议进行集成。</block>
  <block id="de064cd4cf3e7c2614070114ed52a5bd" category="admonition">SnapManager 3.2 不支持 Oracle Database 9i ， SnapManager 3.3.1 不支持 10g R2 （ 10.2.0.5 之前的版本）。</block>
  <block id="1136a066955afdcaa00d3c296eb3a8e2" category="paragraph">如果要部署由 SnapManager for Oracle 管理的 Oracle 数据库，请参见 _Oracle for SnapManager 最佳实践 _ 。</block>
  <block id="0eac96aa1409e23e267bfb1a31306b41" category="summary">如果克隆数据库，您可以执行一些任务，例如在不影响生产环境中的数据库的情况下测试数据库升级，将主安装复制到多个培训系统，或者将主安装作为基础安装复制到具有类似要求的其他服务器。</block>
  <block id="d648f9e0a60f7e9068e4f8fbf9465f63" category="doc">克隆数据库备份</block>
  <block id="8aee84bc2bc2cdd8940ade6655c0720d" category="paragraph">您可以执行以下与克隆相关的任务：</block>
  <block id="64185ad582744458a3116796c827bbc1" category="list-text">从现有备份克隆数据库。</block>
  <block id="8e66151aa1c600938f9d45e6f454c92f" category="list-text">以当前状态克隆数据库，这样您可以在一个操作步骤中创建备份和克隆。</block>
  <block id="4ebc3c72243ff9e58d8c654720daa6f2" category="list-text">克隆数据库并使用自定义插件脚本，这些脚本会在克隆操作之前或之后运行。</block>
  <block id="c53539625d04e32f46b19a72fa61ec3d" category="list-text">将数据库克隆到数据库所在的同一主机。</block>
  <block id="82abff5a07ba2887f8b73de23f1f6398" category="list-text">使用外部归档日志位置的归档日志文件克隆数据库。</block>
  <block id="7675e0163479511633cc71b8eac14a85" category="list-text">将数据库克隆到备用主机。</block>
  <block id="ab3ae115ed19b098e389911e4f2df70f" category="list-text">查看克隆列表。</block>
  <block id="5688e4214ca3dd37ee190e73fede4839" category="list-text">查看详细克隆信息。</block>
  <block id="1c7ab280758d3a6e5c3ab4d55d8923c6" category="list-text">删除克隆。</block>
  <block id="cf5767ebbc49998e71a23f58e3db1f7e" category="summary">您可以运行 backup verify 命令来查看备份格式对于 Oracle 是否有效。</block>
  <block id="3dd64740020411d0d4eae3ceb46f0380" category="paragraph">指定要验证备份的配置文件。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="99d05f2c89eea2e35471f2e5cd27ca9a" category="paragraph">使用指定标签验证备份。</block>
  <block id="5b9ed718df5df7d2f70e63c1b73ca6d6" category="paragraph">在备份验证操作成功或失败后收集转储文件。</block>
  <block id="62ed59cbdda0309fc2501f291138a938" category="paragraph">强制数据库进入执行验证操作所需的状态。</block>
  <block id="561b72a14e1d63236a1738564cb70d59" category="paragraph">以下是验证备份的示例：</block>
  <block id="bcf4e787016f934677ca9a0b825bd79a" category="summary">只有在具有相应凭据的情况下，才能执行 SnapManager 操作。SnapManager 中的安全性受用户身份验证的制约。</block>
  <block id="73d279eba0a7b40ad96da316fea85370" category="doc">SnapManager 如何保持安全性</block>
  <block id="ee71258ade2413bc975070011ffdab73" category="paragraph">SnapManager 通过密码提示或设置用户凭据来请求用户身份验证，从而保持安全性。有效用户通过 SnapManager 服务器进行身份验证和授权。</block>
  <block id="e3e73ea8b78c2572b42a7e85e008c7c9" category="paragraph">SnapManager 凭据和用户身份验证与 SnapManager 3.0 截然不同：</block>
  <block id="dfe4ce073b839c10dae34a9fb284f58f" category="list-text">在 SnapManager 3.0 之前的版本中，您可以在安装 SnapManager 时设置任意服务器密码。任何要使用 SnapManager 服务器的用户都需要 SnapManager 服务器密码。需要使用 smo credential set -host 命令将 SnapManager 服务器密码添加到用户凭据中。</block>
  <block id="8994c8c7089a6c1ba05d58968e4e0a84" category="list-text">在 SnapManager （ 3.0 及更高版本）中， SnapManager 服务器密码已替换为单个用户操作系统（ OS ）身份验证。如果您运行的客户端与主机不在同一服务器上，则 SnapManager 服务器将使用您的操作系统用户名和密码执行身份验证。如果不希望系统提示您输入操作系统密码，可以使用 smo credential set -host 命令将数据保存到 SnapManager 用户凭据缓存中。</block>
  <block id="7c91eab20b8f333231043e9d4e09f774" category="admonition">当 SMO.config 文件中的 host.credentials.persist 属性设置为 true 时， smo credential set -host 命令会记住您的凭据。</block>
  <block id="5e4a8502d2222f4b983f270d74786ede" category="paragraph">用户 1 和用户 2 共享一个名为 Prof2 的配置文件。如果用户 2 没有访问 Host1 的权限，则无法在 Host1 中执行 database1 的备份。如果用户 1 没有访问 Host3 的权限，则无法将数据库克隆到 Host3 。</block>
  <block id="c610e4e145b86e748cb8a5c768c30216" category="paragraph">下表介绍了分配给用户的不同权限：</block>
  <block id="5133d97cfb32aa99f7deb009aedbbbcd" category="cell">权限类型</block>
  <block id="6b908b785fdba05a6446347dae08d8c5" category="cell">用户 1</block>
  <block id="a09bccf2b2963982b34dc0e08d8b582a" category="cell">用户 2.</block>
  <block id="98c648fdd18480723196d36357f8c3f6" category="paragraph">主机密码</block>
  <block id="7729206c04424f44d26ff9c0eaed6770" category="paragraph">Host1 ， Host2</block>
  <block id="b22ad73fc5ef4a39332346da5283bd5a" category="paragraph">Host2 ， Host3</block>
  <block id="812ea22f0f105dac5729f411b3812d6b" category="paragraph">存储库密码</block>
  <block id="8be8db2190ef6d5641034c66b8dfadcb" category="paragraph">参考 1</block>
  <block id="37c87da8fbf011fd761685b73cff6f27" category="paragraph">配置文件密码</block>
  <block id="bd1a503402dff587ed5c5b8ec2ea36a7" category="paragraph">Prof1 ， Prof2</block>
  <block id="edbe00212613451a41360df24c970b96" category="paragraph">2</block>
  <block id="016ec20b3475350fc11badc894370c34" category="paragraph">如果用户 1 和用户 2 没有任何共享配置文件，则假定用户 1 对名为 Host1 和 Host2 的主机具有权限，而用户 2 对名为 Host2 的主机具有权限。用户 2 甚至无法在 Host1 上运行非配置文件命令，例如 dump 和 system verify 。</block>
  <block id="520ba84316ad3d877f01f89a46ff8707" category="summary">在 SnapManager 中，必须同时执行还原和恢复操作。您不能执行还原操作，稍后再执行 SnapManager 恢复操作。</block>
  <block id="9fd51b22904d8c678577ce7a156f2ec7" category="doc">备份恢复</block>
  <block id="7dc1bb125af2c3f53528a9b22c0b0594" category="paragraph">在 SnapManager 3.2 或更早版本中，您可以使用 SnapManager 还原和恢复备份，也可以使用 SnapManager 还原备份，并使用 Oracle 恢复管理器（ RMAN ）等其他工具来恢复数据。由于 SnapManager 可以向 RMAN 注册其备份，因此您可以使用 RMAN 以更精细的粒度（如块）还原和恢复数据库。这种集成将 Snapshot 副本的速度和空间效率优势与使用 RMAN 进行还原的精细控制相结合。</block>
  <block id="19d38bca1965b6e7efdfec4246925174" category="admonition">您必须先恢复数据库，然后才能使用它。您可以使用任何工具或脚本恢复数据库。</block>
  <block id="42bedf9926b18f098fea72747ad7e198" category="paragraph">从 SnapManager 3.2 for Oracle 开始， SnapManager 可通过归档日志备份自动还原数据库备份。即使外部位置提供了归档日志备份， SnapManager 也会使用外部位置的归档日志备份来还原数据库备份。</block>
  <block id="54060d5811b7d35a79eb1a0bb0d21ef4" category="paragraph">如果向数据库添加了新的数据文件， Oracle 建议您立即进行新的备份。此外，如果还原在添加新数据文件之前创建的备份并尝试恢复到添加新数据文件之后的某个时间点，则自动 Oracle 恢复过程可能会失败，因为它无法创建数据文件。有关恢复备份后添加的数据文件的过程，请参见 Oracle 文档。</block>
  <block id="24e39cc8dfdc1f5572ae6462567f7191" category="summary">备份类型（完整或部分）会影响 SnapManager 创建的 Snapshot 副本数量。对于完整备份， SnapManager 会为每个卷创建一个 Snapshot 副本，而对于部分备份， SnapManager 会为每个表空间文件创建一个 Snapshot 副本。</block>
  <block id="0f4b794e5a3a72334b769d1f687e9450" category="doc">备份类型和 Snapshot 副本数量</block>
  <block id="654dafcedd6ccb7ed8889580f8e06690" category="admonition">Data ONTAP 会将每个卷的最大 Snapshot 副本数限制为 255 个。只有在将 SnapManager 配置为保留大量备份（其中每个备份包含大量 Snapshot 副本）时，您才能达到此最大值。</block>
  <block id="cf11e868aa9f168b69a427cbaa7917b8" category="paragraph">要在确保未达到每个卷的 Snapshot 副本最大限制的情况下保持足够的备份池可用，您必须在不再需要备份时将其删除。您可以将 SnapManager 保留策略配置为在达到特定备份频率的特定阈值后删除成功的备份。例如，在 SnapManager 成功创建四个每日备份后， SnapManager 会删除前一天创建的每日备份。</block>
  <block id="3d62a30fc4a88d04497ddfe1fed38059" category="paragraph">下表显示了 SnapManager 如何根据备份类型创建 Snapshot 副本。表中的示例假设数据库 Z 包含两个卷，每个卷包含两个表空间（ TS1 和 TS2 ），每个表空间包含两个数据库文件（ TS1_1.dbf ， TS1_2.dbf ， TS2_1.dbf 和 TS2_2.dbf ）。</block>
  <block id="e12c7f4348a1c7e3afb2f9dde999a40d" category="paragraph">下表显示了这两种类型的备份如何生成不同数量的 Snapshot 副本。</block>
  <block id="70ae94e103bec69382df1e05aa37a3ff" category="paragraph">SnapManager 会在卷级别而非表空间级别创建 Snapshot 副本，这通常会减少必须创建的 Snapshot 副本数量。</block>
  <block id="dea2aa4bcf32b73f3bf43a6e1eae12e1" category="admonition">这两个备份还会为日志文件创建 Snapshot 副本。</block>
  <block id="ccafd2bed3d147485c100100a972d264" category="cell">数据库中的卷</block>
  <block id="03794d0dbfb53125fe2af71b2d563181" category="cell">表空间 TS1 （包括 2 个数据库文件）</block>
  <block id="f532472e00c925e34cd636bab0c76dbb" category="cell">表空间 TS2 （包括 2 个数据库文件）</block>
  <block id="75142886512a4659f14debe3434ca627" category="cell">已创建 Snapshot 副本</block>
  <block id="b149692f4e85afc34736fe249b5d702b" category="cell">Snapshot 副本总数</block>
  <block id="0f029e32fc6b4e7fdd554bf75eb28e08" category="paragraph">E ： \data</block>
  <block id="933378038bf1d98ba09ba9b7d64dd7f7" category="paragraph">vs1_1.dbf</block>
  <block id="34922bfd2d50c6da927313f1cc506735" category="paragraph">TS2_1.dbf</block>
  <block id="23cef4d2bff490fe0c6f292c7c400902" category="paragraph">每个卷 1 个</block>
  <block id="c81e728d9d4c2f636f067f89cc14862c" category="paragraph">2.</block>
  <block id="fd9c8517fa3a3fc4d9659e486acf76dd" category="paragraph">每个文件 2 个</block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="paragraph">4.</block>
  <block id="2abf3c9157c5b70b65d2986efc78e7fc" category="summary">SnapManager 命令参考包括有效的使用语法，选项，参数和参数，您应在命令中提供这些参数以及示例。</block>
  <block id="9fc05ccadd335eae35caf3978cc52d25" category="paragraph">以下问题适用于命令用法：</block>
  <block id="d992dad737d0508adec0f4896a18345c" category="list-text">命令区分大小写。</block>
  <block id="537487c13adc584bb3922965767b5663" category="list-text">SnapManager 最多可接受 200 个字符，标签最多可接受 80 个字符。</block>
  <block id="7d083a3b26ad83cda3d5a24d69e8b148" category="list-text">如果主机上的 shell 限制了命令行上可以显示的字符数，则可以使用 cmdfile 命令。</block>
  <block id="04d716307daf6bff86a4408af3d15f0d" category="list-text">请勿在配置文件名称或标签名称中使用空格。</block>
  <block id="47f06845e47ecf0a9e4e3a5042f8a630" category="list-text">在克隆规范中，请勿在克隆位置使用空格。</block>
  <block id="82cb6341cd560c20bdb4f8dfcfe88dbe" category="paragraph">SnapManager 可以向控制台显示三种级别的消息：</block>
  <block id="474e5b1a445af6e10102428735b873bd" category="list-text">警告消息</block>
  <block id="ed23aa284dd647586fa32896d9c20c04" category="list-text">信息性消息</block>
  <block id="a9e7499038b1230ea43caee679d8f821" category="paragraph">您可以指定消息的显示方式。如果不指定任何内容， SnapManager 将仅向控制台显示错误消息和警告。要控制 SnapManager 在控制台上显示的输出量，请使用以下命令行选项之一：</block>
  <block id="f928d8e527077ba0738bd53bce205636" category="list-text">-quiet ：仅向控制台显示错误消息。</block>
  <block id="1f657db238aa36d7062749796216182e" category="list-text">-verbose ：向控制台显示错误，警告和信息性消息。</block>
  <block id="3dd776caf90bcef5c643d02cbe939ffd" category="admonition">无论默认行为或为显示指定的详细信息级别如何， SnapManager 始终会将所有消息类型写入日志文件。</block>
  <block id="27db4ec1127eedc87e8999fc45335636" category="summary">您可以查看单个配置文件的历史记录设置。</block>
  <block id="47305fe1d4d9fdeec93d402f126b5886" category="doc">查看 SnapManager 历史记录配置详细信息</block>
  <block id="719d43cb2afce797163a9e8dff8ad30a" category="paragraph">SnapManager 历史记录操作会为每个配置文件显示以下信息：</block>
  <block id="05ba6476bfc399b93e2db25543492c03" category="list-text">操作名称</block>
  <block id="7fc5e59a4a1a1751364c10870f248a40" category="list-text">保留类</block>
  <block id="88f1d0420694d75209521473343eaadb" category="list-text">保留计数</block>
  <block id="2622f53fe7745c676ef1d040e0ea236f" category="list-text">要显示有关特定配置文件的 SnapManager 历史记录操作的信息，请输入以下命令： smo history show -profileprofile_name</block>
  <block id="49fd5b43e27dba475c4434b85c16dfed" category="summary">您可以使用命令行界面（ CLI ）在一个或多个 SnapManager 服务器主机上执行滚动升级。然后，升级后的 SnapManager 服务器主机只能使用更高版本的 SnapManager 进行管理。</block>
  <block id="46f10e6e5e119bf9e22a86b322d02006" category="doc">在一台或多台主机上执行滚动升级</block>
  <block id="5b374597c52e58b671cfcbadbcc344dd" category="paragraph">您必须确保执行滚动升级的所有前提条件均已完成。</block>
  <block id="eed910d3be93fe87c6d7a1317a825978" category="list-text">要在单个主机上执行滚动升级，请输入以下命令： smorepository rollingupgrade-repository-dbnamerepo_service_name-host-login-usernamerepo_username-portrepo_port-upgradehosthost_wing_target_database-force （ -quiet | -verbose ）</block>
  <block id="8190b00ccc3772f0eb42145228d9de1e" category="paragraph">以下命令将对装载在 HostA 上的所有目标数据库以及位于 repo_host 上名为 repoA 的存储库数据库执行滚动升级：</block>
  <block id="21247f24c130538eb95ff66f13964558" category="list-text">要在多个主机上执行滚动升级，请输入以下命令： smorepository rollingupgrade-repository-dbnamerepo_service_name-host-login-usernamerepo_username-portrepo_port-upgradehosthost_wing_target_database1 ， host_wing_target_database2-force</block>
  <block id="215ccb3ee5353f75f0e318326c87228e" category="admonition">对于多个主机，请输入以逗号分隔的主机名，并确保在逗号和下一个主机名之间不包含任何空格。此外，请确保在双引号内输入所有主机名。</block>
  <block id="260041efdbb14a1992abb3e0e4827743" category="paragraph">以下命令将对主机，主机 A 和主机 B 上挂载的所有目标数据库以及位于 repo_host 上名为 repoA 的存储库数据库执行滚动升级：</block>
  <block id="f28dba0a01ab183c2b5ea04c5f5a6038" category="list-text">要对存储库数据库上的所有主机执行滚动升级，请输入以下命令： morepository rollingupgrade-repository-dbnamerepo_service_name-host-login-usernamerepo_username-portrepo_port-allhosts-force （ -quiet | -verbose ）</block>
  <block id="e39cf20fb07ce0d58529c733fc10f8e4" category="paragraph">成功升级存储库数据库后，您可以对目标数据库执行所有 SnapManager 操作。</block>
  <block id="a3482094653abaf4cbadae94c69638e9" category="paragraph">升级后的 SnapManager for Oracle 会保留早期版本的 SnapManager for Oracle 中基于主机的用户凭据， Oracle 软件用户凭据和 Oracle 恢复管理器（ RMAN ）用户凭据。</block>
  <block id="2a5c93f3f79842c98ab63a323dd2ba01" category="paragraph">以下命令将对 repo_host 上名为 repoA 的存储库数据库上可用的所有目标数据库执行滚动升级：</block>
  <block id="69de94c041e38d2ab62af52c58d5b781" category="list-text">如果 SnapManager 服务器自动启动，则必须重新启动该服务器，以确保可以查看计划。</block>
  <block id="c7f144c66945dbf5f6598f512c2ca4db" category="list-text">如果要升级两个相关主机中的一个，则必须在升级第一个主机后升级第二个主机。</block>
  <block id="c3ec6719089acc9a00bb3fddf6db477c" category="paragraph">例如，如果已从主机 A 创建克隆到主机 B ，或者已将备份从主机 A 挂载到主机 B ，则主机 A 和主机 B 将彼此相关。升级主机 A 时，系统会显示一条警告消息，要求您在升级主机 A 后立即升级主机 B</block>
  <block id="9742991befb58cec56c7fa1ffb9346d7" category="admonition">即使在主机 A 的滚动升级期间删除了克隆或从主机 B 卸载了备份，也会显示警告消息这是因为存储库中存在用于在远程主机上执行操作的元数据。</block>
  <block id="bfac481620e7551ebb22c20ed677e12f" category="inline-xref-macro">执行滚动升级的前提条件</block>
  <block id="ced650524319b91726e6910f620e9dd0" category="paragraph"><block ref="ced650524319b91726e6910f620e9dd0" category="inline-xref-macro-rx"></block></block>
  <block id="8c8ebf295f65e425e706cb7ea8d9f8ac" category="summary">您可以使用 clone create 命令在备用主机上克隆数据库备份。</block>
  <block id="2752c580b5e8a7b4f44526fc90179f44" category="doc">将数据库克隆到备用主机</block>
  <block id="dce643d279f1f8a391f32ae61ac497c4" category="list-text">创建配置文件或具有现有配置文件。</block>
  <block id="aca9d5d09594a3c75a130da85af6ee65" category="list-text">创建完整备份或具有现有数据库备份。</block>
  <block id="2922169652202815354adb489e45ba4f" category="list-text">创建克隆规范或具有现有克隆规范。</block>
  <block id="56a3a64e722328cb49d00b02bd1bfe99" category="list-text">要将数据库克隆到备用主机，请输入以下命令： smo clone create -backup-label backup_label-name-newsid new_sid-host target_host-label clone_label-comment_text-profileprofile_name-clonSpec full_path_to_clonesetfile</block>
  <block id="962fe0ca0292561e01c6379c3216be97" category="paragraph">Oracle 不允许在同一主机上同时运行具有相同 SID 的两个数据库。因此，您必须为每个克隆提供一个新的 SID 。但是，您可以在另一台具有相同 SID 的主机上创建一个数据库。</block>
  <block id="863007c90feccf2c1f4ee12c8a89bbdb" category="paragraph"><block ref="863007c90feccf2c1f4ee12c8a89bbdb" category="inline-xref-macro-rx"></block></block>
  <block id="148f508b2885977c58e3f6ca6df6e346" category="inline-xref-macro">smo clone create 命令</block>
  <block id="5f33b86dedd21c35efb7ff808853e88c" category="paragraph"><block ref="5f33b86dedd21c35efb7ff808853e88c" category="inline-xref-macro-rx"></block></block>
  <block id="712fb7b4509ff31304ba06e450c87576" category="summary">联机帮助提供了有关可使用 SnapManager 图形用户界面执行的任务的说明。联机帮助还提供了窗口和向导上的字段说明。</block>
  <block id="33f013a482f7b741e92cd6e551730356" category="doc">访问和打印联机帮助</block>
  <block id="315359e3c6323d4eda359054319c0815" category="list-text">执行以下操作之一：</block>
  <block id="69725f7e285094d266bb45ab15d82f87" category="list-text">在主窗口中，单击 * 帮助 * &gt; * 帮助目录 * 。</block>
  <block id="90ea867df7e333d8074fc12d5d6ce7b4" category="list-text">在任何窗口或向导中，单击 * 帮助 * 以显示特定于该窗口的帮助。</block>
  <block id="74fad13d9710b3a008366e252e7e4427" category="list-text">使用左窗格中的 * 目录 * 在各个主题之间导航。</block>
  <block id="11a9ed36dd1f9ae4cd8bfa8b6e6d9a0f" category="list-text">单击帮助窗口顶部的打印机图标以打印各个主题。</block>
  <block id="b69afc22a90f575900a4916808a0fb61" category="summary">请考虑内存，磁盘空间和 CPU 要求。</block>
  <block id="d857f7273a1cdf68cd9d024ece060473" category="doc">支持的主机硬件</block>
  <block id="342fdca222af445803ac11da9673f322" category="paragraph">SnapManager 需要以下配置：</block>
  <block id="66ccaf56f76a3534cf8acec32e52a347" category="cell">硬件功能</block>
  <block id="47dee50ad0138b8f5ca70e40e86e6c04" category="cell">硬件要求</block>
  <block id="4789f23283b3a61f858b641a1bef19a3" category="paragraph">内存</block>
  <block id="61830fc1da0b8bafec92958ffb9690eb" category="paragraph">SnapManager 服务器需要 128 MB 内存。</block>
  <block id="825432aafe0eef766d9a982122977ac7" category="paragraph">图形用户界面至少需要 512 MB RAM 才能运行。</block>
  <block id="e04dd3f597f2bd60341fd4808fbba3b2" category="paragraph">SnapManager 服务器运行的每个操作在运行时都需要 48 MB 的额外内存。</block>
  <block id="1a293e95d688041d801d7d1b909552e0" category="paragraph">磁盘空间</block>
  <block id="1a13766b4161524ff94e5dbc10dec262" category="paragraph">图形用户应用程序的可用磁盘空间为 128 MB （最小）。</block>
  <block id="f6918ec6bed3122ee4e44316c3ae87c5" category="paragraph">CPU 速度</block>
  <block id="3fb9c6dfeab81ab75693676e5ca290a4" category="paragraph">1.0 GHz 处理器速度（最低）。</block>
  <block id="373308c09fdbbee09f55d5a4668eb168" category="summary">此命令将列出针对指定配置文件记录的所有操作的摘要信息。</block>
  <block id="0e61f7750bf4255027a201690714c5e7" category="doc">smo operation list 命令</block>
  <block id="2dd319eb32c1280add80ee9ae7f6331f" category="paragraph">（可选）指定此参数后，此命令会在单独的行中列出每一行，而该行中的属性将使用指定的字符进行分隔。</block>
  <block id="d639e0ab32b94182c80b92f87c31be7a" category="paragraph">（可选）在控制台上仅显示错误消息。默认情况下会显示错误和警告消息。</block>
  <block id="56de266caf9b2758ff7e951ca22fe2af" category="paragraph">（可选）在控制台上显示错误，警告和信息性消息。</block>
  <block id="5282e9a7a97ee61ebb35f490110d3d67" category="paragraph">以下示例列出了针对指定配置文件记录的所有操作的摘要信息。</block>
  <block id="9e614f5f3fc7f0c53cae3927dc933fbd" category="inline-xref-macro">查看操作列表</block>
  <block id="031fe54592468d50996b88337f3f8824" category="paragraph"><block ref="031fe54592468d50996b88337f3f8824" category="inline-xref-macro-rx"></block></block>
  <block id="603e1833eb9819bb6e2be4ec1251ff7a" category="summary">升级后的 SnapManager 会为现有备份分配默认备份保留类。您可以根据备份要求修改默认保留类值。</block>
  <block id="d4ad6c017f89e49d5d9964291989d7ec" category="doc">修改备份保留类</block>
  <block id="a9601bf0952643f5c9d32e150eeabb46" category="paragraph">分配给现有备份的默认备份保留类如下：</block>
  <block id="3a7d554d08a3dcea6d20b15d40d2a382" category="cell">升级后分配保留类</block>
  <block id="9a7de9764477fe0b193cbc5254069830" category="paragraph">备份将永久保留</block>
  <block id="545f6c2f382c04810103b3e5e6f7d841" category="paragraph">无限制</block>
  <block id="4084a73c72e2adfc473ae189215fef61" category="paragraph">其他备份</block>
  <block id="2d74ac3bab673fb9899c070ed50966bd" category="paragraph">* 注： * 您可以删除永久保留的备份，而无需更改保留类。</block>
  <block id="ab92fd24cbe957d94d81270d0ca2f762" category="paragraph">如果升级到 SnapManager 3.0 或更高版本，则会将以下两个值中的较大值分配给现有配置文件：</block>
  <block id="d6005c6202cac0018b22a1df539d4634" category="list-text">配置文件的先前保留计数</block>
  <block id="b7cf71e3e002460779c79510949111a8" category="list-text">SMO.config 文件中指定的每日备份的保留计数和持续时间的默认值</block>
  <block id="a286b541a66bad78b27f47d04de46b53" category="list-text">修改为 SMO.config 文件中的 rett.hourly.count 和 retain.hourly.duration 分配的值。</block>
  <block id="f8abc7e546534fbe94ea405afdf2a17e" category="paragraph">您可以输入以下值：</block>
  <block id="611c6a794621dede9df5f5de4a279151" category="list-text">rety.hourly.count = 12</block>
  <block id="76672365d7494205dcbee5d8f42db7a0" category="paragraph"><block ref="76672365d7494205dcbee5d8f42db7a0" category="inline-xref-macro-rx"></block></block>
  <block id="642c426004ac4811f1d48af832961398" category="summary">此命令可列出与配置文件关联的计划操作。</block>
  <block id="34f017e9ac5e2f43993d8c107729e0db" category="doc">smo schedule list 命令</block>
  <block id="8cc6104b74158adab4f775a8fa8f818e" category="paragraph">指定与数据库相关的配置文件的名称，您可以使用此名称查看计划的操作列表。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="40daeab3ba677d30980455892b681e21" category="summary">您必须了解可能影响环境的情形和限制。</block>
  <block id="d8f928c755895ba46c4f7b5f689b3adf" category="doc">使用 SnapManager 时的限制</block>
  <block id="ae8f22b366b33bb7a157cecc0cf3a7ad" category="paragraph">* 与数据库布局和平台相关的限制 *</block>
  <block id="827cccc2e2718721afa438737d3191f1" category="list-text">SnapManager 支持文件系统上的控制文件，而不支持原始设备上的控制文件。</block>
  <block id="319a90df36f1239e89483feaf9a9c245" category="list-text">SnapManager 在 Microsoft 集群（ MSCS ）环境中运行，但无法识别 MSCS 配置的状态（主动或被动），并且不会将存储库的主动管理传输到 MSCS 集群中的备用服务器。</block>
  <block id="a35b65de833a0523c141cf50836de5c6" category="list-text">存储库数据库可能位于可使用多个 IP 地址访问的主机上。</block>
  <block id="11e9ee2b19c8d9c7387299bd77c56388" category="paragraph">如果使用多个 IP 地址访问存储库，则会为每个 IP 地址创建计划文件。如果为某个 IP 地址（例如 IP1 ）下的配置文件（例如配置文件 A ）创建计划备份，则仅更新该 IP 地址的计划文件。如果从其他 IP 地址（例如 IP2 ）访问配置文件 A ，则不会列出计划备份，因为 IP2 的计划文件没有在 IP1 下创建的计划的条目。</block>
  <block id="0ad15e96f6409c84edca83ec109e79e6" category="paragraph">您可以等待从该 IP 地址触发计划并更新计划文件，也可以重新启动服务器。</block>
  <block id="055e13fbcd2ceff26d246bdfddd9e40b" category="paragraph">* 与 SnapManager 配置相关的限制 *</block>
  <block id="3343be9b47c2b5e5c495b846c9a85382" category="list-text">可以将 SnapManager 配置为使用 RMAN 对数据库备份进行目录。</block>
  <block id="4a2ac137c9070290f68dc1eaf68ad444" category="paragraph">如果使用 RMAN 恢复目录，则恢复目录必须与备份的数据库位于不同的数据库中。</block>
  <block id="708e43ea4ab32fd846c562c2a47c245a" category="list-text">SnapManager 支持 MultiStore 存储系统上具有以下要求的数据库：</block>
  <block id="121a2b0eff0f4b0a7124d7ff65d611d6" category="list-text">您必须配置 SnapDrive 以设置 MultiStore 存储系统的密码。</block>
  <block id="eb1e0cd778a88ff03f963671ea3ebaeb" category="list-text">如果底层卷不在同一个 MultiStore 存储系统中，则 SnapDrive 无法为 MultiStore 存储系统中的 qtree 中的 LUN 或文件创建 Snapshot 副本。</block>
  <block id="9e7759d2a8127568d2d839b76d5dc1d4" category="list-text">SnapManager 不支持从一个客户端（无论是从命令行界面还是从图形用户界面）访问在不同端口上运行的两个 SnapManager 服务器。</block>
  <block id="578f94e728f2fe843e59be92c21f93aa" category="paragraph">目标主机和远程主机上的端口号应相同。</block>
  <block id="e35b0ac1a849400eddabbcf2eb3d0fd0" category="paragraph">执行任何 SnapManager 操作时，您必须验证存储库数据库是否正在运行。</block>
  <block id="9312455f253b8789242fb3a7e37aa9a8" category="list-text">SnapManager 不支持实时分区移动（ LPM ）和实时应用程序移动（ LAM ）。</block>
  <block id="b614b3b8895d0b2940c3b7fed7cecf7d" category="list-text">SnapManager 不支持 Oracle Wallet Manager 和透明数据加密（ TDE ）。</block>
  <block id="1b446d051d53ced5c3192ccd79f06fc5" category="list-text">SnapManager 不支持原始设备映射（ Raw Device Mapping ， RDM ）环境中的 MetroCluster 配置，因为虚拟存储控制台（ Virtual Storage Console ， VSC ）尚不支持 MetroCluster 配置。</block>
  <block id="0d4d9ed3e0e248bcf1ba3a3802c72fda" category="paragraph">* 与配置文件管理相关的限制 *</block>
  <block id="ea716e7fe10f28eb3b07bddc87775a0b" category="list-text">如果您更新配置文件以分离归档日志备份，则无法对主机执行回滚操作。</block>
  <block id="035c8ecbb74c142faa855cdb9282b067" category="list-text">如果您从 GUI 启用了配置文件以创建归档日志备份，然后尝试使用 " 多配置文件更新 " 窗口或 " 配置文件更新 " 窗口更新此配置文件，则无法修改此配置文件以创建完整备份。</block>
  <block id="964a33051f9996746f27d79512029f0b" category="list-text">如果在 " 多配置文件更新 " 窗口中更新多个配置文件，并且某些配置文件启用了 * 单独备份归档 * 选项，而其他配置文件禁用了此选项，则 * 单独备份归档 * 选项将被禁用。</block>
  <block id="218691178534d05428fe22e1cd0226ee" category="list-text">如果您更新多个配置文件，并且某些配置文件已启用 * 单独备份归档 * 选项，而其他配置文件已禁用此选项，则多配置文件更新窗口中的 * 单独备份归档 * 选项将被禁用。</block>
  <block id="06563678879ae941edc4e802a1e16522" category="list-text">如果重命名配置文件，则无法回滚主机。</block>
  <block id="463b220493a2b3922026f52354fb2a59" category="paragraph">* 与滚动升级或回滚操作相关的限制 *</block>
  <block id="e1d0119c9888ecdb982f61c479ec7e66" category="list-text">如果您尝试在未对存储库中的主机执行回滚操作的情况下为主机安装早期版本的 SnapManager ，则可能无法执行以下操作：</block>
  <block id="11aca8935f3cda9b7301d16060d86ed1" category="list-text">查看在早期或更高版本的 SnapManager 中为主机创建的配置文件。</block>
  <block id="86276685f4ce226e4bd2bb77421278bd" category="list-text">访问在早期或更高版本的 SnapManager 中创建的备份或克隆。</block>
  <block id="e14c86e373f0b44e46f0e85c63776ac8" category="list-text">在主机上执行滚动升级或回滚操作。</block>
  <block id="cbfbd731050aaa09e54d546cb91827d6" category="list-text">在分离配置文件以创建归档日志备份后，您将无法对相关主机存储库执行回滚操作。</block>
  <block id="18798762213908cefb9ead9b714bf640" category="paragraph">* 与备份操作相关的限制 *</block>
  <block id="05deda5a3163ee64a3e13d648c9fca28" category="list-text">在恢复期间，如果备份已挂载，则 SnapManager 不会再次挂载备份，而会使用已挂载的备份。</block>
  <block id="d01ea34f218391f4c446792ea5d39753" category="paragraph">如果备份由其他用户挂载，而您无权访问先前挂载的备份，则另一用户必须为您提供权限。</block>
  <block id="1ff2d736309ed53f976eb1f0c84ab023" category="paragraph">所有归档日志文件都对分配给组的用户具有读取权限；如果备份由其他用户组挂载，则您可能没有对归档日志文件的访问权限。用户可以手动为已挂载的归档日志文件授予权限，然后重试还原或恢复操作。</block>
  <block id="3c81f7af747e23d05f0d322b23125aba" category="list-text">SnapManager 会将备份状态设置为 "`protected` " ，即使数据库备份的其中一个 Snapshot 副本已传输到二级存储系统也是如此。</block>
  <block id="ed026ac309c46bdd712a72097e6736a0" category="list-text">您只能使用任务规范文件从 SnapManager 3.2 或更高版本进行计划内备份。</block>
  <block id="0b7d8ded36b9bafb927ef6369b641884" category="list-text">如果存储库数据库指向多个 IP 地址，并且每个 IP 地址都具有不同的主机名，则一个 IP 地址的备份计划操作将成功，而另一个 IP 地址的备份计划操作将失败。</block>
  <block id="3395d98b91ce243fe06d56ec90de1824" category="list-text">在 ONTAP 环境中， SnapManager 不支持源卷使用多个二级目标。</block>
  <block id="ba0c2bb29db4700069ce0b7a41fe1471" category="paragraph">* 与还原操作相关的限制 *</block>
  <block id="6734138b5228c9a0fec6e80374367332" category="list-text">SnapManager 不支持在 Windows 中使用快速还原或基于卷的还原操作来还原数据库备份。</block>
  <block id="1cc7cc7183c9c2ff5a1f4693ca0caaa1" category="paragraph">尝试从 SnapManager 命令行界面执行快速还原操作时， SnapManager 3.3 会显示一条错误消息。</block>
  <block id="cff3f994cd37305d16f13f75b4959b29" category="paragraph">* 与克隆操作相关的限制 *</block>
  <block id="4514869cd975960050f4ffc96da83b7d" category="list-text">SnapManager 3.3 或更高版本不支持使用在 SnapManager 3.2 之前的版本中创建的克隆规范 XML 文件。</block>
  <block id="915fd95626913728b730a5853a773937" category="list-text">如果临时表空间位于与数据文件位置不同的位置，则克隆操作会在数据文件位置创建表空间。</block>
  <block id="479d92a05ca70e23c3a7bfa793fd43cb" category="paragraph">但是，如果临时表空间是位于与数据文件位置不同位置的 Oracle 托管文件（ OMF ），则克隆操作不会在数据文件位置创建表空间。SnapManager 不会管理这些 OMF 。</block>
  <block id="17c160d1bd8c3f55c635f66efe0241ee" category="list-text">如果选择 -resetlogs 选项， SnapManager 将无法克隆 RAC 数据库。</block>
  <block id="0a1be11cd812f298836caa8812d4ae1f" category="paragraph">* 与归档日志文件和备份相关的限制 *</block>
  <block id="a97df13e30497a9ac8129c8bef48c297" category="list-text">SnapManager 不支持从闪存恢复区域目标中删减归档日志文件。</block>
  <block id="3aeca93ba4685b99b14c6ccb0abd6bca" category="list-text">SnapManager 不支持从备用目标中删减归档日志文件。</block>
  <block id="e75fc39bede8dcd138d53a2c841f907b" category="list-text">归档日志备份会根据保留持续时间和默认的每小时保留级别进行保留。</block>
  <block id="8d5fd3bd1d3461bb01cdd7a810d26740" category="paragraph">使用 SnapManager 命令行界面或图形用户界面修改归档日志备份保留类时，不会考虑将修改后的保留类用于备份，因为归档日志备份会根据保留期限进行保留。</block>
  <block id="9a2737035391072342d713429e86b81d" category="list-text">如果从归档日志目标位置删除归档日志文件，则归档日志备份不会包含早于缺少的归档日志文件的归档日志文件。</block>
  <block id="fa352c9f112909d62fa8b002e31fc6ca" category="paragraph">如果缺少最新的归档日志文件，则归档日志备份操作将失败。</block>
  <block id="c40f6313025aa58359a59a90734a5916" category="list-text">如果从归档日志目标位置删除归档日志文件，则对归档日志文件进行删减将失败。</block>
  <block id="d29fdb87410ef4cdcaa8a2d9fbefd327" category="list-text">即使从归档日志目标删除归档日志文件或归档日志文件损坏， SnapManager 也会整合归档日志备份。</block>
  <block id="1fa248da8339b489f4b3429001c9ac4a" category="paragraph">* 与更改目标数据库主机名相关的限制 *</block>
  <block id="c1e06b08c305c092fd257e2a4163de87" category="paragraph">更改目标数据库主机名时，不支持以下 SnapManager 操作：</block>
  <block id="fbf20e5bf15ddd6c6180eea677175ad2" category="list-text">从 SnapManager 图形用户界面更改目标数据库主机名。</block>
  <block id="9af3fd04b37d5f901fd46a4a5fe6fbfc" category="list-text">更新配置文件的目标数据库主机名后回滚存储库数据库。</block>
  <block id="186dcdcd270a045a67f1add02ffb7ee3" category="list-text">同时为新的目标数据库主机名更新多个配置文件。</block>
  <block id="de411387a32f456d8079d4983e7e3b39" category="list-text">在运行任何 SnapManager 操作时更改目标数据库主机名。</block>
  <block id="8b87b44f0bb7ee1de2cf466425f90aaa" category="paragraph">* 与 SnapManager 命令行界面或图形用户界面相关的限制 *</block>
  <block id="ef08bc94cd32cd72c4ac8914593ceb1a" category="list-text">从 SnapManager 图形用户界面生成的用于配置文件创建操作的 SnapManager 命令行界面命令没有历史记录配置选项。</block>
  <block id="a179950c1f4cd260861657321e3b056f" category="paragraph">您不能使用 profile create 命令从 SnapManager 命令行界面配置历史记录保留设置。</block>
  <block id="b20a656eaff3b5b24b090e39ff68b2b0" category="list-text">如果 Windows 客户端上没有可用的 Java Runtime Environment （ JRE ），则 SnapManager 不会在 Mozilla Firefox 中显示图形用户界面。</block>
  <block id="b5d4deb9c715a0bf6286c743409c3fa9" category="list-text">SnapManager 3.3 不会在 Windows Server 2008 和 Windows 7 上的 Microsoft Internet Explorer 6 中显示 SnapManager 图形用户界面。</block>
  <block id="5675f03b503bb3f5321b8b32cabe1344" category="list-text">使用 SnapManager 命令行界面更新目标数据库主机名时，如果存在一个或多个打开的 SnapManager 图形用户界面会话，则所有打开的 SnapManager 图形用户界面会话都将无法响应。</block>
  <block id="4c2b82b6ba9dd6fa86ffa3b37e84be3b" category="list-text">在 Windows 上安装 SnapManager 并在 UNIX 中启动 CLI 时，将显示 Windows 不支持的功能。</block>
  <block id="d534a8f2053c66fa1616a95fe00c2e40" category="paragraph">* 与 SnapMirror 和 SnapVault 相关的限制 *</block>
  <block id="b907e8cb115db8b5ef506c5f0c329e5c" category="list-text">在某些情况下，如果卷已建立 SnapVault 关系，则无法删除与第一个 Snapshot 副本关联的最后一个备份。</block>
  <block id="ace3932b81fe835a31331652bc564fb7" category="paragraph">只有在中断关系时，才能删除备份。此问题描述是由于基本 Snapshot 副本存在 ONTAP 限制。在 SnapMirror 关系中，基本 Snapshot 副本由 SnapMirror 引擎创建，而在 SnapVault 关系中，基本 Snapshot 副本是使用 SnapManager 创建的备份。对于每个更新，基本 Snapshot 副本都会指向使用 SnapManager 创建的最新备份。</block>
  <block id="4e9484d91da7d8295ac1bb0415efe4c6" category="paragraph">* 与 Data Guard 备用数据库相关的限制 *</block>
  <block id="265243ba7b9839c1b46b15f9b880664c" category="list-text">SnapManager 不支持逻辑数据防护备用数据库。</block>
  <block id="074975cb19394eb534230364b2f129de" category="list-text">SnapManager 不支持 Active Data Guard 备用数据库。</block>
  <block id="b8d83cf759652ef3c38a90d579f77c6b" category="list-text">SnapManager 不允许联机备份数据防护备用数据库。</block>
  <block id="9a24d96e1570202669bb34e67d8135df" category="list-text">SnapManager 不允许对数据防护备用数据库进行部分备份。</block>
  <block id="c10c3c416575f69f66628a9da49a9963" category="list-text">SnapManager 不允许还原数据防护备用数据库。</block>
  <block id="f6ec5f0677a566e6ef9238f239ea7389" category="list-text">SnapManager 不允许对数据防护备用数据库的归档日志文件进行删减。</block>
  <block id="93878da31b424f4c071ae6b6cc5b71f8" category="list-text">SnapManager 不支持数据防护代理。</block>
  <block id="6ae112f9841847705008c0e822045ee8" category="summary">在执行滚动升级之前，您必须确保您的环境满足特定要求。</block>
  <block id="d2bf8324cb24393bf5fccc23b12ea42d" category="list-text">如果您使用的是 SnapManager 3.1 之前的任何版本，并且希望滚动升级到 SnapManager 3.3 或更高版本，则需要先升级到 3.2 ，然后再升级到最新版本。</block>
  <block id="fca576574b10a5db044d44b072c10d6f" category="paragraph">您可以直接从 SnapManager 3.2 升级到 SnapManager 3.3 或更高版本。</block>
  <block id="2114d7ef6b76a875dadf92a42748e58c" category="list-text">必须安装要升级到的 SnapManager 版本。</block>
  <block id="cd6ea0f4a4e9a38817ed89940e276824" category="admonition">如果要从 SnapManager 3.1 之前的任何版本升级到 SnapManager 3.3 或更高版本，则必须先安装 SnapManager 3.2 并执行滚动升级。升级到 3.2 后，您可以安装 SnapManager 3.3 或更高版本，并再次滚动升级到 SnapManager 3.3 或更高版本。</block>
  <block id="d570c7af01e76460a52b90cdfc6d0591" category="list-text">必须安装要升级到的 SnapManager 版本支持的 SnapDrive for Windows 版本。</block>
  <block id="d0a0ebe1421f7f38189d66121410e16d" category="list-text">SnapManager 存储库利用率应为最小值。</block>
  <block id="9258fef0c81362935d41dcd65fe90419" category="list-text">如果要升级的主机正在使用存储库，则不能对使用同一存储库的其他主机执行 SnapManager 操作。</block>
  <block id="70af54f98818f2ae1482217a5aa6060d" category="paragraph">其他主机上计划或正在运行的操作将等待滚动升级完成。</block>
  <block id="0fb4697457f78fd2e0bcb33ce949c9e3" category="list-text">指向同一存储库数据库的配置文件必须在 SnapManager 服务器主机中使用不同的名称创建。</block>
  <block id="4ffc9a2f512d53259f5cba82a48b15b8" category="paragraph">如果使用同名配置文件，则涉及该存储库数据库的滚动升级将失败，并且不会发出警告。</block>
  <block id="21adbcccffaaec7c74d7404e9efc2bd1" category="list-text">不得对要升级的主机执行 SnapManager 操作。</block>
  <block id="6c5b15024d7437d51167e1176ec08141" category="admonition">随着要升级的主机的备份数量一起增加，滚动升级运行时间会延长。升级的持续时间可能因与给定主机关联的配置文件和备份数量而异。</block>
  <block id="912f7c4194aab76883082ab716783390" category="summary">您可以指定备份不符合保留策略删除的条件，以使备份无限期保留。</block>
  <block id="600994be8247555afac42bcbd778533c" category="list-text">要指定备份不受限制地保留，请输入以下命令： smo backup update -profileprofileprofile_name ｛ -labelLabel [data | -archivelogs] | -iddid ｝ -retain -unlimited</block>
  <block id="1e23a455c7ded245c33ee76924739370" category="summary">您可以使用 backup show 命令显示有关备份的详细信息，包括备份的保护状态，备份保留类以及主存储和二级存储上的备份。</block>
  <block id="f67891659c3ab626220214fe616d3d86" category="doc">smo backup show 命令</block>
  <block id="74bc1046de415ba713a25e60e966a470" category="paragraph">指定要显示备份的配置文件。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="513b4da2c1a6e6da650ce680ed40fee3" category="paragraph">指定备份的标签。</block>
  <block id="bf2f430c47e1f4e31e8831af0922f57f" category="paragraph">指定备份 ID 。</block>
  <block id="13bb33746f04c3c3a9f6d209b2d8f3d7" category="paragraph">在控制台中显示错误，警告和信息性消息，以及任何克隆和验证信息。</block>
  <block id="c231960d6c5040960235fad20925482d" category="paragraph">以下示例显示了有关备份的详细信息：</block>
  <block id="1b723ec888983c7e406e4d6c8da9dac9" category="inline-xref-macro">查看备份详细信息</block>
  <block id="13839c1fbfc2960eb839082d03362ac3" category="paragraph"><block ref="13839c1fbfc2960eb839082d03362ac3" category="inline-xref-macro-rx"></block></block>
  <block id="1a686762b5b8058f05b76b2530fbe690" category="summary">SnapManager 使用 SnapDrive for Windows 创建存储系统的 Snapshot 副本。SnapDrive 与 SnapManager 位于同一服务器上。</block>
  <block id="5b21f5a87f68ee1fb8819b7edc712763" category="doc">SnapDrive 服务器上的 SnapManager</block>
  <block id="23a81df4dcb97639779e9de806ec1f54" category="summary">清除缓存以删除存储的用户凭据后，您可以设置主机，存储库和配置文件的凭据。</block>
  <block id="c002886e4b240dbd752dba59d443007f" category="doc">清除凭据缓存后设置凭据</block>
  <block id="e76e541ce53b732bbfbb3a675e0cc54b" category="paragraph">您必须确保为存储库，配置文件主机和配置文件设置与先前相同的用户凭据。在设置用户凭据时，系统会创建加密的凭据文件。</block>
  <block id="8da53828be9a2b86cf5c08d999277cf4" category="paragraph">凭据文件位于 C ： \Documents and Settings\Administrator\Application Data\NetApp\SMO\3.3.0 。</block>
  <block id="b7ba2f93ad2527a42e5cf7c9804b71fd" category="paragraph">在 SnapManager 图形用户界面（ GUI ）中，如果存储库下没有存储库，请执行以下步骤：</block>
  <block id="97ccd32bc26d9fa109dcc197d38101b5" category="list-text">单击 * 任务 * &gt; * 添加现有存储库 * 以添加现有存储库。</block>
  <block id="65decb554e68db6dbfcfcdd49eff9120" category="list-text">执行以下步骤为存储库设置凭据：</block>
  <block id="3ce1b03b72c6e555c343a7cac488e96d" category="list-text">右键单击存储库并选择 * 打开 * 。</block>
  <block id="c43b340cc9f4b9eeeadc94959ebdea4b" category="list-text">在存储库凭据身份验证窗口中，输入用户凭据。</block>
  <block id="2b8a8627f9b24d4f66f92df9a17957b4" category="list-text">执行以下步骤为主机设置凭据：</block>
  <block id="088b4c86e2938f5b0427b102e062e5b2" category="list-text">右键单击存储库下的主机，然后选择 * 打开 * 。</block>
  <block id="0e63378285d89b2e96cfefc50ac5133a" category="list-text">在主机凭据身份验证窗口中，输入用户凭据。</block>
  <block id="28c0f9ef10b2c2cbf3f648cca65badb1" category="list-text">执行以下步骤为配置文件设置凭据：</block>
  <block id="db488c57800c86812819d946317f8b03" category="list-text">右键单击主机下的配置文件并选择 * 打开 * 。</block>
  <block id="503db0e634dfe4c54d1480d9dae1c003" category="list-text">在配置文件凭据身份验证窗口中，输入用户凭据。</block>
  <block id="bad9d8e04c6f312ead12fcac83a893af" category="summary">在两个节点都属于同一集群的 Oracle RAC 环境中，如果您尝试从与创建备份的节点不同的节点执行还原操作，则还原操作将失败。</block>
  <block id="e0c7aa339cec1206780eb77da6652a3a" category="doc">无法从未创建配置文件的一个 RAC 节点还原 RAC 数据库</block>
  <block id="95d4a68368946bce5d3c50e750d93e2f" category="paragraph">例如，如果您在节点 A 中创建备份并尝试从节点 B 还原，还原操作将失败。</block>
  <block id="91032ef3879e81166ea18a5c9de71609" category="paragraph">* 操作 *</block>
  <block id="fee67767826a49f6060b79299b827775" category="paragraph">在从节点 B 执行还原操作之前，请在节点 B 中执行以下操作：</block>
  <block id="71df07bae82f4736492836c391fd7805" category="list-text">添加存储库。</block>
  <block id="d0194e1d94bccb693fd18a740dca8bd8" category="list-text">运行命令 SMO profile sync 以同步此配置文件。</block>
  <block id="295316821c7bcc80a533d922c95b423f" category="list-text">运行命令 SMO credential set ，为要用于还原操作的配置文件设置凭据。</block>
  <block id="e0c92a603b86ed82d5ea9e400b49b0ba" category="list-text">运行命令 SMO profile update 以更新配置文件以添加新主机名和相应的 SID 。</block>
  <block id="89858b5df5ffdfc9412078cd597941d1" category="summary">SnapManager 主机是一个 Windows 服务器，它也运行其他 NetApp 产品。</block>
  <block id="a3ee97376f9511477c59da4788562501" category="doc">SnapManager 主机</block>
  <block id="7815bbf26aee2d47e1bd2be2f7603637" category="paragraph">SnapManager 主机安装了以下产品：</block>
  <block id="3e23b54348b2b8424e24a426570dc9f2" category="list-text">Host Utilities</block>
  <block id="e28c899c1cb6aedaaff04370686c842a" category="paragraph">SnapManager 主机作为服务运行。</block>
  <block id="1c4c996202874477061a619b6c544f7e" category="summary">此命令将删除特定受保护资源的用户凭据。</block>
  <block id="249fbb6516bd244ae7263f746c851d73" category="list-text">* —主机主机主机名 *</block>
  <block id="a3dd6739d89e6b415420af74bd4c24c5" category="paragraph">指定运行 SnapManager 的主机服务器的名称。</block>
  <block id="3fdae11842b52c7aa91043e99ac451f7" category="paragraph">host 参数包括以下选项：</block>
  <block id="756c61ec5db6c88eac23def596843be0" category="list-text">-name host_name ：指定要删除密码的主机的名称。</block>
  <block id="ff0c70bbdd86344c7341cd470424f0b0" category="list-text">-username user_name ：指定主机上的用户名。</block>
  <block id="255738724f887c36d5865df3b88e7e78" category="list-text">* — repository -dbname*</block>
  <block id="aa4e7c15bf882dba5e2d7f0b46de00ab" category="paragraph">repository 参数包括以下选项：</block>
  <block id="9870dde3c4552a9357a45f6ba623f111" category="list-text">-dbnamerepo_service_name ：指定存储配置文件的数据库的名称。使用全局名称或 SID 。</block>
  <block id="de92586e103a7d7feadef57ccaae6c7d" category="list-text">-host repo_host ：指定运行存储库数据库的主机服务器的名称或 IP 地址。</block>
  <block id="2f1b50242e7d445f6a9e4a09e4090148" category="list-text">-login-username repo_username ：指定访问存储库的数据库所需的用户名。</block>
  <block id="c9997298e7cf209624d3da15a3224bbb" category="list-text">-port repo_port ：指定用于访问存储库的数据库的 TCP 端口号。</block>
  <block id="04feca0ebc8cf528f8390d2db1e65e8a" category="list-text">* 配置文件 -name profile_name*</block>
  <block id="079d77ea5cde2c54d1e2928b6da934d8" category="paragraph">指定与数据库关联的配置文件。</block>
  <block id="273fb2a34e545fdfcb9287cd51e5ab63" category="paragraph">profile 参数包括以下选项：</block>
  <block id="31572e168e647a5bbd63cbb6f0d3020d" category="list-text">-name profilename ：指定要删除密码的配置文件的名称。</block>
  <block id="7fb23f303a7f8e6f7983ece1215215ab" category="paragraph">此示例将删除此配置文件的凭据。</block>
  <block id="e64c393a966f9d299f0692f8b7c0eacf" category="paragraph">此示例将删除存储库的凭据。</block>
  <block id="85563fcef5d514be5d242faa89ac15e8" category="paragraph">此示例将删除主机的凭据。</block>
  <block id="b4bf59b6cdfe3708e9093e4957f305ff" category="paragraph"><block ref="b4bf59b6cdfe3708e9093e4957f305ff" category="inline-xref-macro-rx"></block></block>
  <block id="493525da7c87d9185727bbd4e7212dda" category="summary">在从备用位置还原数据之前，您必须还原所需的文件系统并将其挂载到本地主机上。</block>
  <block id="9c65ee944596e00886d34fc8199fbc4b" category="doc">从文件系统还原数据</block>
  <block id="1576736de8a9267f6bda1a84c3a1d7b6" category="paragraph">您可以从备用位置调用还原操作，将文件从备用文件系统复制到活动文件系统。</block>
  <block id="b1542d863408f079e76ec551dfcfaba5" category="paragraph">要执行此操作，您必须通过创建还原规范文件来指定用于还原原始挂载点和原始 Snapshot 副本名称的备用挂载点。</block>
  <block id="0482f44aa9859cde9dcb67fee0b1e0b3" category="admonition">Snapshot 副本名称是一个必需的组件，因为同一文件系统可能会在一次备份操作中被多次 snapped （例如，一次用于数据文件，一次用于日志文件）。</block>
  <block id="f5a995e269bbb0b9d9175601268a2605" category="summary">创建配置文件时，您可以为此配置文件分配特定的 Oracle 数据库用户帐户。您可以为配置文件设置保留策略，并为每个保留类设置保留计数和持续时间。</block>
  <block id="c4cb0ba4c486271bf90eccf3bd080706" category="paragraph">如果不提供数据库的 -login ， -password 和 -port 参数值，则操作系统（ OS ）身份验证模式将使用默认凭据。</block>
  <block id="190800fddc5124b35d58f0d3669efd95" category="paragraph">创建配置文件时， SnapManager 会执行还原资格检查，以确定可用于还原数据库的还原机制。</block>
  <block id="66b387831d97d4a6dc274be55c917b73" category="paragraph">通过 SnapManager （ 3.2 或更高版本），您可以在创建新配置文件或更新现有配置文件时将归档日志文件与数据文件分开。使用配置文件分离备份后，您可以仅创建数据库的数据文件备份或归档日志备份。您可以使用新配置文件或更新后的配置文件创建包含数据文件和归档日志文件的备份。但是，您不能使用配置文件创建完整备份或还原设置。</block>
  <block id="b09a8eb387650aa674f79b8e671254ef" category="paragraph">* 用于创建完整备份和部分备份的配置文件 *</block>
  <block id="31366e455f9e6d13b4e71728c5ea18a8" category="paragraph">您可以创建配置文件来创建完整的数据库备份，其中包含数据文件，控制文件和归档日志文件，以及包含指定数据文件或表空间，所有控制文件和所有归档日志文件的部分数据库备份。SnapManager 不允许使用为完整备份和部分备份创建的配置文件创建单独的归档日志备份。</block>
  <block id="613503f61108644326d168b4b8891fe5" category="paragraph">* 用于创建仅数据文件备份和仅归档文件备份的配置文件 *</block>
  <block id="295268113eb53818c888fa8e07f25505" category="paragraph">创建新配置文件时，您可以包括 -separate archivelog-backups ，以便将归档日志备份与数据文件备份分开。您还可以更新现有配置文件，以便将归档日志备份与数据文件备份分开。</block>
  <block id="5dd5136d00c05f9de41804aa74c1d2b4" category="paragraph">通过使用新的配置文件选项分隔归档日志备份，您可以执行以下 SnapManager 操作：</block>
  <block id="05b23b911b292419d6d25d8759010b42" category="list-text">创建归档日志备份</block>
  <block id="95ab894bdf9fa59f59c1596ac1b628ad" category="list-text">删除归档日志备份</block>
  <block id="f4793ec99e20f49fe67bcee76c4ba68b" category="list-text">挂载归档日志备份</block>
  <block id="b47e7dcb8e5a158cb7997e69c46dcd8d" category="list-text">释放归档日志备份</block>
  <block id="0d95a732a17993870d94931e6a679ae3" category="paragraph">创建配置文件以将归档日志备份与数据文件备份分开时，如果创建该配置文件的数据库中不存在归档日志文件，则活动文件系统中不存在警告消息归档日志文件。此时将显示早于 &lt;archive log threaded version&gt; 日志文件的归档日志文件版本不会包含在备份中。即使为此数据库创建备份，归档日志文件也不会在数据库备份中可用。</block>
  <block id="6e4da067204263ff82ab8b6db1dc1a9f" category="admonition">如果在创建配置文件时遇到错误，请使用 smsystem dump 命令。创建配置文件后，如果遇到错误，请使用 smooperation dump 和 smoprofile dump 命令。</block>
  <block id="9cff9146beef2e12f0b93d7e68df27d8" category="list-text">要使用用户名，密码和端口（ Oracle 身份验证）创建配置文件，请输入以下命令： smo profile create -profileprofile "-profile-passwordprofile_password] -repositor-dbnamerepo_dbname-host-portrepo_port-login-usernamerepo_username-database-dbnamedb_dbname-hostdb_host "-siderman_db] -login-userworedb_username-zhn_trusername-zhuny_ &lt;-mail-trusername-try_try_trusername-zhun-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.un.</block>
  <block id="75f24d083dfd964392bbd22aa71c29b6" category="paragraph">在创建配置文件时，您还可以根据要访问数据库的方式包括其他选项。</block>
  <block id="5918c62746fe65a856c4a9067497e67b" category="paragraph">* 要使用数据库身份验证创建配置文件 *</block>
  <block id="4b72c8f14e4126024f6f2221c444a997" category="paragraph">指定数据库登录详细信息。</block>
  <block id="52337cac5cf5bc67b54410449eb1a1e2" category="paragraph">* 您要为备份指定备份保留策略 *</block>
  <block id="9180df2c9842647cb895ed6c341b4209" category="paragraph">指定保留类的保留计数或持续时间，或者同时指定这两者。持续时间以类的单位为单位（例如，小时表示每小时，天表示每天）。</block>
  <block id="afa59e97fe180600ec9e1f580578659b" category="list-text">-hourly 是每小时保留类，其中，（ -count n ）（ -duration m ）分别是保留计数和保留持续时间。</block>
  <block id="b8c4de14cfacfcfea71fe49e1137ff2b" category="list-text">-daily 是每日保留类，其保留计数和保留持续时间分别为 "-count n] 和 -durationm] 。</block>
  <block id="22d27c578044fadb06afc5e8adc4fa21" category="list-text">-weekly 是每周保留类，其中，（ -count n] 个（ -duration m ）分别是保留计数和保留持续时间。</block>
  <block id="862038d3919aa12c6199061e219a98b0" category="list-text">-monthly 是每月保留类别，其中，（ -count n] 个（ -durationm ）分别是保留计数和保留期限。</block>
  <block id="98ff82a7b9d9e96c925e304e2d74cfd6" category="paragraph">* 您希望为数据库操作的完成状态启用电子邮件通知 *</block>
  <block id="58fbf14813de8f6ab327e4d0e018c85e" category="paragraph">指定以下选项和变量：</block>
  <block id="d081d70707d7e1061c86692a4f00283a" category="list-text">使用 -summary-notification ，您可以为存储库数据库下的多个配置文件配置摘要电子邮件通知。</block>
  <block id="2dcce935f697d69699c4bf64b39ad51c" category="list-text">notification 用于接收有关配置文件数据库操作完成状态的电子邮件通知。</block>
  <block id="a1bcfa1e4ac605287ccef3698ff7d900" category="list-text">通过 -success-emailemailemail_address2 ，您可以收到有关使用新配置文件或现有配置文件成功执行数据库操作的电子邮件通知。</block>
  <block id="55311a2f7811d3ba64c0074645fcd4a3" category="list-text">通过 -failure-emailemailemail_address2 ，您可以收到有关使用新配置文件或现有配置文件执行的数据库操作失败的电子邮件通知。</block>
  <block id="28d1892b1254e26fbc55b8c1f33951da" category="list-text">-subjectsubject_text 指定创建新配置文件或现有配置文件时电子邮件通知的主题文本。如果未为存储库配置通知设置，而您尝试使用命令行界面配置配置文件或摘要通知，则控制台日志中会记录以下消息： SMO-145777 ： Notification Settings not configured 。</block>
  <block id="8e88287e87d87ff0f96e54c0dbcedab9" category="paragraph">如果您已配置通知设置，并且尝试使用命令行界面配置摘要通知，但未启用存储库的摘要通知，则控制台日志中会显示以下消息： SMO-14575 ： summary notification configuration not available for this repository______</block>
  <block id="13410de4da9a3ba8cbc34234ee2666df" category="paragraph">* 您希望将归档日志文件与数据文件分开备份 *</block>
  <block id="de16d6012da9afcc0ad1591e36e35dd7" category="list-text">使用 -separate archivelog-backups 可以将归档日志备份与数据文件备份分开。</block>
  <block id="490f4b6ab99c55e760d0802a9e156c3f" category="list-text">-retain-archivelog-backups 用于设置归档日志备份的保留期限。您必须指定正保留期限。</block>
  <block id="c0df644f2b9982692349c0e1d719934d" category="paragraph">归档日志备份会根据归档日志保留期限进行保留。数据文件备份会根据现有保留策略进行保留。</block>
  <block id="50c9e0e368bde66f17795aeb78220a47" category="list-text">-include-with 联机备份包括归档日志备份以及联机数据库备份。</block>
  <block id="cd5dae7880ae188da7340ab20de0a094" category="paragraph">通过此选项，您可以同时创建联机数据文件备份和归档日志备份以进行克隆。如果设置了此选项，则每当创建联机数据文件备份时，都会立即创建归档日志备份以及数据文件。</block>
  <block id="de42d926833a5acd7466f32ca7e41bad" category="list-text">-no-include-with 联机备份不包括归档日志备份和数据库备份。</block>
  <block id="e52f7f24d286a178a0b2175fef362031" category="paragraph">* 您可以在成功执行配置文件创建操作 * 后收集转储文件</block>
  <block id="dbc5f9fd33db3897aeb07e17d5c41fe8" category="paragraph">在 profile create 命令的末尾指定 -dump 选项。</block>
  <block id="51cc7c9212a2babc49b1db3ccdf70985" category="paragraph"><block ref="51cc7c9212a2babc49b1db3ccdf70985" category="inline-xref-macro-rx"></block></block>
  <block id="9e8f2a0f07701a71aec4bae1fc4bc101" category="summary">转储文件是一个压缩日志文件，其中包含有关 SnapManager 及其环境的信息。创建的不同类型的日志文件包括操作，配置文件和系统转储文件。</block>
  <block id="350a71b55d9a4e3c21f67fdadf25673e" category="paragraph">您可以使用 dump 命令或图形用户界面（ GUI ）中的 * 创建诊断 * 选项卡来收集有关操作，配置文件或环境的信息。系统转储不需要配置文件；但是，配置文件和操作转储需要配置文件。</block>
  <block id="b17fe1ef5a04284f46c552b8d266ede5" category="paragraph">SnapManager 在转储文件中包含以下诊断信息：</block>
  <block id="dfbcee394b8b00fb5d5f0d3378c4545e" category="list-text">已执行的步骤</block>
  <block id="783485f7497110da2f0a3dd5a1c9333e" category="list-text">每个步骤完成的时间长度</block>
  <block id="a708b0e4a7e3923125ed307b21dab1c7" category="list-text">每个步骤的结果</block>
  <block id="a90a01480f4c5cb53a880f563f72fcbe" category="list-text">操作期间发生的错误（如果有）</block>
  <block id="02a4cc50611c3982e291d98aae7276d5" category="admonition">SnapManager 日志文件或转储文件仅为 root 用户和属于 root 用户组的其他用户启用读写权限。</block>
  <block id="95a622e13244ef154a8bf4e760c591d5" category="paragraph">SnapManager 还在文件中包含以下信息：</block>
  <block id="a560881bf7f7f627a851448373765d60" category="list-text">操作系统版本和架构</block>
  <block id="5d096dd852b0fd003ba4c589789b6337" category="list-text">环境变量</block>
  <block id="380d794ec6ab92f935f1f4fa78d91846" category="list-text">Java 版本</block>
  <block id="6427fc182e2971131321c29fb2543661" category="list-text">SnapManager 版本和架构</block>
  <block id="c7c05e402ec73dd3098d0f182cad799a" category="list-text">SnapManager 首选项</block>
  <block id="0051aa9537c84ac2d10e91e5e1b57cc4" category="list-text">SnapManager 消息</block>
  <block id="17ff9f4d6cbc181b301c704ab9a1ff0e" category="list-text">log4j 属性</block>
  <block id="7ca1b5d6f7d02a3abe10a5d58260b694" category="list-text">SnapDrive 版本和架构</block>
  <block id="4bc6fda867aac181ae226411ab38a239" category="list-text">SnapDrive 日志文件</block>
  <block id="e46edc4c497fa4eea3e3c20ed77e93aa" category="list-text">Oracle 版本</block>
  <block id="562b4898913242a5793b64973397b140" category="list-text">Oracle OPatch 本地清单详细信息</block>
  <block id="37b490f79d5faf55781ab92d8a7bf92d" category="list-text">存储库数据库 Oracle 版本</block>
  <block id="6528e01e963e5631df535e6c8c8ba350" category="list-text">目标数据库类型（独立）</block>
  <block id="cb47cb7aa096342f7191d4bfc583b359" category="list-text">目标数据库角色（主数据库，物理备用数据库或逻辑备用数据库）</block>
  <block id="93f82f87ffe4d507e8ef4e76190ccb46" category="list-text">目标数据库 Oracle Recovery Manager （ RMAN ）设置（无 RMAN 集成，具有控制文件的 RMAN 或具有目录文件的 RMAN ）</block>
  <block id="945d1665bcadbc1558ac4ac437d16e4c" category="list-text">目标数据库 Oracle 版本</block>
  <block id="d2c2d4919794a99e93ef9af19dbcd20a" category="list-text">目标数据库的系统标识符（ SID ）</block>
  <block id="8d37b79747fab7e5c6a068623cc30360" category="list-text">RMAN 数据库名称和 TNS 连接名称</block>
  <block id="6aa3a0dedec629394ad1823e7df724d0" category="list-text">存储库数据库服务名称</block>
  <block id="15107acb690899da25188a81c75b673a" category="list-text">主机上安装的数据库实例</block>
  <block id="be3643b5fe1d2b9842a9f2fe19758b7e" category="list-text">配置文件描述符</block>
  <block id="5ea4264327f033ce67d10b8648a29c96" category="list-text">共享内存最大值</block>
  <block id="0ae9b1d1b398f4919b335cf77aa0cbfc" category="list-text">交换空间信息</block>
  <block id="f81ed0f6b53565401923f41e395c55d4" category="list-text">内存信息</block>
  <block id="5c732b4c65966b746ee76ebef412e6cd" category="list-text">多路径环境</block>
  <block id="e24c1a9cf8da825362655e6caeb27893" category="list-text">Host Utilities 版本</block>
  <block id="b02aefc1adbcef9b933e5b48298f0031" category="list-text">适用于 Windows 的 Microsoft Internet 小型计算机系统接口（ iSCSI ）软件启动程序版本</block>
  <block id="5a487f9d13084cf8634fdb87c6f352b5" category="list-text">system verify 命令的输出</block>
  <block id="6bf5315a76c6c130b52824105e796bfe" category="paragraph">转储文件还列出了 Windows 上的 SnapManager 限制。</block>
  <block id="7b7763c2115c7dbcf52db8858282c3ad" category="paragraph">SnapManager 转储文件还包含 SnapDrive 数据收集器文件和 Oracle 警报日志文件。您可以使用 smo operation dump 和 smo profile dump 命令收集 Oracle 警报日志文件。</block>
  <block id="84b699789232e9bbb8c1a2fa95fa5190" category="admonition">系统转储不包含 Oracle 警报日志；但是，配置文件和操作转储包含警报日志。</block>
  <block id="61de406a454d999c6a99a94ea2ae52cf" category="paragraph">即使 SnapManager 主机服务器未运行，您也可以使用命令行界面（ CLI ）或 GUI 访问转储信息。</block>
  <block id="345d26222a5db0ee596a81597125885b" category="paragraph">如果遇到无法解决的问题，您可以将这些文件发送到 NetApp 全球服务。</block>
  <block id="7a12912227960abf5d00b67da2557981" category="summary">您可以使用命令行界面（ CLI ）在一个或多个 SnapManager 服务器主机上执行回滚。</block>
  <block id="021e71479f67720c93f8c8d0ca06685f" category="doc">在一台或多台主机上执行回滚</block>
  <block id="a707eb58d9d1f8ab2e7af279245f6baf" category="paragraph">您必须确保执行回滚的所有前提条件均已完成。</block>
  <block id="341a06303098c79242d5cec66f9ad510" category="list-text">要在单个主机上执行回滚，请输入以下命令： smorepository rollback-repository-dbnamerepo_service_name-host-login-usernamerepo_username-port-rollbackhosthost_wing_target_database</block>
  <block id="b415b846aa2b50e3222b57168749ebc3" category="paragraph">以下示例显示了用于回滚主机 A 上挂载的所有目标数据库以及存储库主机 repo_host 上名为 repoA 的存储库数据库的命令：</block>
  <block id="3ab4858ab62e09410d35e3651917b0d7" category="list-text">要在多个主机上执行回滚，请输入以下命令： smorepository rollback-repository-dbnamerepo_service_name-host-login-usernamerepo_username-port-rollbackhosthost_wing_target_database1 ， host_wing_target_database2</block>
  <block id="c9d597161984120108b41cefb548872f" category="admonition">对于多个主机，请输入以逗号分隔的主机名，并确保逗号和下一个主机名之间没有空格。此外，请确保在双引号内输入一组完整的多个主机名。</block>
  <block id="5ccfbab16dcded1298a10f6421a94b52" category="paragraph">以下示例显示了用于回滚主机，主机 A ，主机 B 上挂载的所有目标数据库的命令，以及位于存储库主机 repo_host 上名为 repoA 的存储库数据库：</block>
  <block id="4aa495595cdda39ace85a9b2f7703d72" category="paragraph">与主机的目标数据库的配置文件关联的主机，配置文件，计划，备份和克隆将还原到早期的存储库。</block>
  <block id="27a272130e72608bb5d6283ec4c604b1" category="paragraph"><block ref="27a272130e72608bb5d6283ec4c604b1" category="inline-xref-macro-rx"></block></block>
  <block id="c0c875ad9ddf285ca41a127bd561a0a1" category="summary">SnapManager 会根据特定返回代码处理自定义脚本。例如，如果自定义脚本返回值 0 ， 1 ， 2 或 3 ，则 SnapManager 将继续执行克隆过程。返回代码还会影响 SnapManager 处理和返回脚本执行的标准输出的方式。</block>
  <block id="9180bd8f247c4ea4eadd9dd82792dae7" category="doc">在自定义脚本中处理时出错</block>
  <block id="0fdb3aabc79057b1c0180e5743ff53f8" category="cell">返回代码</block>
  <block id="7648d9ab1a04f53faf87a49b8f89c93a" category="cell">继续处理此操作</block>
  <block id="cfcd208495d565ef66e7dff9f98764da" category="paragraph">0</block>
  <block id="101238614d0a23207d8c5d7d4b1bd247" category="paragraph">脚本已成功完成。</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="paragraph">是的。</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="paragraph">1.</block>
  <block id="05a5886f752e5c118b9f90b301d56cb4" category="paragraph">脚本已成功完成，并显示信息性消息。</block>
  <block id="1712c5d51e9f6bdcd4527f4756e718ed" category="paragraph">此脚本已完成，但包含警告</block>
  <block id="eccbc87e4b5ce2fe28308fd9f2a7baf3" category="paragraph">3.</block>
  <block id="fad989dfe9a1ff9168e7cbddb84d32f1" category="paragraph">脚本失败，但操作仍会继续。</block>
  <block id="74a406a2c3f0c56ee6a2f817eae173f6" category="paragraph">4 或 &gt;4</block>
  <block id="5f3784189a000fd744b7ac223d15f886" category="paragraph">脚本失败，操作停止。</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="paragraph">否</block>
  <block id="845cf4b54aa2bbda326a8db70ba86c20" category="summary">通过 SnapManager for Oracle ，您可以维护与单个或多个配置文件关联的 SnapManager 操作历史记录。您可以从 SnapManager 命令行界面（ CLI ）或图形用户界面（ GUI ）维护历史记录。您可以将操作历史记录作为报告查看，并使用此报告进行审核合规性检查。</block>
  <block id="fa9dfc225a7ba597ced8c8d49bf60c65" category="doc">维护 SnapManager 操作历史记录</block>
  <block id="0cf7d10a893c9a0ced39b65e33ff13bf" category="paragraph">您可以维护以下 SnapManager 操作的历史记录：</block>
  <block id="8e7c948ac95d56d3bd3568a70717465d" category="list-text">创建备份</block>
  <block id="f7647918105611df027a346f16b875a3" category="list-text">备份验证</block>
  <block id="30e05a58d321ad991d3f629458fd2c0f" category="list-text">备份还原</block>
  <block id="47f88ad430d735d08f5e105b2b5b5eda" category="list-text">克隆创建</block>
  <block id="894481deae877c0fd52a5a27321d7583" category="paragraph">SnapManager 操作的历史记录信息会根据保留情况进行维护。您可以为每个受支持的 SnapManager 操作配置不同的保留类。</block>
  <block id="1209cb42c6b02cc34c7f3c9b3b8df3ef" category="paragraph">以下是您可以分配的一些保留类：</block>
  <block id="58fd2b2308056ad80255a322b305742b" category="list-text">天数</block>
  <block id="44c75ab84ff9e291af02a433336d2daa" category="list-text">周数</block>
  <block id="07c5a43cb4654bfe6487e58646d00898" category="list-text">月数</block>
  <block id="bbbdcef88f86b6d9b2497ff3c9e77a10" category="list-text">操作数</block>
  <block id="ee547af4eb020eff76967952cec64556" category="paragraph">根据保留情况， SnapManager 会自动清除历史记录。您也可以手动清除 SnapManager 操作的历史记录。如果删除或销毁此配置文件，则会删除与此配置文件关联的所有历史记录信息。</block>
  <block id="d804b530ed0e1e2031fb9f6f1c7fd5b0" category="admonition">回滚主机后，您无法查看历史记录详细信息，也无法执行与配置文件关联的任何历史记录相关操作，这些配置文件已配置为进行历史记录维护。</block>
  <block id="d7794d3e97b197a03209114eba6e1544" category="summary">还原规范文件是一个 XML 文件，其中包含可从中还原文件的原始位置和备用位置。SnapManager 使用此规范文件从指定位置还原文件。</block>
  <block id="b4fae99eb3f0f152345eb2005dac9a09" category="paragraph">您可以使用任何文本编辑器创建还原规范文件。您必须对文件使用 .xml 扩展名。</block>
  <block id="c48dcf2228b43ebc42d03e0083ecce22" category="list-text">打开文本文件。</block>
  <block id="2e967cbdfcb51dedb288e5195579571f" category="list-text">输入以下内容： &lt;restore-specification xmlns=<block ref="cf18fac20c5266283319480464e24a19" category="inline-link-rx"></block></block>
  <block id="d895b54e146c7d8ecb3ca0935ee38bed" category="list-text">使用以下示例中所示的格式输入任何文件映射信息：</block>
  <block id="cf1282b9bc733f7d5608b3db67be7c0f" category="paragraph">文件映射指定从何处还原文件。原始位置是指备份时文件在活动文件系统上的位置。备用位置是指从其中还原文件的位置。</block>
  <block id="89ad118b9c0761cabb05a554d686a285" category="list-text">使用示例中所示的格式输入任何挂载的文件系统映射信息：</block>
  <block id="685ef42c46b540900544580dbfc06bda" category="paragraph">mountpoint 是指目录路径 C ： \myfs 。mountpoint 映射指定从中还原文件的挂载点。原始位置是备份时挂载点在活动文件系统中的位置。备用位置是指用于还原原始位置中文件的挂载点。snapname 是备份原始文件的 Snapshot 副本的名称。</block>
  <block id="631a6b666ccd861b9106319bdf9be4d7" category="admonition">Snapshot 副本名称是必需的组件，因为同一文件系统可以在一个备份操作中使用多次（例如，一次用于数据文件，一次用于日志）。</block>
  <block id="8182fdf9d2169ee9b85193268c997d2b" category="list-text">输入以下内容： &lt;/restore-specification &gt;</block>
  <block id="514f3f6a9b097ed97bddb8b535114324" category="list-text">将此文件另存为 .xml 文件并关闭规范。</block>
  <block id="1f69006fa964a54f04246a22652f7bb2" category="summary">通过 SnapManager ，您可以接收有关配置文件执行的数据库操作的完成状态的电子邮件通知。SnapManager 会生成电子邮件，并帮助您根据数据库操作完成状态采取适当的操作。配置电子邮件通知是一个可选参数。</block>
  <block id="b12b0aaf805754a3dba6dc3d42791bca" category="doc">配置电子邮件通知</block>
  <block id="fb4166c3fdabea385dc558c5e8402ca9" category="paragraph">您可以将单个配置文件的电子邮件通知配置为配置文件通知，并将存储库数据库上的多个配置文件的电子邮件通知配置为摘要通知。</block>
  <block id="7e5633e1c796017ed8c4e4c8d335f80a" category="paragraph">* 配置文件通知 *</block>
  <block id="17609bcf29cab19b3b40399da3f533f9" category="paragraph">对于单个配置文件，您可以收到一封有关数据库操作成功或失败的电子邮件。</block>
  <block id="de59e7d66adfc656ad8cab5076111115" category="admonition">默认情况下，数据库操作失败时会启用电子邮件通知。</block>
  <block id="b4ac9a29fb1d7a01ff55b16072944cc9" category="paragraph">* 摘要通知 *</block>
  <block id="cc026fb4eb519413c0f05b8c71aead8a" category="paragraph">通过摘要通知，您可以接收有关使用多个配置文件执行的数据库操作的摘要电子邮件。您可以启用每小时，每天，每周或每月通知。</block>
  <block id="7488840b8a446d52ab0296dd67bdec6d" category="admonition">在 SnapManager 3.3 中，只有在指定了必须发送通知的主机服务器时，才会发送摘要通知。如果从 3.3 之前的版本升级 SnapManager ，则如果未在摘要通知配置中指定主机服务器，则可能不会发送摘要通知。</block>
  <block id="793eefe779400ce3e531ad6324112dfb" category="admonition">如果在 Real Application Clusters （ RAC ）环境中数据库的一个节点中创建存储库并启用摘要通知，则稍后在将同一存储库添加到数据库的另一个节点时，系统会发送两次摘要通知电子邮件。</block>
  <block id="d874dbfa2ede62bd2dce028f1ca161dd" category="paragraph">您可以一次使用配置文件级别的通知或摘要通知。</block>
  <block id="60a96403d88b79983f8209d2b3be2158" category="paragraph">SnapManager 为以下配置文件执行的数据库操作启用电子邮件通知：</block>
  <block id="d62e2c5da368ce88257cf403d04e3f40" category="list-text">在主存储上创建备份</block>
  <block id="c0407ba9e12515280efc0fea9f89e131" category="list-text">还原备份</block>
  <block id="d239136e2efc3cb7fd2971dce8a40d54" category="list-text">创建克隆</block>
  <block id="14481fabf7b0c133df8a3f7ddc81851e" category="list-text">验证备份</block>
  <block id="0686ec01408b2d89c2eabf519fe6c57e" category="paragraph">在启用了电子邮件通知的情况下创建或更新配置文件后，您可以将其禁用。如果禁用电子邮件通知，则不再收到这些配置文件执行的数据库操作的电子邮件警报。</block>
  <block id="c2153dc09021426aaedbcfd7942326d8" category="paragraph">您收到的电子邮件包含以下详细信息：</block>
  <block id="c95fa44a3f3b008a2da372e9a45d689f" category="list-text">数据库操作的名称，例如备份，还原或克隆</block>
  <block id="228e88b657da369aadeb2575e9a102b0" category="list-text">数据库的系统标识符</block>
  <block id="2ee0dd142262cd127ab3c30919ebffb8" category="list-text">数据库操作的开始和结束时间</block>
  <block id="b752e83c6f78fc2607abe8885a1c093d" category="list-text">数据库操作的状态</block>
  <block id="427404e649d428cec2fdc25a3bd414d8" category="list-text">错误消息（如果有）</block>
  <block id="72c88ae2b6b9488c62538cd1a7d45d70" category="list-text">警告消息（如果有）</block>
  <block id="483ae632a0b493ca905cfd4c71a92d77" category="paragraph">您可以配置以下内容：</block>
  <block id="aeb0e60afebe90117084b11ecb9f815f" category="list-text">存储库的邮件服务器</block>
  <block id="00f453e49230643684cbb65ff3adac6d" category="list-text">新配置文件的电子邮件通知</block>
  <block id="a62ac6a4097c1df7bda6ae9b53d69a27" category="list-text">现有配置文件的电子邮件通知</block>
  <block id="e81dc891db3c2505342c845171458ff6" category="list-text">存储库下多个配置文件的摘要电子邮件通知</block>
  <block id="511b708e293205e4582449d0f9c7fa01" category="admonition">您可以从命令行界面（ CLI ）和图形用户界面（ GUI ）配置电子邮件通知。</block>
  <block id="d2f173179f4cfc044ab45cdb16365344" category="summary">SnapManager 3.1 支持滚动升级方法，可用于按主机交错升级主机。</block>
  <block id="bd0b0c24c32a2dab4b03878b9a9d0423" category="doc">使用滚动升级升级升级 SnapManager 主机</block>
  <block id="5e2292f4efd3f1e85872df018cf5e0ac" category="paragraph">SnapManager 3.0 或更早版本仅允许同时升级所有主机。这会导致所有 SnapManager 主机停机，并在升级操作期间按计划执行操作。</block>
  <block id="0683c773b2f21d7e0322c7d250de4772" category="paragraph">滚动升级具有以下优势：</block>
  <block id="62be90bd158e02a58bd4b1cf74275e6e" category="list-text">提高了 SnapManager 性能，因为一次只升级一个主机。</block>
  <block id="f9fbb1250acf16816caeabb53cd745e5" category="list-text">能够在升级其他主机之前测试一台 SnapManager 服务器主机中的新功能。</block>
  <block id="959c9ef3ccf8c81cee3157c4dab82d3e" category="admonition">您只能使用命令行界面（ CLI ）执行滚动升级。</block>
  <block id="80dc37398f3bc1e51ca72b14ca1ccd5c" category="image-alt">SCRN en drw 滚动升级架构</block>
  <block id="e30c0a5ec6a7a8995ae4de2239ccf201" category="paragraph">成功完成滚动升级后， SnapManager 将托管，配置文件，计划，备份， 与目标数据库配置文件关联的克隆将从早期 SnapManager 版本的存储库数据库迁移到新版本的存储库数据库。有关使用在早期 SnapManager 版本中创建的配置文件，计划，备份和克隆执行的操作的详细信息，现在可从新版本的存储库数据库中获取。您可以使用 user.config 文件的默认配置值启动 GUI 。不考虑在早期版本的 SnapManager 的 user.config 文件中配置的值。</block>
  <block id="1b04ba4a87ed3f8a95970117fa4d16d5" category="paragraph">升级后的 SnapManager 服务器现在可以与升级后的存储库数据库进行通信。未升级的主机可以使用早期版本的 SnapManager 的存储库来管理其目标数据库，从而可以使用早期版本中提供的功能。</block>
  <block id="8244ebf91af306cd9a0b7bfaf5e2c2ff" category="admonition">在执行滚动升级之前，您必须确保可以解析存储库数据库下的所有主机。有关如何解析主机的信息，请参见 _Oracle SnapManager for UNIX_ 管理指南中的故障排除部分。</block>
  <block id="d4b2c6dc6c2edd59aa099a3a329f5cef" category="paragraph"><block ref="d4b2c6dc6c2edd59aa099a3a329f5cef" category="inline-xref-macro-rx"></block></block>
  <block id="abd10721dfe76ffee7fdcbfbf27faf04" category="summary">SnapManager 会自动卸载备份，使其不可供主机服务器使用。如果您使用 Oracle 恢复管理器（ RMAN ）等外部工具访问备份中的文件，则还可以通过 SnapManager 卸载，并更改备份状态以删除访问权限。</block>
  <block id="6115c102c20ee584e6c1a5f337555c3a" category="paragraph">您可以选择在卸载备份操作成功或失败后收集转储文件。</block>
  <block id="ebf3e630ab67f632b2b371abef2dea6a" category="list-text">输入以下命令： smo backup unmount -profile profile_name ｛ labelLabel [data | -archivelogs] | -iddid ｝ （ -quiet | -verbose ） -dump-force-verbose</block>
  <block id="80e3ec797d23ec0454f26bb0ae54eaa4" category="inline-xref-macro">smo backup unmount 命令</block>
  <block id="298ec9eed02af69f6cd08854c1575ccd" category="paragraph"><block ref="298ec9eed02af69f6cd08854c1575ccd" category="inline-xref-macro-rx"></block></block>
  <block id="601c8be9decd54319bb4d36302eff9a8" category="summary">您可以运行 help 命令来显示有关 SnapManager 命令及其选项的信息。如果不提供命令名称，则会显示有效命令的列表。如果提供命令名称，则会显示该命令的语法。</block>
  <block id="04b298bb0537603a3b8c066627ce6bd4" category="doc">smo help 命令</block>
  <block id="8771970d19d429823ebcd7488b906ecf" category="paragraph">以下是可与此命令结合使用的一些命令名称：</block>
  <block id="402051f4be0cc3aad33bcf3ac3d6532b" category="list-text">backup</block>
  <block id="d329fd777726c300d7a044e482b967e7" category="list-text">clone</block>
  <block id="1d4e7fc631621eb16dcc143dc1c47d14" category="list-text">cmdfile</block>
  <block id="7c7c74ef60d5950b8abb1ba20e964cdf" category="list-text">凭据</block>
  <block id="776e6c3d14fd9df9fc13e130d598c448" category="list-text">诊断</block>
  <block id="b5eda0a74558a342cf659187f06f746f" category="list-text">获取</block>
  <block id="0cfd653d5d3e1e9fdbb644523d77971d" category="list-text">通知</block>
  <block id="657f8b8da628ef83cf69101b6817150a" category="list-text">帮助</block>
  <block id="3cd15f8f2940aff879df34df4e5c2cd1" category="list-text">历史记录</block>
  <block id="f7235a61fdc3adc78d866fd8085d44db" category="list-text">操作</block>
  <block id="a24bcf2198b1b13ad985304483f7f324" category="list-text">插件</block>
  <block id="b3f2035551f6e48c67489ace9f588f94" category="list-text">存储库</block>
  <block id="799855594adc0f2bd7302c69d3234b5a" category="list-text">schedule</block>
  <block id="ddecebdea58b5f264d27f1f7909bab74" category="list-text">storage</block>
  <block id="54b53072540eeeb8f8e9343e71f28176" category="list-text">系统</block>
  <block id="2af72f100c356273d46284f6fd1dfc08" category="list-text">version</block>
  <block id="2501940dbbaa0e0bc035a57048a7724e" category="summary">通过适用于 Oracle 的 SnapManager （ 3.2 或更高版本），可以更新 SnapManager 配置文件中目标数据库的主机名。</block>
  <block id="e61c029f1c002660903a8906039a15ae" category="doc">更新与配置文件关联的目标数据库主机名</block>
  <block id="f7e4e38e7b78f78e664201776dcbf759" category="list-text">本地用户的主目录必须了解配置文件到存储库的映射。</block>
  <block id="bddf809b81540c390a83df973c74bfa4" category="list-text">必须关闭 SnapManager 图形用户界面（ GUI ）会话。</block>
  <block id="afff92a1ba4f5546940a1256d77f6afe" category="paragraph">您只能使用命令行界面使用新主机名更新配置文件。</block>
  <block id="e81ee13bee2fabc14c8f6794e5943ac6" category="paragraph">* 不支持在配置文件中更改目标数据库主机名的情形 *</block>
  <block id="c7fd4c21de9052fe7f321d81a4a748f5" category="paragraph">不支持在以下情况下更改配置文件中的目标数据库主机名：</block>
  <block id="a03efa77d9c66401bbff5c45fdb68296" category="list-text">使用 SnapManager 图形用户界面更改目标数据库主机名</block>
  <block id="658434b67d962936b3d75129f67ac7f8" category="list-text">更新配置文件的目标数据库主机名后回滚存储库数据库</block>
  <block id="cf1863fb1ba5c8997a8209301e6f857e" category="list-text">运行一个命令，为新的目标数据库主机名更新多个配置文件</block>
  <block id="0bac6fac443f9411ce9825fb19879bd0" category="list-text">在运行任何 SnapManager 操作时更改目标数据库主机名</block>
  <block id="b749915cdec9c38cdd33c17643d0c441" category="admonition">更新配置文件中的目标数据库主机名后，只会更改目标数据库主机名。配置文件上设置的所有其他配置参数均会保留。</block>
  <block id="3f9d004aa2e0e57a4513c4393f2aae50" category="paragraph">更新目标数据库主机名后，如果克隆或挂载的备份在新主机中不可用，则无法删除或卸载此备份。在这种情况下，从新主机运行 SnapManager 操作会导致故障以及早期主机中的陈旧条目。要执行 SnapManager 操作，您必须使用配置文件更新还原到早期的主机名。</block>
  <block id="9fc1b22ee2cdce4d883043a3147a7c9a" category="list-text">输入以下命令： smo profile update -profileprofile "-profile-passwordprodb_password]-database-dbnamedb_dbname-hostdb_host [-siddb_sid] [-login-usernamedb_username-passworddb_password-portdb_port]] ｛ -rman ｛ -controlfile _ pdemman_edemnssl.-try_trusers-zh.-zh.-zhun-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-</block>
  <block id="4399283a56d3ebbbcf779a7ec4b833c3" category="paragraph">* 更改目标数据库主机名 *</block>
  <block id="739bd67d883cff6955b07b2e449e23c8" category="paragraph">指定 -hostnew_db_host</block>
  <block id="f145955b34187afe67cfc0971dad01f3" category="list-text">要查看配置文件的目标数据库主机名，请输入以下命令： smo profile show</block>
  <block id="4ff46f32c627184f606bb313b61dfbfd" category="summary">您可以通过应用用户身份验证来管理 SnapManager 中的安全性。通过用户身份验证方法，您可以访问存储库，主机和配置文件等资源。</block>
  <block id="b66c24be78f6c38e3211dcfd12381b3b" category="doc">安全性和凭据管理</block>
  <block id="70622fbaddac64f9aae7f0c65e081187" category="paragraph">使用命令行界面（ CLI ）或图形用户界面（ GUI ）执行操作时， SnapManager 会检索为存储库和配置文件设置的凭据。SnapManager 会保存先前安装的凭据。</block>
  <block id="c7b1532b867f1c8bb4ad220afebef085" category="paragraph">可以使用密码保护存储库和配置文件。凭据是为用户配置的对象密码，而不是在对象本身上配置密码。</block>
  <block id="6a5ae137579cdd9726cbfa8853b685cf" category="paragraph">您可以通过执行以下任务来管理身份验证和凭据：</block>
  <block id="a3d53393cacc903f4eb8a2be566844c1" category="list-text">通过操作时的密码提示或使用 smo credential set 命令来管理用户身份验证。</block>
  <block id="415dc1b465fe9aa85ee24d6235ab625c" category="paragraph">设置存储库，主机或配置文件的凭据。</block>
  <block id="a781bee674e974c6ca6676cc1c555106" category="list-text">查看用于管理您有权访问的资源的凭据。</block>
  <block id="e85959e98c062228936bc36ff4cbe71b" category="list-text">清除所有资源（主机，存储库和配置文件）的用户凭据。</block>
  <block id="2a58b7783b87d7d9076043cd8fc68bbf" category="list-text">删除单个资源（主机，存储库和配置文件）的用户凭据。</block>
  <block id="8838d8a84555cc4afa526fdd7aa386dd" category="admonition">如果存储库数据库位于 Windows 主机上，则本地或管理员用户和域用户都必须具有相同的凭据。</block>
  <block id="95a21eb8ab20985d8896bd30611df445" category="summary">通过 AutoSupport 功能， SnapManager 服务器可以在备份操作完成后向存储系统发送 AutoSupport 消息。</block>
  <block id="5670f47893d364edebfd2cad0b02f183" category="doc">什么是 AutoSupport</block>
  <block id="e4a4e16ee1fd3eb74201ddf622536d1c" category="admonition">SnapManager 仅会为成功的备份操作发送 AutoSupport 消息。</block>
  <block id="9755d90b9c539708f98d218dc12285ba" category="paragraph">您可以通过为 SMO.config 配置文件中的 auto_support.on 配置参数分配以下值来启用或禁用 AutoSupport ：</block>
  <block id="109bac8d664f382f3a7fb73b10542468" category="list-text">true —启用 AutoSupport</block>
  <block id="edc75ba6e929ef06720f5a79875e8005" category="list-text">false —禁用 AutoSupport</block>
  <block id="6b6a52c8a3046575159145f12006931c" category="admonition">默认情况下， AutoSupport 在 SnapManager 中处于启用状态。</block>
  <block id="4552302f4b40ce65ea1b7500ed7c8ad9" category="inline-xref-macro">将在集群模式 Data ONTAP 中运行的存储系统添加到 SnapManager 服务器主机</block>
  <block id="643b6c1ce12a421ec680f02b12417114" category="paragraph"><block ref="643b6c1ce12a421ec680f02b12417114" category="inline-xref-macro-rx"></block></block>
  <block id="ca6aefbc703d2c825ec572109339fd03" category="inline-xref-macro">在 SnapManager 中启用 AutoSupport</block>
  <block id="756e5057c93a2103355f62ecd284922e" category="paragraph"><block ref="756e5057c93a2103355f62ecd284922e" category="inline-xref-macro-rx"></block></block>
  <block id="63cd3d42295a7723916d79345dd945f6" category="paragraph"><block ref="63cd3d42295a7723916d79345dd945f6" category="inline-xref-macro-rx"></block></block>
  <block id="188d1c88fd92f4f833aea572cb75ecf0" category="summary">您可以查看与特定配置文件关联的克隆列表。</block>
  <block id="bbab8ef98cc8f405c9f2fb749d32f96e" category="doc">查看克隆列表</block>
  <block id="19e84ef947f1983c71a103c88aff4669" category="paragraph">此列表包含有关配置文件中克隆的以下信息：</block>
  <block id="ecfd44aa94affbf9e6d56c51054cd34b" category="list-text">克隆的 ID</block>
  <block id="4a1e1960a00cf8bce4acb992f546181c" category="list-text">克隆操作的状态</block>
  <block id="6b48d50ed005d2fd2dbbae954d839150" category="list-text">克隆的 Oracle SID</block>
  <block id="daeb013f04b553cac42e04f8ddaf2916" category="list-text">克隆所在的主机</block>
  <block id="7db86a29ef112b659a0d1dec54b5314c" category="list-text">克隆的标签</block>
  <block id="618bd8da77f88233bf8addef03a8fb4c" category="paragraph">如果指定 -verbose 选项，则输出还会显示为克隆输入的注释。</block>
  <block id="82c08a193f5b89add5ddf9f789c1c2cd" category="list-text">要显示配置文件的所有克隆列表，请输入以下命令 SMO clone list -profile profile_name （ -quiet | -verbose ）</block>
  <block id="9de75527f2b26e54756b94f9d5f0bafc" category="inline-xref-macro">smo clone list 命令</block>
  <block id="358c765909a85fd6a38d5397403f4046" category="paragraph"><block ref="358c765909a85fd6a38d5397403f4046" category="inline-xref-macro-rx"></block></block>
  <block id="ddc3658560de8cb4b99ae8a9e7d65f8e" category="summary">使用完 SnapManager 后，您可能需要停止服务器。</block>
  <block id="68110234e02661a86e8a15862f0dae5f" category="doc">正在停止 SnapManager 主机服务器</block>
  <block id="b72308404178a78c480ab6690ead6f2b" category="list-text">要停止服务器，请以 root 用户身份输入以下命令： smo_server stop</block>
  <block id="f7b511b8af116c6ffb10cffbaf841078" category="paragraph"><block ref="f7b511b8af116c6ffb10cffbaf841078" category="inline-xref-macro-rx"></block></block>
  <block id="e3044cbc1d3b1d97485633e7f077b253" category="summary">您必须启用 AutoSupport ，以便存储系统在每次成功执行备份操作时都能从 SnapManager 服务器接收消息。</block>
  <block id="2b0f8f96d2feb3d6f3fdc84c4d6ffd70" category="paragraph">可以通过两种方式启用 AutoSupport ：</block>
  <block id="ec71e74a5ed5f6fb08a851c180bf10b0" category="list-text">默认情况下，新安装的 SnapManager 不会在 SMO.config 配置文件中包含 auto_support.on 参数。这意味着已启用 AutoSupport 。</block>
  <block id="7ea2bad8247a2ec1d6680e2e7b81e943" category="list-text">您可以手动配置 auto_support.on 参数。</block>
  <block id="1ef619304e00a8a08ba4d8fde7f95945" category="list-text">在 SMO.config 配置文件中，将 auto_support.on 参数的值设置为 true 。</block>
  <block id="bb7995336c9921168bec01b316cb93d6" category="paragraph">auto_support.on=true</block>
  <block id="52bf3ac2f3ff893cb6da0b8a15412d49" category="summary">SnapManager 要求主机上有一个存储库来存放有关您执行的操作的数据。</block>
  <block id="c1ac52e6baad79d94dd29e16df6fa212" category="doc">正在创建存储库</block>
  <block id="7ce3ab29d8f67d7735c3b99562ae6a12" category="paragraph">确保已完成以下任务：</block>
  <block id="69b2745a77ac41f9b2cd064e07c3745a" category="list-text">在存储库数据库中创建 Oracle 用户和密码。</block>
  <block id="98bb8ad53cc6ff7d02bed34e31ab9a47" category="list-text">授权用户访问存储库。</block>
  <block id="698482047dc076ca58e226c656ce8bef" category="paragraph">对于存储库， SnapManager for Oracle 要求安装该存储库的表空间至少具有 4 k 块大小。您可以使用以下 SQL 命令检查块大小：</block>
  <block id="567904efe9e64d9faf3e41ef402cb568" category="paragraph">其中：</block>
  <block id="6e90e59061978912584fae2b7977e78a" category="list-text">a.default_tablespace = b.tablespace_name</block>
  <block id="3cf42682dee69ee95a8b832387480cbc" category="list-text">a.username = 存储库上的用户名</block>
  <block id="89605997ef112ca1a108542f35f57337" category="paragraph">如果要升级存储库，则必须重新启动 SnapManager 服务器以重新启动任何关联的计划。</block>
  <block id="4bd7cb438ed4d84f342cbbe8c870d0a0" category="list-text">要创建存储库，请使用以下常规格式输入 repository create 命令： smo repository create -repository -dbname repo_service_name -host repo_host -login -username repo_username -port repo_port-force] （ -noprompt] ）（ -quiet | -verbose ）</block>
  <block id="55e54771b884877b292ff74e1901a128" category="list-text">-repository -dbname 是存储库数据库的名称。</block>
  <block id="10bc3cdccef7fbffdfa5ba58bb8a6ca4" category="list-text">-host 是存储库的主机名称。</block>
  <block id="3a9ffe813600a9b540b205dd841506aa" category="list-text">-username 是有权访问存储库的数据库用户的名称。</block>
  <block id="e70501ec3bbc24ac98748a837b8bb6e2" category="list-text">-port 是主机的端口。此命令的其他选项如下：</block>
  <block id="54c0c34e99a1caf3653a51f214de7a4c" category="paragraph">+ 注意：如果现有存储库的名称相同，并且使用 -force 选项，则现有存储库架构中的所有数据都将被覆盖。</block>
  <block id="43768ae5f7a159d37f551b6ef2f69f96" category="section-title">创建存储库</block>
  <block id="f07754353b0647f3a197510c54a31d5d" category="paragraph">以下命令行将创建一个存储库。</block>
  <block id="b50e5b4bcc019fcb0807fcc61bece8ce" category="summary">您可以运行 clone create 命令为备份的数据库创建克隆。您可以从主存储或二级存储克隆备份。</block>
  <block id="b7d717d8331fee7014529773026d4006" category="paragraph">指定要克隆的数据库。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="742355f1990e1b655d3837d25bb8ac44" category="paragraph">使用指定 GUID 克隆备份。GUID 由 SnapManager 在创建备份时生成。您可以使用 smo backup list-verbose 命令显示每个备份的 GUID 。</block>
  <block id="4886de7ca97bbefe3cb2850d26d236fb" category="paragraph">指定使用指定标签名称克隆备份。</block>
  <block id="5a787f908220948f2ece2d464730667a" category="list-text">* - 当前 *</block>
  <block id="9e3cc195b47376ce8bfb78938bb5bca3" category="paragraph">指定从数据库的当前状态创建备份和克隆。</block>
  <block id="3f29e961f9247d315ddb2b3c909ae4fb" category="admonition">如果数据库处于 nodarchivelog 模式， SnapManager 将创建脱机备份。</block>
  <block id="98e49bac5c6af1563b73887ba2742aa4" category="list-text">* — newsid new_sid*</block>
  <block id="dd395a00ed7c259c551e5e6b0c7fb7a5" category="paragraph">为克隆的数据库指定一个新的唯一 Oracle 系统标识符。系统标识符值最多为八个字符。Oracle 不允许在同一主机上同时运行具有相同系统标识符的两个数据库。</block>
  <block id="dcf5fbd2cc8fd6890e526aaac84e5343" category="list-text">* — host target_host*</block>
  <block id="70fcb2431e6c626972906618f2c7bd53" category="paragraph">指定应在其上创建克隆的主机。</block>
  <block id="192667507836604e65a90b60530ffec8" category="list-text">* — label clone_label *</block>
  <block id="3c394135aff3965105a4c3385c7983fa" category="paragraph">指定克隆的标签。</block>
  <block id="854ebf5508fed352259602e36e59594a" category="paragraph">指定用于描述此克隆的可选注释。必须将字符串用单引号括起来。</block>
  <block id="2d938031ed225b331a0ee5d9de4d0375" category="admonition">某些 shell 会删除引号。如果您的 shell 确实如此，则必须使用反斜杠（ \ ）转义引号。例如，您可能需要输入： " This is a coming\"</block>
  <block id="265b1ccd016e55f8071232d8ce7c7db9" category="list-text">*-clonSpec full_path_to_clonesore_file*</block>
  <block id="965b3bbbad48693eeeb5ac27838a79a0" category="paragraph">指定克隆规范 XML 文件的路径。此路径可以是相对路径名称，也可以是绝对路径名称。</block>
  <block id="591b8e380ea237fd16bf49bec17b78db" category="admonition">如果为 sys 特权用户提供的数据库凭据与为 sys 特权用户提供的数据库凭据不同，则必须为 sys 特权用户提供密码。</block>
  <block id="442632d1e843eb4c102d4ebc76cdd716" category="list-text">* —预留 *</block>
  <block id="5cf099240fcd9075ec92d7bab82b81d1" category="paragraph">将 -reserve 选项设置为 yes 可确保为新克隆卷启用卷保证空间预留。将 -reserve 选项设置为 no 可确保为新克隆卷关闭卷保证空间预留。将 -reserve 选项设置为继承可确保新克隆继承父 Snapshot 副本的空间预留特性。默认设置为 No</block>
  <block id="b6e552e155f865f4ec3416992592d59d" category="paragraph">下表介绍了克隆方法及其对克隆创建操作及其 -reserve 选项的影响。可以使用任一方法克隆 LUN 。</block>
  <block id="d0be00023154c895cd71d2d9ea44393f" category="cell">克隆方法</block>
  <block id="8eea62084ca7e541d918e823422bd82e" category="cell">结果</block>
  <block id="6cf822c784f03b2adff1107031ed45b1" category="list-text">*-no-resetlogs*</block>
  <block id="788e6dbe18bacf9877c75ab06c7830c9" category="paragraph">指定跳过恢复数据库，执行 DBNEWID 实用程序，并且在创建克隆时不使用重置日志打开数据库。</block>
  <block id="6761c76779ba6f8ee7c811c71b3cb800" category="paragraph">指定归档日志备份的外部归档日志位置， SnapManager 会从外部位置获取归档日志文件并使用这些文件进行克隆。</block>
  <block id="922d70ac8ae555f3728cdfb5a48e0213" category="paragraph">指定用于克隆操作的预处理活动或后处理活动的任务规范 XML 文件。您必须提供任务规范 XML 文件的完整路径。</block>
  <block id="6389c1f96af4ac33c07b406f7d8ba3a9" category="paragraph">指定在克隆创建操作后收集转储文件。</block>
  <block id="9079a9584d8d60fd80a3a0e2ab59f53e" category="paragraph">以下示例将使用为此克隆创建的克隆规范克隆备份：</block>
  <block id="5555dc99998e8d9622645da97246e281" category="summary">您可以使用一个命令根据数据库的当前状态创建数据库的备份和克隆。</block>
  <block id="67043f4216bbd904652b9b59bc58b4e1" category="paragraph">如果使用 -current 选项指定配置文件，则 SnapManager 首先会从数据库的当前状态创建一个备份和一个克隆。</block>
  <block id="6ef0671ccaf6514ed7930ef17ba2297a" category="paragraph">在配置文件设置中，如果您启用了数据文件和归档日志的备份以进行克隆，则在备份联机数据文件时，也会备份归档日志。克隆数据库时， SnapManager 会创建数据文件备份以及归档日志备份，并创建数据库克隆。如果不包括归档日志备份，则 SnapManager 不会创建归档日志备份，因此无法创建数据库的克隆。</block>
  <block id="4f43efe670f5517ebaa51c06828e512f" category="list-text">要以当前状态克隆数据库，请输入以下命令： smo clone create -profileprofile_name-current -labelclone_name-clonespecclonespec.xml</block>
  <block id="b71e795ca1d897b2799c0b422b3efddf" category="paragraph">此命令将执行完全自动备份（生成备份标签），并使用您要使用的现有克隆规范立即从该备份创建克隆。</block>
  <block id="87439b065e14cc4cb1b0f6ae594fdd34" category="admonition">您可以将 -dump 选项指定为可选参数，以便在操作成功或失败后收集转储文件。系统会为备份和克隆操作收集转储。</block>
  <block id="dea8fd830cc023cd5d97453f42fce4a7" category="summary">您可以使用 smo backup show 命令查看配置文件中特定备份的详细信息。</block>
  <block id="5e40ee618a54dfc0a61ebbb7203bc8a7" category="paragraph">smo backup show 命令可显示每个备份的以下信息：</block>
  <block id="8abbaeb035a6339836e99d25e91fa197" category="list-text">备份 ID</block>
  <block id="89013ace50d348e2583299b489828d1c" category="list-text">备份成功还是失败</block>
  <block id="5365571ab1464989eff7ab4776149c30" category="list-text">备份范围（完整，部分，联机或脱机）</block>
  <block id="9b05bc412924478f76e9a1fcdbe3019b" category="list-text">挂载状态</block>
  <block id="ef66c9b34b2d88c675d605e7463d18fc" category="list-text">备份标签</block>
  <block id="0be8406951cdfda82f00f79328cf4efc" category="list-text">comment</block>
  <block id="db5bcd3aa6af5447bd27677b58c15215" category="list-text">操作开始和结束的日期和时间</block>
  <block id="30e054c1980ee0abc22f33d34f0a2393" category="list-text">有关是否已验证备份的信息</block>
  <block id="f4ce0193e9d686745f14a57a9b34ce2a" category="list-text">备份保留类</block>
  <block id="08aedc91b635b381fb7382be21535540" category="list-text">数据库和主机名</block>
  <block id="82e89e5218259637bdb41c9b78bff22d" category="list-text">检查点系统更改编号（ SCN ）</block>
  <block id="5671d5ca353fdfe3c8c482b9ef877aba" category="list-text">结束备份 SCN （仅适用于联机备份）</block>
  <block id="5d879b54202c5c366b5ad784912032c0" category="list-text">备份的数据库中的表空间和数据文件</block>
  <block id="6fac1a8a1e5fa1438e4cebf6aef07bde" category="list-text">备份的数据库中的控制文件</block>
  <block id="477fb3e4752be1a38d5c1837f80c270b" category="list-text">备份的数据库中的归档日志</block>
  <block id="b76533b9a282396dea372034b054c803" category="list-text">文件所在的存储系统和卷</block>
  <block id="89abd060bbe34e69e5f376b9be7aea8f" category="list-text">创建的 Snapshot 副本及其位置</block>
  <block id="76348c2fe93a4b529f0ceaac9146494e" category="list-text">主存储资源的状态</block>
  <block id="8e66a37b41b56643c8e4c34957f57988" category="list-text">备份保护状态</block>
  <block id="472df2d83638bb46a695e7f9c4f1614a" category="paragraph">如果指定 -verbose 选项，则会显示以下追加信息：</block>
  <block id="ba2d822f6f6f2416432742e12c712ce8" category="list-text">从备份创建的克隆（如果有）</block>
  <block id="8163c929ab5f606a0dc1eb5ecf445e15" category="list-text">验证信息</block>
  <block id="b98e8bff4c69cbcc9602175a1821662b" category="list-text">如果已挂载备份， SnapManager 将显示正在使用的挂载点</block>
  <block id="2b8d199c21aba191c43d69bde6259dc6" category="paragraph">对于归档日志文件备份，显示的信息与其他数据库备份的信息相同，但以下信息除外：</block>
  <block id="89e08121f2a36bd15590e13aef40ce66" category="list-text">检查点 SCN</block>
  <block id="449f2670f1d8ef896d9ac5c7d9571122" category="list-text">结束备份 SCN</block>
  <block id="8df4b4064791821c5d29de977e91a2b2" category="list-text">表空间</block>
  <block id="351a78248f6b74961cc282b2f54c15f1" category="paragraph">但是，归档日志文件备份包含以下追加信息：</block>
  <block id="69b3fad6eb576458251419f447bd82e1" category="list-text">备份的第一个更改编号</block>
  <block id="dda78ca698dac4c9040b7dab582299be" category="list-text">备份的下一个更改编号</block>
  <block id="b46cb96279003e0a1e1fab5424fe0674" category="list-text">线程编号</block>
  <block id="ab9c8b6fb927bf2b525cdff6d242c312" category="list-text">重置日志 ID</block>
  <block id="877d8d66606e8f99bd9e6f7e1f40d8b2" category="list-text">转体</block>
  <block id="68de3480af9ddd24bc1b27b78ed3a152" category="list-text">日志文件名</block>
  <block id="659fb90808fb14d2c2e15abcafc9d0fd" category="list-text">输入以下命令： smo backup show -profileprofileprofile_name ｛ -labelLabel [data | -archivelogs] | -id id id （ -quiet | -verbose ）</block>
  <block id="0039888d683c63efdfac81da76da1e77" category="paragraph"><block ref="0039888d683c63efdfac81da76da1e77" category="inline-xref-macro-rx"></block></block>
  <block id="eb767ed7f8b1be8082cd28af8224e3fc" category="summary">此命令将更新存储系统的名称或 IP 地址。</block>
  <block id="9c7e40642a8f664ca89ba36631ffc05f" category="doc">smo storage rename 命令</block>
  <block id="ae56ccf4ae34a242c2b6ef8bae92b3dc" category="list-text">* — oldname old_storage_name*</block>
  <block id="7e8de20d8d27775eda7689baf38081bf" category="paragraph">指定重命名存储系统之前存储系统的 IP 地址或名称。您必须输入运行 SMO storage list 命令时显示的存储系统的 IP 地址或名称。</block>
  <block id="b2db98124ca125f53abe5b767fd159bc" category="list-text">* — newname new_storage_name*</block>
  <block id="fd998fed203501a25032ad812ed47289" category="paragraph">指定重命名存储系统后存储系统的 IP 地址或名称。</block>
  <block id="3c1caa57c7e34b6bbc34a667aa207295" category="paragraph">以下示例使用 smo storage rename 命令重命名存储系统：</block>
  <block id="0862dc1e2ef896f7d98890c5e8cb04c3" category="summary">如果您使用的是集群模式 Data ONTAP ，则必须了解某些功能和 SnapManager 操作的限制。</block>
  <block id="db0d70bb9b31ad8717967409c9b30f4a" category="doc">集群模式 Data ONTAP 的 SnapManager 限制</block>
  <block id="d187ae643cab337eb432bec10973de6c" category="paragraph">如果在集群模式 Data ONTAP 上使用 SnapManager ，则不支持以下功能：</block>
  <block id="afb97d949dc32b7fd39d82fcfba85b45" category="list-text">Storage Virtual Machine （ SVM ）的原始设备映射（ RDM ）逻辑单元号（ LUN ）</block>
  <block id="d4b0a673fdc92b3fb5dce27cd67c8054" category="list-text">一种数据库，其中一个 LUN 属于运行 7- 模式 Data ONTAP 的系统，而另一个 LUN 属于运行集群模式 Data ONTAP 的系统</block>
  <block id="a270eb9755f563ad33430a5e58e0e335" category="list-text">SnapManager for Oracle 不支持迁移 SVM ，而集群模式 Data ONTAP 不支持此迁移</block>
  <block id="154d9e829ed3bc8dc6a6bbdb206e662c" category="list-text">SnapManager for Oracle 不支持使用集群模式 Data ONTAP 8.2.1 功能为卷和 qtree 指定不同的导出策略</block>
  <block id="3bcc8a4126b0f51ac01d1bf30ae43f16" category="summary">您可以运行 version 命令来确定本地主机上运行的 SnapManager 版本。</block>
  <block id="463f5d8c6593f7eabe01b1a016511783" category="paragraph">显示每个配置文件的构建日期和内容。此外，还会在控制台中显示错误，警告和信息性消息。</block>
  <block id="8ae36ef440c4a40fc3494364c1267e92" category="section-title">version 命令示例</block>
  <block id="3bc1964319d8189a145c5ecf8106e61b" category="paragraph">以下示例显示了 SnapManager 的版本：</block>
  <block id="5e120bd963b1ac0e6427190f90c703fe" category="summary">SnapManager 通过在运行 SnapManager 服务器的主机上使用操作系统（ OS ）登录来对用户进行身份验证。您可以通过操作时的密码提示或使用 SMO 凭据来启用用户身份验证，您可以通过操作时的密码提示或使用 SMO 凭据集命令来启用用户身份验证。</block>
  <block id="ab44924350d8b2fe102715ab6107a709" category="doc">什么是用户身份验证</block>
  <block id="4429c70c697da2ad4579a1afbe96b0bc" category="paragraph">用户身份验证要求取决于操作的执行位置。</block>
  <block id="c17ea43f722aea4bd297b89aba0713f1" category="list-text">如果 SnapManager 客户端与 SnapManager 主机位于同一服务器上，您将通过操作系统凭据进行身份验证。</block>
  <block id="b2ef0cf9e3e22b87d69908f3e625304d" category="paragraph">系统不会提示您输入密码，因为您已登录到运行 SnapManager 服务器的主机。</block>
  <block id="723542018f993c717c84745ba32d2a53" category="list-text">如果 SnapManager 客户端和 SnapManager 服务器位于不同的主机上，则 SnapManager 需要使用这两个操作系统凭据对您进行身份验证。</block>
  <block id="b78a09e656411d070ab10f5a4fc88a96" category="paragraph">如果您尚未将操作系统凭据保存在 SnapManager 用户凭据缓存中，则 SnapManager 会提示您输入任何操作的密码。如果输入 smo credential set -host 命令，则会将操作系统凭据保存在 SnapManager 凭据缓存文件中，因此 SnapManager 不会提示输入任何操作的密码。</block>
  <block id="9e4a1e0950f2dd5fb5a3d116cc5b0481" category="paragraph">如果您通过 SnapManager 服务器的身份验证，则视为有效用户。执行任何操作的有效用户都必须是执行操作的主机上的有效用户帐户。例如，如果您执行克隆操作，则应能够登录到克隆的目标主机。</block>
  <block id="bd75cf7de2040fcba87727015ece02fc" category="admonition">SnapManager for Oracle 可能无法授权在中央 Active Directory 服务中创建的用户，例如 LDAP 和 ADS 。要确保身份验证不会失败，您必须将可配置的 auth.disableServerAuthorization 设置为 true 。</block>
  <block id="9878336e06b757297c9018d7911eca32" category="paragraph">作为有效用户，您可以通过以下方式管理凭据：</block>
  <block id="9089409df42451dc46452468e32cd6df" category="list-text">您也可以将 SnapManager 配置为将用户凭据存储在 SnapManager 用户凭据文件中。</block>
  <block id="375eb3c4ad4effc9e4a22f4357c5fe0e" category="paragraph">默认情况下， SnapManager 不存储主机凭据。例如，如果您的自定义脚本需要访问远程主机，则可能需要更改此设置。远程克隆操作是一个需要远程主机用户登录凭据的 SnapManager 操作示例。要使 SnapManager 在 SnapManager 用户凭据缓存中记住用户主机登录凭据，请在 SMO.config 文件中将 host.credentials.persist 属性设置为 true 。</block>
  <block id="dfad2f21f17585f97c668673f4dadbf2" category="list-text">您可以授权用户访问存储库。</block>
  <block id="3cff3ddb081db92c4d2b0421e78bf2d0" category="list-text">您可以授权用户访问配置文件。</block>
  <block id="41d5ad99fd2de83581380b8586db5f9f" category="list-text">您可以查看所有用户凭据。</block>
  <block id="16530baedabb698f7ee3e2737662a9b6" category="list-text">您可以清除所有资源（主机，存储库和配置文件）的用户凭据。</block>
  <block id="d0fed8f7234ab4fe741d50a5a9a0fc64" category="list-text">您可以删除各个资源（主机，存储库和配置文件）的凭据。</block>
  <block id="2fe23ccb16eaf9e2b7e9c8ff0e85c03e" category="summary">此命令将启动运行 SnapManager for Oracle 软件的主机服务器。</block>
  <block id="412516cd2578484f78129fb06f921bc2" category="doc">smo_server start 命令</block>
  <block id="3759b2fa5b28f5ab022df26ddc887182" category="paragraph">以下示例将启动主机服务器。</block>
  <block id="4a798aba37a58a85157b3b9abe024aad" category="summary">您可以使用 Windows 服务启动 SnapManager 服务器。</block>
  <block id="1f043d66680e7ecda6485010fa4603e2" category="doc">启动 SnapManager 主机服务器</block>
  <block id="49f1f7056640d03618e8892e2cd83e60" category="list-text">在服务窗口中，选择适用于 Oracle 的 NetApp SnapManager 3.3 。</block>
  <block id="f99010423552db8c6187be88a82df320" category="list-text">右键单击适用于 Oracle 的 NetApp SnapManager 3.3 ，然后从下拉菜单中选择 * 启动 * 。</block>
  <block id="eadbe009f898acaf1d902adcef01e6a0" category="list-text">双击适用于 Oracle 的 NetApp SnapManager 3.3 ，然后在属性窗口中，单击 * 启动 * 。</block>
  <block id="59087360d55b71c354462f8efe9af935" category="summary">要还原的数据库的状态取决于要执行的还原过程的类型以及要包含的文件类型。</block>
  <block id="b68520201e702e54e903a4d1c1e91185" category="doc">还原过程需要数据库状态</block>
  <block id="7cc7fb62135119e197c37c4f41412ff3" category="paragraph">下表列出了数据库应处于的状态，具体取决于选定的还原选项以及要包含在还原中的文件类型：</block>
  <block id="d63390a182f788a6ad0cbd623bb50678" category="cell">还原类型</block>
  <block id="e678867cdbc403584b7ba7e3c2b5e67e" category="cell">包含的文件</block>
  <block id="e04489376de97e1f19f0e3abca21423e" category="cell">此实例的数据库状态</block>
  <block id="1a4ebb180ba59b067782515ffee6e975" category="paragraph">关闭</block>
  <block id="04b527818cf9fecc4774f6c7fe7f2fa2" category="paragraph">系统文件</block>
  <block id="ad66219acc4a6d4a54fc8bba37e1013f" category="paragraph">挂载或关闭</block>
  <block id="d2ffdf0dfe581449045fcdebc48afede" category="paragraph">无系统文件</block>
  <block id="d60fd197e540446192f328624ebc9be2" category="paragraph">任何状态</block>
  <block id="6be8f3086a30e59e908d53eb620b51dd" category="paragraph">还原和恢复</block>
  <block id="eace16d66cdd93ad876c620db7456077" category="paragraph">挂载</block>
  <block id="7d8420e5fff177b4adab24799c369f8e" category="paragraph">SnapManager 还原操作所需的数据库状态取决于所执行的还原类型（完整，部分或控制文件）。除非指定强制选项，否则 SnapManager 不会将数据库过渡到较低的状态（例如从打开过渡到挂载）。</block>
  <block id="12bccb15146d93fe191cbdbfcab44d40" category="summary">通过 SnapManager for Oracle ，您可以从已备份的活动文件系统中删除归档日志文件。</block>
  <block id="4d6177cf96f4fb45ce2c1d4d7ba1db12" category="doc">为什么应修剪归档日志文件</block>
  <block id="7ad056d4465484fdf61223c05d034019" category="paragraph">通过修剪， SnapManager 可以为不同的归档日志文件创建备份。删除以及备份保留策略会在清除备份后释放归档日志空间。</block>
  <block id="a02e38fd56b5bdf6332a14c9663a238c" category="admonition">如果为归档日志文件启用了 Flash Recovery Area （ FRA ），则无法对归档日志文件进行修剪。如果在 Flash Recovery 区域中指定归档日志位置，则必须确保同时在 archive_log_dest 参数中指定归档日志位置。</block>
  <block id="4c4cd637528eea6969e1eb2c01389d19" category="summary">要执行命令或启动 SnapManager 操作，服务器必须正在运行。在执行任何操作之前，您必须验证服务器的状态。</block>
  <block id="e39a5c12bb835b4ff557de8a67bbb652" category="doc">验证 SnapManager 主机服务器状态</block>
  <block id="231ecd5e1bf1ba3f16c61a627eb30aa2" category="list-text">在服务窗口中，选择适用于 Oracle 的 SnapManager 3.3 。</block>
  <block id="475400763b050421af9d2b118d152bde" category="list-text">在状态列中查看状态。</block>
  <block id="008da51a4116362be7622b40ff823e9c" category="summary">通过 SnapManager for Oracle ，您可以将数据库还原到创建 Snapshot 副本时的状态。由于备份的创建频率更高，因此需要应用的日志数量会减少，从而减少数据库的平均恢复时间（ MTTR ）。</block>
  <block id="72a6cf007ebd79ee576681a3aceed926" category="paragraph">以下是与还原和恢复数据库中的数据相关的一些任务：</block>
  <block id="2ab4c221f4747efdac072b90c76ba408" category="list-text">执行基于文件的还原。</block>
  <block id="f01ea370c030092243b959bc9a072648" category="list-text">还原整个备份或其中一部分。</block>
  <block id="6aa1bb15abb5ee8f10c4542761c51067" category="paragraph">如果要还原其中一部分，请指定一组表空间或一组数据文件。您还可以还原控制文件以及数据，或者仅还原控制文件本身。</block>
  <block id="0eef33217fd4875458729353f54908a1" category="list-text">根据时间点或所有可用日志恢复数据，这些日志存储提交到数据库的最后一个事务。</block>
  <block id="5145e63be3b7e9e9dc63e6034650ac34" category="paragraph">时间点可以是 Oracle 系统更改编号（ SCN ）或日期和时间（ yyyy-mm-dd ： hh ： mm ： ss ）。SnapManager 使用 24 小时制时钟。</block>
  <block id="5271db5110ed1c299fcf8b7727cfb8f5" category="list-text">从主存储（本地备份）上的备份还原。</block>
  <block id="9e7aad0fa6ffe5aeae7a0d370cd08d5b" category="list-text">使用 SnapManager 还原和恢复备份，或者使用 SnapManager 还原备份，然后使用恢复管理器（ RMAN ）等其他工具恢复数据。</block>
  <block id="51cdb78aba223c7d92eb31c60128b727" category="list-text">从备用位置还原备份。</block>
  <block id="41749ee0f81e7615b98c098eebffb9e0" category="paragraph">您可以使用 SnapManager 3.0 及更高版本还原以前版本的 SnapManager 所做的备份。</block>
  <block id="4cc5baef77e7b0cf13384090f435a1ed" category="paragraph">管理员可以使用 SnapManager 图形用户界面（ GUI ）或命令行界面（ CLI ）执行还原或恢复操作。</block>
  <block id="b60074f90409f799f6344cac31d6f265" category="paragraph"><block ref="b60074f90409f799f6344cac31d6f265" category="inline-xref-macro-rx"></block></block>
  <block id="d54f05bac1a99f0778a896dfc45912e9" category="summary">当 Snapshot 副本的大小达到备份的 10% 到 20% 之间时，您可以删除克隆。这样还可以确保克隆具有最新的数据。</block>
  <block id="c720bdb556d77d71aa3174de6a9f0f5e" category="paragraph">此标签是配置文件中每个克隆的唯一标识符。您可以使用克隆标签或 ID ，但不能使用系统标识符（ SID ）删除克隆。</block>
  <block id="667e859fcb52979c2b6e98d2a4ee6004" category="admonition">克隆 SID 和克隆标签不同。</block>
  <block id="151eaedfc5e8f4f3686f116abde9d7e1" category="paragraph">删除克隆时，数据库必须正在运行。否则，不会删除现有克隆的许多文件和目录，从而在创建另一个克隆之前需要执行更多工作。</block>
  <block id="9e8997957ada4be5f14dc5e82b632697" category="paragraph">删除克隆后，为克隆中的某些 Oracle 参数指定的目录将被销毁，并且只能包含克隆数据库的数据：归档日志目标，后台，核心和用户转储目标。不会删除审核文件。</block>
  <block id="527a89002cf9b90b1a9812f730885a13" category="admonition">如果在其他操作中使用克隆，则不能删除该克隆。</block>
  <block id="8088d09b5ac227055904613234357a76" category="paragraph">您可以选择在克隆删除操作成功或失败后收集转储文件。</block>
  <block id="7c09988b78445cda5b591565bc57a3cf" category="list-text">输入以下命令： smo clone delete -profile profile_name [-label label | -id guid] [-force][-dump][-quiet ]_[-verbos]</block>
  <block id="6e0d0a27188235a06c83197dd30fb081" category="paragraph"><block ref="6e0d0a27188235a06c83197dd30fb081" category="inline-xref-macro-rx"></block></block>
  <block id="47d2e3f87c53d10922c32d5f0760260b" category="summary">您可以查看对配置文件执行的所有操作的摘要列表。</block>
  <block id="a1d3c9d341074cbde223ba8c2e946718" category="paragraph">列出与特定配置文件关联的操作时，您可以查看以下信息：</block>
  <block id="d9afeffb39349da00d45faab61c6b31d" category="list-text">运行操作的开始和结束日期</block>
  <block id="88ebc1f479e6de47fd711c4be81c4d26" category="list-text">操作状态</block>
  <block id="0d7bd30df9e7e80e84ba8fba1e20c45a" category="list-text">操作 ID</block>
  <block id="5835466055b535c1144114aec7f90e22" category="list-text">运行它的主机</block>
  <block id="89d4752c0911a6a099b4ce31b2fc6f9a" category="list-text">要列出所有操作的摘要信息，请使用以下命令： smo operation list profile -profile profile_name-ac分隔 符字符 "-quiet | -verbos]</block>
  <block id="c7bc8ebeacac9b91df651c0a0caa7917" category="paragraph">指定 -separ分隔 符选项后，该命令会在单独的行中列出每一行，并使用指定的字符分隔该行中的属性。</block>
  <block id="b43459baa667cacd3818e3b445479a21" category="paragraph"><block ref="b43459baa667cacd3818e3b445479a21" category="inline-xref-macro-rx"></block></block>
  <block id="e0c055992c5fd375edd620f5800936ff" category="summary">在从备用位置还原之前，您需要从任何存储介质还原必要的文件，并将文件从 SnapVault 或 SnapMirror 等应用程序还原到本地主机上挂载的文件系统。</block>
  <block id="482e11c131b1b333cd1baf8970a5daa9" category="doc">从文件还原数据</block>
  <block id="8f77c39a5f5000dbafb917a63c0f7d87" category="paragraph">您可以使用从备用位置还原操作将文件从备用文件系统复制到活动文件系统。</block>
  <block id="4a46f59e4c7e0ed1ac35e891e59d5086" category="paragraph">您需要通过创建还原规范来指定用于还原原始文件的备用位置。</block>
  <block id="f929698c6a9af8367f40870f00f4235e" category="summary">如果在同一存储系统上的不同数据库上运行多个并行操作，则与这两个数据库关联的 LUN 的 igroup 可能会因其中一个操作而被删除。稍后，如果另一个操作尝试使用已删除的 igroup ，则 SnapManager 将显示一条错误消息。</block>
  <block id="532b8297d00f41f65279aab3248e451e" category="doc">在 SnapManager 中运行多个并行操作失败</block>
  <block id="9413051b8ddc94e4247feeb23c3f7ba6" category="paragraph">例如，如果几乎同时对不同数据库运行备份删除和备份创建操作，则备份创建操作将失败。以下顺序步骤显示了几乎同时对不同数据库运行备份删除和备份创建操作时会发生的情况。</block>
  <block id="d33cd5d8d6b30917089e4855e34a0cba" category="list-text">运行 backup delete 命令。</block>
  <block id="5548330ee742dd589d29fcbbc7ba9e7a" category="list-text">运行 backup create 命令。</block>
  <block id="546df6df71a8a889d4d8f311b0171ffa" category="list-text">backup create 命令可识别已存在的 igroup ，并使用相同的 igroup 来映射 LUN 。</block>
  <block id="d502dc84b43001176610233b38a81542" category="list-text">backup delete 命令会删除映射到同一 igroup 的备份 LUN 。</block>
  <block id="cf6b73c2d703f4713a4f2f746d825dfe" category="list-text">然后， backup delete 命令将删除 igroup ，因为没有与该 igroup 关联的 LUN 。</block>
  <block id="102cace54672cadcf4c8e3993c94b8fe" category="list-text">backup create 命令将创建备份并尝试映射到不存在的 igroup ，因此操作失败。</block>
  <block id="b08cce2dd9d9faba265b0447c42c8257" category="paragraph">您必须使用以下命令为数据库使用的每个存储系统创建 igroup ： sdcli igroup create</block>
  <block id="3c763b4c436cdced8121b69495721241" category="summary">您可以随时删除配置文件，只要该配置文件不包含成功或不完整的备份即可。您可以删除包含已释放或已删除备份的配置文件。</block>
  <block id="4e8a5befae2280400630703ba4fa01a0" category="list-text">要删除配置文件，请输入以下命令： smo profile delete -profile profile_name</block>
  <block id="05bd7e61e85b3726ffca2d700e675d95" category="paragraph"><block ref="05bd7e61e85b3726ffca2d700e675d95" category="inline-xref-macro-rx"></block></block>
  <block id="b5c113eac476ece6b02ad1bad4bdd487" category="summary">如果您知道消息分类，则可以确定错误的发生原因。</block>
  <block id="d4c31da404d2667d7fcac17a60736782" category="doc">错误消息分类</block>
  <block id="d19bebae51ebdf3271daf4fe3658846c" category="paragraph">下表提供了有关使用 SnapManager 时可能会看到的不同类型消息的数字范围的信息：</block>
  <block id="03937134cedab9078be39a77ee3a48a0" category="cell">组</block>
  <block id="87ba2ecc8b6915e8bd6f5089918229fd" category="cell">范围</block>
  <block id="c64518704ce0c0d5501a45763f464276" category="cell">使用情况</block>
  <block id="889a65415d92b72cffa7df3f8ecf13f9" category="paragraph">environment</block>
  <block id="adfe159ab12e57233e564d126e26b769" category="paragraph">1000-1999 年</block>
  <block id="4a47c49629e307ae1c2f7d1643d77bb4" category="paragraph">用于记录 SnapManager 操作环境的状态或问题。此组包含有关 SnapManager 与之交互的系统的消息，例如主机，存储系统，数据库等。</block>
  <block id="bfdf97ae01c73d83a58ec41f78a4291f" category="paragraph">backup</block>
  <block id="4030259ca3526a0343674b4d444c3002" category="paragraph">2000 年至 2999 年</block>
  <block id="dae6c6e1157d8f10f44d74cdb73048b3" category="paragraph">与数据库备份过程关联。</block>
  <block id="c95fa04340c629ddfa2d38e285e59245" category="paragraph">还原</block>
  <block id="46b2602216ddad88ee0f14b3d74cbd26" category="paragraph">3000-3999</block>
  <block id="931f5be43eb749d0b95b79bfc7f7b7fe" category="paragraph">与数据库还原过程关联。</block>
  <block id="a6ddc0995d7b58e0302675f581845cce" category="paragraph">clone</block>
  <block id="8fb6e7bc69a493decd0581aa26e6b3fb" category="paragraph">4000-4999</block>
  <block id="93be7d90614a5970d69ebc9f8593de85" category="paragraph">与数据库克隆过程关联。</block>
  <block id="48359f9afd830d28b1152d071fb09147" category="paragraph">配置文件</block>
  <block id="fe9d4d1266ab18b969559a9dc106c80d" category="paragraph">5000-5999</block>
  <block id="1750438f4d69a7f874f313deb44bdb77" category="paragraph">用于管理配置文件。</block>
  <block id="92814a387d2fe972e8aa877bc152980c" category="paragraph">管理</block>
  <block id="138bb52819d7a58204f1a4f217dd70ed" category="paragraph">6000-6999</block>
  <block id="6b8a40d9474803bd4f868bb8a67c90ab" category="paragraph">用于管理备份。</block>
  <block id="62567163f012deec82c6c291e6ad8708" category="paragraph">虚拟数据库接口</block>
  <block id="0e1d7d1a520ec74180ea044a53ebc928" category="paragraph">7000-7999</block>
  <block id="ab986acf001687074c18e72bb69aa1ca" category="paragraph">与虚拟数据库接口关联。</block>
  <block id="bc25dc1070a6425a70a750b5c70426ad" category="paragraph">虚拟存储接口</block>
  <block id="06fc49f13d8ecffc69a42b03e6c11466" category="paragraph">8 ， 000-8999</block>
  <block id="781198fc0bd3c5c2f1e9a6ae4d093c95" category="paragraph">与虚拟存储接口关联。</block>
  <block id="fd7cd48cb8bd49e5cf502442ffe67ee3" category="paragraph">存储库</block>
  <block id="0a3fb76b75640a76fe7a179652ec48b5" category="paragraph">9000-9999</block>
  <block id="ddd3a3965dd12dad4ff7373a22ffb0f5" category="paragraph">与存储库接口关联。</block>
  <block id="9e7c5e4965876742432dc75e07229a12" category="paragraph">指标</block>
  <block id="8ab963f8746fed14beed59ee805db5db" category="paragraph">10000-10999</block>
  <block id="2dcbacd55a299be5efb43648b333736a" category="paragraph">与数据库备份的大小，执行备份所用时间，还原数据库所需时间，克隆数据库的次数等相关。</block>
  <block id="ae69d91cad45c32499cadd33865ea4de" category="paragraph">虚拟主机接口</block>
  <block id="8e925dae85bd43e3a6a9410bdefcc3eb" category="paragraph">1140-11999</block>
  <block id="ed14b6d6a064b769bb656d34eb6ab9e4" category="paragraph">与虚拟主机接口关联。这是主机操作系统的接口。</block>
  <block id="65e53f0d00733750044f3a002608329c" category="paragraph">执行</block>
  <block id="6926e4530bc5e08197132c97b4ced1b3" category="paragraph">12000 至 12999</block>
  <block id="31a2b15ee5d17e225f25349549d3921a" category="paragraph">与执行软件包关联，包括生成和处理操作系统调用。</block>
  <block id="b93c13848c6490ae962feec15fbdd151" category="paragraph">流程</block>
  <block id="0d997b9ba79769838517a4aaee5dbb73" category="paragraph">13000-13999</block>
  <block id="59999e9a609c025ae6deb5e7b09601d4" category="paragraph">与 SnapManager 的进程组件相关联。</block>
  <block id="08ded3e3b8d060ebb163f9dd4a2fe847" category="paragraph">实用程序</block>
  <block id="63ceeca04eedac3316e76d96f1971a43" category="paragraph">14000-14999</block>
  <block id="fbf1c48b96ff07047868207904fa5431" category="paragraph">与 SnapManager 实用程序，全局上下文等相关。</block>
  <block id="29df10d27237c7ea27b1438e6de6e33a" category="paragraph">转储 / 诊断</block>
  <block id="35e854cfdcd420a4354ea5c5eb4fc4cd" category="paragraph">15000-15999</block>
  <block id="d05f1d4f65b9c3b06802c2135c30c1db" category="paragraph">与转储或诊断操作关联。</block>
  <block id="4fc963e213bba362778f5c175eb4d5ff" category="paragraph">帮助</block>
  <block id="272c2b5fb4d0d280351ffaa4320ef80b" category="paragraph">16000-16999</block>
  <block id="e982071b173a5cf9da0e59cf7f844502" category="paragraph">与帮助关联。</block>
  <block id="3d27c95bfdbea691b250894d96852844" category="paragraph">服务器</block>
  <block id="d754376289a16dc88acb016d5334a976" category="paragraph">17000-17999</block>
  <block id="0a16d5f97e573136be9ba7e495a087c6" category="paragraph">用于 SnapManager 服务器管理。</block>
  <block id="db974238714ca8de634a7ce1d083a14f" category="paragraph">API</block>
  <block id="73ffd5686e4dbaf0bfda5b954e0f0fc4" category="paragraph">18000-18999</block>
  <block id="6e2c3c2517e9492c41eaa8425c2be200" category="paragraph">与 API 关联。</block>
  <block id="f458afcda462a9ed24f08634cb2ceced" category="paragraph">身份验证</block>
  <block id="6cfda6935eb058d5faa3d13ad8ac15a5" category="paragraph">20000-20999</block>
  <block id="b31e9d5652d256f9c37f1e2165e75e18" category="paragraph">与凭据授权关联。</block>
  <block id="24189be7f068690395912f5fa3e84805" category="summary">您可以使用以下两种方法之一克隆数据库。您选择的方法会影响克隆创建操作。</block>
  <block id="82f39f83d888b92892f58a3c6da9a0ac" category="doc">克隆方法</block>
  <block id="4ab84df32b570ff55e15307859aee279" category="paragraph">下表介绍了克隆方法及其对克隆创建操作及其 -reserve 选项的影响。可以使用任一方法克隆 LUN 。</block>
  <block id="6c90d1b6700c1d0030fe69cc6c5af0fb" category="cell">clone create -reserve</block>
  <block id="832df885008ff744f0f6999d5eb586f8" category="paragraph">LUN 克隆</block>
  <block id="5ef8c7eba8cc9676b93f046d9eceef2f" category="paragraph">此时将在同一卷中创建一个新的克隆 LUN 。</block>
  <block id="ef3cbf7fca93948410602af107ddd1d8" category="paragraph">如果将 LUN 的 -reserve 设置为 yes ，则会为卷中的完整 LUN 大小预留空间。</block>
  <block id="4a01107e2a00479e0aae8c8338a6e4df" category="paragraph">卷克隆</block>
  <block id="025053b1f9596bfc5a94c98a8079b0da" category="paragraph">此时将创建一个新的 FlexClone ，并且克隆 LUN 位于新克隆卷中。使用 FlexClone 技术。</block>
  <block id="d27672b140e72ba3428fdb41a28acc30" category="paragraph">如果将卷的 -reserve 设置为 yes ，则会为聚合中的完整卷大小预留空间。</block>
  <block id="f910d635c7c0679c225ada28b4baf080" category="summary">您可以删除不再需要的备份计划。</block>
  <block id="0df4c5bbae20a339bf0186c5417ea660" category="doc">删除备份计划</block>
  <block id="8a2ea9b34a9f15a76a41a44e75ed9062" category="list-text">要删除备份计划，请输入以下命令： smo schedule delete -profile profile_name-schedule-nameschedulename （ -quiet | -verbose ）</block>
  <block id="d5aaa620e1c4c68a70f8f9dcc896baea" category="summary">您可以运行 profile create 命令在存储库中创建数据库的配置文件。在运行此命令之前，必须挂载数据库。</block>
  <block id="d5b32dac1d57c11e02070f1c76ef3a8e" category="paragraph">指定配置文件的密码。</block>
  <block id="ee2f6628f8fa14612c6830af618000f4" category="paragraph">指定配置文件所描述的数据库的系统标识符。默认情况下， SnapManager 使用数据库名称作为系统标识符。如果系统标识符与数据库名称不同，则必须使用 -SID 选项指定此标识符。</block>
  <block id="287f3324d41448161705b08caaf25a89" category="paragraph">指定访问存储库数据库所需的用户名。</block>
  <block id="ee4b98542b1a8c45a22d9026a8debcb5" category="paragraph">指定用于访问存储库数据库的 TCP 端口号。</block>
  <block id="706c43c16ddb5e7910e406b7f0554158" category="list-text">* — host db_host db_host*</block>
  <block id="635c9edf64996620353f0bee897fed66" category="paragraph">指定访问配置文件所述数据库所需的用户名。</block>
  <block id="a8a43276554626b32291ba47ce7160a5" category="paragraph">指定访问配置文件所述数据库所需的密码。</block>
  <block id="e1d12295c73abb06d6dae78ce07c5b1d" category="list-text">* —保留时间为：每小时（ -hourly ， -count n ），（ -duration m ），（ -daily ， -count n ），（ -duration m ），（ -weekly ， -count n ），（ -monthly ， -count n ），（ -duration m ）， *</block>
  <block id="44d7ada8328e5517f0b7d9e956875f9a" category="paragraph">指定备份的保留策略，其中一个或两个保留计数以及保留类的保留期限（每小时，每天，每周，每月）。</block>
  <block id="a52dcd5afde19206a6156d9ce56b4bef" category="paragraph">对于每个保留类，可以指定保留计数或保留持续时间中的一个或两个。持续时间以类的单位为单位（例如，小时表示每小时，天表示每天）。例如，如果用户为每日备份指定的保留期限仅为 7 ，则 SnapManager 不会限制配置文件的每日备份数（因为保留数量为 0 ），但 SnapManager 会自动删除 7 天前创建的每日备份。</block>
  <block id="b3c9df347bb4eda6b4c282ae4f8f8485" category="paragraph">指定用于描述配置文件域的配置文件的注释。</block>
  <block id="eacf438217a70128c7a10dcb099b1422" category="paragraph">指定 Snapshot 副本的命名模式。您还可以在所有 Snapshot 副本名称中包括自定义文本，例如，用于高可用性操作的 HAOPS 。您可以在创建配置文件时或创建配置文件后更改 Snapshot 副本命名模式。更新后的模式仅适用于尚未创建的 Snapshot 副本。已存在的 Snapshot 副本会保留先前的 Snapname 模式。您可以在模式文本中使用多个变量。</block>
  <block id="e72ff418df8d1920ffe327efa0b6ccdb" category="paragraph">指定为新配置文件启用摘要电子邮件通知。</block>
  <block id="37ec0ed0d5ba2025752f7fed57121f47" category="list-text">-notification -success 电子邮件 e-mail_address1 ，电子邮件地址 2 -Subject Subject_Pattern*</block>
  <block id="b557657750a23d96f7dd964b06100a0a" category="paragraph">指定为新配置文件启用电子邮件通知，以便在 SnapManager 操作成功时收件人可以收到电子邮件。您必须为新配置文件输入一个或多个电子邮件地址以发送电子邮件警报，并输入电子邮件主题模式。</block>
  <block id="604722995633e096d1099d581d18d4bd" category="paragraph">您还可以为新配置文件包含自定义主题文本。您可以在创建配置文件时或创建配置文件后更改主题文本。更新后的主题仅适用于未发送的电子邮件。您可以对电子邮件主题使用多个变量。</block>
  <block id="c1b65988a02cf3d738c65feb48883872" category="list-text">-notification -failure -email e-mail_address1 ， e-mail2 -Subject Subject_Pattern*</block>
  <block id="49c724743a51565b34834ffbfc973cf8" category="paragraph">指定为新配置文件启用电子邮件通知，以便在 SnapManager 操作失败时收件人可以接收电子邮件。您必须为新配置文件输入一个或多个电子邮件地址以发送电子邮件警报，并输入电子邮件主题模式。</block>
  <block id="3ad41b4c4ae77cbc0553c7a3de65cc40" category="paragraph">指定归档日志备份与数据文件备份分开。这是一个可选参数，您可以在创建配置文件时提供。使用此选项分离备份后，您可以执行仅数据文件备份或仅归档日志备份。</block>
  <block id="d963b4b11275b52483289906a7ed2a53" category="list-text">加入联机备份 *</block>
  <block id="9ed526529a4cab863a7550d0ff90e986" category="list-text">*-no-include-with -online-backups*</block>
  <block id="65914098e9d3458282872f9f86bdddb5" category="paragraph">以下示例显示了使用每小时保留策略和电子邮件通知创建配置文件的过程：</block>
  <block id="3232e5ef82709df2d1e143383132691f" category="summary">回滚存储库数据库并将 SnapManager 主机从 SnapManager 3.2 降级到 SnapManager 3.0 后，您必须执行一些其他步骤，才能查看在早期版本的存储库数据库中创建的计划。</block>
  <block id="7f0a3c953c3606fa38dc320d92990f72" category="doc">回滚后任务</block>
  <block id="d38cde1770b31e703912e20279f6510b" category="list-text">导航到 C ： \Program Files\NetApp\SnapManager for Oracle\storages.</block>
  <block id="d6341e5a78b9f5178c12a1f79fbff0a4" category="paragraph">存储库目录可能包含每个存储库的两个文件。带有数字符号（ # ）的文件名使用 SnapManager 3.1 或更高版本创建，而带有连字符（ - ）的文件名使用 SnapManager 3.0 创建。</block>
  <block id="bc68ecde51f06145f6518a1e284ccd0e" category="paragraph">文件名可能如下：</block>
  <block id="aeaa7f6a592491a0e0c625038f17585d" category="list-text">存储库 #SMO300A #SMOREPO1#10.72.197.141#151.</block>
  <block id="04954239edd54358bb5941ae6e5046a3" category="list-text">repository-smo300a-smorepo1-10.72.197.141-151.</block>
  <block id="845ca149b15939a372703f7552df4d6c" category="list-text">将文件名中的数字符号（ # ）替换为连字符（ - ）。</block>
  <block id="3576f1d10848f7db1081828dc5f76b9e" category="paragraph">具有数字符号（ # ）的文件名现在包含连字符（ - ）： repository-SMO300A-SMOREPO1-10.72.197.141-151.</block>
  <block id="cab987522b9cce5574aedbdeb2fee569" category="summary">此命令可列出给定配置文件的数据库克隆。</block>
  <block id="9e70b254ab9ebe955e83c8ad4e8e7d4c" category="paragraph">指定此参数后，此命令将在每行中列出属性，并以指定字符分隔。</block>
  <block id="e9ca2124bdebdf7ac78e48b9d204e4f2" category="paragraph">以下示例列出了 SALES1 配置文件中的数据库克隆。</block>
  <block id="a0a709d9269a8eb7f4de4b0af6454092" category="paragraph"><block ref="a0a709d9269a8eb7f4de4b0af6454092" category="inline-xref-macro-rx"></block></block>
  <block id="45883f42021a451bbff0cae67601c47b" category="summary">在 Data ONTAP 中将克隆的卷从其父卷拆分之后，您可以从 SnapManager 运行 clone detach 命令，让 SnapManager 知道该卷不再是克隆卷。</block>
  <block id="5ac611adc7ce903933b778180982f949" category="doc">smo clone detach 命令</block>
  <block id="4f4fb88cef329887249b3f01187fe3b9" category="paragraph">SMO clone detach -profile profile_name -label clone_label</block>
  <block id="441089a93eddfa0c93777954e7ced2e4" category="paragraph">指定用于创建克隆的配置文件名称。</block>
  <block id="979e6e7fd11f104272fd82f235351a1f" category="paragraph">指定克隆操作生成的名称。</block>
  <block id="f3fe2e9f2b1714621ffb95a6f5a17823" category="paragraph">以下命令可断开克隆：</block>
  <block id="b17334e20b05e6795fd02b21b788c959" category="summary">您可以在环境中下载和安装 SnapManager for Oracle ，并执行数据库备份，还原，恢复和克隆等操作。</block>
  <block id="7b19ec89fb29bcab2281d15e1727adf2" category="paragraph">SnapManager for Oracle 安装包包括主机服务器软件和图形用户界面（ GUI ）客户端软件。</block>
  <block id="db5688b8908a7d3fd108232064ce889d" category="summary">适用于 Oracle 的 SnapManager 架构包含许多组件，例如适用于 Oracle 主机，客户端和存储库的 SnapManager 。其他组件包括主存储系统和二级存储系统以及其他 NetApp 产品。</block>
  <block id="71155b4b4be05c57a27b6869223ed7e0" category="doc">什么是适用于 Oracle 的 SnapManager 架构</block>
  <block id="1bde68860c076874d94cccf97eb1c8fb" category="paragraph">SnapManager for Oracle 架构包括以下架构组件：</block>
  <block id="4e3c3e92ce7c2cd8983e2f4e8ca0fa45" category="list-text">SnapManager 图形用户界面或命令行界面</block>
  <block id="bce4d2ac168780b703106d2f5b3f3adc" category="list-text">二级存储系统</block>
  <block id="cec8bcefee7ab057633b07484e0eddbb" category="paragraph">下图显示了适用于 Oracle 的 SnapManager 架构以及相关组件：</block>
  <block id="bf79cc3bfc7f36ae88272c9c41ce5af4" category="image-alt">适用于 SAP 的 SnapManager 架构</block>
  <block id="84ec1e6358bc66e4a2c36971609687f9" category="summary">您可以找到一些常见的已知图形用户界面（ GUI ）问题的相关信息，这些问题可能有助于您解决这些问题。</block>
  <block id="aebad893c2c9fa36d378a34828cb6b95" category="doc">排除图形用户界面问题</block>
  <block id="642facf67e0ad311eee88b3ab8381590" category="cell">问题描述</block>
  <block id="cc2fc418b618eaf938fef4128f5cddab" category="paragraph">访问 SnapManager 图形用户界面以执行操作时，可能会显示以下错误消息： SMO-20111 ：主机上的用户身份验证失败。</block>
  <block id="6dbfabb9afa11c2ffcbfee88846e56ef" category="paragraph">如果在运行 SnapManager 服务器的主机中更改了用户的密码，则会发生此问题描述。更改密码后，为启动 GUI 的用户创建的凭据缓存将无效。SnapManager 图形用户界面仍会使用缓存中的凭据进行身份验证，因此身份验证将失败。</block>
  <block id="656a5609e265fdf4a49af513c98a5c3b" category="paragraph">您必须执行以下任务之一：</block>
  <block id="069fb36455d31f089e0fa5762dd86515" category="list-text">删除密码已更改的用户的凭据，然后运行以下命令在缓存中添加新凭据：</block>
  <block id="db5128355a49c234820e96303d694506" category="list-text">SMO 凭据删除</block>
  <block id="87105a6032bd60b30576df6fbf18b372" category="list-text">SMO 凭据集</block>
  <block id="52977d9b0878496fbc3a66618af6302d" category="list-text">运行 smo credential clear 命令清除整个缓存。如果出现提示，请重新打开 GUI 并设置凭据。</block>
  <block id="215ccee177b208283cc6fa7724a3ca8a" category="paragraph">使用 Java Web Start 访问 SnapManager 图形用户界面时会显示安全警告。</block>
  <block id="e6a53295c5844b7f2872e22e5607623f" category="paragraph">使用 Java Web Start 访问 SnapManager 图形用户界面时，将显示一条安全警告。之所以出现此问题描述，是因为 JNLP JAR 是自签名的，而 SnapManager 使用的 Java 版本在高安全级别不允许自签名 JAR 。</block>
  <block id="b0723735f0f5366a4ee13a1f3835905d" category="paragraph">在 Java 控制面板中将安全设置更改为中，或者将 SnapManager 图形用户界面 URL 添加到异常列表中。</block>
  <block id="c1f073fedee52d2798b31dacafa49a82" category="paragraph">SnapManager Web Start 图形用户界面显示的版本不正确。</block>
  <block id="ab7c1b98e2120e83a4e8315c559ae3cc" category="paragraph">在启动 Web Start GUI 时，将 SnapManager 从更高版本降级为早期版本后，将启动更高版本的 SnapManager Web Start GUI 。</block>
  <block id="8de715d84701291493862c08808fbffb" category="paragraph">此外，您还必须执行以下步骤来清除缓存：</block>
  <block id="1e8d189a7b8f8b27752b03b5cbe38dc4" category="list-text">单击 * 开始 * 并选择 * 运行 * 。</block>
  <block id="8aaa4225a0d273b3cf55cfd15226b9a1" category="list-text">输入以下内容： javaws -viewer</block>
  <block id="801631dae408d9a05dc46803162a31ec" category="list-text">在 Java 缓存查看器屏幕上，右键单击 SnapManager 应用程序并选择 * 删除 * 。</block>
  <block id="a38043f17f11fcaff26d4819219b6e85" category="paragraph">重新启动 GUI 并尝试检查某个配置文件的备份时，您只会看到这些配置文件的名称。</block>
  <block id="e299fb9b506ff49d15f03ca7e263a8e2" category="paragraph">只有在打开配置文件后， SnapManager 才会显示有关该配置文件的任何信息。</block>
  <block id="bd87e4513c53ca41819d0730d3f591de" category="list-text">右键单击配置文件，然后从菜单中选择 * 打开 * 。</block>
  <block id="4f72f93ec5cbf07e4de8228f9c8dd501" category="paragraph">SnapManager 将显示配置文件身份验证对话框。</block>
  <block id="a96209dbbd077a22bc1c068baec0a078" category="list-text">输入主机用户名和密码。</block>
  <block id="7be7bdbfe2e6710173b79a869c71b31f" category="paragraph">SnapManager 将显示备份列表。</block>
  <block id="c9e647511f133513533e340c51931d48" category="admonition">只要凭据有效并保留在缓存中，您只需要对配置文件进行一次身份验证。</block>
  <block id="cf7a15afe48b7754e63c5f84ae26f818" category="paragraph">在 Windows 上安装 GUI 成功，但出现错误。</block>
  <block id="92af9955ade6d51fb17f63cf6a31fb06" category="paragraph">用于安装 GUI 的用户帐户没有足够的权限为所有用户设置图标和快捷方式。用户帐户无权修改 C ： \Documents and Settings\All Users 目录。</block>
  <block id="18ded74f756bbf5c639ec897b0d72f83" category="list-text">使用不同的设置重新安装 GUI 。</block>
  <block id="a918858114839c77fc5ff1c50649ae7a" category="paragraph">在选择图标可用性中，清除 * 使这些快捷方式可供此 PC* 的所有用户使用复选框。</block>
  <block id="f53c4c0a7f874fe413f79797b857db5d" category="list-text">使用不受限制的用户帐户登录并重新安装 GUI 。</block>
  <block id="c187545f5080129f1c03099968cf2791" category="paragraph">在 GUI 中打开第一个存储库时，将显示类似以下内容的错误消息：配置文件名称 XXXX 与先前加载的存储库冲突。</block>
  <block id="dd42c7bf6c951a8eb0609cdb5e8e0540" category="paragraph">存储库中不能存在命名相同的配置文件。此外，一次只能打开一个存储库。</block>
  <block id="2b613460b385bfe81effa9f7a2216bb1" category="paragraph">引用两个不同操作系统（ OS ）用户的冲突配置文件，或者通过对存储库发出 SQL 语句来重命名配置文件： update SMO_33_profile set name = 'new_name' where name = 'old_name '</block>
  <block id="d1c9409c57079019f77f052df8b40932" category="paragraph">此时将显示类似以下内容的错误消息： SMO-01092 ： Unable to initialize repository repo1@ does not exist ： repo1SMO-11-6 ： cannot resolve host does not exist</block>
  <block id="29794902b78c8fe41027dc90af07be09" category="paragraph">此存储库无法访问，可能是因为它不再存在。GUI 会从凭据文件初始化存储库列表。</block>
  <block id="4f8b88d35c31d2970d5cf745da3eb822" category="paragraph">此错误消息会询问您是否要删除此存储库，以便将来不再尝试加载它。如果不需要访问此存储库，请单击 * 删除 * 将其从图形用户界面视图中删除。此操作会删除凭据文件中对存储库的引用，并且图形用户界面不会再次尝试加载存储库。</block>
  <block id="6c4c84491c9380a0901f912a4b157c4f" category="paragraph">SnapManager 加载数据库树结构所需时间较长，并导致 SnapManager 图形用户界面上显示超时错误消息。</block>
  <block id="f08863233b0952f3b3ba159f41832ec9" category="paragraph">当您尝试从 SnapManager 图形用户界面执行部分备份操作时， SnapManager 会尝试加载所有配置文件的凭据，如果存在任何无效条目，则 SnapManager 会尝试验证此条目，从而导致显示超时错误消息。</block>
  <block id="a58d223816a2b734e95e692823a3b653" category="paragraph">使用 SnapManager 命令行界面（ CLI ）中的 credential delete 命令删除未使用的主机，存储库和配置文件的凭据。</block>
  <block id="a182782feb36637b9bb687d84d9ce7f8" category="paragraph">在 SnapManager 图形用户界面中看不到在备份，还原或克隆操作之前或之后发生的预处理或后处理活动的自定义脚本。</block>
  <block id="536db08120ea1fb202d4e819b52b25f7" category="paragraph">启动相应向导后，如果在自定义备份，还原或克隆脚本位置添加自定义脚本，则自定义脚本不会显示在 Available Scripts 列表下。</block>
  <block id="1cce7b06190b35913bc3b176e21e7574" category="paragraph">重新启动 SnapManager 主机服务器，然后打开 SnapManager 图形用户界面。</block>
  <block id="ea8bad9bc081b34f9cf67f74ad7ec7d8" category="paragraph">不能使用在 SnapManager （ 3.1 或更早版本）中创建的克隆规范 XML 文件执行克隆操作。</block>
  <block id="38005a904943ef1bdc682f78e58d744f" category="paragraph">在 SnapManager 3.2 for Oracle 中，任务规范部分（任务规范）作为单独的任务规范 XML 文件提供。</block>
  <block id="0ca7ffbcdeea44ff95e2aef3021c67b6" category="paragraph">如果您使用的是适用于 Oracle 的 SnapManager 3.2 ，则必须从克隆规范 XML 中删除任务规范部分或创建新的克隆规范 XML 文件。 SnapManager 3.3 或更高版本不支持在 SnapManager 3.2 或更早版本中创建的克隆规范 XML 文件。</block>
  <block id="f49f9391a555bbaa80b5151c9a06ab01" category="paragraph">在 SnapManager 命令行界面中使用 smo credential clear 命令或在 SnapManager 图形用户界面中单击 * 管理 * &gt; * 凭据 * &gt; * 清除 * 缓存 * 来清除用户凭据后，图形用户界面上的 SnapManager 操作无法继续。</block>
  <block id="2b4f8ca8c9af3802ee5a71a12c1d9232" category="paragraph">系统将清除为存储库，主机和配置文件设置的凭据。SnapManager 会在开始任何操作之前验证用户凭据。如果用户凭据无效， SnapManager 将无法进行身份验证。从存储库中删除主机或配置文件后，用户凭据仍可在缓存中使用。这些不必要的凭据条目会降低 GUI 中 SnapManager 操作的速度。</block>
  <block id="101ab936de6f9985d38b06628a65ddba" category="paragraph">根据缓存的清除方式重新启动 SnapManager 图形用户界面。* 注： *</block>
  <block id="84d5e1a9df7dc6bf120960401dfc0271" category="list-text">如果已从 SnapManager 图形用户界面中清除凭据缓存，则无需退出 SnapManager 图形用户界面。</block>
  <block id="c8a43a2a012805ecad9f87ed55e26a42" category="list-text">如果已从 SnapManager 命令行界面清除凭据缓存，则必须重新启动 SnapManager 图形用户界面。</block>
  <block id="49c5962bd278b2d91cf7b51347adbcf9" category="list-text">如果您手动删除了加密的凭据文件，则必须重新启动 SnapManager 图形用户界面。</block>
  <block id="a8d71ba9a6b95dd9a1a60fae5802897a" category="paragraph">设置为存储库，配置文件主机和配置文件提供的凭据。在 SnapManager 图形用户界面中，如果存储库树下未映射任何存储库，请执行以下步骤：</block>
  <block id="3e4fd708634cf66bf94530394b37578a" category="list-text">单击 * 任务 * &gt; * 添加现有存储库 *</block>
  <block id="def322d50c2ddf34a4f239730f29c083" category="list-text">右键单击存储库，单击 * 打开 * ，然后在 * 存储库凭据身份验证 * 窗口中输入用户凭据。</block>
  <block id="209bbd6964c1a4c8e6bb89c50479109f" category="list-text">右键单击存储库下的主机，单击 * 打开 * ，然后在 * 主机凭据身份验证 * 中输入用户凭据。</block>
  <block id="9a48e0de8f5f4d67c1fccd2fffd05592" category="list-text">右键单击主机下的配置文件，单击 * 打开 * ，然后在 * 配置文件凭据身份验证 * 中输入用户凭据。</block>
  <block id="843055e4a7e7867a44c6b5d2ca421bdb" category="paragraph">由于浏览器的安全套接字层（ Secure Sockets Layer ， SSL ）密码强度较弱，您无法使用 Java Web Start 图形用户界面打开 SnapManager 图形用户界面。</block>
  <block id="269af7144d47a335372abbfb71deb5fe" category="paragraph">SnapManager 不支持小于 128 位的 SSL 密码。</block>
  <block id="46ff14d5e367d1d33838c6c26ac6a6f0" category="paragraph">升级浏览器版本并检查密码强度。</block>
  <block id="ffda858b7f0d23d1802be9c410e5c71a" category="summary">SnapManager 客户端包括一个图形用户界面（ GUI ）和一个命令行界面（ CLI ）。</block>
  <block id="2503ca13398e5363c264e0df2292fd6a" category="doc">SnapManager 图形用户界面和命令行界面</block>
  <block id="198992ef3de669e930dd0768205775e1" category="paragraph">Active IQ ， AltaVault ，架构设计， ASUP ， AutoSupport ， Campaign Express ，集群模式 Data ONTAP ，客户健康， Data ONTAP ， DataMotion ， Element ， Fitness ， Flash Accel ， Flash Cache ， Flash Pool ， FlexArray ， FlexCache ， FlexClone ， FlexPod ， FlexScale ， FlexShare ， FlexVol ， FPolicy ， FFueled by SolidFire ， GetSuccessful ， Helix 设计， LockVault ，管理 ONTAP ， MetroCluster ， MultiStore ， NetApp ， NetApp Insight ， OnCommand ， ONTAP ， ONTAPI ， RAID DP ， RAID-TEC ， SANscreen ， SANshare ， SANtricity ， SecureShare ，精简性，模拟 ONTAP ， Snap Creator ， SnapCenter ， SnapCopy ， SnapDrive ， SnapIntegrator ， SnapLock ， SnapManager ， SnapMirror ， SnapMover ， SnapProtect ， SnapRestore ， Snapshot ， SnapValidator ， SnapVault ， SolidFire ， SolidFire Helix ， StorageGRID ， SyncMirror ， Tech OnTap ， Unbound Cloud 和 WAFL 以及其他名称是 NetApp ， Inc. 在美国和 / 或其他国家或地区的商标或注册商标。所有其他品牌或产品均为其各自所有者的商标或注册商标，应予同样对待。有关最新的 NetApp 商标列表，请参见网站。</block>
  <block id="03fb789d2214626d5922f36e2c919861" category="summary">您可以列出有权访问的主机，配置文件和存储库。</block>
  <block id="cfe5a3d88c4c1225b1a1e769a0d6b3ba" category="doc">查看用户凭据</block>
  <block id="f9f43ce47721876766d67c106c603d09" category="list-text">要列出您有权访问的资源，请输入以下命令： smo credential list</block>
  <block id="f1f2dad54137e87283d65b0d841ea330" category="section-title">查看用户凭据的示例</block>
  <block id="d5e504f0b988a3cd05054bcc5cb6909a" category="paragraph">此示例显示您有权访问的资源。</block>
  <block id="ee8971f984e71264a6d28a385c7cfa1a" category="inline-xref-macro">smo credential list 命令</block>
  <block id="91033ee1bb6f98ec54311d81bdb77342" category="paragraph"><block ref="91033ee1bb6f98ec54311d81bdb77342" category="inline-xref-macro-rx"></block></block>
  <block id="1a9704f36eaf17af6ea2c921d4776206" category="summary">您可以从数据库主机以外的主机执行问题描述命令行界面命令， SnapManager 会将您输入的命令路由到相应的主机。</block>
  <block id="2efa28a2520220c85f9e88e730b37217" category="doc">从备用主机发出命令</block>
  <block id="4e285100a549951132bd310295ab45cd" category="paragraph">要使系统将操作发送到正确的主机，系统必须先知道在何处查找此操作的配置文件。在此操作步骤中，系统会将配置文件保存到本地主机上用户主目录中某个文件的存储库映射信息。</block>
  <block id="e24f6dd11661dc5df673b48fd9a18661" category="list-text">要使本地用户的主目录能够识别配置文件到存储库的映射，以便路由操作请求，请输入以下命令： smo profile sync -repository-dbname repo_dbname-host repo_host-port repo_port-login-username repo_username [-quiet | -verbose ]</block>
  <block id="677b22cdaf78fea44aabfd2722eecde0" category="summary">使用此命令可以查看与配置文件关联的特定 SnapManager 操作的历史记录。</block>
  <block id="dce1c6a9e7600214848ee82399b231b7" category="doc">smo history operation-show 命令</block>
  <block id="644ed06f7e88a7b77801a24483e3a6df" category="list-text">-label label | -idi*</block>
  <block id="48a7608889f30d4a539524713169a417" category="paragraph">指定要查看其历史记录的 SnapManager 操作 ID 或标签。</block>
  <block id="d337eeb5643a7166953179079391e001" category="summary">您可以使用 clone create 命令从备份克隆数据库。</block>
  <block id="c9756714aa75214a64cfd952c0754af2" category="paragraph">您必须先为数据库创建克隆规范文件。SnapManager 将根据此规范文件中的信息创建克隆。</block>
  <block id="3d2d04b899370ecdf34fbd6cb022890f" category="paragraph">您必须为克隆提供一个新的 Oracle 系统标识符（ SID ）。不能在同一主机上同时运行具有相同 SID 的两个数据库。您可以在使用相同 SID 的其他主机上创建克隆。要为克隆指定唯一名称，请使用 -label 。如果不使用此选项， SnapManager 将为克隆创建一个唯一名称，其中包括 SID ，日期和时间。</block>
  <block id="b362d78bc6e0046b3e00028081689ea6" category="paragraph">克隆数据库后，您可能需要使用新克隆的数据库连接信息更新客户端计算机上的 tnsnames.ora 文件。tnsnames.ora 文件用于连接到 Oracle 实例，而无需指定完整的数据库信息。SnapManager 不会更新 tnsnames.ora 文件。</block>
  <block id="3cb524c9e07c92ed9b017e6311dd738a" category="paragraph">如果您使用的是使用 -include-with -online backup 创建的配置文件，则 SnapManager 始终会创建备份，其中包括归档日志文件。使用 SnapManager ，您只能克隆完整的数据库备份。</block>
  <block id="fe8b93cc51051336f4bd89bc2a58be36" category="paragraph">通过 SnapManager （ 3.2 或更高版本），您可以克隆包含数据文件和归档日志文件的备份。</block>
  <block id="ac41c69ffebf794180ff589b4348237f" category="paragraph">如果可以从外部位置访问归档日志，则可以在克隆期间指定外部位置，以便将克隆的数据库恢复到一致的状态。您必须确保 Oracle 可访问外部位置。不支持克隆仅归档日志备份。</block>
  <block id="e558d3af910f04fdc3d730ccc0c028c2" category="paragraph">虽然归档日志备份是与联机部分备份一起创建的，但您不能使用此备份创建数据库克隆。</block>
  <block id="617b267981b505523880e86d5d6f3ac6" category="paragraph">在指定外部归档日志位置以将克隆的数据库恢复为一致状态时，必须确保将外部位置名称完全包含在大写中。在文件系统中，所有文件夹和子文件夹的名称必须为大写，因为 Oracle 数据库会将目标路径转换为大写，并要求外部目标路径，文件夹名称和子文件夹名称采用大写。如果以小写形式指定外部归档日志目标路径，则数据库可能无法识别指定路径，并且无法恢复克隆的数据库。</block>
  <block id="2edeee7d2397a02b63f19026f1a10b79" category="paragraph">您只能从独立数据库的外部归档日志文件位置克隆数据库备份。</block>
  <block id="03a57e87b2d9108195d716fb7f7e8eda" category="paragraph">您可以将 -dump 选项指定为可选参数，以便在成功或失败的克隆创建操作后收集转储文件。</block>
  <block id="ba7fd95ed3e8dccc06d6863cf72c619b" category="paragraph">* 克隆数据文件备份而不使用归档日志备份 *</block>
  <block id="b6dace0a5504aeb43d70befbd9d94962" category="paragraph">如果数据文件备份不包括归档日志备份，则 SnapManager for Oracle 将根据备份期间记录的系统更改编号（ SCN ）克隆数据库。如果无法恢复克隆的数据库，则会显示 "Thade &lt;number&gt; and change &lt;SCN&gt; required to complete recovery " 错误消息，即使 SnapManager for Oracle 继续克隆数据库，并最终成功创建克隆。</block>
  <block id="0560806c4f5653107eef51ace5b0706c" category="paragraph">使用数据文件备份而不包括归档日志备份进行克隆时， SnapManager 会恢复克隆的数据库，直到备份期间记录的最后一个归档日志 SCN 为止。</block>
  <block id="82c0099aec4ae9c3d23039a31ad01372" category="list-text">创建克隆规范文件。</block>
  <block id="c171f9d9816ce380f858302364232dcb" category="list-text">要创建克隆，请输入以下命令： smo clone create -backup-labelbackup_name-newsidnew_sid-labelclone_label-profileprofile_name-clonetfull_path_to_clonspecfile [-spectaskspec] [-recovery-from-location] path1 [ ， &lt;path2&gt;...]-dump</block>
  <block id="6254124a4c4616a822c0f1f02df79694" category="paragraph"><block ref="6254124a4c4616a822c0f1f02df79694" category="inline-xref-macro-rx"></block></block>
  <block id="835141c096362b3b79c1cf99f14a116f" category="paragraph"><block ref="835141c096362b3b79c1cf99f14a116f" category="inline-xref-macro-rx"></block></block>
  <block id="01a6465a21da81bae3c095c913635342" category="paragraph"><block ref="01a6465a21da81bae3c095c913635342" category="inline-xref-macro-rx"></block></block>
  <block id="d1a0e07b16a3fef8bfa1e52afa7032d1" category="paragraph"><block ref="d1a0e07b16a3fef8bfa1e52afa7032d1" category="inline-xref-macro-rx"></block></block>
  <block id="4f3a5dbbf52c2d06b23312e6da1e5db2" category="summary">您必须在 SnapManager 中为要执行操作的数据库创建配置文件。您必须选择配置文件，然后选择要执行的操作。</block>
  <block id="313e857b66100bd48fefeaddbbe89050" category="section-title">与配置文件相关的任务</block>
  <block id="8d1d531715a92e9a9357a3f3a1c54f69" category="paragraph">您可以执行以下任务：</block>
  <block id="d3f8ea290f535806d825206c8f197eb6" category="list-text">创建配置文件，以便能够对主存储或二级存储进行完整或部分备份和备份。</block>
  <block id="d1c9264d036530d2163dd76dd1920f80" category="paragraph">您还可以创建配置文件，以便将归档日志备份与数据文件备份分开。</block>
  <block id="1186691a8c624bb7778747b1b68adb7c" category="list-text">验证配置文件。</block>
  <block id="5d4648bc3d9186962d1ba25776183349" category="list-text">更新配置文件。</block>
  <block id="2ab35286ade52aa6504105f47dacea50" category="list-text">删除配置文件。</block>
  <block id="71493073788d1312e2f7c61a2c4fd4e4" category="section-title">关于配置文件和身份验证</block>
  <block id="85222c8fa3f6073c985452ef65689829" category="paragraph">创建配置文件时，您可以指定一个数据库并选择以下方法之一来连接到该数据库：</block>
  <block id="5a85d0a57d998bec030caaa87f8727f6" category="list-text">使用用户名，密码和端口进行 Oracle 身份验证</block>
  <block id="eb12351ed71437d741628ab9d83602db" category="list-text">无用户名，密码或端口的操作系统（ OS ）身份验证。</block>
  <block id="5adcddedad175cc0a51c82884e3d3d16" category="paragraph">对于操作系统身份验证，您必须输入操作系统帐户用户和组信息。</block>
  <block id="8c087db36f357ad6d847ad41a0c5028e" category="list-text">sqlnet.authentication_services 设置为 none 时的数据库身份验证。然后， SnapManager 会对目标数据库的所有连接使用数据库用户名和密码。如果 sqlnet.authentication_services 设置为 NTS ，则 SnapManager 也可以使用 Windows 原生身份验证。</block>
  <block id="c2e0feba15a438389ed848ffd4624acd" category="paragraph">您只能在以下环境中将 sqlnet.authentication_services 设置为 none ：</block>
  <block id="701061aca2e79f20d8547f9f88d55363" category="cell">数据库布局</block>
  <block id="ad3332d97b294a0091bfc7d97ad72001" category="cell">是否支持目标数据库的数据库身份验证</block>
  <block id="62f140992155da0a5586ae78295de14b" category="paragraph">任何非 ASM 和非 RAC 数据库</block>
  <block id="f91b2d59e87a444f3def5e1ed6fb12b2" category="paragraph">Oracle 10g 和 Oracle 11g （低于 11.2.0.3 ）</block>
  <block id="1b30903b805a082c8cf4e9ed65a54613" category="paragraph">* 注意： * 禁用 sqlnet.authentication_services 并将身份验证方法更改为数据库身份验证后，必须将 sqlnet.authentication_services 设置为 none 。</block>
  <block id="119d387949b2b0ffa31c27b5b3f67357" category="paragraph">如果您是首次访问配置文件，则必须输入您的配置文件密码。输入凭据后，您可以在配置文件中查看数据库备份。</block>
  <block id="e40f61b82747448783b7df11f8407844" category="paragraph"><block ref="e40f61b82747448783b7df11f8407844" category="inline-xref-macro-rx"></block></block>
  <block id="57d04683fb6df6ecf2ada94820067068" category="summary">此命令将创建一个存储库，用于存储数据库配置文件和关联凭据。此命令还会检查块大小是否足够。</block>
  <block id="26214d891bccbf50202e289832d33347" category="doc">smo repository create 命令</block>
  <block id="e241ba16af0a838c11f37822ee2ec675" category="paragraph">repository 后面的选项用于指定存储库的数据库详细信息</block>
  <block id="7f424691f7cded2c16e1d883195982d6" category="paragraph">尝试强制创建存储库。使用此选项会导致 SnapManager 提示您在创建存储库之前备份存储库。</block>
  <block id="157e2561e571923ba661117d0c9869d2" category="paragraph">如果使用 -force 选项，则在创建存储库之前不会显示备份该存储库的提示。使用 -noproPrompt 选项可确保不会显示此提示符，从而可以更轻松地使用脚本创建存储库。</block>
  <block id="ad1533098a295ea23e73405cce787d0f" category="paragraph">以下示例将在主机 Hotspur 上的数据库 SMOREPO 中创建一个存储库。</block>
  <block id="7dd8de89d5bc5b10c6c62b15478a942c" category="paragraph"><block ref="7dd8de89d5bc5b10c6c62b15478a942c" category="inline-xref-macro-rx"></block></block>
  <block id="a451e59d6870026bfd6c9f0d62f100b9" category="summary">如果要从 SnapManager 3.3.x 升级到 SnapManager 3.4 或更高版本，则无需更新现有存储库，但对于所有其他升级路径，您必须更新现有存储库，以便在升级后可以访问它。</block>
  <block id="2b85d2391a5c6da3b9b84ccf84520949" category="doc">正在更新现有存储库</block>
  <block id="88599049f0efd1c26fe2c59ca137a6f2" category="list-text">升级后的 SnapManager 服务器必须已启动并经过验证。</block>
  <block id="1aee8db98ed9b1e27d79132ffdf0cea1" category="list-text">必须存在现有存储库的备份。</block>
  <block id="ee5c62b9305e3b3736635076c1660474" category="list-text">如果要从 SnapManager 3.1 之前的任何版本升级到 SnapManager 3.3 或更高版本，则必须先升级到 SnapManager 3.2 。</block>
  <block id="f6d7537452e253527f3f4a5489e73041" category="paragraph">升级到 SnapManager 3.2 后，您可以升级到 SnapManager 3.3 或更高版本。</block>
  <block id="259a4c4ca392f484c2d20f3f96cc8139" category="list-text">更新存储库后，您将无法将此存储库与早期版本的 SnapManager 结合使用。</block>
  <block id="1af071da8186b772324ecd1eee06579e" category="list-text">更新现有存储库： smo repository update -repository -dbname repository_service_name -host repository_host_name -login -username repository_user_name -port repository_port</block>
  <block id="c8488b6f725599c9219f1b2defe4c00a" category="list-text">存储库用户名，存储库服务名称和存储库主机名可以包含字母数字字符，减号，下划线和句点。</block>
  <block id="00a954d02722c5dc6943d0d729aa4380" category="list-text">存储库端口可以是任何有效的端口号。更新现有存储库时使用的其他选项如下：</block>
  <block id="dca56d55ab8ee62b82ddd4dadd6c293b" category="list-text">强制选项</block>
  <block id="c8a84c89994d8bfe84a2662ce317c8f6" category="list-text">noproPrompt 选项</block>
  <block id="e70ed1841c647e2720515f1474391266" category="list-text">静默选项</block>
  <block id="b449c4fb2f74198530323139a118e923" category="list-text">详细选项</block>
  <block id="b1a888d5210fa877a2e6b27717e07a4c" category="paragraph">重新启动 SnapManager 服务器以重新启动任何关联的计划。</block>
  <block id="54857a336bce3608cfecf99a7c847d0b" category="summary">如果您不记得创建配置文件时提供的密码，可以重置配置文件密码。</block>
  <block id="356aee035b8cfc1df05d8724a0652b44" category="doc">重置配置文件密码</block>
  <block id="22941a93689b24e86ccb17c9593cf535" category="list-text">您必须确保 SnapManager 服务器正在存储库数据库上运行。</block>
  <block id="6ec7026bbd0d903cd46904c71ba9e653" category="list-text">您必须具有存储库数据库所在主机的本地管理员凭据。</block>
  <block id="0d59bb7f0c0c183276f599135215dfce" category="list-text">在重置配置文件的密码时，您必须确保此配置文件不会用于任何操作。</block>
  <block id="431ee6841317527c08a2a117ed6d5759" category="paragraph">您可以从 SnapManager 命令行界面或图形用户界面重置密码。重置密码时， SnapManager 会查询存储库主机上的 SnapManager 服务器以确定存储库主机的操作系统。您必须输入用于连接到存储库主机的授权用户凭据。SnapManager 服务器使用用户在存储库数据库上的本地管理员凭据对用户进行身份验证。身份验证成功后， SnapManager 会使用新密码重置 SnapManager 服务器上的配置文件密码。</block>
  <block id="0f5d7f08b3942e42a0375e292a4b43da" category="admonition">SnapManager 不会保留密码重置操作的历史记录。</block>
  <block id="7f5aa6fedd652ecfca4aadf24aec48fc" category="list-text">输入以下命令重置配置文件密码： smo password reset -profileprofile "-profile-passwordprofile_password] [-repository-hostadmin-passwordadmin_password]</block>
  <block id="390f0beb37a64bfcb621a0d8192378d3" category="summary">使用 SnapManager 可以执行不同的备份任务。您可以分配保留类以指定备份可保留的时间长度；达到此时间限制后，备份将被删除。</block>
  <block id="0e76cb674746891dc5bfaf8dff92fe65" category="doc">什么是 SnapManager 数据库备份</block>
  <block id="65662c044bde8bf5ac350d02be0f33f7" category="list-text">在主存储上创建备份</block>
  <block id="76aa5f3af464a03a28e5cc074e73e4f6" category="list-text">使用后处理脚本在二级存储资源上创建受保护的备份</block>
  <block id="2e07e83b00408cb8a24b19c5ff1bf250" category="list-text">验证备份是否已成功完成</block>
  <block id="3e7f1fe384c690d09cc03503bd2a32cd" category="list-text">查看备份列表</block>
  <block id="7ce4299f770dd4b2f49a96bcb511f262" category="list-text">使用图形用户界面计划备份</block>
  <block id="6966088ad0a240f212fbf7e17cc48b4c" category="list-text">管理保留的备份数</block>
  <block id="4e1a5dc2c76d0e6961ad6efe3b6c612c" category="list-text">免费备份资源</block>
  <block id="3947073d02f9c90e03d5d75a269febdf" category="list-text">挂载和卸载备份</block>
  <block id="de00c1e27be1485dd099e4cd2aaa554d" category="list-text">删除备份</block>
  <block id="421ec27f9afd08af59c2d14f6571e054" category="paragraph">SnapManager 使用以下保留类之一创建备份：</block>
  <block id="ab130ac5f986ffb9e903aa5b12941728" category="paragraph">如果向数据库添加了新的数据文件，则应立即创建新的备份。此外，如果还原在添加新数据文件之前创建的备份，并尝试恢复到添加新数据文件之后的某个时间点，则自动恢复过程可能会失败。有关恢复备份后添加的数据文件的过程的详细信息，请参见 Oracle 文档。</block>
  <block id="1c6b4f7edf6e617afa1d7631c31c8594" category="summary">SnapManager 以与正在执行的还原操作相关的环境变量的形式提供上下文信息。例如，您的脚本可以检索原始主机的名称以及所还原备份的标签。</block>
  <block id="4b15de43b478faca5116fac041f1005b" category="doc">可用于还原操作的任务脚本中的变量</block>
  <block id="03554b303c7969a55b29c4d162d9e050" category="paragraph">指定备份标签</block>
  <block id="a2be7604c3164f2a0766118e3d5e6378" category="paragraph">指定备份 ID</block>
  <block id="3594ea101a3c35332c04300943ad5b66" category="paragraph">指定用于备份的配置文件</block>
  <block id="60923147eceade047c8336ec4c47d87d" category="paragraph">sm_recovery_type</block>
  <block id="3d438c8723fe4f7010489bfece4d30a4" category="paragraph">指定恢复配置信息</block>
  <block id="c0c10070348005b9a5b8cb9494fb8936" category="paragraph">sm_volume_restore_mode</block>
  <block id="c1673867ec17a7035310324823367945" category="paragraph">指定卷还原配置</block>
  <block id="2e0f9758deb4efaa7d9d26e8abfb17f8" category="paragraph">指定目标存储系统名称 * 注： * 如果使用多个存储系统，则存储系统名称必须用逗号分隔。</block>
  <block id="4693693f52b368c8f3acf847b025d253" category="paragraph">指定目标卷名称 * 注： * 目标卷名称必须以存储设备名称作为前缀，例如 sm_target_filer_name/sm_target_volume_name 。</block>
  <block id="e60362f289292f45a296784a1cb3c574" category="paragraph">指定 Snapshot 列表 * 注： * Snapshot 副本的名称必须以存储系统名称和卷名称作为前缀。Snapshot 副本的名称以逗号分隔。</block>
  <block id="e3a67e3cd5da820960133632f9c93375" category="paragraph">指定归档日志目录 * 注： * 如果归档日志位于多个目录中，则这些目录的名称以逗号分隔。</block>
  <block id="8cf315b076545853357eadb83171bf15" category="paragraph">指定重做日志目录 * 注： * 如果重做日志位于多个目录中，则这些目录的名称以逗号分隔。</block>
  <block id="4130eb5696578eefa8124d6c40111e87" category="paragraph">指定控制文件目录 * 注： * 如果控制文件位于多个目录中，则这些目录的名称以逗号分隔。</block>
  <block id="a8ec776e8ab5a8cf30e88a148656dbe5" category="paragraph">指定数据文件目录 * 注： * 如果数据文件位于多个目录中，则这些目录的名称以逗号分隔。</block>
  <block id="75830cfe92f9c5ad480aa79350fa8180" category="summary">使用 SnapManager 3.3 或更高版本，您可以更新存储系统主机名或存储系统地址以及与 SnapManager 配置文件关联的目标数据库主机名。</block>
  <block id="4081d23b59720834321a80074699caec" category="doc">更新与配置文件关联的存储系统名称和目标数据库主机名</block>
  <block id="b44095867d81eda6cd98828f71ad4645" category="summary">您必须删除不再需要的备份，这样可以释放这些备份占用的空间。如果删除备份，则每个卷的 Snapshot 副本数将减少达到 255 个限制的可能性。</block>
  <block id="cbc8b3fbf58cfcdbe6ca9a1b60d0d098" category="list-text">您必须确保未使用此备份创建克隆。</block>
  <block id="a775e3eaba2cf98c694360e75deeddf0" category="paragraph">您可以删除无限制保留的备份，而不更改保留类。</block>
  <block id="ba98b1b64ed56225f76cecf78ddb7956" category="paragraph">您可以选择在备份删除操作成功或失败后收集转储文件。</block>
  <block id="05ef85cc843807c324144e898dba4324" category="paragraph">如果要删除归档日志备份，则需要检查为归档日志备份设置的保留期限。如果归档日志备份处于保留期限内，并且恢复已还原的数据库需要归档日志文件，则无法删除归档日志备份。</block>
  <block id="5a3d0301efb01f7f1be391456dfc70f1" category="list-text">输入以下命令以验证操作是否已完成： smo operation list -profileprofile_name-quiet verbose</block>
  <block id="3a2e815c6e87a71b98c0768e28aed5c1" category="list-text">要删除备份，请输入以下命令： smo backup delete -profile profile_name （ -label label 标签）【 data （数据） &gt; -archivelogs （ -archivelogs ）】（ -iddid ） | -all] （ -force] （ -dump ）【 -quiet （ -verbose ）】</block>
  <block id="fea82e77723fc07179ad424aeef62979" category="paragraph">使用 -force 选项强制删除备份。强制删除操作不完整的备份可能会使备份处于不一致状态。</block>
  <block id="c14dd8df54ed280c65581838c6a1bace" category="summary">您可以使用带有失败操作名称或 ID 的 SMO operation dump 命令来获取有关特定操作的日志信息。您可以指定不同的日志级别来收集有关特定操作，配置文件，主机或环境的信息。</block>
  <block id="4f0fa15a1d67e5d94c2e40f8dfd5be10" category="doc">创建操作级别的转储文件</block>
  <block id="65ec0c8b8d5d33064322e7f82fd6c805" category="list-text">输入以下命令： smo operation dump -idguid</block>
  <block id="b8a81da4a4959d405f4a5ece408bb38d" category="admonition">smo operation dump 命令可提供一组由 smo profile dump 命令提供的超级信息，进而提供一组由 smo system dump 命令提供的超级信息。</block>
  <block id="4f94d359c4ed338f41772782c77cd264" category="paragraph">转储文件位置：</block>
  <block id="e879b7292b7a4908bc7c6856ad0388be" category="summary">您可以更新配置文件以修改配置文件密码，要保留的备份数，对数据库的访问，对数据库进行身份验证的操作系统（ OS ）身份验证（反之亦然）以及有关主机的信息。如果 Oracle 数据库密码信息发生更改，您还必须在配置文件中更改此信息。</block>
  <block id="1d12a8d07920aee3fe7e1d406cc74800" category="paragraph">通过 SnapManager （ 3.2 或更高版本），您可以使用 -separate -archivelog-backups 选项更新配置文件，以便将归档日志备份与数据文件备份分开。您可以为归档日志备份指定单独的保留期限。通过 SnapManager ，您可以将归档日志备份与联机数据库备份一起使用。您还可以同时创建联机数据文件备份和归档日志备份以进行克隆。创建联机数据文件备份时，系统会立即创建归档日志备份以及数据文件。</block>
  <block id="29b44941e07013171b2255366b4f2dfe" category="list-text">输入以下命令： smo profile update -profileprofile "-new-profilenew_profile_name] -profile-passwordprofile_password]-database-dbnamedb_dbname-host db_host [-siddb_sidi] [-login -usernamedb_username-password sd_password-port db_port]] 【 ｛ -rmman-edemnssl_mail-truset-zhn_uny&lt;-mail-try_trusers-try_users-snap-snap-snap-snap-name]-snap-snap-snap-snap-users-snap-snap-snap-snap-snap-snap-snap-snap-snap-userman_port] &lt;-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-userman_port] &lt;-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-userings1&lt;-snap-snap-snap-snap-snap-snap-snap-snap-snap</block>
  <block id="ebbc033c29ed786bfb79b70a6ef06096" category="paragraph">* 更改配置文件中数据库备份的备份保留策略 *</block>
  <block id="1d6e1667051384e102efbc89a6507032" category="paragraph">指定保留类的保留计数或保留期限，或者同时指定这两者以更改保留策略。持续时间以类的单位为单位（例如，小时表示每小时，天表示每天）。</block>
  <block id="f3c8d3d6652e9322b523d626644e0eb9" category="list-text">-hourly 是每小时保留类，其中的 "-countn] 和保留期限分别为保留计数和保留期限。</block>
  <block id="048529bf213bb302c09de2d4506cf4b5" category="list-text">-daily 是每日保留类，其保留计数和保留持续时间分别为 "-countn] 和 -durationm]] 。</block>
  <block id="d2a0e130222da1a57b334d6182199c15" category="list-text">-weekly 是每周保留类，其中，对应的保留计数和保留期限分别为 "-countn] 和 -durationm]] 。</block>
  <block id="33d97cffea995f1f81dc1cc7d46def60" category="list-text">-monthly 是每月保留类别，其保留计数和保留持续时间分别为 "-countn] 和 -durationm]] 。</block>
  <block id="fc4bec5d03d2b446d96460641f9bb5e2" category="paragraph">* 为数据库操作的完成状态启用电子邮件通知 *</block>
  <block id="36ec869a1325e0e48429e45bc233e70f" category="list-text">notification 用于接收有关配置文件数据库操作完成状态的电子邮件通知。</block>
  <block id="4e1a341ebc6e65781eb2df4e251dbea6" category="list-text">通过 -success-emailemailemail_address2 ，您可以在使用新配置文件或现有配置文件成功执行数据库操作后收到电子邮件通知。</block>
  <block id="a64597a64173e530450f2baeb1e07d24" category="list-text">通过 -failure-emailemailemail_address2 ，您可以收到有关使用新配置文件或现有配置文件执行的数据库操作失败的电子邮件通知。</block>
  <block id="19f2660431ba0e913ddffce7a12cafc3" category="list-text">-subjectsubject_text 指定创建新配置文件或现有配置文件时电子邮件通知的主题文本。如果未为存储库配置通知设置，而您正在尝试使用命令行界面（ CLI ）配置配置配置文件或摘要通知，则控制台日志中会记录以下消息： SMO-145777 ： Notification Settings not configured 。</block>
  <block id="52d77cd9db8c1f9b6e412aff8b66cd5a" category="paragraph">如果您已配置通知设置，并且正在尝试使用命令行界面配置摘要通知，而不为存储库启用摘要通知，则控制台日志中会记录以下消息： SMO-14575 ：此存储库的摘要通知配置不可用 _____</block>
  <block id="3deefc08530a89791532e3bebdefe2b3" category="paragraph">* 更新配置文件以单独创建归档日志文件的备份 *</block>
  <block id="294c798216e3b4e93444094aabc687ad" category="list-text">使用 -separate-archivelog-backups 可以分别为归档日志文件和数据库文件创建备份。</block>
  <block id="fc3269d09a8d926564494d5a5a5f147a" category="paragraph">指定此选项后，您可以创建仅数据文件备份或仅归档文件备份。您不能创建完整备份。此外，不能通过分离备份来还原配置文件设置。SnapManager 会根据在仅执行归档日志备份之前创建的备份的保留策略保留这些备份。</block>
  <block id="b461d64fa29e83374955002718846d0c" category="list-text">-retain-archivelog-backups 用于设置归档日志备份的保留期限。</block>
  <block id="03d3eafe7cc847019e2d56a050ee6441" category="admonition">如果您是首次更新配置文件，则可以使用 -separate -archivelog-backups 选项将归档日志备份与数据文件备份分开；您必须使用 -retain-archivelog-backups 选项提供归档日志备份的保留期限。在稍后更新配置文件时，可以选择设置保留期限。</block>
  <block id="848efee6a28d35c2c34172f155368a05" category="list-text">-include-with -online 备份指定归档日志备份与数据库备份一起包含。</block>
  <block id="5f6494695d0663feddd05bcaa9c41e4a" category="list-text">-no-include-with -online-backups 指定归档日志文件备份不随数据库备份一起提供。</block>
  <block id="e8951680c1593da4b02cf6e6207feb1c" category="paragraph">* 更改目标数据库的主机名 *</block>
  <block id="019f0c18d08b0522dc3e272ba6e959b4" category="paragraph">指定 -hostnew_db_host 以更改配置文件的主机名。</block>
  <block id="55c2154cefa34eb2f50fe7f7bf5bbd36" category="paragraph">* 在执行配置文件更新操作后收集转储文件 *</block>
  <block id="f86a8d39bee2fe10d1a7dfa15b82afaa" category="paragraph">指定 -dump 选项。</block>
  <block id="9cba670362003cf77a45402d96f0aa15" category="list-text">要查看更新后的配置文件，请输入以下命令： smo profile show</block>
  <block id="9bcf162ae9aeae72f2e59ebcf61c91b9" category="summary">通过 SnapManager ，您可以通过更新现有配置文件来自定义该配置文件的电子邮件主题模式。此自定义主题模式仅适用于更新后的配置文件。</block>
  <block id="6c8459549502388681814462b472cf68" category="doc">自定义现有配置文件的电子邮件主题</block>
  <block id="0a0de1b9198b1774b0b69d488609af0c" category="list-text">输入以下命令： smo profile update -profileprofile "-profile-passwordprofile_password]] ｛ -database-dbnamedb_dbname-host db_host "-siddb_sid] ｛ -login -usernamedb_username-password db_password-port db_port]] ｛ -rmAN ｛ -controlfile _ ｛ -address1_dureminations1_durm_mail_mail-try_try_trusername</block>
  <block id="8a51621eaf2426ca349368a9149671a2" category="summary">通过 SnapManager 3.3 或更高版本，可以更新与配置文件关联的存储系统的主机名或 IP 地址。</block>
  <block id="8f95ee11311eec3bee7e05e1cae5d774" category="doc">更新与配置文件关联的存储系统名称</block>
  <block id="96c96fb4ee0561983f4efc9ea1daf975" category="paragraph">您必须确保满足以下条件：</block>
  <block id="14745796ee65af12d9393fe167f5bcbf" category="list-text">此配置文件至少有一个备份。</block>
  <block id="8b3df53e912fefe00224cef0759ef779" category="paragraph">如果此配置文件没有任何备份，则无需更新此配置文件的存储系统名称。</block>
  <block id="ed71922020fabce13e35c9982f610273" category="list-text">未对此配置文件运行任何操作。</block>
  <block id="fdfb9e95f9d636c2b20ecc9f399da683" category="paragraph">您可以使用 SnapManager 命令行界面（ CLI ）更新存储系统名称或 IP 地址。更新存储系统名称时，仅更新存储库数据库中存储的元数据。重命名存储系统名称后，您可以像先前那样执行所有 SnapManager 操作。</block>
  <block id="50e1394b4c491864dc5803691e008fcf" category="admonition">您不能使用 SnapManager 图形用户界面（ GUI ）更改存储系统名称。</block>
  <block id="257639e1f58e74c84c7c9cedec07e4b6" category="paragraph">您必须确保 Snapshot 副本在新存储系统中可用。SnapManager 不会验证存储系统中是否存在 Snapshot 副本。</block>
  <block id="67e2e68c3c0d3ec886568e51af2794c0" category="paragraph">但是，在重命名存储系统名称后执行主机滚动升级和回滚时，您必须记住以下几点：</block>
  <block id="842ab11b0f05973076b7ebf4b8195d96" category="list-text">如果要在重命名存储系统名称后对主机执行滚动升级，则必须使用新的存储系统名称更新配置文件。</block>
  <block id="2190162490204ef03ea8844d099b0470" category="list-text">如果在重命名存储系统后回滚主机，则必须确保将存储系统名称重新更改为早期的存储系统名称，以便可以使用早期存储系统的配置文件，备份和克隆执行 SnapManager 操作。</block>
  <block id="3756b9cc5a12aef5ee8bca55a8badcc8" category="list-text">输入以下命令： smo storage rename -profileprofile-oldnameold_storage_name-newnamenew_storage_name [quiet | -verbose ]</block>
  <block id="3763b0167722225f48bc7e089c719cab" category="paragraph">更新与配置文件关联的存储系统名称</block>
  <block id="b2f19f59e1998484474ab70a0595d7a1" category="paragraph">指定 -profile 选项。</block>
  <block id="eac8314f2cda15272782625c7bb94504" category="paragraph">更新与配置文件关联的存储系统名称或 IP 地址</block>
  <block id="7f77c6b62c16c49158f2da77ed38daf9" category="list-text">-oldnameold_storage_name 是存储系统的主机名或 IP 地址。</block>
  <block id="c47016319486a277fff200c030247909" category="list-text">-newnamenew_storage_name 是存储系统的主机名或 IP 地址。</block>
  <block id="11bb58564ee7b8c802f7431449833a27" category="paragraph">以下示例显示了要更新的存储系统名称：</block>
  <block id="e585482d73fbaca47d925cede0949216" category="summary">安装 SnapManager for Oracle 的环境必须满足特定的软件，硬件，浏览器，数据库和操作系统要求。有关这些要求的最新信息，请参见互操作性表。</block>
  <block id="dbeb9c9e91ef323f37ad0aa773cff86a" category="summary">您可以找到有关一些可用于实现数据保护目标的备份，还原和恢复方案的信息。</block>
  <block id="cefa4e7d648e671b000d752482194e71" category="doc">备份，还原和恢复操作示例</block>
  <block id="2ea73762d83f48e5dcebd132f1c9cd88" category="paragraph">下图显示了表空间的内容：</block>
  <block id="7824386b7b7cfcdf00f805805cb46c39" category="image-alt">Prnt en drw SMO smsap 数据库表</block>
  <block id="bccbc51b3b58f6c96a26f84889e18eb3" category="paragraph">在插图中， Table1 具有一个表以及两个关联的数据库文件。Table2 具有两个表以及一个关联的数据库文件。</block>
  <block id="02d21b8e9b5ddfbbe5b9815c3cdfe315" category="paragraph">下表介绍了一些完整和部分备份，还原和恢复方案：</block>
  <block id="0728134e3a2ebdd69c7b152b5163ea5c" category="section-title">完整备份，还原和恢复操作示例</block>
  <block id="556b050ce914d18480d6ea30308c7790" category="cell">恢复</block>
  <block id="48aa8890eeeaca86c838c50943a6f42a" category="paragraph">SnapManager 对数据库 DB1 中的所有内容进行备份，包括数据文件，归档日志和控制文件。</block>
  <block id="2950b3440c979c47e48792a1f299288a" category="paragraph">使用控制文件完成还原 SnapManager 将还原备份中的所有数据文件，表空间和控制文件。</block>
  <block id="01e220c183fd36d1eb7fb132977263fa" category="paragraph">您可以指定以下项之一：</block>
  <block id="6c54f21583d80745f202473a6d4b6406" category="list-text">SCN - 输入 SCN ，例如 384641 。</block>
  <block id="dea82bdc1d0ce8f801951794e6b97772" category="list-text">日期 / 时间 - 输入备份的日期和时间，例如， 2005 年 11 月 25 日： 19 ： 06 ： 22 。</block>
  <block id="cc3b4466f249340560aae681d7df5ece" category="list-text">上次对数据库进行的事务。</block>
  <block id="196dfd78c18564cace242ad2398d4683" category="paragraph">不使用控制文件完成还原 SnapManager 将还原所有表空间和数据文件，而不使用控制文件。</block>
  <block id="e25b8779db846650f1a7d99eae2a6d3a" category="paragraph">使用控制文件还原数据文件或表空间指定以下选项之一：</block>
  <block id="16a49d0bc0249ef3dd42949589a0ed4e" category="list-text">表空间</block>
  <block id="ecf1c5708013406c6d7a04ad7117f65d" category="list-text">数据文件</block>
  <block id="ec1d0bf9890f8c12e2c54984065c1a40" category="paragraph">SnapManager 会将数据恢复到上次对数据库执行的事务。</block>
  <block id="3f57b46f227942c041e80a53b403dc25" category="section-title">部分备份，还原和恢复操作示例</block>
  <block id="737fa850e15c43fbda7d29a4db80881a" category="paragraph">您可以选择以下选项之一：</block>
  <block id="cbc814faeae343a78bb759a1b287f991" category="paragraph">您可以指定 Table1 和 Table2 ，也可以仅指定其中一个。</block>
  <block id="69ecf13a51e71c8283e88ae54c5825f4" category="paragraph">您可以指定所有三个数据库文件（ TS1_1.dbf ， TS1_2.dbf 和 TS2_1.dbf ），两个文件或一个文件。</block>
  <block id="8eca9e0686de96b3d6e69f95830ae0b7" category="paragraph">无论选择哪种选项，备份都会包括所有控制文件。如果未启用配置文件单独创建归档日志备份，则归档日志文件将包含在部分备份中。</block>
  <block id="73d07d5eca8f5e717259f96a19e22e6d" category="paragraph">Complete Restore SnapManager 将还原部分备份中指定的所有数据文件，表空间和控制文件。</block>
  <block id="d0965a18c68dde45e8d9def685f6e1dd" category="paragraph">SnapManager 会将数据恢复到上次对数据库实例执行的事务。</block>
  <block id="51780a14ee6e35063174aee50b7862e0" category="paragraph">使用控制文件还原数据文件或表空间 SnapManager 将还原以下内容之一：</block>
  <block id="63ad2b8ebf6b248b7421ee98a02dae4a" category="list-text">指定的所有数据文件</block>
  <block id="58018d487da0c0593a3c98ccf5e9cec3" category="list-text">指定的所有表空间</block>
  <block id="b7247c12e7c606f5dfc656129f9d5af3" category="paragraph">还原不带控制文件的数据文件或表空间 SnapManager 将还原以下内容之一：</block>
  <block id="e5245239e7b0dfead34dfaeb8cebcae2" category="paragraph">指定任何表空间。SnapManager 仅还原指定的表空间。如果备份包含 Table1 ，则 SnapManager 仅还原该表空间。</block>
  <block id="d4b195c8bad8e3676a37634c2db05f60" category="paragraph">指定任何数据库文件。SnapManager 仅还原指定的数据文件。如果备份包含数据库文件（ TS1_1.dbf 和 TS1_2.dbf ），则 SnapManager 仅会还原这些文件。</block>
  <block id="a35ffc4eba49c9855d463f6b8010ef38" category="paragraph">仅还原控制文件</block>
  <block id="310ce53a751f46828ee8d56beea668b0" category="summary">您可以查看与特定配置文件关联的存储系统列表。</block>
  <block id="07341642542b5f825d4b7950cf9dbbdd" category="doc">查看与配置文件关联的存储系统的列表</block>
  <block id="46e08787cffc4a713bd183042b886c2b" category="paragraph">此列表将显示与特定配置文件关联的存储系统名称。</block>
  <block id="9c541eca94bed74e0e5f0cdae863f1ba" category="admonition">如果没有可用于此配置文件的备份，则无法查看与此配置文件关联的存储系统名称。</block>
  <block id="82e91c91b684232d7fbcb0a985338f05" category="list-text">要显示与特定配置文件关联的存储系统的信息，请输入以下命令： smo storage list -profileprofile "-quiet | -verbos]</block>
  <block id="3d04f323e70792ff670b67666a3a65f6" category="summary">您可以查看与配置文件关联的特定 SnapManager 操作的详细历史记录。</block>
  <block id="885a0ca115c6e0f7cdd2ad90612f4dc2" category="doc">查看与配置文件关联的特定操作的详细历史记录</block>
  <block id="c0610fec8f3bc8a8c0ab0c4b1fac3220" category="list-text">要显示与配置文件关联的特定 SnapManager 操作的详细历史记录信息，请输入以下命令： `smo history operation-show -profileprofileprofile_name ｛ -labelLabel _ -idd ｝ （ -quiet _ -verbose ）`</block>
  <block id="5060baca04f6a17bcac9a29e5f1f9f45" category="summary">通过 SnapManager ，您可以为备份操作创建后处理，任务规范的 XML 文件，其中包括 SnapMirror 或 SnapVault 后脚本。通过这些脚本，您可以将备份镜像或存储到二级存储。</block>
  <block id="47306cc3fb69094d56d8ccc3ca02fc0a" category="doc">创建后处理，任务规范文件</block>
  <block id="608413ee973049b6d49c8e17359e2f86" category="list-text">打开新的 XML 文件。</block>
  <block id="244f095c42626d2b2755d395c3ffb571" category="paragraph">您可以在 default_install_directory\plugins\examples 查看任务规范 XML 文件示例。</block>
  <block id="2fc1fb9d53689f3731cdc32ff1a7ae4f" category="list-text">将脚本名称添加为输入参数。</block>
  <block id="1c6ff92ede4b3934211ac8a96df9990b" category="list-text">保存任务规范 XML 文件。</block>
  <block id="bae78be84013a112f098362463f4c041" category="summary">您可以使用带有特定配置文件名称的 smo profile dump 命令来查找有关该配置文件的日志信息。</block>
  <block id="7c8324008997e85869e3e267a2421653" category="doc">创建配置文件级别的转储文件</block>
  <block id="6809f10e01b46bc8b9f065189f743be5" category="list-text">输入以下命令： smo profile dump -profile profile_name</block>
  <block id="5bc9224fb58a44da4488792e6778842d" category="admonition">如果在创建配置文件时遇到错误，请使用 smsystem dump 命令。成功创建配置文件后，请使用 smooperation dump 和 smoprofile dump 命令。</block>
  <block id="7be7ce3a2986c4d422689a237212f8c0" category="summary">您可以运行 operation show 命令列出针对指定配置文件执行的所有操作的摘要信息。输出将列出客户端用户（客户端 PC\ 的用户）和有效用户（ SnapManager 中在选定主机上有效的用户）。</block>
  <block id="d5521dd651485c6598265c57b0cfb64e" category="doc">smo operation show 命令</block>
  <block id="13b4012c2db05c4e91fc576c5f352313" category="paragraph">您可以运行 operation show 命令列出针对指定配置文件执行的所有操作的摘要信息。输出将列出客户端用户（客户端 PC 的用户）和有效用户（ SnapManager 中在选定主机上有效的用户）。</block>
  <block id="8e8ca7834dfa22fa609733ff5001ca8f" category="paragraph">指定操作的标签。</block>
  <block id="321d3abe3f824a4755223bf26dde65eb" category="paragraph">指定操作的标识符。</block>
  <block id="6216542eba40b1e6b51da55193d8d73b" category="paragraph">可选：在控制台中仅显示错误消息。默认情况下会显示错误和警告消息。</block>
  <block id="943d03d72c4ec96e6114b8fe43feef4e" category="paragraph">可选：在控制台中显示错误，警告和信息性消息。</block>
  <block id="26cb80c0bb7df3faf58e2c853efd745f" category="paragraph">以下命令行显示了有关操作的详细信息：</block>
  <block id="865234dda60692f9e5b472b3687fe81f" category="inline-xref-macro">查看操作详细信息</block>
  <block id="e94d7b8ac9e442137942da909dafee58" category="paragraph"><block ref="e94d7b8ac9e442137942da909dafee58" category="inline-xref-macro-rx"></block></block>
  <block id="df0afbf2320b0f2c6c42372fc443f1e1" category="summary">您可以使用 lsnrctl status 命令验证 Oracle 侦听器状态。</block>
  <block id="80dc3dcfcc83b2857ee48b7ecc21b722" category="doc">验证 Oracle 侦听器状态</block>
  <block id="df70dfac27d8d30b7c6572b3e2c33596" category="list-text">您必须连接到数据库。</block>
  <block id="56ba698ccfa2449c0116e22e9d24388f" category="paragraph">标准 Oracle 安装会将数据库上的侦听器端口设置为 1521 。</block>
  <block id="ebba73014c6f178b52255abb754c444c" category="list-text">在命令提示符处，输入命令： lsnrctl status</block>
  <block id="e73dc28dad7a68fca58af7950ae9a9c1" category="summary">您可以查看有关特定配置文件的详细信息，以验证操作是否成功。它还可以帮助您确定用于特定操作的存储资源。</block>
  <block id="ecc031f847eda0c9d86344136508959c" category="paragraph">您可以查看有关特定操作的以下详细信息：</block>
  <block id="578f9e24d151730e7ba1a0b0eb8cfe31" category="list-text">是否强制执行此操作</block>
  <block id="508301178bce64eec462f2487fee5ce2" category="list-text">运行时信息，包括操作的状态，开始日期和结束日期</block>
  <block id="71e4cb423a8dba0effd634a20d663498" category="list-text">运行操作的主机，包括进程 ID 和 SnapManager 版本</block>
  <block id="b2f6927f46be4f1d1c693de30c4457ac" category="list-text">存储库信息</block>
  <block id="ac37285600a325f452a13eb4a957f083" category="list-text">正在使用的存储资源</block>
  <block id="74b90a91497997d5e80af3ad36ee3740" category="list-text">要查看特定操作 ID 的详细信息，请输入以下命令： smo operation show -profile profile_name [-label label | -id id] （ -quiet | -verbose ）</block>
  <block id="c535cccd4a08e4559c4550088a2a7d99" category="paragraph"><block ref="c535cccd4a08e4559c4550088a2a7d99" category="inline-xref-macro-rx"></block></block>
  <block id="066521a4b1e8731047ead7830f731e7b" category="summary">如果主机上安装了 SnapManager ，请从程序列表中选择程序，以启动 SnapManager 的图形用户界面（图形用户界面）。</block>
  <block id="77965cb0c52e4e4d733c056da0e6fc47" category="doc">启动 SnapManager 图形用户界面</block>
  <block id="c9e9e7b38793e2bea564cc233d6ed914" category="list-text">确保已启动 SnapManager 服务器。</block>
  <block id="1ac58be242f20075a67ff7412caf4932" category="paragraph">您可以通过以下方式之一启动 SnapManager 图形用户界面：</block>
  <block id="bc9780614e96e1cc01c6c9ba59134018" category="list-text">在 SnapManager 主机中，单击 * 开始 * &gt; * 所有程序 * &gt; * NetApp * &gt; * 适用于 Oracle* 的 SnapManager &gt; * 启动 SMO GUI* 。</block>
  <block id="5e7098d3f3c4f0264202b84b21952419" category="list-text">如果主机上未安装 SnapManager ，请使用 Java Web Start ，它会下载 SnapManager 组件并启动 GUI 。</block>
  <block id="ab249daf072295d55b29b0d5712bd5f8" category="paragraph"><block ref="ab249daf072295d55b29b0d5712bd5f8" category="inline-xref-macro-rx"></block></block>
  <block id="9b3ed48f05b917bbd5708b941d1a6615" category="summary">默认情况下， SnapManager 不会将主机凭据存储在用户凭据缓存中。但是，您可以更改此设置。您可以编辑 SMO.config 文件以允许存储主机凭据。</block>
  <block id="852b06f5bd60776e0e1f39c3ed0262d2" category="doc">存储自定义脚本的加密密码</block>
  <block id="cdbace6c91b99ccc6f42965f4a49f7d9" category="paragraph">SMO.config 文件位于 &lt;default installation location&gt;\properties\SMO.config</block>
  <block id="d8905d5db5001ce3f11881215808cd50" category="list-text">将 host.credentials.persist 设置为 true 。</block>
  <block id="8356deabfca73a3c2eddba32f8d5d4cc" category="summary">您可以清除资源（主机，存储库和配置文件）的凭据缓存。此操作将删除运行命令的用户的所有资源凭据。清除缓存后，您必须重新对凭据进行身份验证，才能访问这些受保护的资源。</block>
  <block id="659e04b0de28720e6e2bfcb6ad36fc67" category="list-text">要清除凭据，请在 SnapManager 命令行界面中输入 smo credential clear 命令，或者从 SnapManager 图形用户界面中选择 * 管理 * &gt; * 凭据 * &gt; * 清除缓存 * 。</block>
  <block id="a825ab3ec7e4b5ecbb74e8d2972950c1" category="list-text">退出 SnapManager 图形用户界面。</block>
  <block id="9b9935ad5969c28de13381a2e512b47c" category="paragraph">注意</block>
  <block id="ecddbf68c65f9ffdae651e3c639b2869" category="list-text">如果已从 SnapManager 命令行界面清除凭据缓存，则必须重新启动 SnapManager 图形用户界面。</block>
  <block id="7e88c6941fd686a6bbee6e2bcd9bdec6" category="list-text">如果您手动删除了加密的凭据文件，则必须重新启动 SnapManager 图形用户界面。</block>
  <block id="5b1b3b85203da168cc4a2f4c68438842" category="list-text">要再次设置凭据，请重复此过程为存储库，配置文件主机和配置文件设置凭据。有关重新设置用户凭据的追加信息信息，请参阅 " 清除凭据缓存后设置凭据 " 。</block>
  <block id="7fec12843e00031a6a6cb9919c2ae6ff" category="paragraph"><block ref="7fec12843e00031a6a6cb9919c2ae6ff" category="inline-xref-macro-rx"></block></block>
  <block id="9f9432ed07747b8d8f2c5fa3ab8b7b66" category="summary">通过 SnapManager for Oracle ，您可以在 Windows 环境中执行备份操作后使用脚本镜像卷。</block>
  <block id="7e99ef454a3c3a14f14a4b7cb3ae267d" category="doc">使用后处理任务规范镜像卷</block>
  <block id="2c51e710766fa31a0af86a88dddab10b" category="paragraph">示例： smobackup create -profile test_profile -full -online -taskspecC ： \\mirror\\snapmirror.xml</block>
  <block id="f264f4f20ac736b648332670970ed79d" category="paragraph">以下示例显示了使用 7- 模式 Data ONTAP 时的后处理任务规范结构：</block>
  <block id="26c6a370aac5ed2dbec109a3cc89bbc9" category="paragraph">以下示例显示了使用集群模式 Data ONTAP 时的后处理任务规范结构：</block>
  <block id="86a45b31252bf807fef5543a7d9abd24" category="summary">您可以使用 schedule create 命令计划在特定时间创建备份。</block>
  <block id="e4d1030cd02bdaaecac2669e310c7da8" category="doc">smo schedule create 命令</block>
  <block id="dea7f757ac6298f5a842ef91a952e689" category="paragraph">指定与要计划备份的数据库相关的配置文件的名称。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="58203e0be87c66ee12b3e95846a060ea" category="paragraph">指定数据库处于关闭状态时的脱机备份。如果数据库处于打开或挂载状态，备份将失败。如果使用 -force 选项，则 SnapManager 会尝试更改数据库状态以关闭数据库以进行脱机备份。</block>
  <block id="4c568bc4c2b9c6783f038a380c27f115" category="paragraph">仅备份指定的数据文件以及归档的日志和控制文件。使用空格分隔文件名列表。如果数据库处于打开状态，则 SnapManager 会验证相应的表空间是否处于联机备份模式。</block>
  <block id="74b4d783273dc05b2aea595b4063b718" category="paragraph">仅备份指定的数据库表空间以及归档的日志和控制文件。使用空格分隔表空间名称。如果数据库处于打开状态，则 SnapManager 会验证相应的表空间是否处于联机备份模式。</block>
  <block id="af6f1fcd7b5846f25c442ab5096ae370" category="paragraph">指定此备份的可选名称。此名称在配置文件中必须是唯一的。此名称可以包含字母，数字，下划线（ _ ）和连字符（ - ）。不能以连字符开头。</block>
  <block id="ba9e2843872a5edf4b230c90858667bc" category="paragraph">如果不指定标签， SnapManager 将创建 scope_type_date 格式的默认标签：</block>
  <block id="ce23aecf95b4eef0c92c0e73d8b8cdaf" category="paragraph">指定用于描述此备份的可选注释。将字符串用单引号（ ' ）括起来。</block>
  <block id="5d7191c49e8b2781b5ec7fc9aede5681" category="admonition">某些 shell 会去除引号。如果您的 shell 确实如此，则必须使用反斜杠（ \ ）加上引号。例如，您可能需要输入： ` ' this is a comation\'` 。</block>
  <block id="5a884d104337fa36d57921f7ae8aa792" category="list-text">如果本地实例处于关闭状态，并且至少有一个实例处于打开状态，则可以使用 -force 选项将本地实例更改为已挂载。</block>
  <block id="b821110a641eb635cf3b21c728ccfd2c" category="list-text">如果未打开任何实例，您可以使用 -force 选项将本地实例更改为打开。</block>
  <block id="8b3914a79a52c29fe025d2f6579514b9" category="paragraph">指定备份应保留在每小时，每天，每周，每月还是无限制的基础上。如果未指定 -retain 选项，则保留类默认为 -hourly 。要永久保留备份，请使用 -unlimited 选项。unlimited 选项使备份不符合保留策略删除的条件。</block>
  <block id="32f558c549b1b0627d61992c7b2fdb9a" category="paragraph">指定创建归档日志备份。</block>
  <block id="0a26abdade5d10b7df217f797fdb5918" category="paragraph">指定归档日志备份的归档日志目标。</block>
  <block id="bf23cf7868b19dbc96b69b5f00b8a90d" category="paragraph">指定是否根据创建备份时提供的选项从归档日志目标中删除归档日志文件。all 选项将从归档日志目标中删除所有归档日志文件。直到 -til-scn 选项将删除归档日志文件，直到指定的系统更改编号（ SCN ）为止。直到日期选项将删除归档日志文件，直到指定时间段为止。before 选项将删除指定时间段（天，月，周，小时）之前的归档日志文件。</block>
  <block id="a6f6c73d308e2590c42af5408fa6c0a2" category="paragraph">指定创建备份的时间间隔。您可以按每小时，每天，每周，每月或仅一次计划备份。</block>
  <block id="7687c077180e996053fae1af8a20c998" category="paragraph">指定使用 cronstring 计划备份。cron 表达式用于配置 CronTrigger 实例。cron 表达式是由以下子表达式组成的字符串：</block>
  <block id="5be9fa6b6a351c888111acada4121914" category="list-text">7 表示年份（可选）。</block>
  <block id="934aa913c5d0d505eb93cd5ee2769af7" category="paragraph">指定计划操作的开始时间。计划开始时间应采用 yyyy-mm-dd HH ： mm 格式。</block>
  <block id="14d2017aab5fe87b483788a6c8472404" category="paragraph">指定在计划备份时更改计划备份操作的用户（ root 用户或 Oracle 用户）。</block>
  <block id="9d1c1379a23a201fc974f1b8bbb7d907" category="paragraph">指定可用于备份操作的预处理活动或后处理活动的任务规范 XML 文件。XML 文件的完整路径必须随 -taskspec. 选项一起提供。</block>
  <block id="97c8c21d2552e346250ffadc8c895e7b" category="summary">您必须了解执行数据保护时的某些注意事项。</block>
  <block id="1378683a1ec5e6e45ebeb84d5ac922d6" category="doc">执行数据保护的注意事项</block>
  <block id="aecb439d1b119e1048e529ff8f4837dc" category="list-text">要从二级系统执行克隆或还原操作，必须将目标卷挂载到命名空间中并正确导出。</block>
  <block id="b8667c26f1fd0beea58973cfdcd3d42c" category="list-text">您必须通过将 SnapDrive 配置参数 check-export-permission-nfs-clone 的值设置为 off 来禁用此参数。</block>
  <block id="2eaf50d2e63334224f048226245fcdb7" category="paragraph">NetApp 支持站点上的 SnapDrive for UNIX 文档包含有关 check-export-permission-nfs-clone 参数的追加信息。</block>
  <block id="b9aeae48047e75c79634e7c3def67aac" category="list-text">您必须为二级存储系统中请求的二级存储卷配置 SnapMirror 关系。</block>
  <block id="d8a773e530b43d95fbcbe41e57c6b79d" category="list-text">对于 7- 模式 Data ONTAP ，您必须在二级存储系统中为请求的二级存储 qtree 配置 SnapVault 关系。</block>
  <block id="30d4971c01c53473621bfb6b202508e5" category="list-text">如果要对集群模式 Data ONTAP 使用 SnapVault 后脚本，则必须为用户定义的 SnapMirror 标签定义策略和规则。</block>
  <block id="03fd2a5d1743db3680cbf44a61f57e65" category="paragraph">SnapVault 后脚本支持集群模式 Data ONTAP 卷以及 SnapMirror 关系类型 DP 和 XDP 。NetApp 支持站点上的 ONTAP 文档包含有关配置 SnapMirror 和 SnapVault 的信息。</block>
  <block id="f7aef9d8932ec4802bd64103fbb2d390" category="summary">如果不再需要 SnapManager 操作的历史记录详细信息，则可以删除该历史记录。</block>
  <block id="fe3fc254cf9322af57815d162ca901cd" category="doc">正在删除 SnapManager 操作历史记录</block>
  <block id="63c1394c940ff0ebe667c1d9645f05a4" category="list-text">要删除 SnapManager 操作的历史记录，请输入以下命令： smo history purge -profile ｛ -name ， profile_nameprofile_name1 ， profile_name2] | all-repository-login （ -passwordrepo_password ） -usernamerepo_username-verbose namerepo_dbname-host-portrepo_port ｝ -operation ｛ -operation ｝ _name</block>
  <block id="4a9dafe40e48faffbbaf333b459b2d4f" category="summary">您可以在设置和配置 SnapManager 后执行管理任务。通过这些任务，您可以管理备份，还原和克隆以外的正常操作。</block>
  <block id="c2669efd40dc1350fa636584e37416c7" category="doc">执行管理操作</block>
  <block id="554c77bf850edbde56699ebccd24fa5b" category="paragraph">管理员可以使用图形用户界面或命令行界面执行操作。</block>
  <block id="4d2c070fa34c1cb22873e788b46383fe" category="summary">此命令将列出用户的所有凭据。</block>
  <block id="7a7a643590b931937bbcafaae184143e" category="paragraph">此示例显示了运行命令的用户的所有凭据。</block>
  <block id="0d432fa41530d057958e1188bc7c4056" category="paragraph"><block ref="0d432fa41530d057958e1188bc7c4056" category="inline-xref-macro-rx"></block></block>
  <block id="97da08078a804e5af0bc93ac082488e1" category="summary">在完全联机备份期间， SnapManager 会备份整个数据库，并在卷级别（而不是表空间级别）创建 Snapshot 副本。</block>
  <block id="79b7d6028634fffb801d1f827178ab9e" category="doc">完全联机备份</block>
  <block id="c405c182b313cde0db18b14d0f34f243" category="paragraph">SnapManager 会为每个备份创建两个 Snapshot 副本。如果数据库所需的所有文件都位于一个卷中，则两个 Snapshot 副本都会显示在该卷中。</block>
  <block id="d8e5e68c5c16c0a3d75e6a0bdd0bf7c4" category="paragraph">指定完整备份时， SnapManager 将执行以下操作：</block>
  <block id="0f3cbc4fd8dceb9aeec6fe41ba07732e" category="list-text">将整个数据库置于联机备份模式</block>
  <block id="e8e89a655417c47090236c5aa56a24e4" category="list-text">为包含数据库文件的所有卷创建 Snapshot 副本</block>
  <block id="2f1d4463d971b5694eb16d540f7f991d" category="list-text">使数据库退出联机备份模式</block>
  <block id="4f40c83698c1a06e75d6c46575c4cc3f" category="list-text">强制执行日志切换，然后归档日志文件</block>
  <block id="056d1c05140caf16d70d26da6b5c794e" category="paragraph">此操作还会将重做信息转储到磁盘。</block>
  <block id="607263839531326f1d437f22fdee10b9" category="list-text">生成备份控制文件</block>
  <block id="fd23f7ca150d4d2939cc791e099bb820" category="list-text">为日志文件和备份控制文件创建 Snapshot 副本</block>
  <block id="fc413bd67cc4086cb7f8a697a4b5e64c" category="paragraph">执行完整备份时， SnapManager 会将整个数据库置于联机备份模式。单个表空间（例如 E ： \data\TS1_1.dbf ）处于联机备份模式的时间比指定的特定表空间或数据文件长。</block>
  <block id="b630fb792e759d7bac2a0949533ccad0" category="paragraph">当数据库进入备份模式时， Oracle 会将整个块写入日志，而不仅仅是写入备份之间的增量。由于数据库在联机备份模式下的工作负载较多，因此选择完整备份会给主机带来更大的负载。</block>
  <block id="32bcf9ec7bd85f90017804159a3eeda6" category="paragraph">尽管执行完整备份会给主机带来更大的负载，但完整备份所需的 Snapshot 副本更少，从而降低了存储需求。</block>
  <block id="18adf42a7d00332f2700062271e86ff3" category="summary">如果主机上的 shell 限制了命令行上可显示的字符数，则可以使用 cmdfile 命令运行任何命令。</block>
  <block id="844b5feb0bb24f1048de9b37848312ad" category="doc">smo cmdfile 命令</block>
  <block id="7a68a8f381b40300f051b08c632081a3" category="paragraph">您可以将命令包含在文本文件中，并使用 smo cmdfile 命令执行该命令。您只能在文本文件中添加一个命令。不得在命令语法中包含 SMO 。</block>
  <block id="64dbca240eceb671bbffa017494b8f4f" category="admonition">smo cmdfile 命令将取代 smo pfile 命令。SMO cmdfile 与 SMO pfile 命令不兼容。</block>
  <block id="dfdd6b11cab1a5aef2268f249d33f17b" category="list-text">* 文件 file_name*</block>
  <block id="bfbd21c30cd15cdfea512fa06337dbc4" category="paragraph">指定包含要执行的命令的文本文件的路径。</block>
  <block id="ac9c4ea9205a2025318e051fcc010aaa" category="summary">通过适用于 Oracle 的 SnapManager ，您可以从 SnapManager 命令行界面或图形用户界面维护 SnapManager 操作历史记录。您可以报告形式查看 SnapManager 操作的历史记录。</block>
  <block id="f20a412f9f6e5c08101fac97f99c3f01" category="doc">配置 SnapManager 操作历史记录</block>
  <block id="66a26a80c11cc58ef6f543f0a034d7ff" category="list-text">要配置 SnapManager 操作的历史记录，请输入以下命令： smo history set -profile ｛ -name ， profile_name [profile_name1 ， profile_name2] ； -all-repository-login （ -passwordrepo_password ） -usernamerepo_username-verbnamerepo_dbname-host-portrepo_port-revite_uny_ 操作 _ 操作数 _ ｛ -retain_name1 ｝ _</block>
  <block id="69c0fb1bab38a6dba2dfd1a506fb8c4a" category="summary">有关配置数据库的帮助，请参见示例数据库卷布局。</block>
  <block id="d973409d33e8fbfad59191e3d09663ae" category="doc">示例数据库卷布局</block>
  <block id="b0b0a7250aa9684f107c0712d754cf65" category="section-title">单实例数据库</block>
  <block id="65da47b6ef0adda3d4c4ed54dfde4494" category="cell">文件类型</block>
  <block id="feea02a8cc7f5d786039d3320d4aff8b" category="cell">卷名称</block>
  <block id="7ee0c6449f7613e28fa05074c74b5f37" category="cell">文件类型的专用卷</block>
  <block id="72cd6967420e0c7bd26783954b080c0d" category="cell">自动 Snapshot 副本</block>
  <block id="7a35258a504f874773964d75b6da4bd4" category="paragraph">Oracle 二进制文件</block>
  <block id="3f7738495d89579a778accb18d45b6d7" category="paragraph">orabin_host 名称</block>
  <block id="521c36a31c2762741cf0f8890cbe05e3" category="paragraph">开启</block>
  <block id="10d1192db98432de4902930b32f54eb6" category="paragraph">oradata SID</block>
  <block id="d15305d7a4e34e02489c74a5ef542f36" category="paragraph">关闭</block>
  <block id="2714fd34af374185d27fea900a0c8745" category="paragraph">临时数据文件</block>
  <block id="97120660b595443db79cdce6787636c1" category="paragraph">oratemp_SID</block>
  <block id="f1e767e26904f4c99b3d98219aba9637" category="paragraph">oracntrl01_SID （多路复用）</block>
  <block id="20b0b1e8cb71c97c071e79da3d0b5edd" category="paragraph">oracntrl02_SID （多路复用）</block>
  <block id="823272d72b3248694e3df021ef8cf5d4" category="paragraph">重做日志</block>
  <block id="dbd47c46d91ecba3056471b9ef202143" category="paragraph">oralog01_SID （多路复用）</block>
  <block id="b653563fbbe673a1ef1c2ead55379f31" category="paragraph">oralog02_SID （多路复用）</block>
  <block id="b786dee2ac15f8f01307cea7a25333e1" category="paragraph">归档日志</block>
  <block id="607f4d137393a3c6ae538df24c78105e" category="paragraph">oraarch_SID</block>
  <block id="2b3d66f47f584a94f8544b04fa2de190" category="list-text">创建还原规范 XML 文件并指定要使用的还原方法类型。</block>
  <block id="e7417eb0c46b02cf44c55b2330091ff8" category="paragraph">您可以使用 smo backup restore 命令并指定为从备用位置还原备份而创建的还原规范 XML 文件。</block>
  <block id="4cf2510e9fb132c19860a9a515810a6e" category="list-text">输入以下命令： smo backup restore -profileprofile-labelLabel-complete-alllogs-restoreestorSpec</block>
  <block id="9f4ff2c3569b620c168e668f32e53d83" category="summary">您可以运行 profile verify 命令来验证配置文件设置。在运行此命令之前，必须挂载数据库。</block>
  <block id="146e3ff3486cb781dc5c49d562bf2a75" category="list-text">* 配置文件 *</block>
  <block id="d3d6734dc3aed52ce619ca975091d34e" category="paragraph">指定要验证的配置文件。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="d9b64e3a3908ba149b78b772a0a810cd" category="paragraph">以下示例将验证配置文件：</block>
  <block id="cee72b0e2c3477cf5ca7a1302112c126" category="paragraph"><block ref="cee72b0e2c3477cf5ca7a1302112c126" category="inline-xref-macro-rx"></block></block>
  <block id="5a35a1fc7daf74c62dc52d3a11fb6521" category="summary">要启用 AutoSupport ，必须将在集群模式 Data ONTAP 中运行的存储系统添加到 SnapManager 服务器主机。在 SnapManager 3.3 及更早版本中，只有在 7- 模式存储系统上才支持 AutoSupport 。</block>
  <block id="46f0d9659bb49da8eba3deef5d3f3f27" category="list-text">将管理 Storage Virtual Machine （ SVM ，以前称为 Vserver ）和在集群模式 Data ONTAP 中运行的 SVM 添加到 SnapManager 服务器主机： sdcli transport_protocol set -f AdminVserver_name 或 vserver_name -type HTTP -user admin</block>
  <block id="920aef3595d32c68c86d08fdc8f9eb2c" category="paragraph">此时将显示输入以下命令：消息。</block>
  <block id="fdcfc6afbf443872a733e76a3db35a55" category="list-text">输入创建 SVM 时提供的密码。</block>
  <block id="9959828ef895bb757a6bbcc3b8ef749a" category="paragraph">成功运行命令后，已设置新传输协议。此时将显示消息。</block>
  <block id="1c8fe3b0994d649068416a21de9ea096" category="summary">您可以运行 notification update-summary-notification 命令为存储库数据库启用摘要通知。</block>
  <block id="5b14e28bdc3802955fa60ba52350ce0d" category="doc">smo notification update-summary-notification 命令</block>
  <block id="d5530df298e784e100940751b8b45a07" category="paragraph">指定存储库数据库所在主机的名称或 IP 地址。</block>
  <block id="c892295c8a0c3630d39e368b6dd2e379" category="list-text">电子邮件电子邮件地址 1 ，电子邮件地址 2 *</block>
  <block id="96b1c72d4becac9f695ea1605473a024" category="paragraph">指定收件人的电子邮件地址。</block>
  <block id="f505051a8b4f3c1ee131f558aec25afe" category="list-text">* 主题主题模式 *</block>
  <block id="3c6c2b5a79c1af667df444681f996539" category="paragraph">指定电子邮件主题模式。</block>
  <block id="9106cfc1ade0ba546b4a7c72b18bd9d0" category="list-text">* 频率 ｛ -daily -time daily _time | -hourly -time hourly_time | -monthly -time monthly_time -date ｛ 1|2|3...-31 ｝ _ - 每周 - 时间 weekly_time -Day ｛ 1|2|3|4|5|6|7 ｝ *</block>
  <block id="9f97cc0cf8ace68da0733aaad06f6c0a" category="paragraph">指定希望电子邮件通知的计划类型和计划时间。</block>
  <block id="ea6c38c6b4a9a9a5120354ebd78b0247" category="list-text">* 配置文件 profile1 ， profile2*</block>
  <block id="79d8a6c8787d5eb09bf2079c1b10db31" category="paragraph">指定需要电子邮件通知的配置文件名称。</block>
  <block id="dab73c1afea1ec7c16366c226987db30" category="list-text">* — notification — host notification — host*</block>
  <block id="3cb5be616fa90b0ccf7e5e288ec690bf" category="paragraph">指定将摘要通知电子邮件发送到收件人的 SnapManager 服务器主机。您可以为通知主机提供主机名或 IP 地址。您还可以更新主机 IP 或主机名。</block>
  <block id="097a6b783146611733105ed8763dc60f" category="paragraph">以下示例将为存储库数据库启用摘要通知：</block>
  <block id="31de69b8861ab1085428624a359ba037" category="summary">您可以克隆数据库以创建原始数据库的精确副本。您可以从完整备份或数据库的当前状态创建克隆。</block>
  <block id="442a01a385dc9a102b0980da9f80c4f3" category="doc">什么是克隆</block>
  <block id="d63b875e96087408a8c478432a70d54b" category="paragraph">使用 SnapManager 创建克隆的一些优势如下：</block>
  <block id="44877c6aa8e93fa5a91c9361211464fb" category="paragraph">速度</block>
  <block id="95f058879a39cc6fd8e9d98166721a2d" category="paragraph">SnapManager 克隆操作会使用 Data ONTAP 提供的 FlexClone 功能。这样，您可以快速克隆大型数据卷。</block>
  <block id="d2780a8fb4c5d0d310aadbbcfa10cd33" category="paragraph">空间效率</block>
  <block id="c153a91f2da2f2e596ba860fe4528626" category="paragraph">使用 SnapManager 创建克隆时，只需为备份和克隆之间的更改留出空间。SnapManager 克隆是原始数据库的可写 Snapshot 副本，可以根据需要进行扩展。相反，数据库的物理克隆要求您有足够的可用空间来复制整个数据库。</block>
  <block id="0f1f09e4dcee5be64db8f758b38eb69a" category="paragraph">虚拟副本</block>
  <block id="5fa25febc264d18beb656781830c02c2" category="paragraph">您可以像使用原始数据库一样使用克隆的数据库。例如，您可以使用克隆执行测试，平台和更新检查，针对大型数据集进行多次模拟以及远程办公室测试和暂存。对克隆所做的更改不会影响原始数据库。克隆数据库后，克隆的数据库将完全正常运行。</block>
  <block id="5204212cce147a548eccae0b1523e7ac" category="paragraph">精简性</block>
  <block id="1f0cfb2480d1deaed7220c738ec07776" category="paragraph">您可以使用 SnapManager 命令将数据库克隆到任何主机。</block>
  <block id="33f7292585a21ac0f47a6f8d2b1aa521" category="paragraph">克隆数据库之前，必须确保满足以下前提条件：</block>
  <block id="0ef666526b28344fbc66286c5bc7c082" category="list-text">从 $ORACLE_HOME\database 中删除 spfile&lt;sid&gt;.ora 文件。</block>
  <block id="730f178925a44421badaab8df7e2d96a" category="list-text">从 $ORACLE_HOME\database 中删除 init&lt;sid&gt;.ora 文件。</block>
  <block id="3df2800e110c2b74848137686379b352" category="list-text">删除克隆规范文件中指定的 Oracle 转储目标。</block>
  <block id="a31c16500390563fd8150f91f7a8520c" category="list-text">删除克隆规范文件中指定的 Oracle 控制文件。</block>
  <block id="a69771b99aefef6b4a4e5f68d9bb9f6a" category="list-text">删除克隆规范文件中指定的 Oracle 重做日志文件。</block>
  <block id="729d54bc531ecf96c96ccd7ef2ab2d37" category="paragraph">您必须为克隆提供一个新的系统标识符。不能在同一主机上同时运行具有相同系统标识符的两个数据库。您可以使用相同的系统标识符在其他主机上创建克隆。您可以为克隆提供一个标签，也可以让 SnapManager 使用创建克隆的系统标识符，日期和时间创建一个标签。</block>
  <block id="f7c93fddfcca7f7f04e3596236933536" category="paragraph">输入标签时，不应包含空格或特殊字符。</block>
  <block id="d14039a44677b568de8a44a74ae29f3c" category="paragraph">在克隆过程中， SnapManager 会为克隆的数据库创建必要的 Oracle 文件和参数。例如， init&lt;sid&gt;.ora 就是一个必需的 Oracle 文件。</block>
  <block id="06b774c0927f20920a109975a6a4f9ee" category="paragraph">克隆数据库时， SnapManager 会在 $ORACLE_HOME\database 目录中为数据库创建一个新的 init&lt;sid&gt;.ora 文件。</block>
  <block id="cb3c263fa7d41fee17db28df3c21075d" category="paragraph">当 SnapManager 克隆数据库的存储时，它还会创建一个新的文件系统挂载点，但不会通过 SnapManager 命令行界面更改挂载点下的目录结构。但是，在 SnapManager 图形用户界面中，您可以更改文件系统的目录结构和元数据。</block>
  <block id="f45977ba7b3c4638296b1e5a81e3d675" category="paragraph">您可以将数据库备份克隆到数据库所在的主机或备用主机。</block>
  <block id="7c27225a4787fbba1154e2e395872f23" category="paragraph">如果克隆的数据库使用的是 spfile ，则 SnapManager 会为克隆创建一个 spfile 。它会将此文件放置在 $ORACLE_HOME\database 目录中，并为诊断文件创建目录结构。文件名为 spfile &lt;sid&gt;.ora 。</block>
  <block id="974b88c4c87ce2eb2d4a88b7377f0c50" category="summary">您可以为存储库数据库创建 Oracle 用户，并分配特定权限来对存储库数据库执行不同的操作。</block>
  <block id="184671fc855816f9df3f58f53a5645ff" category="doc">为存储库数据库创建 Oracle 用户</block>
  <block id="d0abb8cc2fe825d04e466568ba079717" category="paragraph">您必须为 Oracle 用户分配连接和资源权限。您不必为具有 sysdba 权限的存储库数据库创建用户。</block>
  <block id="c7abb4aaccc69430a23f08ce993e4cb9" category="admonition">但是，您必须为目标数据库创建一个具有 sysdba 角色的 Oracle 用户。</block>
  <block id="dae6cbff58e9bcde7ae3e7085b2a89ff" category="list-text">要使用管理员密码（例如 adminpw1 ）为存储库创建用户（例如 repo1_user ），请在 SQL 提示符处输入以下命令： sql &gt; create user repo1_user identified by adminpw1 ；</block>
  <block id="ca758bcf93eaaa2ab4c90b5c59971b6f" category="list-text">要为用户授予连接和资源权限，请输入以下命令： Grant connect ， resource to repo1_user ；</block>
  <block id="e00ac85cdf12c3c10bf5f6741195a53f" category="summary">此命令可用于为用户设置凭据，以访问主机，存储库和数据库配置文件等安全资源。主机密码是运行 SnapManager 的主机上的用户密码。存储库密码是包含 SnapManager 存储库模式的 Oracle 用户的密码。配置文件密码是由创建配置文件的人员创建的密码。对于主机和存储库选项，如果不包含可选的 -password 选项，系统将提示您输入命令参数中指定的类型的密码。</block>
  <block id="c51816eea905e952778500434f65faef" category="paragraph">此命令可用于为用户设置凭据，以访问主机，存储库和数据库配置文件等安全资源。主机密码是运行 SnapManager 的主机上的用户密码。存储库密码是包含 SnapManager 存储库模式的 Oracle 用户的密码。配置文件密码是由创建配置文件的人员创建的密码。对于主机和存储库选项，如果不包含可选的 -password 选项，系统将提示您输入命令参数中指定的类型的密码。</block>
  <block id="df21fa8fdd879f0f84e582af8403f21b" category="paragraph">指定运行 SnapManager 的主机服务器的名称或 IP 地址。</block>
  <block id="3221defffe958cf972a966430f1883e4" category="list-text">-name host_name ：指定要为其设置密码的主机的名称。</block>
  <block id="cd197fe341ae1bc080cdc30c3e67fbb2" category="list-text">-password password password ：指定主机上用户的密码。</block>
  <block id="1467d24bbecbab4874543ec8a38cd17b" category="list-text">-password password password ：指定访问存储库的数据库所需的密码。</block>
  <block id="20d9b1a87fd664ebe0b07ac9f66ffdd5" category="list-text">-name profilename ：指定要为其设置密码的配置文件的名称。</block>
  <block id="4e11090edd3c4531aebd6baab646b458" category="list-text">-password password password ：指定访问配置文件所需的密码。</block>
  <block id="e6eb536502fe17db006a1b233d774dee" category="section-title">用于设置存储库凭据的命令示例</block>
  <block id="400d81493da5f84bbdae9a7397351630" category="paragraph">以下示例将设置存储库的凭据。</block>
  <block id="b4db4ecd0609a315be270c3141a064e5" category="section-title">用于设置主机凭据的命令示例</block>
  <block id="2ce6df11bae786c7aca974e343ce2b97" category="paragraph">由于主机凭据表示实际的操作系统凭据，因此，除了密码之外，还必须包含用户名。</block>
  <block id="963dcc422bd08e42842f98a672d62f35" category="paragraph"><block ref="963dcc422bd08e42842f98a672d62f35" category="inline-xref-macro-rx"></block></block>
  <block id="95d5904a7f6175b3ae104be4f4534871" category="summary">您可以通过服务窗口重新启动 SnapManager 服务器。</block>
  <block id="fd827c8ffec836300d60dbad53657fdb" category="doc">重新启动 SnapManager 主机服务器</block>
  <block id="0aa4619da3d079efb9a5b912304c643f" category="list-text">在服务窗口中，选择适用于 Oracle 的 NetApp SnapManager 3.3 。</block>
  <block id="647e0f2e2599618fe7570c299578c22f" category="list-text">您可以通过以下方式之一重新启动服务器：</block>
  <block id="b13d6d8b51b1d6fb631662d722ab8fd8" category="list-text">在左侧面板中，单击 * 重新启动 * 。</block>
  <block id="55a45f3aa9d73a1f540521fffcbb8f15" category="list-text">右键单击适用于 Oracle 的 NetApp SnapManager 3.3 ，然后从下拉菜单中选择 * 重新启动 * 。</block>
  <block id="ab22d101ee5edf3ca14689270255c396" category="list-text">双击 NetAppSnapManager 3.3 for Oracle ，然后在打开的属性窗口中，单击 * 重新启动 * 。</block>
  <block id="fa90fc0c7e24e34b3424d89ba76794ad" category="summary">您可以使用图形用户界面的计划选项卡计划，更新和监控数据库的备份。</block>
  <block id="4db64c210724311ea885712e8f078d2d" category="doc">什么是数据库备份计划</block>
  <block id="d28aaef591e2aa4d1c3de52c3f869d01" category="paragraph">下表介绍了一些常见的计划问题：</block>
  <block id="a97ea56b0e00b2379736ae60869ff66a" category="cell">问题</block>
  <block id="3751695c17afed4055a7a5ad5d46f6f5" category="cell">问题解答</block>
  <block id="0ca76569d774d16cfcee27de234a2592" category="paragraph">SnapManager 服务器重新启动时计划的备份会发生什么情况？</block>
  <block id="787c75a4961a48cfcd8507ca93f9fd62" category="paragraph">SnapManager 服务器重新启动时，它会自动重新启动所有计划。但是， SnapManager 不会跟踪任何未命中的情况。</block>
  <block id="421533af7c47a11799e5b2008c82b290" category="paragraph">如果计划同时在两个数据库上进行两个备份，会发生什么情况？</block>
  <block id="56daae2a967367d9eed2a7217cc6d3d7" category="paragraph">SnapManager 一次启动一个备份操作，然后允许并行运行备份。例如，如果数据库管理员为六个不同数据库配置文件创建了六个每日备份计划，这些计划将在凌晨 1 ： 00 进行，则所有六个备份将并行运行。</block>
  <block id="cc45d63c5c093b17e01f4af5d6560395" category="paragraph">如果计划在短时间内在一个数据库配置文件上进行多个备份，则 SnapManager 服务器仅运行保留期限最长的备份操作。</block>
  <block id="592e45d92beffe0117ee7f7e6787bbbd" category="paragraph">在开始备份操作之前， SnapManager 会首先确定以下内容：</block>
  <block id="521af697336072147b7dd0cc128dd04b" category="list-text">在过去 30 分钟内，是否有另一个计划成功为同一配置文件创建了一个保留空间更大的备份？</block>
  <block id="3fbb5814e3ee1b1239f0a531e235b558" category="list-text">在接下来的 30 分钟内，另一个计划是否会尝试为同一个配置文件创建一个保留时间更长的备份？</block>
  <block id="c2c6c82c2fc93d8459cdb6870ac400f6" category="paragraph">如果任一问题的问题解答为 yes ，则 SnapManager 将跳过备份。</block>
  <block id="bd9c38f88bd16c4f1beeb6245d2b2de0" category="paragraph">例如，数据库管理员可能会为数据库配置文件创建每日，每周和每月计划，所有这些计划都计划在凌晨 1 ： 00 进行备份在计划在凌晨 1 ： 00 同时进行三次备份的某一天， SnapManager 仅根据每月计划运行备份操作。</block>
  <block id="64a06b1e81cd4b725ca048520c587cb3" category="paragraph">可以在 SnapManager 属性文件中更改 30 分钟的时间窗口。</block>
  <block id="d39ec89f20d29f5121efb0cbe3e36208" category="paragraph">备份操作在哪个用户下运行？</block>
  <block id="f32c1836f7e15b67d4edc652b537f26f" category="paragraph">此操作在创建计划的用户下运行。但是，如果您拥有数据库配置文件和主机的有效凭据，则可以将此 ID 更改为您自己的用户 ID 。例如，通过为 Avida Davis 创建的备份计划启动计划备份属性， Stella Morrow 可以在 Perform this operation as user 中选择她的用户 ID 来运行计划的备份。</block>
  <block id="9a435261e33afee968a5f1635283543a" category="paragraph">SnapManager 计划程序如何与原生操作系统计划程序交互？</block>
  <block id="6eb8dfcacd811fec2237154ed482b890" category="paragraph">在 SnapManager 服务器上，您无法通过操作系统的原生计划程序查看计划的备份。例如，创建计划备份后，您在计划任务窗口中看不到新条目。</block>
  <block id="206f84c432a1d60244cb51570c532581" category="paragraph">如果图形用户界面和服务器中的时钟不同步，会发生什么情况？</block>
  <block id="3d46e525dfaa2c8cecc0a33a3c985c98" category="paragraph">客户端和服务器上的时钟不同步。因此，您可以计划备份，其中开始时间在客户端上是未来的，而在服务器上是过去的。</block>
  <block id="a4457887449f7c14a8431f7cbf811449" category="paragraph">对于重复备份，服务器仍会满足此请求。例如，如果服务器从 2008 年 1 月 30 日下午 3 ： 00 开始收到执行每小时备份的请求但当前时间为下午 3 ： 30当天，服务器将在下午 4 ： 00 执行首次备份并继续每小时执行一次备份。</block>
  <block id="ac9a47cfad40ad75a0209c2d87f598e8" category="paragraph">但是，对于一次性备份，服务器将按如下方式处理此请求：</block>
  <block id="41f4dce55d52b34fa1963df4e636b342" category="list-text">如果开始时间在当前服务器时间的最后五分钟内，则 SnapManager 会立即开始备份。</block>
  <block id="03eb40e676d166821a9dae70169fd29f" category="list-text">如果开始时间超过五分钟，则 SnapManager 不会启动备份。</block>
  <block id="ce59cf78eeec58eb5bdf3d1bc5629d53" category="paragraph">例如，请考虑以下情形：</block>
  <block id="3222b4730993cb5ad9e44c48f181b997" category="list-text">图形界面主机中的时钟比实际时间晚 3 分钟。</block>
  <block id="267b2a41c31ade1b4e66a73ec9b0bfa1" category="list-text">客户端上的当前时间为上午 8 ： 58</block>
  <block id="4cf883bd39990221b1223d07af24e70f" category="list-text">您计划在上午 9 ： 00 进行一次性备份</block>
  <block id="b9f854e712695ad7f8115271441967f3" category="list-text">您计划在上午 8 ： 30 进行另一次备份</block>
  <block id="55ab0b5cc4d48d3602f145611f30dedb" category="paragraph">当服务器收到第一个请求时，服务器上的时间为上午 9 ： 01尽管备份的开始时间已过去，但 SnapManager 会立即执行备份。</block>
  <block id="49a0190c0f3387d9dd11f06b0ff9ae0d" category="paragraph">当服务器收到第二个请求时，备份的开始时间过去超过五分钟。您将收到一条消息，指出由于开始时间已过去，计划请求失败。</block>
  <block id="72d54f665fd147c7f986261e6b05570c" category="paragraph">您可以在 SnapManager 属性文件中更改五分钟的时间。</block>
  <block id="90c91a624a81c4d0a4869ac9ef1d3b9f" category="paragraph">删除配置文件时，计划备份配置文件会发生什么情况？</block>
  <block id="efa75970977f0587b77e36ac22bbe06b" category="paragraph">删除数据库配置文件后， SnapManager 服务器将删除为该配置文件定义的计划备份。</block>
  <block id="b3a0e37224e2b5f260c45f957db253aa" category="paragraph">在夏令时或更改 SnapManager 服务器时间期间，计划备份的行为如何？</block>
  <block id="61cd9f9a3cf337e925b06a21cbc036bd" category="paragraph">由于夏令时或更改了 SnapManager 服务器时间， SnapManager 备份计划将受到影响。</block>
  <block id="4773766906d7ee101e9c8ab7a85ef694" category="paragraph">更改 SnapManager 服务器时间时，请考虑以下含义：</block>
  <block id="add14c87ba52b9629959cd8eaa6145f0" category="list-text">触发备份计划后，如果 SnapManager 服务器时间有所减少，则备份计划不会再次触发。</block>
  <block id="ec3c9c09368e38eb241e8dcfa4065d93" category="list-text">如果夏令时在计划开始时间之前开始，则会自动触发备份计划。</block>
  <block id="22789c2ad81eadddaffccc27efba5352" category="list-text">例如，如果您在美国，则计划在凌晨 4 点进行每小时备份备份时间应每 4 小时进行一次，备份时间为 3 月和 11 月调整夏令时前后几天的凌晨 4 点，上午 8 点，中午 12 点，凌晨 4 点，晚上 8 点和午夜。</block>
  <block id="85becdc49828ea059010591b07659b6c" category="list-text">如果备份计划在凌晨 2 ： 30 进行，请注意以下事项每晚：</block>
  <block id="aecf20597871cfe43c030d63bf950027" category="list-text">当时钟回退一小时时，由于备份已触发，备份不会再次触发。</block>
  <block id="81bf2c02911c04090d0b2ddd8bae08d6" category="list-text">当时钟向前弹出一小时时，备份会立即触发。如果您在美国，并且希望避免使用此问题描述，则必须计划在凌晨 2 ： 00 以外启动备份到凌晨 3 ： 00interval</block>
  <block id="62c44125d9197bebbc0ce96f1cd6fca2" category="summary">使用 SnapManager 可以执行各种操作，例如创建配置文件，执行备份和克隆备份。这些操作必须按特定顺序执行。</block>
  <block id="0e7bd1f5abb2202c71f839ceea554363" category="doc">执行操作的顺序</block>
  <block id="c8146910aaedf0906b4d4d20b305e3c9" category="list-text">使用 smo profile create 命令在现有存储库上创建配置文件。</block>
  <block id="2589f5d4d0a6ddfb774a27f03b0e9b7e" category="admonition">为目标数据库指定的 Oracle 用户必须具有 sysdba 权限。</block>
  <block id="2a0156f11d89f97be24ae3ce2b2c5590" category="paragraph">以下示例显示了用于创建配置文件的命令：</block>
  <block id="a6e0e4e5a2ef58fede0003192d48a6dd" category="list-text">使用 smo backup create 命令在现有配置文件上创建备份。</block>
  <block id="6b88c1ee8a2283266c5fb8f22ce60d02" category="paragraph">以下示例显示了用于创建备份的命令：</block>
  <block id="bf5399438390da2d7806e47936d712d4" category="list-text">使用 smo backup restore 命令在主存储上还原和恢复数据库备份。</block>
  <block id="8bb19667bc6300fdb371d1a4935623c8" category="paragraph">以下示例显示了用于还原备份的命令：</block>
  <block id="fede330bd2c85fc0683e50b3adc083ab" category="list-text">使用 smo clone template 命令创建克隆规范。</block>
  <block id="ae6db3ec18a2e305d354ecf13fc2bf7a" category="paragraph">您可以在图形用户界面（ GUI ）中使用克隆向导创建模板克隆规范。您也可以使用文本编辑器创建克隆规范文件。</block>
  <block id="37ed07fcf20d5017960bd2c9891a1f37" category="list-text">使用 smo clone create 命令使用现有备份克隆数据库。</block>
  <block id="8b82513155190678bcb9205cf04f5cac" category="paragraph">您必须具有现有克隆规范或创建克隆规范，才能为克隆指定存储和数据库规范。</block>
  <block id="f907f5a02cbc42037f87da17b23f28de" category="paragraph">以下示例显示了用于创建克隆的命令：</block>
  <block id="aff34260db8571fed8c0d9734cb29f43" category="summary">您可以选择对数据库中的表空间执行部分备份，而不是执行完整备份。虽然 SnapManager 为卷创建 Snapshot 副本以进行完整备份，但 SnapManager 为每个指定表空间创建一个 Snapshot 副本以进行部分备份。</block>
  <block id="1d5175713232e8e80db92b66374b358d" category="doc">部分联机备份</block>
  <block id="527695e42b9c124be2437489dbc3af52" category="paragraph">您可以选择对数据库中的表空间执行部分备份，而不是执行完整备份。虽然 SnapManager 为 _full_ 备份创建卷的 Snapshot 副本，但 SnapManager 为 _partial_ 备份创建每个指定表空间的 Snapshot 副本。</block>
  <block id="bd892f4eb133250c9b5c865f244d6dda" category="paragraph">由于表空间级别是 Oracle 允许进入备份模式的最低级别，因此 SnapManager 会在表空间级别处理备份，即使您在表空间中指定了数据文件也是如此。</block>
  <block id="b7795ad1bd111c8d37c4a3a0397b5bc9" category="paragraph">对于部分备份，与完整备份相比，每个表空间在备份模式下的时间更短。在联机备份期间，用户始终可以使用数据库；但是，数据库必须执行更多工作，主机必须执行更多物理 I/O此外，由于 SnapManager 正在为指定的每个表空间或包含指定数据文件的每个表空间创建 Snapshot 副本，而不是为整个卷创建 Snapshot 副本，因此会创建更多的 Snapshot 副本。</block>
  <block id="c8514c9d0cafa4649fba047f7a999dd3" category="paragraph">SnapManager 为特定表空间或数据文件创建 Snapshot 副本。部分备份算法是一个循环， SnapManager 会重复此循环，直到为每个指定的表空间或数据文件创建 Snapshot 副本为止。</block>
  <block id="1e2769bb03c19628b3b41fa88240ea3b" category="admonition">虽然您可以执行部分备份，但建议始终对整个数据库执行完整备份。</block>
  <block id="25c48451953f6942908474a664ba6f64" category="paragraph">在部分备份期间， SnapManager 会执行以下操作：</block>
  <block id="f0d1b5b44c6b2ed08fd1a2c0f539beb6" category="list-text">将包含数据文件的表空间置于备份模式。</block>
  <block id="02db8789fcb3696ce8469e4fbab2cbc9" category="list-text">为表空间使用的所有卷创建 Snapshot 副本。</block>
  <block id="0868463814bcf790a41f08661ca40c66" category="list-text">使表空间退出备份模式。</block>
  <block id="1be799ca27fa344f1f5887992b30f6a4" category="list-text">继续执行此过程，直到为所有表空间或文件创建 Snapshot 副本为止。</block>
  <block id="ac980312c92f677b6fb6686f5eda6374" category="list-text">强制执行日志切换，然后归档日志文件。</block>
  <block id="bf0b71e5d5637b4e1341afd3b8ab53ce" category="list-text">生成备份控制文件。</block>
  <block id="19929cf8c9e660d93c1b001ce8a4ddd1" category="list-text">为日志文件和备份控制文件创建 Snapshot 副本。</block>
  <block id="d80ebd52ee48d22cf5061fbe8ca8c41a" category="summary">您可以运行 backup unmount 命令卸载备份。</block>
  <block id="2da30d8944c29cd1676ea0620c46aba4" category="paragraph">指定要卸载备份的配置文件。配置文件包含数据库的标识符和其他数据库信息。</block>
  <block id="146a9ccfbf3f304fc7854ee440ab66ae" category="paragraph">使用指定 GUID 卸载备份。GUID 由 SnapManager 在创建备份时生成。您可以使用 smo backup list 命令显示每个备份的 GUID 。</block>
  <block id="012677ef212d8dba71457fada1aba8ec" category="paragraph">卸载具有指定标签的备份。</block>
  <block id="39285ea5f66c4caacd683513743113b9" category="paragraph">在卸载操作成功或失败后收集转储文件。</block>
  <block id="8300f4dbd118dd5daed10915cd62f792" category="paragraph">即使释放与备份关联的资源时出现问题，也会卸载备份。SnapManager 会尝试卸载备份并清理任何关联资源。此日志会将卸载操作显示为成功，但如果日志中存在错误，您可能需要手动清理资源。</block>
  <block id="10d5a2e35db24c6e949035c33633fc26" category="paragraph">以下是卸载操作的示例：</block>
  <block id="b07c947f324e78dacc74186e239691ba" category="paragraph"><block ref="b07c947f324e78dacc74186e239691ba" category="inline-xref-macro-rx"></block></block>
  <block id="5f77aa407c8dedfb88199130a6dd30d0" category="summary">您可以为整个数据库或数据库的某些部分创建备份，包括表空间，数据文件或控制文件。</block>
  <block id="801e6461bb216ccdada8e9cba7ac5d3d" category="paragraph">管理员可以选择向 Oracle RMAN 注册备份，这样便于使用 RMAN 以块等更精细的粒度还原和恢复数据库。</block>
  <block id="49a0560922c0c09e3660565f482b2ffd" category="paragraph">定义配置文件时，您可以自定义通过该配置文件的备份创建的 Snapshot 副本的名称。例如，您可以插入一个跃点前缀字符串以表示高操作备份。</block>
  <block id="2d47d13ec380750515ff1ac5db9af44f" category="paragraph">除了为备份创建的 Snapshot 副本定义唯一名称之外，您还可以为备份本身创建唯一标签。创建备份时，最好提供备份的名称，以便您可以使用 -label 参数轻松识别该备份。对于在特定配置文件中创建的所有备份，此名称必须是唯一的。此名称可以包含字母，数字，下划线（ _ ）和连字符（ - ）。不能以连字符开头。标签区分大小写。您可能需要附加操作系统环境变量，系统日期和备份类型等信息。</block>
  <block id="f43e818711580455e9a0bef0f65b3417" category="paragraph">如果不提供标签， SnapManager 将创建一个格式为 scope_mode_datastring 的默认标签名称，其中 scope 为 full 或 partial ， mode 为 offline ， online 或 automatic （字母 c 表示冷， h 表示热或 a 表示自动）。</block>
  <block id="2c74e794d1ca72e1a7f5fe1bea1e26a6" category="paragraph">在 SnapManager 3.4 中，您可以通过覆盖 SnapManager 创建的默认备份标签来提供自己的备份标签。您必须将 override.default.backup.pattern 参数的值设置为 true ，并在 new.default.backup.pattern 参数中指定新的备份标签。备份标签模式可以包含数据库名称，配置文件名称，范围，模式和主机名等关键字，这些关键字必须以下划线分隔。例如， new.default.backup.pattern=dbname_profile_hostname_scope_mode 。</block>
  <block id="7e0acdff1a43c8a1d739d25a02106556" category="admonition">时间戳将自动包含在生成的标签末尾。</block>
  <block id="887bfe8fd6f975963ae9d95a004e97b0" category="paragraph">输入注释时，可以包含空格和特殊字符。相比之下，输入标签时，请勿包含空格或特殊字符。</block>
  <block id="a6c47187025d724fb671f29520ba6817" category="paragraph">对于每个备份， SnapManager 会自动生成一个 GUID ，该 GUID 是一个 32 字符的十六进制字符串。要确定 GUID ，必须使用 -verbose 选项运行 backup list 命令。</block>
  <block id="2ed671d2647f06f5d35eae2d6e88aa2c" category="paragraph">您可以在数据库联机或脱机时为其创建完整备份。要让 SnapManager 处理数据库备份，而不管数据库是联机还是脱机，您应使用 -auto 选项。</block>
  <block id="5abff339e77b2b4b09fe0fd345171752" category="paragraph">创建备份时，如果您启用了修剪，并且配置文件中启用了摘要通知，则会触发两封单独的电子邮件。一封电子邮件用于备份操作，另一封用于修剪。您可以通过比较这些电子邮件中包含的备份名称和备份 ID 来关联这些电子邮件。</block>
  <block id="b1b829580c4220a19b40715bea778c0f" category="paragraph">您可以在数据库处于关闭状态时创建冷备份。如果数据库处于挂载状态，请将其更改为关闭状态并执行脱机备份（冷备份）。</block>
  <block id="7fa2bea9fe40715dcfef70973b01f37e" category="paragraph">通过 SnapManager （ 3.2 或更高版本），您可以将归档日志文件与数据文件分开备份，从而高效地管理归档日志文件。</block>
  <block id="512799baa30d0f1a4fa1bb0a3811e3d0" category="paragraph">要单独创建归档日志备份，您必须使用 -separate-archivelog-backups 选项创建新配置文件或更新现有配置文件以分隔归档日志备份。使用配置文件，您可以执行以下 SnapManager 操作：</block>
  <block id="797964e5ceb048f3c54bfb9ec019b9d9" category="list-text">创建归档日志备份。</block>
  <block id="824f603dec868493618a1e7bd1800d65" category="list-text">删除归档日志备份。</block>
  <block id="2963c8f03eb70e7795c48140e667caab" category="list-text">挂载归档日志备份。</block>
  <block id="59016ece691c71acf6b48462ff497946" category="list-text">释放归档日志备份。</block>
  <block id="94746ef8ade7150017b31a37e42a4f12" category="paragraph">备份选项因配置文件设置而异：</block>
  <block id="d1e4fc5ddf62f254b6dbf38abb8944bb" category="list-text">使用未分隔的配置文件单独创建归档日志备份可以执行以下操作：</block>
  <block id="452dbf4bf1654857e065bfc5e861949f" category="list-text">创建完整备份。</block>
  <block id="c73239628bb1e231ff1347f9c76445c2" category="list-text">创建部分备份。</block>
  <block id="e9282b7b6db49b21f4ee9704a9635d67" category="list-text">指定要为归档日志文件备份的归档日志目标。</block>
  <block id="da372aebb8ac4aee30c99e20d30935b0" category="list-text">指定要从备份中排除的归档日志目标。</block>
  <block id="a403c2cee05b1fab40d2d2f55e14c2ba" category="list-text">指定用于从归档日志目标删除归档日志文件的修剪选项。</block>
  <block id="5258a7ee50eb526ef886609c07218946" category="list-text">通过使用单独的配置文件进行归档日志备份，您可以执行以下操作：</block>
  <block id="f27e449dd7f39e6193b2e51185321ca2" category="list-text">创建纯数据文件备份。</block>
  <block id="86fe113483767673bd54aa41085920d1" category="list-text">创建仅归档文件的备份。</block>
  <block id="8a8fa949564143a6151194d0d46ca530" category="list-text">创建纯数据文件备份时，请包括归档日志备份以及仅用于克隆的联机数据文件备份。</block>
  <block id="ed75319056756c4de79c3dc4b7f63073" category="paragraph">如果已通过 SnapManager 图形用户界面在 * 配置文件创建 * 向导的 * 配置文件设置 * 页面中包含归档日志备份和数据文件， 如果您尚未在 * 备份创建 * 向导中选择 * 归档日志 * 选项， SnapManager 会始终为所有联机备份创建归档日志备份以及数据文件。</block>
  <block id="d21be5f123d9522f0602f6da708fc394" category="paragraph">在这种情况下，您可以从 SnapManager 命令行界面考虑要备份的所有归档日志目标，但 SnapManager 配置文件中指定的排除目标除外。但是，您不能对这些归档日志文件进行修剪。但是，您仍然可以使用 -archivelog 选项指定归档日志文件目标位置，并从 SnapManager 命令行界面对归档日志文件进行修整。</block>
  <block id="03f3683b0c7fb608315bb9e04a6db94b" category="paragraph">如果要使用 -auto 选项创建备份并指定 -archivelog 选项，则 SnapManager 会根据备份的当前状态创建联机或脱机备份。</block>
  <block id="b3408fbe266b973bed68fb3046aed151" category="list-text">当数据库脱机且备份中不包含归档日志文件时， SnapManager 会创建脱机备份。</block>
  <block id="c34dbb002a84be154a5cfcce90cc2592" category="list-text">当数据库处于联机状态时， SnapManager 会创建一个联机备份，其中包括归档日志文件。</block>
  <block id="dd543c7f04536004b8e33d1ab1598b37" category="list-text">创建仅归档文件的备份时：</block>
  <block id="74de6847b0543cd7ea57c67a8b35139e" category="list-text">指定要与仅归档日志备份一起备份的归档日志目标</block>
  <block id="5c623f481686fe89ae64135417766cb6" category="list-text">指定要从仅归档日志备份中排除的归档日志目标</block>
  <block id="f116c6a92163d4a4f7787a7f0c935ea2" category="list-text">指定用于从归档日志目标删除归档日志文件的修剪选项</block>
  <block id="ea9326650d033cbd6b631f2202ad16d8" category="list-text">* 不支持的情形 *</block>
  <block id="25aeb9ebcbe97bc4164fefb956a1fc52" category="list-text">您不能创建仅归档日志备份以及仅用于脱机数据文件的备份。</block>
  <block id="62ae829d28a77ef663024b21aa05d2b1" category="list-text">如果未备份归档日志文件，则无法对归档日志文件进行修剪。</block>
  <block id="a5697c2c916a1fa6425c54e1f905aca9" category="list-text">如果为归档日志文件启用了 Flash Recovery Area （ FRA ），则无法对归档日志文件进行修剪。</block>
  <block id="73e8f672ac6582c41d606503d7e04bc1" category="paragraph">如果在 Flash Recovery 区域中指定归档日志位置，则必须确保同时在 archive_log_dest 参数中指定归档日志位置。</block>
  <block id="6c030fc9d984ad28796054fb6dd21cce" category="admonition">创建归档日志备份时，必须在双引号内输入完整的归档日志目标路径，并以逗号分隔目标路径。应将路径分隔符指定为两个反斜杠（ \\ ），而不是一个反斜杠。</block>
  <block id="58eea3d787e6481eb8dba58fdeeb046c" category="paragraph">如果为包含归档日志备份的联机数据文件备份指定标签，则该标签将应用于数据文件备份，而归档日志备份将以（ _logs ）为后缀。可以通过更改 SnapManager 配置文件中的参数 suffix.backup.label-fs.with .logs 来配置此后缀。</block>
  <block id="55b9ed982179489b6498aa5e45187413" category="paragraph">例如，您可以将此值指定为 suffix.backup.label-bow.logs=arc ，以便 _logs 的默认值更改为 _arc 。</block>
  <block id="fbf7c5b68606effddb9bcca40071b76b" category="paragraph">如果您尚未指定要包括在备份中的任何归档日志目标，则 SnapManager 将包括数据库中配置的所有归档日志目标。</block>
  <block id="70990049e801e6c0f765bdab35fa95b4" category="paragraph">如果任一目标中缺少任何归档日志文件，则 SnapManager 会跳过在缺少归档日志文件之前创建的所有归档日志文件，即使这些文件在其他归档日志目标中可用也是如此。</block>
  <block id="ae6ac95563e8c8199bfa2b8019eb4a62" category="paragraph">创建归档日志备份时，您必须指定要包括在备份中的归档日志文件目标，并且可以设置配置参数，使其包含备份中缺少的文件之外的归档日志文件。</block>
  <block id="f4d13a557a9a1368ba6e05a75ff014bb" category="admonition">默认情况下，此配置参数设置为 true ，以包括所有归档日志文件，而不包括缺少的文件。如果您使用自己的归档日志修剪脚本或从归档日志目标手动删除归档日志文件，则可以禁用此参数，以便 SnapManager 可以跳过归档日志文件并继续进行备份。</block>
  <block id="a6ba22f529aa11f7d879cd0056d5b051" category="paragraph">SnapManager 不支持对归档日志备份执行以下 SnapManager 操作：</block>
  <block id="c5f28c7aa07d2e5e7a4a9490224d0fb6" category="list-text">克隆归档日志备份</block>
  <block id="4b646994d0d58479e29200663646e3e4" category="list-text">还原归档日志备份</block>
  <block id="bd07e6f781cf0986d3c5eb985bf2dbf3" category="list-text">验证归档日志备份</block>
  <block id="34bc0905969217a99ea209d208d5fa85" category="paragraph">SnapManager 还支持从闪存恢复区域目标备份归档日志文件。</block>
  <block id="66e99b633aabef5f01962658a7bb0161" category="list-text">输入以下命令： SMO backup create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain ｛ -hourly ； -daily ； -weekly ； -monthly ； -unlimited ｝ ] ｛ -verify] | ｛ -filesfiles 【文件文件文件】 ｝ | ｛ -tablespaces-tablesogs ｛ -tablespacesaces ） ] [-backup-destpath1 [ ， [path2]]] [-exclude-destpath1 [ ， path2]]]</block>
  <block id="724dda0a37bcaae4d1f9d7bb54d79cad" category="paragraph">* 指定是要对联机数据库还是脱机数据库进行备份，而不是允许 SnapManager 处理联机数据库还是脱机数据库 *</block>
  <block id="3c48025c03db986bbd5b4f18a90ff956" category="paragraph">指定 -offline 以对脱机数据库进行备份。指定 -online 以对联机数据库进行备份。</block>
  <block id="492c9bae25c5befa89c1f7684aa169de" category="paragraph">+ 如果使用这些选项，则不能使用 -auto 选项。</block>
  <block id="501e3141a0642f8f268735c824458194" category="paragraph">* 指定是否要让 SnapManager 处理数据库备份，而不管数据库是联机还是脱机 *</block>
  <block id="ea2e1fa7dc5cb1229f6edbf0c0ff7b97" category="paragraph">指定 -auto 选项。如果使用此选项，则不能使用 -offline 或 -online 选项。</block>
  <block id="699f59cc6f67eb84b07d8ad84507f648" category="paragraph">* 指定是否要对特定文件执行部分备份 *</block>
  <block id="e32f7d716f0eebec6afcf31fbb41d50f" category="paragraph">+ 在 Windows 上创建部分数据文件备份的示例</block>
  <block id="0b5b45585b76ff012dc37dda6f96b39a" category="paragraph">* 指定是否要对特定表空间执行部分备份 *</block>
  <block id="12e0ee7b1b2a61e4db6968f997064802" category="paragraph">+ SnapManager 支持备份只读表空间。创建备份时， SnapManager 会将只读表空间更改为读写。创建备份后，表空间将更改为只读。</block>
  <block id="c957933523d015649ed0662a66ee9e09" category="paragraph">+ 创建部分表空间备份的示例</block>
  <block id="44936f4212ad40ae582c3c6216b36924" category="paragraph">* 指定是否要按以下格式为每个备份创建唯一标签： full_hot_mybackup_label *</block>
  <block id="d346dd8c06286c2d0fc357ad5f8862b1" category="paragraph">* 指定是否要分别为归档日志文件和数据文件创建备份 *</block>
  <block id="5c80b528cdda98944e5c798c406320b3" category="list-text">-archivelog 创建归档日志文件的备份。</block>
  <block id="7073a049b90cb5ffd83cec265c7a6d10" category="list-text">-backup-dest 指定要备份的归档日志文件目标。</block>
  <block id="942f177e958368ed935107e376d0bffc" category="list-text">-exclude-dest 指定要排除的归档日志目标。</block>
  <block id="00f5a565fd4a94485f15f2564aa65737" category="list-text">-label 指定归档日志文件备份的标签。* 注： * 您必须提供 -backup-dest 选项或 -exclude-dest 选项。</block>
  <block id="2481ae1a3f05fae6662464b0a44534dc" category="paragraph">如果同时提供这两个选项以及备份，则会显示错误消息 you have specified an invalid backup option 。指定以下任一选项： -backup-dest 或 exclude-dest 。</block>
  <block id="57d732e87b257bf2c73eeffb8d0f33f9" category="paragraph">在 Windows 上单独创建归档日志文件备份的示例</block>
  <block id="c6a421f9592fb94914219addf7d9a6ab" category="paragraph">* 指定是否要同时创建数据文件和归档日志文件的备份 *</block>
  <block id="00746f8bd69c9ce108113691a1009cb8" category="list-text">-data 选项以指定数据文件。</block>
  <block id="1515629feb14b915bc01f56e1bcd9294" category="list-text">-archivelog 选项以指定归档日志文件。在 Windows 上同时备份数据文件和归档日志文件的示例</block>
  <block id="a8002aeb29c436068b3587898b7738da" category="paragraph">* 指定是否要在创建备份时对归档日志文件进行修剪 *</block>
  <block id="5656d41987cd5a9cfd5f55f6aed3d1dc" category="list-text">-prunelog 指定从归档日志目标删除归档日志文件。</block>
  <block id="fbc8305af6cf16189948128807d2f546" category="list-text">-all 指定从归档日志目标中删除所有归档日志文件。</block>
  <block id="ee97a8ffaaf2e66be7b8bb9cf15724ba" category="list-text">-til-scnuntil -scn 指定删除归档日志文件，直到指定 SCN 为止。</block>
  <block id="47158c5569b785078ad399f0c7231f5a" category="list-text">-tilt-dateyyy-mm-dd ： HH ： mm ： ss 指定删除归档日志文件，直到指定时间段为止。</block>
  <block id="12a036e3d6c9777389271661bece1dbb" category="list-text">-before 选项指定在指定时间段（天，月，周，小时）之前删除归档日志文件。</block>
  <block id="d42fb13ca98434e35220f2e7f7285a93" category="list-text">-prune-destprune_dest1 ， [prune_dest2 指定在创建备份时从归档日志目标中删除归档日志文件。* 注意： * 如果为归档日志文件启用了 Flash Recovery Area （ FRA ），则无法对归档日志文件进行修剪。</block>
  <block id="f91e6c4943a65a3072cebd73d0dd4388" category="paragraph">在 Windows 上创建备份时删减所有归档日志文件的示例</block>
  <block id="d3e04bc906272d81db9c5a7f265b9041" category="paragraph">* 指定是否要添加有关备份的注释 *</block>
  <block id="547d30346dd70f709838eee1c4de4e3d" category="paragraph">指定 -comment ，后跟问题描述字符串。</block>
  <block id="7019c8d6a31f318771cdd4931e08e28a" category="paragraph">* 指定是否要强制数据库进入您指定的备份状态，而不管其当前处于何种状态 *</block>
  <block id="10c82ededfe1593c93aa957d8837530c" category="paragraph">指定 -force 选项。</block>
  <block id="561e966b665d11c14ddcdf05cfaf74b0" category="paragraph">* 指定是否要在创建备份的同时验证备份 *</block>
  <block id="283641cb91349f3657f7b3d8f7d8bd96" category="paragraph">指定 -verify 选项。</block>
  <block id="c296c2d14305e3af89b21ae56c4228fa" category="paragraph">* 指定是否要在数据库备份操作完成后收集转储文件 *</block>
  <block id="121c20703d2c31f6fd0a7b807cdd65ce" category="paragraph">在 backup create 命令的末尾指定 -dump 选项。</block>
  <block id="8dcd60f4864236a4445a102ee546f4b8" category="paragraph"><block ref="8dcd60f4864236a4445a102ee546f4b8" category="inline-xref-macro-rx"></block></block>
  <block id="825e8340755b6917ed986d7aff0c4b5d" category="paragraph"><block ref="825e8340755b6917ed986d7aff0c4b5d" category="inline-xref-macro-rx"></block></block>
  <block id="80d2ddea12f49ecc07c5ec41e6645560" category="summary">在创建新配置文件时，您可以将配置为在数据库操作完成时接收电子邮件通知。</block>
  <block id="01aab74a167c68a2d8499f0432176c1f" category="doc">为新配置文件配置电子邮件通知</block>
  <block id="afa77bab539b736bb05bbed4b809079c" category="list-text">您必须对多个电子邮件地址使用逗号分隔列表。</block>
  <block id="04d5e41badc75a3d0f118e07ae00d6ce" category="paragraph">您必须确保逗号和下一个电子邮件地址之间没有空格。</block>
  <block id="80f6e62f1b0d4ac77b4986aa60ab095a" category="admonition">您必须确保在双引号内输入一组电子邮件地址。</block>
  <block id="25fc9eaade8f7caf233819926646a45d" category="list-text">输入以下命令： smo profile create -profileprofile "-profile-passwordprofile_password] -repositor-dbnamerepo_service_name-host-portrepo_port-login-usernamerepo_username-database-dbnamedb_dbname-hosterdb_host "-sidb_service_username-zh_username-zh.-zhun-try_trusername-zhun-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh..-zh.-zh.-zh.-zh.-zh.-zh.-</block>
  <block id="e105eec8d42bb8be92c0a011ce110b32" category="admonition">SnapManager 支持电子邮件地址最多包含 1000 个字符。</block>
  <block id="17de13a25ce5d0688c7c1042b8e5d5fc" category="paragraph">如果您使用配置文件同时创建数据文件和归档日志文件的备份（用于创建单独的归档日志备份），并且数据文件备份创建失败，则会发送电子邮件通知，并将数据备份作为操作名称，而不是数据备份和归档日志备份。成功执行数据文件和归档日志文件备份操作后，您将看到如下输出：</block>
  <block id="4f0a8a1c0b660f36564b68dc04e59a53" category="summary">此命令可在升级 SnapManager 时更新用于存储数据库配置文件和关联凭据的存储库。每当安装新版本的 SnapManager 时，必须先运行 repository update 命令，然后才能使用新版本。只有在存储库中没有不完整的命令时，才能使用此命令。</block>
  <block id="1206c1548126ad13047df45689039e12" category="doc">smo repository update 命令</block>
  <block id="260f76e5518563252926fd8d230c8fdb" category="summary">您可以在备份还原过程发生之前预览有关该过程的信息，以查看在备份上找到的 SnapManager for Oracle 的还原资格信息。SnapManager 会分析备份上的数据，以确定还原过程是否可以成功完成。</block>
  <block id="3d2bb1c339f9677542d83cfb2246b3e0" category="doc">预览备份还原信息</block>
  <block id="e17f042e9558c739a026125efd734142" category="paragraph">还原预览可提供以下信息：</block>
  <block id="c2c9c3f3adc59f37587f31266d124844" category="list-text">可以使用哪种还原机制（存储端文件系统还原，存储端文件还原或主机端文件副本还原）来还原每个文件。</block>
  <block id="ab7b42d5f5b47ed0a394ae80ddf95f56" category="list-text">为什么在指定 -verbose 选项时未使用更高效的机制来还原每个文件。</block>
  <block id="74fba584914d505ca8a2471e9a085bdc" category="paragraph">如果您在 backup restore 命令中指定了 -preview 选项，则 SnapManager 不会还原任何内容，但会列出要还原的文件并指示将如何还原这些文件。</block>
  <block id="bc68c37b7aad0e3d7fa42a936266b49b" category="admonition">您可以预览所有类型的还原机制。预览最多可显示 20 个文件的相关信息。</block>
  <block id="dc97f4c27088e0cf94866e3c2cce3f9e" category="list-text">输入以下命令： smo backup restore -profileprofile_name-labelLabel-complete -preview -verbose</block>
  <block id="829e891ec39e35ae6efff2e7440d83b0" category="paragraph">例如，输入：</block>
  <block id="0d0e2ae92130de46bda7cb1f81231561" category="paragraph">以下示例显示了可还原的文件，并列出了每个文件使用的不同方法：</block>
  <block id="08eb6e12ef0d3610860ebf316814fd42" category="list-text">查看无法使用其他还原过程的任何原因。</block>
  <block id="eaf1e402d68b87e79a05f6b09aff240b" category="list-text">如果仅显示可覆盖的原因，则在不使用 -preview 选项的情况下开始还原操作。</block>
  <block id="e93c25514f3f5082f6e07ec8c7ebee24" category="paragraph">您仍然可以覆盖非强制检查。</block>
  <block id="85392d8005ea3d0248c44a2bf60c8e90" category="summary">要保护存储库中的现有配置文件，您应更新这些配置文件的密码。您可以在使用此配置文件创建备份时应用此更新的密码。</block>
  <block id="0bf05af823b62acd1344f2a95846266d" category="list-text">要更新现有配置文件的配置文件密码，请输入以下命令：</block>
  <block id="728045a58d115f9e853f71f05b71075c" category="paragraph">SMO 配置文件更新 -profile profile_name -profile-password password</block>
  <block id="b2905b18b876b7cbd14983d90b864f7a" category="summary">通过 SnapManager ，您可以在更新现有配置文件时将其添加到摘要电子邮件通知中。</block>
  <block id="32c4c65e4470d612f97f3aaec89ce6fa" category="doc">将现有配置文件添加到摘要电子邮件通知中</block>
  <block id="d52ecb8ce9e43ae2041f7ea1f9f631f2" category="list-text">输入以下命令： smo profile update -profileprofileprofileprofile_name "-profile-passwordprofile_password] -repositor-dbnamerepo_service_name-host-host-portrepo_port-login-usernamerepo_username-database-patternedb_dbname-hostdb_host [-siderman_password]</block>
  <block id="d7f192e95b770d099aa678f86fe50244" category="paragraph">默认值为 1521 。</block>
  <block id="d229382556317f2cb8bffe3f51218dd3" category="list-text">从 * 保护策略 * 下拉列表中，选择保护策略。</block>
  <block id="eaa32f9e5e21490579e978def813a6f7" category="paragraph">您必须根据是否已建立 SnapMirror 或 SnapVault 关系选择 _SnapManager_cDOT_Mirror_ 或 _SnapManager_cDOT_Vault_policies 。</block>
  <block id="5afde35fbb0941cbd6d208bb7335c403" category="paragraph">您可以选择与数据文件关联的策略不同的策略。例如，如果已为数据文件选择 _SnapManager_cDOT_Mirror_ ，则可以为归档日志选择 _SnapManager_cDOT_Vault__ 。</block>
  <block id="17c5e229497e924db2b6d7885a82510d" category="image-alt">此图显示了 SnapManager 架构。</block>
  <block id="9b6264644a9d32de9ff17e80d65635fe" category="inline-link">NetApp 下载：软件</block>
  <block id="2b8201fc1e941a82155657e0495559fd" category="paragraph"><block ref="2b8201fc1e941a82155657e0495559fd" category="inline-link-rx"></block></block>
  <block id="9e0827cbf6c8fe9682e20ee075057109" category="list-text">安装 SnapManager ： ./install_package.bin</block>
  <block id="314ffdb29098930bde9350ad6f7262ce" category="list-text">按 Enter 接受操作系统用户的默认值。</block>
  <block id="4ee3c15c2b32d1141c188db915ad88bb" category="paragraph">用户的默认值为 oracle 。</block>
  <block id="ec103256c9254c8bcef4459f7adea95f" category="paragraph">对于所有其他 UNIX 主机， SnapManager 安装在 /opt/NTAPsmo for Solaris 和 /opt/netapp/ 上。</block>
  <block id="6dd82e37eac3d8014f68e72418a355f8" category="inline-link">NetApp 文档： SnapDrive for UNIX</block>
  <block id="a0b8fb0a4bd356c0a889e1b872eed1f3" category="paragraph"><block ref="a0b8fb0a4bd356c0a889e1b872eed1f3" category="inline-link-rx"></block></block>
  <block id="324996162f2e748f11ac18ef7fee84ea" category="summary">Copyright information</block>
  <block id="4febc4839b7ae199a1799a861868324f" category="summary">您可以从 SnapManager 支持的操作系统上运行的任何系统使用 Web 浏览器远程访问 SnapManager 用户界面（ UI\ ）。您也可以通过运行 smogui 命令从目标数据库主机访问 SnapManager UI 。</block>
  <block id="cf2fa2795c942412ba8dfdbb5b1795b3" category="list-text">在 Web 浏览器窗口中，输入以下内容： https://server_name.domain.com:port_number</block>
  <block id="4926b13c268ad16b89eef78facfdc53a" category="list-text">单击 * 启动 SnapManager for Oracle* 链接。</block>
  <block id="b3f77e323babb7a476503b64843acd8d" category="paragraph">此时将显示适用于 Oracle 的 SnapManager UI 。</block>
  <block id="7a8bbae692fa644cf7ca91801fd61804" category="list-text">登录到目标数据库主机并启动 SnapManager 服务器： `smo_server start`</block>
  <block id="5f8b1ee43b8b791213fe4fd877154b1a" category="paragraph">此时将显示以下消息： SnapManager Server started on secure port port_number with PID PID_number 。</block>
  <block id="63c61555b730b940d561755da9f61bb8" category="paragraph">您可以验证 SnapManager 是否正常运行： smo system verify</block>
  <block id="e12e4df25da689598893d07f0e817556" category="paragraph">此时将显示以下消息： operation ID operation_ID_number succeeded 。</block>
  <block id="9b23348eb9e45f5c87f128df69637200" category="summary">在使用 SnapManager 的集成 SnapMirror 技术镜像 Snapshot 副本之前，您需要在源卷和目标卷之间配置数据保护关系，然后初始化此关系。初始化后， SnapMirror 会为源卷创建一个 Snapshot 副本，然后将该副本及其引用的所有数据块传输到目标卷。此外，它还会将源卷上任何其他较晚的 Snapshot 副本传输到目标卷。</block>
  <block id="5c6e38905215190f89a7aac4cd72a38e" category="doc">准备用于 SnapMirror 复制的存储系统</block>
  <block id="971c7e63752d0c7980a0bcf2e31af308" category="paragraph">在使用 SnapManager 的集成 SnapMirror 技术镜像 Snapshot 副本之前，您需要在源卷和目标卷之间配置数据保护关系，然后初始化此关系。初始化后， SnapMirror 会为源卷创建一个 Snapshot 副本，然后将该副本及其引用的所有数据块传输到目标卷。此外，它还会将源卷上任何其他较晚的 Snapshot 副本传输到目标卷。</block>
  <block id="de980271ef48592ffbb435077749c036" category="list-text">您必须在具有对等 Storage Virtual Machine （ SVM ）的对等集群中创建源卷和目标卷。有关详细信息，请参见 _Clustered Data ONTAP 集群对等快速指南 _ 。</block>
  <block id="b77db7f524ccde6f40472118970bf6e7" category="list-text">您必须是集群管理员。</block>
  <block id="5772c8a2f5bfec2433c6b6eda0cd467c" category="list-text">要在目标卷上验证 Snapshot 副本，源和目标 Storage Virtual Machine （ SVM ）必须具有管理 LIF 以及数据 LIF 。管理 LIF 必须与 SVM 具有相同的 DNS 名称。将管理 LIF 角色设置为 data ，将协议设置为 none ，将防火墙策略设置为 mgmt 。</block>
  <block id="c4d60395586be9d82f31a12fef5e8455" category="paragraph">您可以使用 Data ONTAP 命令行界面（ CLI ）或 OnCommand 系统管理器创建 SnapMirror 关系。以下操作步骤假定您使用的是命令行界面。有关如何使用 OnCommand 系统管理器创建 SnapMirror 关系的信息，请参见 _Clustered Data ONTAP Volume Disaster Recovery Preparation Express Guide_ 。</block>
  <block id="f858e5c812f3b7304d6f82a1f606c693" category="paragraph">下图显示了用于初始化 SnapMirror 关系的操作步骤：</block>
  <block id="023ae09dbd4f847da5bf1c446aae27c4" category="image-alt">此图显示了用于初始化 SnapMirror 关系的操作步骤：标识目标集群</block>
  <block id="34167cb66fa691f401187372686826e8" category="list-text">确定目标集群。</block>
  <block id="9976388fec55bc9f183b6145a8e91ea4" category="list-text">在目标集群上，使用带有 -typeDP 选项的 volume create 命令创建大小等于或大于源卷的 SnapMirror 目标卷。</block>
  <block id="56a5dcbc723a84a3a96105fc7e8587da" category="admonition">目标卷的语言设置必须与源卷的语言设置匹配。</block>
  <block id="bc20e2d4270f206603a13e70158bf606" category="paragraph">以下命令会在 SVM2 中的聚合 node01_aggr 上创建一个名为 dstvolB 的 2 GB 目标卷：</block>
  <block id="94fc7d4e832915e3bd32385aaea2b049" category="list-text">在目标 SVM 上，使用带有 -type DP 参数的 snapmirror create 命令创建 SnapMirror 关系。</block>
  <block id="d2ab361ad252625bef3e54d94cef71f7" category="paragraph">DP 类型将此关系定义为 SnapMirror 关系。</block>
  <block id="2aeb08d3a9e533f9b4d689f1f833313d" category="paragraph">以下命令将在 SVM1 上的源卷 srcvolA 和 SVM2 上的目标卷 dstvolB 之间创建 SnapMirror 关系。默认情况下，该命令会分配默认的 SnapMirror 策略 DPDefault ：</block>
  <block id="82759b5ee9f943ed0d95ab7127baddf7" category="admonition">请勿为 SnapMirror 关系定义镜像计划。SnapManager 会在您创建备份计划时为您执行此操作。</block>
  <block id="c70efe282722af9a3ce2fb686bba8401" category="paragraph">如果不想使用默认 SnapMirror 策略，可以调用 snapmirror policy create 命令来定义 SnapMirror 策略。</block>
  <block id="5d5a1c29e64d2f4a8fc6e234bb252f4b" category="list-text">使用 snapmirror initialize 命令初始化此关系。</block>
  <block id="025ccb5c602eb959c7a4ef9b39e6d556" category="paragraph">初始化过程会向目标卷执行基线传输。SnapMirror 为源卷创建 Snapshot 副本，然后将该副本及其引用的所有数据块传输到目标卷。它还会将源卷上的任何其他 Snapshot 副本传输到目标卷。</block>
  <block id="089ce2a92126e4edade5a407bb72f0ac" category="paragraph">以下命令将初始化 SVM1 上的源卷 srcvolA 与 SVM2 上的目标卷 dstvolB 之间的关系：</block>
  <block id="4a70e5c60cd9931291d6fd683a3d9d10" category="inline-link">《集群模式 Data ONTAP 8.3 集群对等快速指南》</block>
  <block id="5712a089f95517b7dad9b9c6b08ba58c" category="paragraph"><block ref="5712a089f95517b7dad9b9c6b08ba58c" category="inline-link-rx"></block></block>
  <block id="e39dd4fe89eec7645bc342e84f788163" category="inline-link">《集群模式 Data ONTAP 8.3 卷灾难恢复准备快速指南》</block>
  <block id="78e93649d98aa2da141d31c9598381c4" category="paragraph"><block ref="78e93649d98aa2da141d31c9598381c4" category="inline-link-rx"></block></block>
  <block id="1c2f276a1d268d98617c37d5a7fa0311" category="list-text">登录到 SQL * 加号： sqlplus "/" as sysdba"</block>
  <block id="aa1f38978136b17d72a60f6b57d9280c" category="list-text">使用管理员密码创建新用户： create useruser_name identified by admin_password ；</block>
  <block id="411c1796f7700cc41a984682d84c2bde" category="list-text">将 sysdba 特权分配给新的 Oracle 用户：将 sysdba 授予 user_name ；</block>
  <block id="9179ccccd212c61951c326097198b489" category="summary">SnapManager for Oracle 可自动执行和简化与 Oracle 数据库的备份，恢复和克隆相关的复杂，手动且耗时的流程。您可以使用采用 Data ONTAP SnapMirror 技术的 SnapManager 在另一个卷上创建备份副本，并使用 Data ONTAP SnapVault 技术将备份高效归档到磁盘。</block>
  <block id="00004dee22ffee838619c2c8ef873134" category="list-text">保护二级存储系统上的备份。</block>
  <block id="af51fdde906c54ba4e0345457d95c231" category="image-alt">此图显示了 SnapManager for Oracle 的部署工作流。</block>
  <block id="c47caa863efae92a3ec7cd22c1af5785" category="list-text">在 * SnapVault SnapMirror 标签 * 中，您必须在设置 SnapVault 关系时输入在 SnapMirror 策略规则中指定的 SnapMirror 标签。</block>
  <block id="895c4c5645cbe95f0b06e215e7513eae" category="admonition">只有在创建配置文件时选择了 _SnapManager_cDOT_Vault_as 保护策略时， * SnapVault Label* 字段才会显示。</block>
  <block id="2f0c98e87731c2b55dd416438a2a1a80" category="list-text">在命令提示符处输入以下命令： `lsnrctl status`</block>
  <block id="884bebb1d6caa15f88836a2e74728688" category="summary">您可以使用采用 Data ONTAP SnapMirror 技术的 SnapManager 在另一个卷上创建备份集的镜像副本，并使用 Data ONTAP SnapVault 技术将备份高效归档到磁盘。在 SnapManager 中执行这些任务之前，您必须在源卷和目标卷之间配置数据保护关系并初始化此关系。</block>
  <block id="4ccb5a0b24aacfbdbdc487a4ed81c6e2" category="doc">准备用于 SnapMirror 和 SnapVault 复制的存储系统</block>
  <block id="d3d380257e1c434d251519e12f05b051" category="admonition">您不能在同一集群模式 Data ONTAP 源卷上同时配置 SnapMirror 关系和 SnapVault 关系。您必须在不同的源卷上配置这些关系。</block>
  <block id="a08264af2748200fd045574ba8d9f4b3" category="inline-xref-macro">了解 SnapMirror 与 SnapVault 之间的区别</block>
  <block id="1d4f9dc55b6a8c5f63a19fe0e44fcdf4" category="paragraph"><block ref="1d4f9dc55b6a8c5f63a19fe0e44fcdf4" category="inline-xref-macro-rx"></block></block>
  <block id="43e22b39777f03bb75618ad6fc9808e9" category="paragraph"><block ref="43e22b39777f03bb75618ad6fc9808e9" category="inline-xref-macro-rx"></block></block>
  <block id="cb17066b414cdee74a426ce3c2cb771d" category="inline-xref-macro">准备存储系统以进行 SnapVault 复制</block>
  <block id="ee88c7cfd014b7924207c1773b4e029f" category="paragraph"><block ref="ee88c7cfd014b7924207c1773b4e029f" category="inline-xref-macro-rx"></block></block>
  <block id="c5631579e7a8c96dac3785c2d7df96bb" category="summary">《适用于 UNIX ® 的 SnapManager for Oracle 3.4.2 安装和设置指南》</block>
  <block id="e71988c555ae57f81416cfb24065723b" category="paragraph">本指南介绍在 UNIX 环境中使用集群模式 Data ONTAP 部署 SnapManager 3.4.2 for Oracle 时需要执行的初始任务。主题包括如何安装和配置产品以及如何备份数据库。</block>
  <block id="1275b5db6b1e08e2d9a95c75fa6983e9" category="list-text">创建新用户并为该用户分配管理员密码： create useruser_name identified by admin_password default tablespace_name quota unlimited on tablespace_name ；</block>
  <block id="b63772bdfc0e9ea64d6bb0dd46640f26" category="list-text">向新 Oracle 用户分配 _connect_and _resource_privileges ：授予 connect ，将资源分配给 user_name ；</block>
  <block id="a3280631d5f477e2c0aa424ca3d29650" category="summary">在使用 SnapManager 的集成 SnapVault 技术将 Snapshot 副本归档到磁盘之前，您需要在源卷和目标卷之间配置数据保护关系，然后初始化此关系。初始化时， SnapVault 会创建源卷的 Snapshot 副本，然后将该副本及其引用的所有数据块传输到目标卷。</block>
  <block id="b8e56d6281e514f57fa289869980bd6d" category="paragraph">在使用 SnapManager 的集成 SnapVault 技术将 Snapshot 副本归档到磁盘之前，您需要在源卷和目标卷之间配置数据保护关系，然后初始化此关系。初始化时， SnapVault 会创建源卷的 Snapshot 副本，然后将该副本及其引用的所有数据块传输到目标卷。</block>
  <block id="bfb88d73c41eb9afccafe3b9d47503b6" category="paragraph">您可以使用 Data ONTAP 命令行界面（ CLI ）或 OnCommand 系统管理器创建 SnapVault 关系。以下操作步骤假定您使用的是命令行界面。有关如何使用 OnCommand 系统管理器创建 SnapVault 关系的信息，请参见 _Clustered Data ONTAP Volume Backup using SnapVault 快速指南 _ 。</block>
  <block id="247c26750c5a9534bcfff96cdc156622" category="paragraph">下图显示了用于初始化 SnapVault 关系的操作步骤：</block>
  <block id="2b86398122b84273bbb4a10000acc2b2" category="image-alt">此图显示了用于初始化 SnapVault 关系的操作步骤：标识目标集群</block>
  <block id="8e3d5ed0f985c9deb6a441aa60933c1a" category="list-text">在目标集群上，使用带有 -typeDP 选项的 volume create 命令创建大小等于或大于源卷的 SnapVault 目标卷。</block>
  <block id="eb0b53267d27aa59cd6e0878cbdf547a" category="list-text">在目标 SVM 上，使用 snapmirror policy create 命令创建 SnapVault 策略。</block>
  <block id="bbe0d5296f09e873ebd26cf45c6cc7a1" category="paragraph">以下命令将创建 SVM 范围的策略 SVM1-vault ：</block>
  <block id="630f5855b81ac1ee7747ad6f90c06c74" category="admonition">请勿为 SnapVault 关系定义 cron 计划或 Snapshot 副本策略。SnapManager 会在您创建备份计划时为您执行此操作。</block>
  <block id="777d56c3a19c5672124f810bd370e73f" category="list-text">使用 snapmirror policy add-rule 命令向策略中添加一条规则，用于定义以下 Snapshot 副本标签以及每个标签的保留策略：</block>
  <block id="ad9a1179b703038b29679747cb108fcf" category="list-text">无限制 * 重要： * 标签区分大小写。</block>
  <block id="162c7c0dc2e98112879fd8413ff9101a" category="paragraph">这些是 SnapManager 使用的固定标签。在对备份进行归档时，您可以选择以下选项之一。您必须对要添加的每个规则执行一次此命令。</block>
  <block id="1f525b74bbaea7c08dd1cfa044de85fb" category="paragraph">+ 以下命令会向 SVM1-vault 策略中添加一条规则，用于定义 " `daily` " 标签，并指定应在存储中保留 30 个与此标签匹配的 Snapshot 副本：</block>
  <block id="12929847f4bf19c20608340be72c2f71" category="list-text">使用带有 -type XDP 参数和 -policy 参数的 snapmirror create 命令创建 SnapVault 关系并分配存储策略。</block>
  <block id="5df54dbc729f4e4db3eb440402e28b10" category="paragraph">XDP 类型将此关系定义为 SnapVault 关系。</block>
  <block id="4532f3508ad668b2622d441e7592c21e" category="paragraph">以下命令将在 SVM1 上的源卷 srcvolA 和 SVM2 上的目标卷 dstvolB 之间创建 SnapVault 关系。它会分配名为 SVM1-vault 的策略：</block>
  <block id="81c0cf71359593bcc419725166f87f65" category="paragraph">初始化过程会向目标卷执行基线传输。SnapMirror 为源卷创建 Snapshot 副本，然后将该副本及其引用的所有数据块传输到目标卷。</block>
  <block id="d2dad05e2da6df50b2e0870481e258b6" category="inline-link">《使用 SnapVault 备份集群模式 Data ONTAP 8.3 卷快速指南》</block>
  <block id="3f67c695e465cb3f68df8813bc09001c" category="paragraph"><block ref="3f67c695e465cb3f68df8813bc09001c" category="inline-link-rx"></block></block>
  <block id="dba25030d1b524e50ab53c2d4530d698" category="list-text">为 SnapManager 存储库创建新的表空间： create tablespacetablespace_name datafile ′ /u01/app/oracle/oradata/datafile/tablespace_name.dbf′ size 100m autodelete on ；</block>
  <block id="534b9f86f629e6f5b3feeafc8b2de2ce" category="list-text">验证表空间的块大小：从 dba_tablespaces 中选择 tablespace_name ， block_size ；</block>
  <block id="e1c5f07220a818d5da2a476fa47e6997" category="summary">SnapMirror 是一种灾难恢复技术，用于从主存储故障转移到地理位置偏远的站点上的二级存储。SnapVault 是一种归档技术，专为实现磁盘到磁盘 Snapshot 副本复制而设计，可满足标准要求并用于其他监管相关目的。</block>
  <block id="d726911efa5c8025c7b07d914505403e" category="paragraph">这些目标在备份货币和备份保留的目标之间实现了不同的平衡：</block>
  <block id="2f384b51fccb091e1ffce367fb336db2" category="list-text">SnapMirror 会将主存储中的 Snapshot 副本存储在 _ononly 中，因为在发生灾难时，您需要能够故障转移到已知良好的最新主数据版本。例如，您的组织可能会在 10 天内镜像生产数据的每小时副本。如故障转移使用情形所示，二级系统上的设备需要与主系统上的设备等效或接近等效，才能从镜像存储高效地提供数据。</block>
  <block id="f2cc0ee8f3fcd656ec20d283aade3976" category="list-text">相比之下， SnapVault 会存储 Snapshot 副本，无论它们当前是否位于主存储中，因为在进行审核时，对历史数据的访问可能与对当前数据的访问同等重要。您可能希望在 20 年的时间内保留数据的每月 Snapshot 副本（例如，为了符合政府对您企业的会计规定）。由于无需从二级存储提供数据，因此您可以在存储系统上使用速度较慢，成本较低的磁盘。</block>
  <block id="eb5df322b55df7d59b4366df4fcc777e" category="paragraph">当然， SnapMirror 和 SnapVault 对备份货币和备份保留的不同权重最终来自每个卷的 255-Snapshot 副本限制。如果 SnapMirror 保留最新的副本，则 SnapVault 会保留最长时间内创建的副本。</block>
  <block id="bd0f816db85835965d0df0485c0ca8ab" category="summary">要启用 SnapManager 操作，需要一个 SnapManager 许可证和多个存储系统许可证。SnapManager 许可证有两种许可模式，即每服务器许可模式，其中 SnapManager 许可证驻留在每个数据库主机上，而每存储系统许可 SnapManager 模式则驻留在存储系统上。</block>
  <block id="f87746bf8f941559349f92d93891f9fc" category="paragraph">在主存储系统和二级存储系统上。 SnapMirror 目标系统上需要执行远程验证。</block>
  <block id="2e03a56c6e393ea3f5eaae3a919f3a36" category="paragraph">在 SnapVault 目标系统上执行远程验证和从备份中还原时需要使用。</block>
  <block id="fa15c08be8b69511dde3b50595ff793d" category="summary">Trademark information</block>
  <block id="a27e10ba4c477dd1b3334d006f314e98" category="summary">使用 asmmain.sh 和 asmquerydisk.sh 脚本可以更改网格用户，组和用户，所有这些脚本都用于查询 ASM 磁盘。必须始终从根执行这些脚本。</block>
  <block id="e8d978d8d3545e8df64b2278b91bd5a4" category="doc">支持的脚本</block>
  <block id="1a61890ad48295db8921a4af9b13c55a" category="paragraph">asmmain.sh 是从任何添加或删除设备的操作中调用的主脚本文件。asmmain.sh 脚本会在内部调用另一个脚本，该脚本需要从具有 Oracle 网格凭据的根目录执行。此脚本将查询 ASM 磁盘组的设备，然后在 initasmdisk 文件中添加这些条目，并添加这些设备的权限和所有权。您可以根据您的环境以及仅用于匹配 /dev/mapper/* P1 的正则表达式更改此文件的权限和所有权。</block>
  <block id="9523d1ea6ac3231010b4779a3cf00bbe" category="paragraph">asmquerydisk.sh 脚本用于查询磁盘列表，该列表用于创建 ASM 磁盘组。您必须根据您的配置为 ORACLE_BASE ， ORACLE_HOME 和 ORACLE_SID 分配值。</block>
  <block id="965b0bfd4a5de1cdc7858669b2bb3450" category="paragraph">这些脚本位于 /opt/netapp/smO/plugins/examples/noasmlib 。但是，在主机上启动 SnapManager for Oracle 服务器之前，必须将这些脚本移至 /opt/netapp/smO/plugins/noasmlib 。</block>
  <block id="85611af4dfe124b16488df3d4c1ef7e4" category="summary">此集成数据库保护示例介绍了对薪资数据库的保护。此示例使用以下数据。</block>
  <block id="44086c646a51c73494903de8afaaf0fb" category="doc">目标数据库的详细信息</block>
  <block id="e1c256a79f5aece1c0c95b8bb6775251" category="paragraph">TechCo 是一家总部位于亚特兰大的 3000 人公司，其数据库管理员（ DBA ）必须为生产薪资数据库 PAYDB 创建一致的备份。备份到主存储和二级存储的保护策略要求 DBA 和存储管理员协同工作，在主存储上本地以及远程将 Oracle 数据库备份到远程位置的二级存储。</block>
  <block id="f0bd6758335ee0b61140d417e0b8e7d9" category="list-text">* 配置文件信息 *</block>
  <block id="b48d396ced820ff294e579a57ab87cf7" category="paragraph">在 SnapManager 中创建配置文件时，需要以下数据：</block>
  <block id="a27f0b02d375252d71ee700238a8857d" category="list-text">数据库名称： PAYDB</block>
  <block id="a12736460a4ceebb955df2d96ac16816" category="list-text">主机名： payroll.techco.com</block>
  <block id="bf3ecec62ad1ed2f0e2461d6ef0d0c69" category="list-text">数据库 ID ： payrolldb</block>
  <block id="3c03af37cb5ecfc7b740c06bac07dbd3" category="list-text">配置文件名称： paying_prod.</block>
  <block id="0641afd1f725d43a04aa29f0c024a4c0" category="list-text">连接模式：数据库身份验证</block>
  <block id="afc4b8983a8c675504e46c4a69564342" category="list-text">Snapshot 命名方案： smo_hostname_dbsid_smoprofile_scope_mode_smID （转换为 smo_payroll.xyz.com_payrolldb_payroll_prod_f_h_x" ）</block>
  <block id="cfb84dc5f06e7fb40b908e1ae5f6851e" category="paragraph">如果在配置文件上设置了保护策略，则无法使用 SnapManager 更改此策略。您必须使用 Protection Manager 的控制台更改此策略。</block>
  <block id="a3213b95642e5f606603180d4e30cd3f" category="paragraph">例如，如果您使用的是 Oracle Real Application Clusters （ RAC ），则必须在从中执行 SnapManager 的 RAC 节点上指定 RAC 实例的 SID 系统标识符。</block>
  <block id="5a11a82788f974e566a446922da41cdb" category="list-text">* — asminstance*</block>
  <block id="4261b17a7e80fffa6003a351fa93f3b3" category="paragraph">指定用于登录到自动存储管理（ Automatic Storage Management ， ASM ）实例的凭据。</block>
  <block id="603bc03c4c1b929b714450898a7ffdb5" category="list-text">* — asmusername asminstance_username*</block>
  <block id="44ff888551975746cae62028f9fe536f" category="paragraph">指定用于登录到 ASM 实例的用户名。</block>
  <block id="ea535360a1d67461f3b378190528ff32" category="list-text">* — asmpassword asminstance_password*</block>
  <block id="d7ab8ec8a0a46e147f9adac464e8a2f1" category="paragraph">指定用于登录到 ASM 实例的密码。</block>
  <block id="7c5ff6fdc9032984fb1495e7bd384d6f" category="list-text">* — osaccount osaccount*</block>
  <block id="541c125a6f2e337922296d9c6f5333c1" category="paragraph">指定 Oracle 数据库用户帐户的名称。SnapManager 使用此帐户执行 Oracle 操作，例如启动和关闭。通常由用户在主机上拥有 Oracle 软件，例如 Oracle 。</block>
  <block id="32244146a4dfd2f143fa7d59661ffdc3" category="list-text">* — osgroup osgroup*</block>
  <block id="a821079d8ef9ea0d0c4da44ba521c849" category="paragraph">指定与 Oracle 帐户关联的 Oracle 数据库组名称。</block>
  <block id="b2fa8764c9c3975feacf81db5fba6530" category="list-text">* —保护（ -protection-policypolicy_name ） | （ -noprotect]*</block>
  <block id="23e400f1d43234929770ee4d949146ec" category="paragraph">指示是否应将备份保护到二级存储。</block>
  <block id="037a0172263d7f9868034cd8bd0b4e4b" category="admonition">如果指定 -protect 时未指定 -protection-policy ，则数据集将没有保护策略。如果在创建配置文件时指定了 -protect 并且未设置 -protection-policy ，则稍后可通过 smo profile update 命令设置该配置文件，或者存储管理员可以使用 Protection Manager 的控制台设置该配置文件。</block>
  <block id="80d7d418fb5f882938e899424472741c" category="paragraph">noprotect 选项指定不将配置文件保护到二级存储。</block>
  <block id="93255f0c4ac12cd0eae58e50908b322c" category="list-text">* —保护（ -protection-policypolicy_name ） | -noprotect*</block>
  <block id="1e26b3bd5c27749ddb83d3a529d19d88" category="paragraph">指定根据归档日志保护策略保护归档日志文件。</block>
  <block id="9906f2ecac60c251e3855758bd220a31" category="paragraph">指定不使用 -noprotect 选项保护归档日志文件。</block>
  <block id="a6435bb39f4a85f9252f44c6ef13b9f2" category="list-text">使用 smo plugin check 命令验证是否已正确安装插件。</block>
  <block id="ac169e58acc9e7d231e3d59c23e92fec" category="list-text">对于备份操作，输入 -taskspecs 选项并提供任务规范 XML 文件的绝对路径，以便在备份操作之前或之后执行预处理或后处理活动： SMO backup create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain ｛ -hourly | -weekly | -monthly | -unlimited ｝ ] ｛ -verify] | ｛ -data 〔 -filesfiles 【文件文件文件〕〕 _ 表空间 -tablesogs ｛ -tablespacesaces ） ]] "-protect | -noprotect | -protectnow] -backup-destpath1 [ ， [path2]] （ -exclude-destpath1 [ ， path2]]] （ -prunelog ｛ -all _ -untilSCtilNUN规范 _ -before ｛ -dateydesty-mm-dd HH ： mm ： sn | -months | -prunteamesnvs ； -dunesun-dunesunesun-destinationsun-dunese-zh_unese-zh_unese-zh.-zh_-dump_-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-zh.-d</block>
  <block id="cac93f3e490916a3653bfd95a3fc3ec6" category="list-text">对于备份还原操作， 输入 -taskSpec 选项，并提供任务规范 XML 文件的绝对路径，以便在还原操作之前或之后执行预处理或后处理活动： smo backup restore -profileprofile_name ｛ -label-label &lt;labk&gt; | -id&lt;id&gt; ｝ ｛ -files&lt;files&gt;|-tablesspeci&lt; 表空间 &gt; | -complete | -files&gt; ，直到 &lt;-restology&gt; 为止 -from-secondary "-temp-volume &lt;temp_volume&gt;] （ -copy-idiedi]] （ -taskspec&lt;taskspec&gt;] ）（ -verify] （ -force] ）备份还原 -fast （需要，覆盖，回退和关闭）（ -preview ） -dump （ -quiet ， -verbose ）</block>
  <block id="8f12ee93132390ac5ba7d4712ac16e5e" category="list-text">对于克隆创建操作，输入 -taskspecs 选项并提供任务规范 XML 文件的绝对路径，以便在克隆操作之前或之后执行预处理或后处理活动： SMO clone create -profileprofileprofile_name ｛ -backup-labelbackup_name _ -backup-id&lt;backup-id&gt;&gt; -current ｝ -newsidnew_sid-clonesefull_path_to_clonspecfile [-reserve&lt;yes ， no ， herity&gt;] （ -host&lt;host&gt;] ）【 -label&lt;label&gt; 】（ -label-sID-cluster&gt; ）</block>
  <block id="cb222c71feb8c8adf8a11525cdc77277" category="list-text">从二级卷 * 到副本 -copy-id id*</block>
  <block id="d65436d2f555bea324675c285b3cfa43" category="paragraph">从二级存储挂载备份。如果未指定此选项，则 SnapManager 将从主存储挂载备份。如果已释放备份，则可以使用此选项。</block>
  <block id="c0a48509693ddb433612198a6fdeb6d7" category="paragraph">每当指定 -from-secondary 选项时，都必须指定 -copy-id 选项。如果二级存储系统上有多个备份，则使用 -copy-id 选项指定应使用二级存储上的哪个备份副本挂载备份。</block>
  <block id="f7cca02a2ba20dd854b565d014c5a604" category="admonition">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则必须为 -copy-id 选项指定有效值。但是，如果使用的是集群模式 Data ONTAP ，则不需要 -copy-id 选项。</block>
  <block id="49a40a90a4922c9efbfccbd91df359ef" category="list-text">要删除与单个或多个配置文件关联的 SnapManager 操作的历史记录，请输入以下命令： `smo history remove -profile ｛ -name ， profile_name [profile_name1 ， profile_name2] | all-repository-login （ -passwordrepo_password ） -usernamerepo_username-reperepo_dbname-host_operation_name-sepo ，` 操作</block>
  <block id="4ed43ec328445d00c182730c89ef1b29" category="list-text">要显示有关计划操作的信息，请输入以下命令： `smo schedule list -profile profile_name[-quiet | -verbose`</block>
  <block id="e9328712fb4059706d758e21140f88e3" category="list-text">输入以下命令： `smo backup verify -profile profile_name （ -label label | -idididd ）【 -force] （ -dump] ）【 -quiet （ - 静默） | -verbose （ -verbose ）】`</block>
  <block id="c5f30b388db3bff7b9c257e2f5588f61" category="list-text">输入以下命令： SMO backup create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain ｛ -hourly | -weekly | -monthly | -unlimited ｝ ] ｛ -verify] | ｛ -data 〔 -filesfiles 【文件文件文件〕〕 _ 表空间 -tablesogs ｛ -tablespacesaces ） ]] "-protect | -noprotect | -protectnow] -backup-destpath1 [ ， [path2]]] （ -exclude-destpath1 [ ， path2]]] （ -prunelog ｛ -all _ -untilSCtilNUN规范 _ -until -dateydesty-mm-dd ： HH ： mm ： sn _ &gt; -before ｛ -hours] ， -prunverbose _taskunme ）</block>
  <block id="948fb8246461c717a177e684c1eba9bf" category="summary">通过 SnapManager ，您可以执行基于卷或基于文件的备份和还原操作。</block>
  <block id="26ae683a93476a05206f909bbbf6bb62" category="paragraph">基于卷的快速恢复（从主存储）</block>
  <block id="7fa6ba00444849892525550c823d9864" category="paragraph">SnapManager 通过还原完整卷来还原数据库的数据文件。此默认过程是还原数据库的最快方法。</block>
  <block id="97dc562e71004a955e3f9f6e7f043c12" category="paragraph">存储端文件还原： SnapManager 在 NAS 环境中执行单文件快照还原（ SFSR ），或者在自动存储管理（ ASM ）环境中执行部分文件快照还原（ PFSR ）。在 SFSR 中，表示受保护对象的文件或 LUN 将会还原。如果自上次备份以来文件系统详细信息和文件系统布局未发生更改，则会从本地备份执行 PFSR 。</block>
  <block id="44887ca1805bbb88cb8cd97e80a0f4fd" category="paragraph">主机端文件副本还原（从主卷或二级卷）： SnapManager 使用 LUN 或 FlexClone 克隆本地备份。此时将挂载克隆，然后 SnapManager 会将主机文件从克隆复制到活动文件系统。</block>
  <block id="cf0062dcdfae2d34e84c2f4326201ace" category="paragraph">尽管默认情况下为快速还原过程，但管理员可以选择任一类型。在快速还原过程中， SnapManager 提供了有关阻碍快速还原过程完成的条件以及可能影响快速还原的条件的信息，但如果管理员选择继续此过程，则可以忽略这些信息。</block>
  <block id="d964414712bbbc773aa0ee00d64dfca8" category="admonition">如果主存储上也存在备份，则无法从二级存储还原备份。</block>
  <block id="e778dccbdb6b65346f64bc6bd45f424a" category="paragraph">快速还原操作完成后， SnapManager 将执行以下任务：</block>
  <block id="2639c6f710b13d48029f2b563f915576" category="list-text">释放同一配置文件中较新的备份（在还原备份后进行），因为它们的 Snapshot 副本不再位于主存储上。</block>
  <block id="8980bf397d063e69a309e65b6ec39623" category="list-text">删除同一配置文件中所有 Snapshot 副本的备份，这些备份会通过快速还原过程自动删除任何 Snapshot 副本。</block>
  <block id="5c67554d9d2669b9b6bae1a65b931bb2" category="paragraph">这样可以防止备份被部分释放。例如， Backup_A 是先创建的，而 Backup_B 是先创建的。每个文件都有一个 Snapshot 副本用于数据文件，一个用于归档日志。在 SnapManager 使用快速还原过程还原 Backup_A 之后， SnapManager 会自动从 Backup_B 中删除数据文件 Snapshot 副本由于未在快速还原过程中还原归档日志，因此在快速还原过程完成后， SnapManager 必须删除此归档日志的 Backup_B Snapshot 副本。</block>
  <block id="1ee926dce935729e181995dc9421a5c9" category="section-title">快速还原</block>
  <block id="6eb84294889b891a0ccb6cfdafc75542" category="paragraph">快速还原或基于卷的还原之所以命名为，是因为它是最快的还原方法。整个存储系统卷将还原为 Snapshot 副本。在存储级别，此还原几乎是瞬时的。但是，执行卷还原可能会产生以下负面影响，因此必须谨慎使用：</block>
  <block id="3e479263ed6e0684c07c4cc2e957b84e" category="list-text">还原整个存储端卷，包括以下内容：</block>
  <block id="2c5aa8a2e72460c1d08a59685bb0fe3e" category="list-text">不视为备份一部分的文件</block>
  <block id="bd97ecb1d3afb7e79902368ddfe0d696" category="list-text">卷上的其他文件，文件系统或 LUN</block>
  <block id="f073fa7a6aa05e6b57c27c8f9ee268ef" category="list-text">删除在将卷还原到的 Snapshot 副本之后创建的所有 Snapshot 副本。</block>
  <block id="2317c9c77c56e81c9deb91fb48481141" category="paragraph">例如，如果卷还原了星期一的备份，则无法再还原星期二的备份。</block>
  <block id="0c6853b17d5fda53e6e06251a526bb7c" category="list-text">如果还原的 Snapshot 副本早于此关系中的基线 Snapshot 副本，则与二级存储系统的关系将中断。</block>
  <block id="f8caecbd8909ba2a12bd3462a97149b3" category="list-text">在 NAS 环境中，文件系统中的每个文件都会在存储系统上还原。</block>
  <block id="1d8e4a349e5e863aba0d2373ce9903b4" category="paragraph">对于 NAS 环境，与存储端文件还原相比，此还原机制不会提供额外的优势。</block>
  <block id="79e436263407343f3d2bc7e02f4c507f" category="list-text">从主存储系统还原 SnapManager 时， LUN （ SAN ）或文件（ NAS ）将通过 SFSR 原位还原。</block>
  <block id="5ccca702eed04730f9587a794fb9aea5" category="list-text">从二级存储系统还原 SnapManager 时， LUN （ SAN ）或文件（ NAS ）会通过网络从二级存储系统复制回主存储系统。</block>
  <block id="d82b27b8a55eedf000fd4cc7329b2f03" category="section-title">存储端文件还原</block>
  <block id="158ecc5a25a0e4765646d4096f4d3738" category="paragraph">有时，如果无法执行存储端文件系统还原，则会执行存储端文件还原。在存储端文件还原中，文件系统中的各个文件将直接在存储系统上还原。</block>
  <block id="90c7e6b3ba95bf750f9646c854ce529c" category="paragraph">此类还原只能在 NFS 环境中执行。</block>
  <block id="f8214c2cd9e41d84bd298f318cea616a" category="paragraph">对于 ASM 环境，只有在满足以下条件时，才能执行存储端文件还原：</block>
  <block id="d34f8b32eaed19e74e550df9145b0cb2" category="list-text">自创建备份以来，底层文件块区未发生更改（例如，未调整文件大小，未进行磁盘重新平衡）。</block>
  <block id="9d7d232652ca14bb1f3f0e64dd5c3a42" category="list-text">您正在从主存储系统还原。（从二级存储系统还原时不支持此功能。）</block>
  <block id="725290f9b9f52e5605989cb43722b5ff" category="paragraph">执行存储端文件还原时，将发生以下情况：</block>
  <block id="b0f96fc2a96fab703bda2be06a0385aa" category="list-text">当 SnapManager 从主存储系统还原 NFS 文件时，各个文件将使用 SFSR 原位还原。</block>
  <block id="da11d0025c36896201e9190f6a87c13f" category="list-text">当 SnapManager 从二级存储系统还原 NFS 文件时，各个文件将通过存储网络复制回主存储系统。</block>
  <block id="270c1d11cc98f6735b58df2216a7ba0b" category="list-text">从主存储系统还原 ASM 文件时，只还原底层 LUN 中与所还原文件关联的字节（ LUN 中其余字节保持不变），即可还原各个文件。用于部分还原 LUN 的存储系统技术称为 PFSR 。</block>
  <block id="c0b9bb663c82c59025900679d1bf527d" category="paragraph">如果无法执行快速还原，存储端文件系统还原和存储端文件还原，则在 SAN 环境中，主机端文件副本还原是最后一种选择。</block>
  <block id="bdd48de526b9932646ba49dead36fc85" category="paragraph">从二级存储还原时， SnapManager 会首先尝试将数据直接从二级存储系统还原到主存储系统（而不涉及主机）。如果 SnapManager 无法执行此类还原（例如，如果文件系统中存在不属于还原的文件），则 SnapManager 将执行主机端文件副本还原。SnapManager 可通过两种方法从二级存储执行主机端文件副本还原。在 SMO.config 文件中配置了 SnapManager 选择的方法。</block>
  <block id="11e1979c90a99e62e25b0d049b4756c4" category="list-text">Direct ： SnapManager 克隆二级存储上的数据，将克隆的数据从二级存储系统挂载到主机，然后将数据从克隆复制到活动环境。这是默认的二级访问策略。</block>
  <block id="a7043552816b1bcab84b08bd23254dd2" category="list-text">间接： SnapManager 首先将数据复制到主存储上的临时卷，然后将数据从临时卷挂载到主机，然后将数据从临时卷复制到活动环境。只有当主机无法直接访问二级存储系统时，才应使用此二级访问策略。使用此方法进行恢复所需时间是直接二级访问策略的两倍，因为会创建两个数据副本。</block>
  <block id="86dc3c2e1656df45c959322fdacd343a" category="paragraph">是否使用直接方法或间接方法由 SMO.config 配置文件中 restore.secondaryAccessPolicy 参数的值控制。默认值为 DIRECT 。</block>
  <block id="a163ab3b20a7731ab32e0411ce34c27c" category="paragraph">以下输出显示了有关二级存储上受保护备份的克隆的信息：</block>
  <block id="892b26dcb5299f8e0e3e710343863f4f" category="summary">示例脚本位于 SnapManager for Oracle 安装目录的 plugins/examples/noasmlib 目录中。</block>
  <block id="1897fc49e9f36bbd1d658f030cf8816b" category="doc">支持 ASM 数据库而不使用 ASMLib 的示例脚本</block>
  <block id="9b14ea04138432004b3ff4da8f7a52a2" category="section-title">asmmain.sh</block>
  <block id="b2779231830ffc060091f299276102c3" category="section-title">asmquerydisk.sh</block>
  <block id="0a3d5c8ba04e6d5f8b8b942e74792927" category="section-title">disk_list.sql</block>
  <block id="a771536b2f1f1b80666663a5d2c647b2" category="paragraph">以下预览示例显示了文件是使用基于卷的快速还原，存储端文件系统还原和存储端系统还原方法进行还原的。要确定为何不使用相同的还原方法还原所有文件，请参见分析一节。</block>
  <block id="dd922e8833f0f0cd0bd4f19e763f212d" category="paragraph">每个还原方法都有一个小节，其中包含有关可使用该还原方法还原的文件的信息。这些小节将根据存储方法效率的降低级别进行排序。在上面的示例中，快速还原方法比存储文件系统还原方法效率更高，因此会首先显示。</block>
  <block id="ce7286c74cbba0901b3090157ef980c6" category="paragraph">在此示例中，第一个故障可通过命令行界面（ CLI ）中使用 -fast -override 或在图形用户界面（ GUI ）中选择 * 覆盖 * 来覆盖。卷中映射的 LUN 的第二个故障是必填的，不可覆盖。</block>
  <block id="469b5caa49f0f2ca2d76d19b65afdf00" category="list-text">要删除用户的配置文件凭据，请输入以下命令： "mo credential delete -profile-nameprofile_name"</block>
  <block id="83cf83848a080166340ec494031fc46c" category="paragraph">*&lt;default_install_directory &gt;/plugins/backup/create/policy*</block>
  <block id="0ebaf836d8bbab38f41fb66f20a2a4d3" category="paragraph">*&lt;default_install_directory &gt;/plugins/backup/create/pre*</block>
  <block id="ace568589276002a1664c32b6c918422" category="paragraph">*&lt;default_install_directory &gt;/plugins/backup/create/post*</block>
  <block id="bee439a3411ebd86da35a5c7d0100e21" category="paragraph">*&lt;default_install_directory &gt;/plugins/restore/create/policy*</block>
  <block id="8f71e1729419efdaa9ca30e4cfbc37fb" category="paragraph">*&lt;default_install_directory &gt;/plugins/restore/create/pre*</block>
  <block id="0d9890805ec708dd0c3898d0b0f16ccc" category="paragraph">*&lt;default_install_directory &gt;/plugins/restore/create/post*</block>
  <block id="35fa9eaf86df982eb6c39255206c1478" category="paragraph">*&lt;default_install_directory &gt;/plugins/clone/create/policy*</block>
  <block id="d6d4afb3f7557518fa02e6b59732c741" category="paragraph">*&lt;default_install_directory &gt;/plugins/clone/create/pre*</block>
  <block id="b69cb5f57a6ffd2da9a844bc693bb51c" category="paragraph">*&lt;default_install_directory &gt;/plugins/clone/create/post*</block>
  <block id="d6b3cc393d0ad68172d4f4ead2ece847" category="paragraph">0001-CON-10002 ： ASM 实例 &lt;ASM_instance_sid&gt; 未发现路径为 &lt;paths&gt; 的已连接 ASM 磁盘。请验证 ASM_DISKSTRING 参数和文件系统权限是否允许发现这些路径。</block>
  <block id="09178168e3f59ea84405cc550426ccb8" category="paragraph">ASM 磁盘已连接到主机，但 ASM 实例无法发现它们。</block>
  <block id="e4f53d2837eb3b26057ab2a3bc838907" category="paragraph">如果正在使用基于 NFS 的 ASM ，请确保 ASM 实例的 ASM_DISKSTRING 参数包含 ASM 磁盘文件。例如，如果错误状态为 SMO/mnt/&lt;dir_name&gt;/&lt;disk_name&gt; ，则将 /SMO/mnt/*/* 添加到 asm_diskstring 。</block>
  <block id="1deccc2a40451d3039b1c55684fd148d" category="paragraph">0001-DS-10021 ：无法将数据集 &lt;datasdata-name&gt; 的保护策略设置为 &lt;new-protection-policy&gt; ，因为保护策略已设置为 &lt;old-protection-policy&gt; 。请使用 Protection Manager 更改保护策略</block>
  <block id="be658e07259abce1169e0032f9134322" category="paragraph">设置数据集的保护策略后， SnapManager 将不允许您更改保护策略，因为它可能需要重新对基线关系进行对齐，并导致二级存储上的现有备份丢失。</block>
  <block id="0fb1ea6f4fe12abf4e344af11797ba27" category="paragraph">使用 Protection Manager 的管理控制台更新保护策略，该控制台提供了有关从一个保护策略迁移到另一个保护策略的更多选项。</block>
  <block id="cb63acd30d9099c2c9d14ab8f47ddfa3" category="paragraph">0001-SD-10028 ： SnapDrive 错误（ ID ： 2618 代码： 102 ）无法发现与 "LUN_path" 关联的设备。如果正在使用多路径，可能会出现多路径配置错误。请验证配置，然后重试。</block>
  <block id="85740efebd641d62e0e62a8f80660b9c" category="paragraph">主机无法发现在存储系统上创建的 LUN 。</block>
  <block id="f167a9bfd9457d63125ca464cbafc963" category="paragraph">确保传输协议已正确安装和配置。确保 SnapDrive 可以在存储系统上创建和发现 LUN 。</block>
  <block id="3f167e980a91324cf2c730c3388f039b" category="paragraph">0001-SD-10028 ： SnapDrive 错误（ ID ： 2836 代码： 110 ）无法获取卷 "storage name" ： "temp_volume_name" 上的数据集锁定</block>
  <block id="936f86bce4d14f728c1ce134d79937a4" category="paragraph">您尝试使用间接存储方法进行还原，但指定的临时卷不在主存储上。</block>
  <block id="6f3a4fb65abe33ebf555b0fa3eff7169" category="paragraph">在主存储上创建临时卷。或者，如果已创建临时卷，请指定正确的卷名称。</block>
  <block id="813e76fc290a5b343a8dc307eb8200b3" category="paragraph">0001-SMO-11027 ：由于快照繁忙，无法从二级存储克隆或挂载快照。尝试从较早的备份克隆或挂载。</block>
  <block id="eb1d6d04efc97427950f0b5f7f6b2680" category="paragraph">您尝试从最新受保护备份的二级存储创建克隆或挂载 Snapshot 副本。</block>
  <block id="31142ea2887f59aaf252b8c4806e44af" category="paragraph">从较早的备份克隆或挂载。</block>
  <block id="c95b31dda64c5467d97fe9d9ee3be71a" category="paragraph">0001-SMO-12346 ：无法列出保护策略，因为未安装 Protection Manager 产品或未将 SnapDrive 配置为使用它。请安装 Protection Manager 和 / 或配置 SnapDrive ...</block>
  <block id="d71538fa39995ed92f6c856ffd98c88b" category="paragraph">您尝试在未将 SnapDrive 配置为使用 Protection Manager 的系统上列出保护策略。</block>
  <block id="dc45b0ef201af0cf2e96fdb71673d137" category="paragraph">安装 Protection Manager 并配置 SnapDrive 以使用 Protection Manager 。</block>
  <block id="cf1da880a5207a576f8f91f802b2dd44" category="paragraph">0001-SMO-13032 ：无法执行操作：备份删除。根发生原因： 0001-SMO-02039 ：无法删除数据集备份： SD-10028 ： SnapDrive 错误（ ID ： 2406 代码： 102 ）无法删除数据集的备份 ID ： "backup_id" ，错误（ 23410 ）：卷 "volume_name" 上的 Snapshot"snapshot_name" 处于繁忙状态。</block>
  <block id="d6a8f58e30556c4b6d9ad8e5ed9405d9" category="paragraph">您已尝试释放或删除最新受保护的备份或包含镜像关系中基线 Snapshot 副本的备份。</block>
  <block id="d773f7651b348652a462ffe0091fd0fe" category="paragraph">释放或删除受保护的备份。</block>
  <block id="664986a7cdf3128dc82539a02217483e" category="paragraph">SD-10028 ： SnapDrive 错误（ ID ： 2868 代码： 102 ）找不到远程快照或远程 qtree 。</block>
  <block id="e574382543f020d01ebe01238d57cb70" category="paragraph">即使 Protection Manager 中的保护作业仅部分成功， SnapManager 也会将备份显示为受保护。在数据集遵从性正在进行中时（在镜像基线快照时），会发生此情况。</block>
  <block id="35ffae147d49d2ad8c4181718f1752e0" category="paragraph">在数据集符合要求后进行新备份。</block>
  <block id="0c89848f78c4865340eef549cbb5e443" category="paragraph">SMO-21019 ：对目标： "/mnt/destination_name/" 执行归档日志删减失败，原因： "ORACLE-00101 ：执行 RMAN 命令时出错：【删除 NOPROMPT ARCHIVELOG"/mnt/destination_name/' 】</block>
  <block id="b16ddd318af71a47ebec13dbc3725d21" category="paragraph">您尝试备份使用 -no-resetlogs 选项创建的克隆数据库。克隆的数据库不是完整的数据库。但是，您可以对克隆的数据库执行 SnapManager 操作，例如创建配置文件和备份，拆分克隆等，但 SnapManager 操作会失败，因为克隆的数据库未配置为完整的数据库。</block>
  <block id="bdfbff9ed7c510a9cb9700db2ffce6bb" category="section-title">数据保护错误</block>
  <block id="e3804e477e00705391d469ae68a2c359" category="paragraph">下表显示了与数据保护相关的常见错误：</block>
  <block id="4fc1f00f2425c6f5db2ba5414cf4fcd6" category="paragraph">已请求备份保护，但数据库配置文件没有保护策略。请更新数据库配置文件中的保护策略，或者在创建备份时不要使用 " 保护 " 选项。</block>
  <block id="e057e1e23348b05cb9bd9ff856e8b196" category="paragraph">您尝试创建对二级存储具有保护的备份；但是，与此备份关联的配置文件没有指定保护策略。</block>
  <block id="985c3fa64c770c94c400ccdd7ccb19f3" category="paragraph">编辑配置文件并选择保护策略。重新创建备份。</block>
  <block id="1d143ff2891c0cf83bbbcdf5ad42e32a" category="paragraph">无法删除配置文件，因为已启用数据保护，但 Protection Manager 暂时不可用。请稍后重试。</block>
  <block id="8a4e1a30059025db479605c333083d8a" category="paragraph">您尝试删除已启用保护的配置文件，但 Protection Manager 不可用。</block>
  <block id="040f60872a12fcef82627ecf2b47c75d" category="paragraph">确保在主存储或二级存储中存储相应的备份。在配置文件中禁用保护。如果 Protection Manager 再次可用，请返回到配置文件并将其删除。</block>
  <block id="2f224db57d5fdd9bf5b49a91e58686a1" category="paragraph">无法列出保护策略，因为 Protection Manager 暂时不可用。请稍后重试。</block>
  <block id="d796a12deb5342b638e982734dad5979" category="paragraph">在设置备份配置文件时，您对备份启用了保护，以便备份存储在二级存储上。但是， SnapManager 无法从 Protection Manager 管理控制台检索保护策略。</block>
  <block id="04ecb3ed3e4aac2f397c090c157cfa00" category="paragraph">暂时在配置文件中禁用保护。继续创建新配置文件或更新现有配置文件。如果 Protection Manager 再次可用，请返回到配置文件。</block>
  <block id="c98843f196a882930dccd37cf11a2dbc" category="paragraph">无法列出保护策略，因为未安装 Protection Manager 产品或未将 SnapDrive 配置为使用它。请安装 Protection Manager 和 / 或配置 SnapDrive 。</block>
  <block id="a4544d3b4f6b116805532346794cd0ee" category="paragraph">在设置备份配置文件时，您对备份启用了保护，以便备份存储在二级存储上。但是， SnapManager 无法从 Protection Manager 的管理控制台检索保护策略。未安装 Protection Manager 或未配置 SnapDrive 。</block>
  <block id="6686b7ed35f9ce17f635e62558593b93" category="paragraph">安装 Protection Manager 。配置 SnapDrive 。</block>
  <block id="cfa11e1b3f616405032c35a64359ce7a" category="paragraph">返回到配置文件，重新启用保护，然后选择 Protection Manager 的管理控制台中可用的保护策略。</block>
  <block id="e7789123f68d7141d402c7ec2181ad89" category="paragraph">无法设置保护策略，因为 Protection Manager 暂时不可用。请稍后重试。</block>
  <block id="7c87406c8cfbfde31ad7df9b921d4376" category="paragraph">在设置备份配置文件时，您对备份启用了保护，以便备份存储在二级存储上。但是， SnapManager 无法从 Protection Manager 的管理控制台检索保护策略。</block>
  <block id="6f1d73576c8f2ef3db298a8ba4d999b5" category="paragraph">暂时在配置文件中禁用保护。继续创建或更新配置文件。如果 Protection Manager 的管理控制台可用，请返回到配置文件。</block>
  <block id="63f6a5181f03c626f047bc1523a6419b" category="paragraph">在主机 &lt;host&gt; 上为数据库 &lt;dbname&gt; 创建新数据集 &lt;datase_name&gt; 。</block>
  <block id="e279d1e4e8a1d0f5c4f9b671d3de4fd7" category="paragraph">您尝试创建备份配置文件。SnapManager 会为此配置文件创建一个数据集。</block>
  <block id="5e562e12925b719e8f7f3e8f814befbc" category="paragraph">无需执行任何操作。</block>
  <block id="ce20787d6af539f326419ae152aa7ea7" category="paragraph">数据保护不可用，因为未安装 Protection Manager 。</block>
  <block id="02e16169ea9201ed6e8d9dad13620b7d" category="paragraph">在设置备份配置文件时，您尝试对备份启用保护，以便将备份存储在二级存储上。但是， SnapManager 无法从 Protection Manager 的管理控制台访问保护策略。未安装 Protection Manager 。</block>
  <block id="1330057941749589b58ae1724de5c1f1" category="paragraph">安装 Protection Manager 。</block>
  <block id="6925587a3096b75280a48d9a38b316a0" category="paragraph">已删除此数据库的数据集 &lt;datase_name&gt; 。</block>
  <block id="2493d00ff7c1314618725741302de7fe" category="paragraph">您已删除配置文件。SnapManager 将删除关联的数据集。</block>
  <block id="e5144a64033e69f397c947c74ddea9ce" category="paragraph">无需执行任何操作。</block>
  <block id="ff652df95089129832e8102dadbcb350" category="paragraph">删除已启用保护且不再配置 Protection Manager 的配置文件。正在从 SnapManager 中删除配置文件，但未在 Protection Manager 中清理数据集。</block>
  <block id="9af468cc834c471fc9e763566652525a" category="paragraph">您尝试删除已启用保护的配置文件；但是， Protection Manager 不再安装，不再配置或已过期。SnapManager 将从 Protection Manager 的管理控制台删除此配置文件，但不会删除此配置文件的数据集。</block>
  <block id="5d68785ea88f5a3f9430cc28f029536d" category="paragraph">重新安装或重新配置 Protection Manager 。返回到配置文件并将其删除。</block>
  <block id="7624f2938ac0350159ab9ada34deb878" category="paragraph">保留类无效。使用 "SMO 帮助备份 " 可查看可用保留类的列表。</block>
  <block id="abf973b5efb07acd2c1f544817a60012" category="paragraph">设置保留策略时，您尝试使用无效的保留类。</block>
  <block id="ed45febd198775ebf33bcd25424fb9bb" category="paragraph">输入以下命令，创建有效保留类列表： SMO help backup</block>
  <block id="99ee0ed6e71ddb3c82e07ff50f37a21a" category="paragraph">使用一个可用类更新保留策略。</block>
  <block id="29daac3db28a7e32752b39ada683dbf8" category="paragraph">指定的保护策略不可用。使用 "SMO protection-policy list" 可查看可用保护策略的列表。</block>
  <block id="1e2ee306eff16ade27f9edc492a31f60" category="paragraph">在设置配置文件时，您启用了保护并输入了一个不可用的保护策略。</block>
  <block id="d7fc2c1c136294305005bbd96a5b3e79" category="paragraph">输入以下命令，确定可用的保护策略： smo protection-policy list</block>
  <block id="369b6e0cfa5cd343bec8920a06fd93e6" category="paragraph">将现有数据集 &lt;datase_name&gt; 用于主机 &lt;host&gt; 上的数据库 &lt;dbname&gt; ，因为该数据集已存在。</block>
  <block id="cfdc2649b46d516719016bc15ded7b58" category="paragraph">您尝试创建配置文件；但是，同一数据库配置文件的数据集已存在。</block>
  <block id="a4b697ba14f4cd3de70fffbdd7f8e0e7" category="paragraph">检查现有配置文件中的选项，并确保它们与新配置文件中的所需内容匹配。</block>
  <block id="1ddce207d233427a697cd5b104e058e8" category="paragraph">将现有数据集 &lt;datase_name&gt; 用于 RAC 数据库 &lt;dbname&gt; ，因为主机 &lt;hostname&gt; 上已存在相同 RAC 数据库的配置文件 &lt;profile_name&gt; 。</block>
  <block id="f9576c09a2888222e7330c89954289a6" category="paragraph">您尝试为 RAC 数据库创建配置文件；但是，同一 RAC 数据库配置文件的数据集已存在。</block>
  <block id="c1666ce6b2cb6dbff8cba778b0669cb3" category="paragraph">此数据库已存在保护策略为 &lt;existing_policy_name&gt; 的数据集 &lt;datase_name&gt; 。您已指定保护策略 &lt;new_policy_name&gt; 。数据集的保护策略将更改为 &lt;new_policy_name&gt; 。您可以通过更新配置文件来更改保护策略。</block>
  <block id="f218172c413c449bd558f4f24ec23807" category="paragraph">您尝试创建一个启用了保护并选择了保护策略的配置文件。但是，同一数据库配置文件的数据集已存在，但具有不同的保护策略。SnapManager 将对现有数据集使用新指定的策略。</block>
  <block id="501e014ab031c7c8d8bb1c42179fab31" category="paragraph">查看此保护策略并确定此策略是否适用于数据集。如果没有，请编辑配置文件并更改策略。</block>
  <block id="2bb19993cde25567ea8f1c9dc82ea533" category="paragraph">Protection Manager 会删除 SnapManager for Oracle 创建的本地备份</block>
  <block id="1d9fe21f6f7fa14e1a6d8c929464fde2" category="paragraph">Protection Manager 的管理控制台会根据 Protection Manager 中定义的保留策略删除或释放 SnapManager 创建的本地备份。删除或释放本地备份时，不会考虑为本地备份设置的保留类。将本地备份传输到二级存储系统时，不会考虑为主存储系统上的本地备份设置的保留类。传输计划中指定的保留类将分配给远程备份。</block>
  <block id="83a30237064040ed914babaa06198701" category="paragraph">每次创建新数据集时，从 Protection Manager 服务器运行 dfpm dataset fix_smo 命令。现在，备份不会根据 Protection Manager 管理控制台中设置的保留策略被删除。</block>
  <block id="a31e61d4c794e11b5085dd30c051d008" category="paragraph">您已选择对此配置文件禁用保护。这可能会删除 Protection Manager 中的关联数据集，并销毁为该数据集创建的复制关系。您也无法执行 SnapManager 操作，例如还原或克隆此配置文件的二级或三级备份。是否要继续（是 / 否）？</block>
  <block id="85bb27bd1d9149cb93ea82272abe8c49" category="paragraph">在从 SnapManager 命令行界面或图形用户界面更新配置文件时，您尝试禁用对受保护配置文件的保护。您可以在 SnapManager 命令行界面中使用 -noprotect 选项禁用对配置文件的保护，或者在 SnapManager 图形用户界面的策略属性窗口中清除 * 保护管理器保护策略 * 复选框。禁用对配置文件的保护时， SnapManager for Oracle 会从 Protection Manager 的管理控制台删除数据集，从而取消注册与该数据集关联的所有二级和三级备份副本。</block>
  <block id="fa445c0536bfda4b9e37605775ee55a4" category="paragraph">删除数据集后，所有二级和三级备份副本都将成为孤立副本。Protection Manager 和 SnapManager for Oracle 均无法访问这些备份副本。无法再使用适用于 Oracle 的 SnapManager 还原备份副本。</block>
  <block id="5ebb963c87871bc295631519585022b8" category="admonition">即使配置文件未受保护，也会显示相同的警告消息。</block>
  <block id="53ced5dfe874136996266b896f88c3dc" category="paragraph">这是 SnapManager for Oracle 中的已知问题描述，也是在销毁数据集时 Protection Manager 中的预期行为。没有解决方法。需要手动管理孤立备份。</block>
  <block id="9b80f6beac920f04b4c2f1b2a13b7ed8" category="paragraph">SMO-03038 ：无法从二级系统还原，因为存储资源仍位于主系统上。请改为从主卷还原。</block>
  <block id="95670539a0ca9214531e3191346dadcb" category="paragraph">您尝试从二级存储进行还原，但 Snapshot 副本位于主存储上。</block>
  <block id="11bc9288a9441d30345c4574d9a4fae2" category="paragraph">如果备份尚未释放，请始终从主卷进行还原。</block>
  <block id="b3d940952a7b53b86bb2707efff8492f" category="paragraph">SM0-03054 ：挂载备份 archbkp1 以馈送 archivelog 。DS-10001 ：连接挂载点。【错误】 flow-11019 ： ExecuteConnectionSteps 失败： SD-10028 ： SnapDrive 错误（ ID ： 2618 代码： 305 ）。无法删除以下文件。相应的卷可能为只读卷。使用较旧的快照重试此命令。 [error] flow-11010 ：操作正在过渡以因先前失败而中止。</block>
  <block id="ceb0aa05b491f43288552932ba5fb31f" category="paragraph">在恢复期间， SnapManager 会尝试从二级系统挂载最新备份，以便从二级系统馈送归档日志文件。但是，如果存在任何其他备份，则恢复可以成功。但是，如果没有其他备份，则恢复可能会失败。</block>
  <block id="63242619a134ff7805ddf7926f24cb15" category="paragraph">请勿从主备份中删除最新的备份，以便 SnapManager 可以使用主备份进行恢复。</block>
  <block id="1a1b4de895087fe114a085d274fcc867" category="paragraph">SMO-04908 ：不是 FlexClone 。</block>
  <block id="37b919c350d8c08640d7bdf61678e41a" category="paragraph">此克隆为 LUN 克隆。这适用于 Data ONTAP 8.1 7- 模式以及集群模式 Data ONTAP 。</block>
  <block id="a735c1f3703078c204b521e0684588f7" category="paragraph">SnapManager 仅支持在 FlexClone 技术上拆分克隆。</block>
  <block id="d5507e6f100498b9e9c68153600f6878" category="paragraph">SMO-04904 ：不使用 split-idsplit_id 运行克隆拆分操作</block>
  <block id="338414206f20846c6264bf597d1ab5d7" category="paragraph">操作 ID 无效或未执行克隆拆分操作。</block>
  <block id="bb1ef51d15ac12e442becaf94b63e843" category="paragraph">为克隆拆分状态，结果和停止操作提供有效的拆分 ID 或拆分标签。</block>
  <block id="07ece0524542345b34a7cb6f1c960a15" category="paragraph">SMO-04906 ：停止克隆拆分操作失败，并出现拆分 ID</block>
  <block id="7277231660c22b814c0b314c01352eed" category="paragraph">拆分操作已完成。</block>
  <block id="f99d7e23dcf4c08662d4bdc6129159b8" category="paragraph">使用 clone split status 或 clone split 命令检查拆分过程是否正在进行中。</block>
  <block id="91ce55a76937736c986001a489683824" category="list-text">主数据库为 RAC 设置，备用数据库为独立数据库。</block>
  <block id="202e763a72653fb6dd3d5fa881106b23" category="section-title">虚拟存储接口错误（虚拟存储接口 8000 系列）</block>
  <block id="afdac02bbb30fe192a14b1995a8c4817" category="paragraph">下表显示了与虚拟存储接口任务相关的常见错误：</block>
  <block id="b5b082b4dfacd778b1c3e8e8d4ede136" category="paragraph">SMO-08017 发现 / 的存储时出错。</block>
  <block id="355c26ac1ab779fe16f836bc9213a9d7" category="paragraph">SnapManager 尝试查找存储资源，但在 root/ 目录中发现了数据文件，控制文件或日志。这些文件应位于子目录中。根文件系统可能是本地计算机中的硬盘驱动器。SnapDrive 无法在此位置创建 Snapshot 副本，并且 SnapManager 无法对这些文件执行操作。</block>
  <block id="9e97c4738d69418320fa3e9488e14b3f" category="paragraph">检查数据文件，控制文件或重做日志是否位于根目录中。如果是，请将其移动到正确的位置，或者在正确的位置重新创建控制文件或重做日志。例如：将 redo.log 移动到 /data/oracle/redo .log ，其中 /data/oracle 是挂载点。</block>
  <block id="48da36fcf455035eeb1f92912898d3ca" category="paragraph">SMO-13902 ：克隆拆分启动失败。</block>
  <block id="f03c284a32e66510194d2495a7b0ebe6" category="paragraph">出现此错误的原因可能有多种：</block>
  <block id="30dd6ea76881f9e216d04a6a12737776" category="list-text">卷中没有空间。</block>
  <block id="f1ee229e0f7306b87cbc997cf0dc7355" category="list-text">SnapDrive 未运行。</block>
  <block id="e189878acca14bc0d1eeee434840c389" category="list-text">克隆可以是 LUN 克隆。</block>
  <block id="9fc691868956b1b6652ecd8bb212fac9" category="list-text">FlexVol 卷具有受限的 Snapshot 副本。</block>
  <block id="283ab01e74a501844f2713a3b05227e2" category="paragraph">使用 clone split -estimate 命令检查卷中的可用空间。确认 FlexVol 卷没有受限的 Snapshot 副本。</block>
  <block id="8babe171dfe99c527ab2852614f63566" category="paragraph">SMO-13904 ：克隆拆分结果失败。</block>
  <block id="d1d5c2bc071670289f372db9613e437c" category="paragraph">这可能是由于 SnapDrive 或存储系统出现故障所致。</block>
  <block id="9382de2fb11e5651c8d079359f195646" category="paragraph">尝试处理新克隆。</block>
  <block id="553ae24777be1b9d93b58fe655c754c1" category="paragraph">SMO-13906 ：已对克隆 labelclone-label 或 IDclone-id 运行拆分操作。</block>
  <block id="a9fe11e006bfd774ac461d375dd9448b" category="paragraph">您正在尝试拆分已拆分的克隆。</block>
  <block id="57ba2f76e92e96401761f6740cdb40d4" category="paragraph">克隆已拆分，并且将删除与克隆相关的元数据。</block>
  <block id="bf34bab4ca666fad8cdedc6ef04289f4" category="paragraph">SMO-13907 ：已对克隆 labelclone-label 或 IDclone-id 运行拆分操作。</block>
  <block id="244a7f2df5ed8b6d3fd8c92a9f3cb1e6" category="paragraph">您正在尝试拆分正在进行拆分的克隆。</block>
  <block id="9b15be3f0fc69a634b10984c74137da5" category="paragraph">您必须等待拆分操作完成。</block>
  <block id="b8cfc5821f86585237cff7d8215df764" category="section-title">常见的 SnapDrive for UNIX 错误消息</block>
  <block id="3a9590e532388ae3eedaf9a0aed53427" category="paragraph">下表显示了与 SnapDrive for UNIX 相关的常见错误：</block>
  <block id="b5210a69e201117f4b2bb2286e794396" category="paragraph">0001-136 管理员错误：无法登录到存储器： &lt;filer&gt; 请为 &lt;filer&gt; 设置用户名和 / 或密码</block>
  <block id="c2b9e3ad5c244b3918642ed87854e8dd" category="paragraph">初始配置错误</block>
  <block id="1ec92c6a0971ce7dad3b20c50b43bd9c" category="paragraph">0001-382 管理员错误：多路径重新扫描失败</block>
  <block id="891834c8ae2ea61b565180d1abc8c1a1" category="paragraph">LUN 发现错误</block>
  <block id="d9ce69226f7567d77fc0fce41e13f997" category="paragraph">0001-462 管理员错误：无法取消配置 &lt;LUN&gt; 的多路径： spd5 ：无法停止设备。设备繁忙。</block>
  <block id="9cf7d49a544bdb5351b63c75ac86ee1d" category="paragraph">0001-476 管理员错误：无法发现与以下项关联的设备 ...</block>
  <block id="efe6013eae3f514a25875e609014883c" category="paragraph">0001-680 管理员错误：主机操作系统需要更新内部数据，才能创建或连接 LUN 。使用 SnapDrive 配置准备 LUN' 或手动更新此信息 ...</block>
  <block id="b991ef6a420665d0864540acbf80458f" category="paragraph">0001-710 管理员错误：操作系统刷新 LUN 失败 ...</block>
  <block id="69d134321289cd254bb7eb8693fbc6c5" category="paragraph">0001-817 管理员错误：无法创建卷克隆 ... ：未获得 FlexClone 许可</block>
  <block id="69510b39c5cbca54fe0d3a2460f02798" category="paragraph">0001-817 管理员错误：无法创建卷克隆 ... ：请求失败，因为无法保证克隆具有空间。</block>
  <block id="a862750d2ffdb8283b27a9195574b5f2" category="paragraph">空间问题描述</block>
  <block id="087a070c18c2cca3453c09cce055e7ae" category="paragraph">0001-878 管理错误：未找到 HBA 助手。涉及 LUN 的命令应失败。</block>
  <block id="058daac77dc12ade7c61df8b5f409f45" category="paragraph">SMO-12111 ：执行 SnapDrive 命令 "&lt;SMO SnapDrive command&gt;" 时出错： &lt; SnapDrive error&gt;</block>
  <block id="54f26202ba657713da14bc012d0d998e" category="paragraph">SnapDrive for UNIX 一般错误</block>
  <block id="f3d56b92b9b329d0d1c797c9140ef160" category="summary">默认情况下， SnapManager 支持不使用 ASMLib 的 ASM 。基本要求是，必须对用于 ASM 磁盘组的设备进行分区。</block>
  <block id="36c7d25621d8d784360259b8f0f74014" category="doc">支持不使用 ASMLib 的 ASM 数据库</block>
  <block id="7ed3743e403fb1759037be60f4f0f211" category="paragraph">如果未安装 ASMLib ，则在执行以下操作时，与 ASM 磁盘组相关的设备权限将更改为 root ： disk ： disk ：</block>
  <block id="5e785ed68e0b595c991ac64788106da3" category="list-text">重新启动主机</block>
  <block id="e70fa32af265e90c690e9857ac2803a7" category="list-text">使用基于卷的 SnapRestore （ VBSR ）从主存储还原数据库</block>
  <block id="cf8a135b85d30ed771df5474c3824fca" category="list-text">从二级存储还原数据库</block>
  <block id="fd9d52dfe1f203336f4d95aac33924eb" category="paragraph">您可以通过为 SMO.conf 中的 oracleasma.support.without .asmlib 配置变量分配 true 来设置适当的设备权限。每当在主机中添加或删除新设备时，系统都会在 initasmdisks 文件中添加或删除与 ASM 磁盘组相关的设备。initasmdisks 文件位于 /etc/initasmdisks 。</block>
  <block id="fcb920d647e650a82ffe591bde9a9886" category="paragraph">例如，如果设置 oracleasma.support.without .asmlib=true ，然后执行备份挂载，则会将新设备添加到 initasmdisks 中。重新启动主机后，启动脚本会保留设备权限和所有权。</block>
  <block id="db8d935c90a98bf4bd97c2e8a78063e8" category="admonition">oracleasma.support.without 。 asmlib 的默认值为 false 。</block>
  <block id="32de2fe97a097bd155c989327de86510" category="inline-xref-macro">支持的分区设备</block>
  <block id="73913ec8a3a031b8d73edf7bf4c3cac3" category="paragraph"><block ref="73913ec8a3a031b8d73edf7bf4c3cac3" category="inline-xref-macro-rx"></block></block>
  <block id="2a454c94ef2178db1a3d500cd6a7d727" category="summary">数据库管理员使用 SnapManager 创建数据库配置文件，该配置文件将用于启动到主存储系统上本地存储的备份。整个配置文件创建和备份创建过程都是在 SnapManager 中执行的，不涉及 Protection Manager 。</block>
  <block id="708e2e3cfbd43cb7e54ee0a37561b16b" category="doc">使用 SnapManager for Oracle 为本地备份创建数据库配置文件</block>
  <block id="5e9a58f5bd6cd59c1e0d00f951a7a706" category="paragraph">配置文件包含有关所管理数据库的信息，包括其凭据，备份设置和备份保护设置。通过创建配置文件，您无需在每次对该数据库执行操作时指定数据库详细信息，而是只需提供配置文件名称即可。一个配置文件只能引用一个数据库。同一数据库可以由多个配置文件引用。</block>
  <block id="2db290d402466d363083bc800e6dc414" category="list-text">转到 SnapManager for Oracle 客户端。</block>
  <block id="9284e2020f025f3e1447185fcf5c838c" category="list-text">从 SnapManager 存储库树中，右键单击要与此配置文件关联的主机，然后选择 * 创建配置文件 * 。</block>
  <block id="2aeaa3d183bc33050b3af86e81c54990" category="list-text">在配置文件配置信息页面中，输入以下信息并单击 * 下一步 * 。</block>
  <block id="36484b90c265d9fb7e5dc08cff74a7b6" category="list-text">配置文件密码： payroll123</block>
  <block id="f1d27d8148fd51b29f7624b27a068774" category="list-text">注释：生产薪资数据库</block>
  <block id="ef20cf5c3070bfbefb586935932c6d84" category="list-text">在 Database Configuration Information 页面中，输入以下信息并单击 * 下一步 * 。</block>
  <block id="3e036268a571016e86a69870cc8ae527" category="list-text">数据库 SID ： payrolldb</block>
  <block id="9332a8408386b04e2497cdf29bd1e19e" category="list-text">Database host ：接受默认值</block>
  <block id="6f4d4c81d1410676d9d64edd6ee75bd5" category="paragraph">由于您要从存储库树中的主机创建配置文件，因此 SnapManager 会显示主机名。</block>
  <block id="d23ead3ccaa2d5692f450296ab6ed9c1" category="list-text">在第二个数据库配置信息页面中，接受以下数据库信息，然后单击 * 下一步 * ：</block>
  <block id="a460cadbfb7a2de4bfdf864228552064" category="list-text">主机帐户，表示 Oracle 用户帐户： oracle</block>
  <block id="caa9965624b256acb14eec711466e26c" category="list-text">主机组，表示 Oracle 组： DBA</block>
  <block id="fedf347805f0244e46895ab723db93a3" category="list-text">在数据库连接信息页面中，选择 * 使用数据库身份验证 * 以允许用户使用数据库信息进行身份验证。</block>
  <block id="638e26aec52a41e06d16e0f266681993" category="paragraph">在此示例中，输入以下信息并单击 * 下一步 * 。</block>
  <block id="3f2a49d790d46c574b33ab990132a73b" category="list-text">sysdba 特权用户名，表示具有管理权限的系统数据库管理员： sys</block>
  <block id="dd146b796ccd8b27621f8257d53c1a65" category="list-text">密码（ SYSDBA 密码）： Oracle</block>
  <block id="e0043833b9dcbc59cd8a575b3f50fcfa" category="list-text">用于连接到数据库主机的端口： 1521.</block>
  <block id="655d7fc304128af531c1bac969ebd6d0" category="list-text">在 RMAN 配置信息页面中，选择 * 不使用 RMAN* ，然后单击 * 下一步 * 。</block>
  <block id="1711507f2e5deaae97b0fdca02d71161" category="paragraph">Oracle Recovery Manager （ RMAN ）是一款 Oracle 工具，可帮助您使用块级检测来备份和恢复 Oracle 数据库。</block>
  <block id="8e2e8ef1c8b746bff40260b825fafcd6" category="list-text">在 Snapshot Naming Information 页面中，通过选择变量为与此配置文件关联的 Snapshot 指定命名约定。唯一需要的变量是 * SMID* 变量，该变量可创建唯一的快照标识符。</block>
  <block id="52e41375c6c5ca1ebb0b4ccd4aa79a32" category="paragraph">对于本示例，请执行以下操作：</block>
  <block id="befb29d30f2910c5d6e414c90c0cd402" category="list-text">在 Variable Token 列表中，选择 * ｛ usertext ｝ * 变量，然后单击 * 添加 * 。</block>
  <block id="2f8de28ee5d1a9477841b0ec54ad9584" category="list-text">输入 payroll.techco.com_" 作为主机名，然后单击 * 确定 * 。</block>
  <block id="d6a1d1348ffaf6260e870a5efbf28e66" category="list-text">单击 * 左 * ，直到主机名显示在格式框的 "SMO" 后面。</block>
  <block id="6fb2222ab727fdd5d769b970e932f2c3" category="paragraph">SMO_hostname_smoprofile_dbsid_scope_mode_smID 的 Snapshot 命名约定为 smo_payroll.techco.com_payroll_prod2_payrolldb_f_a_x" （其中 "f" 表示完整备份， "A" 表示自动模式， "x" 表示唯一的 SMID ）。</block>
  <block id="8654dd5a06dd37181e68df8766bd8cc0" category="list-text">在 Perform Operation 页面上，验证信息并单击 * 创建 * 。</block>
  <block id="f9fc213d848c18cfcc70aa838c1d9787" category="list-text">单击 * 操作详细信息 * 可查看有关配置文件创建操作和基于卷的还原资格信息。</block>
  <block id="69e3833e1861c1464ec46db1131bfd5f" category="list-text">要临时暂停备份计划，请输入以下命令： `smo schedule suspend -profile profile_name-schedule-nameschedulename （ -quiet | -verbose ）`</block>
  <block id="4fc8a834aa3d7780fd25d10c2190dc32" category="summary">您必须了解在不使用 ASMLib 的情况下使用脚本支持 ASM 数据库的某些限制。</block>
  <block id="25c8e6a4c239d970d644f218d609216f" category="doc">使用脚本支持不使用 ASMLib 的 ASM 数据库的限制</block>
  <block id="663fdd98babd56e7f39e210a672600b6" category="list-text">这些脚本可为任何内核版本提供备用解决方案，但前提是未安装 ASMLib 。</block>
  <block id="74af6449001359885a9c90b8240e3d66" category="list-text">脚本的权限设置方式必须使 root ， grid ， oracle 或等效用户能够访问这些脚本。</block>
  <block id="11d41b4117665dbe2bf1b8dde4ddad5a" category="list-text">这些脚本不支持从二级位置进行还原。</block>
  <block id="65f7c4dc33af5e156a67c874fc068b4d" category="summary">如果您已在 SnapDrive.conf 中包含 host-cluster-sw-restore-warn 参数并为分配了值，则必须更改此值以支持在主动 / 主动 Veritas Storage Foundation for Oracle RAC \ （ SFRAC\ ）环境中执行还原操作。</block>
  <block id="93a2a379441675caa7be13a542b1d948" category="doc">为主动 / 主动 Veritas SFRAC 环境配置适用于 UNIX 的 SnapDrive</block>
  <block id="9e377f64c2c159fe85f96133a63b3197" category="paragraph">如果已在 SnapDrive.conf 中包含 host-cluster-sw-restore-warn 参数并为分配了值，则必须更改此值，以支持在主动 / 主动 Veritas Storage Foundation for Oracle RAC （ SFRAC ）环境中执行还原操作。</block>
  <block id="14e176f73d52a00b4677e86cc576c898" category="paragraph">在使用主动 / 主动 Veritas Storage Foundation for Oracle RAC （ SFRAC ）环境时，如果 host-cluster-sw-restore-warn 参数设置为 on ，则会显示一条警告消息并停止还原操作。如果要在主动 / 主动 Veritas SFRAC 环境中执行还原操作，必须将 host-cluster-sw-restore-warn 设置为 off 。</block>
  <block id="f4a2c5be73b48fe787e23d446a6d5088" category="paragraph">有关 SnapDrive.conf 的信息，请参见 SnapDrive 文档。</block>
  <block id="9a5970227005f19eeeea614407452c0f" category="list-text">以 root 用户身份登录。</block>
  <block id="4aee926cd1078a8483064da084dba390" category="list-text">使用文本编辑器打开 SnapDrive.conf 文件。</block>
  <block id="b7dee6fd02bd810d1ff7cb8b4c25c324" category="list-text">将 host-cluster-sw-restore-warn 的值更改为 off 。</block>
  <block id="b74e21d001f38711b2632d817a085a2b" category="paragraph">配置后，重新启动适用于 UNIX 的 SnapDrive 服务器。</block>
  <block id="7ab497964712ab0f4a1b3c1f52b7302d" category="summary">您可以查看已启动拆分过程的进度。</block>
  <block id="28ddf18ad39336c1ef9b49fe85253ba0" category="doc">查看克隆拆分过程的状态</block>
  <block id="4e803d239a3ef779c56334150711cbb0" category="list-text">要查看克隆拆分过程的进度，请输入以下命令： `smo clone split -status -profileprofile "-hosthostname] "-labelssplit -label | -idsplit -id] "-quiet | -verbose`</block>
  <block id="39d3d83091281a49877ee1e0b17caec8" category="summary">SnapManager 会自动处理备份的挂载，以使其可供主机使用。在使用 Oracle Recovery Manager （ RMAN\ ）等外部工具访问备份中的文件时，您也可以挂载备份。</block>
  <block id="11a8f3a086e21eac2a2be8e8518f9868" category="paragraph">您可以使用 -from-secondary 选项从二级存储挂载备份。如果不使用此选项， SnapManager 将从主存储挂载备份。</block>
  <block id="0510b58e1d3dca7f79c3f12f824d8fb6" category="paragraph">每当指定 -from-secondary 选项时，都必须指定 -copy-id 选项。如果二级存储系统上有多个备份，则使用 -copy-id 选项指定二级存储上应使用哪个备份副本挂载备份。 6.</block>
  <block id="2b0d83d02aa73f88b2dbd8c490aa0eaf" category="paragraph">如果要将数据库备份挂载到远程主机，则必须确保两个主机上的自动存储管理（ Automatic Storage Management ， ASM ）凭据相同。</block>
  <block id="4bc12ed5b4a8a3545b438db664409f44" category="list-text">要挂载备份，请输入以下命令： `smo backup mount -profile profile_name ｛ labelLabel [data | -archivelogs] | -idd ｝ （ -host-host ）（ -from-secondary （ -copy-id id） ） ] （ -dump] （ -quiet | -verbose ）`</block>
  <block id="2539485b216f293fd0701414810003f1" category="image-alt">Prnt en drw SMO smsap rep prof unix</block>
  <block id="786bc360854ace59a14782eb08df276a" category="paragraph">您为创建完整备份和部分备份而指定的配置文件既包含数据文件，又包含归档日志文件。SnapManager 不允许此类配置文件将归档日志备份与数据文件备份分开。完整和部分备份会根据现有备份保留策略保留，并根据现有保护策略进行保护。您可以根据适合自己的时间和频率计划完整备份和部分备份。</block>
  <block id="906625a4755894b9ee9b0c4da914cbf8" category="paragraph">保留策略会在归档日志备份未分离时对所有数据库备份进行适用场景。分离归档日志备份后，您可以使用 SnapManager 为归档日志备份指定不同的保留期限和保护策略。</block>
  <block id="a5915ddf2b26576fd205f2e635c3d46a" category="summary">您可以查看已启动的克隆拆分过程的结果。</block>
  <block id="f50daa4abc8586f3538f5f48621e7936" category="doc">查看克隆拆分过程的结果</block>
  <block id="19dbcebe78bd82d28bf55af951bea21c" category="list-text">要查看克隆拆分过程的结果，请输入以下命令： `smo clone split -result -profileprofile "-hosthostname] "-labelsplit -label | -idsplit -id] "-quiet | -verbos]`</block>
  <block id="12f8c02e4d95a82d6fb4780c03fcb46f" category="summary">创建 SMO_paydb 数据集后，存储管理员使用 Protection Manager 分配存储系统资源以配置数据集的备份节点。</block>
  <block id="673f74c919e9dcb470a2fd77ba89ae57" category="doc">使用 Protection Manager 配置新数据集</block>
  <block id="ad83d13ae5a7dd3a49161b9642d88569" category="paragraph">创建 SMO_paydb 数据集后，存储管理员使用 Protection Manager 分配存储系统资源以配置数据集的备份节点。</block>
  <block id="3f35d999771c420a4f6b085d1acf9271" category="paragraph">在配置新创建的数据集之前，存储管理员会向 DBA 配对节点授予在配置文件中指定的数据集的名称。</block>
  <block id="1c53346ecb537015de193a9c8fed3e9e" category="paragraph">在这种情况下，数据集名称是 smo_payroll.tech.com_PAYDB 。</block>
  <block id="ce92abfa0c011dcfe4c316a252d70c78" category="list-text">转到 Protection Manager 的 NetApp 管理控制台。</block>
  <block id="d76785d8d9c0def29d84007531766a29" category="list-text">从菜单栏中，单击 * 数据 * &gt; * 数据集 * &gt; * 概述 * 。</block>
  <block id="add863715a64394b091c940fd433e9e9" category="paragraph">数据集窗口的数据集选项卡显示了一个数据集列表，其中包含刚刚通过 SnapManager 创建的数据集。</block>
  <block id="a32bde9560f6627d34efa945a3c1568c" category="list-text">找到并选择 * 。 smo_payroll.tech.com_PAYDB* 数据集。</block>
  <block id="eedb56e7062b36b70c8c3b22b47b31cb" category="paragraph">选择此数据集后，图形区域将显示 SMO_paydb 数据集及其未配置的备份节点。其遵从性状态将标记为不遵从。</block>
  <block id="b1a59e4e9791392d5a4adef9963d66a3" category="list-text">在 SMO_paydb 数据集仍突出显示的情况下，单击 * 编辑 * 。</block>
  <block id="799010926539161083b7758537b0d7b8" category="paragraph">Protection Manager 的 NetApp 管理控制台将显示 * 。 smo_payroll.tech.com_PAYDB* 数据集的编辑数据集窗口。此窗口的导航窗格显示数据集的主节点，备份连接和备份节点的配置选项。</block>
  <block id="c6da5d6809f4e82971ef93d782cae5c6" category="list-text">从导航窗格中，找到数据集备份节点的选项，然后选择 * 配置 / 资源池 * 。</block>
  <block id="b7b9c805fc1b36f77f4e945e7b805c98" category="paragraph">编辑数据集窗口将显示默认配置策略的设置以及可用资源池的列表。</block>
  <block id="c3c0bd425e67fde49b2adc38272ccb25" category="list-text">在此示例中，选择 * paydb_backup_resource* 资源池，然后单击 * &gt; * 。</block>
  <block id="6dea958e16850cef06426b0e4266d4b6" category="paragraph">选定资源池将列在 " 此节点的资源池 " 字段中。</block>
  <block id="f27be2fa989065e7be2fa1c96f394a24" category="list-text">单击 * 完成 * 以保存所做的更改。</block>
  <block id="2adc000ff664b0076f14a7724ef0c62f" category="paragraph">Protection Manager 会自动为二级备份节点配置来自 paydb_backup_resource 池的资源。</block>
  <block id="fb3149767e6c9461dbcf6b37d8f3faf2" category="summary">您可以选择要用于将备份数据从二级存储还原到主存储的还原方法。</block>
  <block id="773a2d9d7e678f7d603fa31001c5ea53" category="doc">还原受保护备份概述</block>
  <block id="00d9e15b7f8707aed9a6560d99083f3e" category="paragraph">下表介绍了从二级存储还原备份时可以使用的不同方案和方法：</block>
  <block id="e8526bb184e47c27f8cb0ae5e2d4f15d" category="cell">还原目标</block>
  <block id="2758dbee45ae8c6488b3afc07b22c3a9" category="paragraph">直接连接到主存储</block>
  <block id="55d05cb871571573c45aa340f9876cba" category="paragraph">通过用于保护数据的同一网络将数据从二级存储系统直接返回到主存储系统上的原始位置。</block>
  <block id="4ac4b8996f647e0d0527a1e610d22ebb" category="paragraph">SnapManager 会尽可能使用直接存储方法。如果数据位于存储区域网络（ SAN ）上的文件系统中，并且满足以下任一条件，则无法使用此方法：</block>
  <block id="453cb65d940f7957e585c9d83c2ed1f9" category="list-text">其他非数据库文件未在同一文件系统中还原。</block>
  <block id="cce742d579ab4df694578feeb4dbcf3e" category="list-text">要还原的文件系统中的控制文件和数据文件的 Snapshot 副本是在不同时间创建的。</block>
  <block id="2595b30723aafd78c93869ad9deb57b6" category="list-text">逻辑单元号（ LUN ）位于卷组中，但未还原同一卷组中的其他 LUN 。</block>
  <block id="567d9f05aa600eda428e1350d332e0ba" category="paragraph">直接连接到主机</block>
  <block id="189ed0e67ac55ffe5138089b85a7b893" category="paragraph">克隆二级存储系统上的数据并将克隆的数据挂载到主机上。克隆并挂载数据后， SnapManager 会将其复制到其原始位置。</block>
  <block id="4bf1a4ac50bac70cb694a4844081a6ad" category="paragraph">间接连接到存储或主机</block>
  <block id="4a3e105f32ffe9c841add439ed81e9a7" category="paragraph">通过用于保护数据和在主机上挂载新存储的同一网络将数据从二级存储系统返回到主系统上的新位置。返回并挂载数据后， SnapManager 会将其复制到其原始位置。间接存储方法可能需要很长时间才能返回数据。</block>
  <block id="5120a714f46995b76433e01e9ee83c3d" category="paragraph">在 SnapManager 使用数据还原和恢复数据库之前， SnapManager 会先将数据复制到主主机上的临时卷。是否自动删除暂存数据取决于使用的协议。</block>
  <block id="ab0713b717b3855612a2260fe2e1b895" category="list-text">对于 SAN ， SnapManager 将删除返回的数据。</block>
  <block id="8a17cf99b67246c3138474b0ace95c29" category="list-text">对于网络连接存储（ NAS ）， SnapManager 会删除返回的 qtree 的内容，但不会删除这些 qtree 本身。要删除 qtree ，管理员应挂载临时卷并使用 UNIX rmdir 命令删除 qtree 。</block>
  <block id="acc1e79a3a851aa8a5551c15262edb1a" category="paragraph">如果无法直接将数据返回到存储， SnapManager 可以直接将数据返回到主机，也可以间接返回到存储或主机。该方法取决于用于控制组织是允许直接连接到二级存储还是要求通过存储网络复制数据的策略。您可以通过在 SMO.config 文件中设置配置信息来管理此策略。</block>
  <block id="014b8866292cd20be51ebf057d70e174" category="summary">在将 SnapManager 与 SnapDrive 产品结合使用时，可能会遇到一些常见问题。</block>
  <block id="809d68879efca38a2c310c16c3252bb2" category="doc">对 SnapDrive 问题进行故障排除</block>
  <block id="d18e3fdcc25f586ff041376e26fb01e3" category="paragraph">首先，您必须确定问题描述是与适用于 Oracle 的 SnapManager 还是与 SnapDrive 相关。如果问题描述出现 SnapDrive 错误，则 SnapManager for Oracle 将显示类似以下内容的错误消息：</block>
  <block id="3e65e6014e9872f2b13e5786d7eb820d" category="paragraph">以下是 SnapDrive 错误消息的示例，其中 SMO-12111 是 SnapManager 错误编号。0001-770 编号方案表示 SnapDrive for UNIX 错误。</block>
  <block id="4be9e78dbf9387df0474335969383689" category="paragraph">以下是与 LUN 发现，配置问题和空间相关的最常见 SnapDrive for UNIX 错误消息。如果您收到任何此类错误，请参见 _SnapDrive 安装和管理指南 _ 中的故障排除一章。</block>
  <block id="123f5b4fb465f6f2229dea3cc3d66596" category="paragraph">初始 SnapDrive 配置</block>
  <block id="3ad4fb8e7a6539e49b3f4e94cf14bf15" category="paragraph">0001-476 管理员错误：无法发现与 ... 关联的设备 0001-710 管理员错误：操作系统刷新 LUN 失败 ...</block>
  <block id="248f828491e6725076ffd17fd22cca40" category="paragraph">0001-817 管理员错误：无法创建卷克隆 ... ：未获得 FlexClone 许可</block>
  <block id="81b069475c5c63577fbd363fa3f665e1" category="paragraph">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则 SnapManager 可通过与 Protection Manager （ OnCommand Unified Manager ）集成来提供策略驱动型数据保护。这样可以使用由存储管理员或备份管理员在 Protection Manager 中创建的 SnapVault 或 SnapMirror 策略自动将主存储系统上的 SnapManager 备份复制到二级存储系统，甚至是三级存储系统。主存储上的保留由 SnapManager 根据在创建配置文件期间定义的保留以及在备份创建期间标记的保留类来控制。二级存储备份保留由 Protection Manager 中定义的策略控制。</block>
  <block id="62bc04c7a841ae4a4609523e27665fdb" category="paragraph">如果您使用的是集群模式 Data ONTAP ，则 SnapManager 3.4 可提供 _SnapManager_cDOT_Mirror_ 和 _SnapManager_cDOT_Vault_Policies 来保护数据。创建配置文件时，您可以根据使用集群模式 Data ONTAP 命令行界面或 System Manager 建立的 SnapMirror 或 SnapVault 关系来选择这些策略。当您创建备份并选择启用了保护的配置文件时，备份将受到二级存储系统的保护。</block>
  <block id="82731a369cebacaa6521f59052ee010b" category="paragraph">如果将 SnapManager 3.3.1 与集群模式 Data ONTAP 结合使用，则备份会使用创建配置文件时选择的后处理脚本进行保护。如果要使用这些配置文件，则在升级到 SnapManager 3.4 后，必须执行以下操作。</block>
  <block id="99dc5381a245c6da6865c68acfda239e" category="list-text">您必须更新配置文件以选择 _SnapManager_cDOT_Mirror_ 或 _SnapManager_cDOT_Vault_policy ，并删除用于数据保护的后处理脚本。</block>
  <block id="3817ac4c167cc025f14368db38af7152" category="list-text">在更新配置文件以使用 _SnapManager_cDOT_Vault_policy 后，您必须删除现有备份计划并创建新计划以指定备份的 SnapVault 标签。</block>
  <block id="f0182791f625dd9d947ba2625e0fff07" category="list-text">如果配置文件是在 SnapManager 3.3.1 中创建的，而未选择后处理脚本，则必须更新配置文件以选择 _SnapManager_cDOT_Mirror_ 或 _SnapManager_cDOT_Vault_policy 以启用数据保护。</block>
  <block id="4fa830f3993037590e97ad7688828bb0" category="admonition">如果二级存储系统中的备份使用 SnapManager 3.3.1 后脚本进行镜像或存储，则不能使用 SnapManager 3.4 使用这些备份进行还原或克隆。</block>
  <block id="c72a9be1c9a05889d6f9611fb89bb854" category="paragraph">如果您使用的是集群模式 Data ONTAP ，则 SnapManager 3.4.2 支持在源卷上建立多个保护关系（ SnapMirror 和 SnapVault ）。每个卷仅支持一个 SnapMirror 和一个 SnapVault 关系。您必须创建单独的配置文件，每个配置文件都选择 SnapManager_cDOT_Mirror 和 SnapManager_cDOT_Vault 策略。</block>
  <block id="bf875f134f73fb94b8b5e4a0f3ccdea9" category="admonition">要使用多个保护策略，需要使用 SnapDrive for Unix 5.3.2 及更高版本。</block>
  <block id="8ca8170c666a6f3be39684699e7a257a" category="paragraph">如果不提供 -osaccount 选项，则会为 root 用户而不是指定用户验证插件脚本安装。</block>
  <block id="0d9fa469dccf60fa565274ac0174fde9" category="summary">除了基于角色的访问控制 \ （ RBAC ）之外，您还可以通过 SnapManager 为配置文件设置密码，以防止未经授权的访问。</block>
  <block id="d8adda926c0025e045d1f7b3981fc6e7" category="paragraph">除了基于角色的访问控制（ Role-Based Access Control ， RBAC ）之外，您还可以通过 SnapManager 为配置文件设置密码，以防止未经授权的访问。</block>
  <block id="461cb9ccfe522c4d2942c633dbb443c3" category="list-text">输入以下命令： "smo credential set -profile -name profile_name [-password password]"</block>
  <block id="9885184f89576cfd26cd795b18b2f9f3" category="summary">您可以升级所有现有主机以使用最新版本的 SnapManager 。所有主机都会同时升级。但是，这可能会导致所有 SnapManager 主机停机，并在此期间执行计划的操作。</block>
  <block id="d0bfe5b2603598479944bac39e521bb0" category="doc">升级 SnapManager 主机</block>
  <block id="30ebd780248b2248f5f8c91590763409" category="list-text">以 root 用户身份登录到主机系统。</block>
  <block id="649db05a99b77509499d30994d3c2fc3" category="list-text">在命令行界面（ CLI ）中，导航到下载安装文件的位置。</block>
  <block id="255581d41b2bb0eeae6e9fb5993d8e5b" category="list-text">如果此文件不可执行，请更改权限： `chmod 544 netapp.smo*`</block>
  <block id="c32a86047cfb919111d0c67a692f32a6" category="list-text">停止 SnapManager 服务器： `smo_server stop`</block>
  <block id="733db8dd3c79d820fc58752fcf1b8893" category="list-text">根据 UNIX 主机，安装 SnapManager ：</block>
  <block id="a42b296ab8264375a458166ef139df49" category="cell">然后运行 ...</block>
  <block id="0d7610fce2dd00fb875b817ab47ad114" category="paragraph">* Solaris （ SPARC 64 ） *</block>
  <block id="e5bae97f999c9c904be624296ed7fe75" category="doc">netapp.smo.sunos-sparc64-version_number.bin</block>
  <block id="7e3548700651e01857a259c3559fe07e" category="paragraph">* Solaris （ x86_64 ） *</block>
  <block id="56e850ef2f5ba3c11d66aa32a2193f3a" category="doc">netapp.smo.sunos-x64-version_number.bin</block>
  <block id="b1f2a06c9a184da0f564a7ce17870682" category="paragraph">* AIX （ PPC64 ） *</block>
  <block id="507bdd1b172d43d2ce19c5925dd3966e" category="doc">netapp.smo.aix-ppc64-version_number.bin</block>
  <block id="a3cb93aeaca47d1e434150346a11389c" category="paragraph">* Linux x86_64</block>
  <block id="19e2c7906a7c47d605de643f1b3070da" category="doc">netapp.smo.linux-x86-version_number.bin</block>
  <block id="5c07d9355b3adb6ad1d5ba126af80ff6" category="paragraph">* Linux x64*</block>
  <block id="8ceca90a4147ba04b9ac00423d3d46c4" category="doc">netapp.smo.linux-x64-version_number.bin</block>
  <block id="e8e426f17733462a07307fa3c91cfe5e" category="list-text">在简介页面上，按 * 输入 * 继续。</block>
  <block id="70b8d4bddcbb564802e3762f76467c23" category="paragraph">此时将显示以下消息： Existing SnapManager for Oracle Detected 。</block>
  <block id="7e6994c49eaf44d5e7ea1d8296f54784" category="list-text">按 * 输入 * 。</block>
  <block id="b0abe19c202b7797d1eae10a68550421" category="list-text">在命令提示符处，执行以下操作：</block>
  <block id="d381af70ac70cd30359f36ee6c7e1a6a" category="list-text">按 * 输入 * 接受操作系统用户的默认值。</block>
  <block id="82c3bcf8d6529070e5bce7d215205113" category="list-text">为操作系统组输入正确的值或按 * 输入 * 接受默认值。</block>
  <block id="704a95c1e078b9664f47b4fdc51ceada" category="list-text">输入正确的服务器启动类型值或按 * 输入 * 接受默认值。</block>
  <block id="652433dd64b8e4863f90ac02907b0a2b" category="list-text">按 * 输入 * 继续。</block>
  <block id="80a88abc16921bd3416f78187511206a" category="paragraph">此时将显示以下消息： uninstall of existing SnapManager for Oracle has started" 。</block>
  <block id="2f9da89188a7fc8f79c71aedd67f0f5b" category="paragraph">卸载完成，并安装了最新版本的 SnapManager 。</block>
  <block id="2dc6caa5490945fa320623ab3b6ef1ec" category="summary">SnapManager for Oracle 和 Protection Manager 分别安装在 UNIX 主机和服务器上后，使 SnapManager 数据库管理员（ DBA ）能够配置并执行基于策略的 Oracle 数据库备份到二级存储， 并在必要时将备份的数据从二级存储还原到主存储。</block>
  <block id="0cd1697bcb03791d172f3f424f376674" category="doc">SnapManager for Oracle 使用 Protection Manager 保护数据库备份</block>
  <block id="07365b669893908ac96935dc6c281a40" category="paragraph">在以下示例中，使用 SnapManager 的 DBA 会为主存储上的本地备份创建一个配置文件，并为二级存储的受保护备份创建另一个配置文件。然后，此 DBA 将与使用 Protection Manager 控制台的网络存储管理员合作，为该数据库配置从主存储到二级存储的基于策略的备份。</block>
  <block id="7b0b23eeec34554893d9893ff1c6cd0b" category="list-text">要删除用户的存储库凭据，请输入以下命令： "mo credential delete -repository-dbnamerepo_service_name-host-login -usernamerepo_username-portrepo_port"</block>
  <block id="156c6ee6bc4a73d9ae5f41d0a942fe0b" category="list-text">使用要回滚的 SnapManager 版本修改的备份的保护状态</block>
  <block id="c6aea924946b90878e1eccb780540e27" category="paragraph">运行 SnapDrive storage show -all 命令。</block>
  <block id="3eaa091c0d99944875ddc4d44c56f91d" category="paragraph">存储是否可写？</block>
  <block id="f92ab7296170dd6747c053035b1cde4d" category="paragraph">编辑刚刚创建的挂载点中的文件。使用 touch filename 命令。如果创建了该文件，则您的存储是可写的。您必须确保 SnapManager 运行时所使用的用户（例如 UNIX 上以 root 用户身份）可以写入存储。</block>
  <block id="ac24176636852d234cb29fa1867a9201" category="paragraph">运行 smo_server status 并尝试使用 smo_server start 命令启动服务器。</block>
  <block id="c3eaba0d1bcdd2a6b18b86aaed53a056" category="paragraph">SnapManager 会将所有日志条目记录到一组轮换日志文件中。日志文件位于 /var/log/SMO 。</block>
  <block id="182ba55f19e750e78df65d34720b58b9" category="paragraph">日志文件位于 C ： \program_files\NetApp\SnapManager for Oracle\logs 。</block>
  <block id="2f914e9a8ab01a21895f7af9b974185c" category="paragraph">/usr/home/.NetApp/SMO/3.3.0/log/</block>
  <block id="00a531e6edc218d8247b267ea8aaeb25" category="paragraph">使用 SMO.config 文件可以排除某些归档日志文件。对于 UNIX ，这些文件位于以下位置： /opt/netapp/smO/properties/smo.config</block>
  <block id="52a7d58d85b90f589e3b167afbd7dcc7" category="paragraph">如果将 SnapManager 与 NFS 数据库结合使用，是否具有 FlexClone 许可证？</block>
  <block id="d2dd77a9af64a2d057a696c69a9d3cbc" category="paragraph">要在 NFS 数据库中充分利用 SnapManager ，需要 FlexClone 许可证。SnapManager 使用 FlexClone 功能完成以下任务：</block>
  <block id="f67641af8319d5db6461deada48733b5" category="list-text">挂载 NFS 数据库的备份</block>
  <block id="f8992231adc45d43046bbb252c62672f" category="list-text">验证 NFS 数据库的备份</block>
  <block id="11d03b45b16f6b96ada7a96218f46dab" category="list-text">克隆 NFS 数据库</block>
  <block id="c78b463a82415b3eb6821b151a65bc66" category="list-text">向 RMAN 注册 NFS 数据库的备份（如果使用 RMAN ）</block>
  <block id="6aaccfde821b33a4f4b66fd413d230b6" category="paragraph">如果连接到存储库失败，请对存储库数据库运行 lsnrctl status 命令并检查活动服务名称。当 SnapManager 连接到存储库数据库时，它会使用数据库的服务名称。根据侦听器的设置方式，此名称可能是短服务名称或完全限定服务名称。当 SnapManager 连接到数据库进行备份，还原或其他操作时，它会使用主机名和 SID 。如果存储库由于当前无法访问而未正确初始化，您将收到一条错误消息，询问是否要删除该存储库。您可以从当前视图中删除存储库，以便可以对其他存储库执行操作。</block>
  <block id="0695a23bea9d81e2bec1e84521d31a9a" category="paragraph">此外，运行 ps -eaf 检查存储库实例是否正在运行</block>
  <block id="e3cc1829cafb3a585242faad6aaa445f" category="cell">grepinstance — name 命令。</block>
  <block id="dbd8aa9df3f13794004efb0ccba38650" category="paragraph">检查指定的主机名是否位于其他子网上。如果您收到一条错误消息，指出 SnapManager 无法解析主机名，请在主机文件中添加主机名。将主机名添加到位于 /etc/hosts 的文件中： xxx.xxx.xxx.xxx 主机名 IP 地址</block>
  <block id="062ab99c63f4796f80b3df71f6da9bbf" category="paragraph">检查 SnapDrive 守护进程是否正在运行： -snapdrived status</block>
  <block id="cf2d25ad70e33b12681629ff0bb94345" category="paragraph">如果守护进程未运行，则会显示一条消息，指出存在连接错误。</block>
  <block id="2c99607a7d276594835edc48b7459735" category="paragraph">运行命令： -sun SnapDrive config list</block>
  <block id="496f5457b9a142504cb52edf5a5b6d73" category="paragraph">如果启用了此选项，则 /root/.NetApp/SMO/3.3.3/GUI/state 中提供的用户配置（ user.config ）文件将显示为 openOnStartup=profile 。</block>
  <block id="3ec3894002bab15eb20b13b1a1c90251" category="list-text">与未受保护的配置文件相比，受保护的配置文件刷新所需时间更长。</block>
  <block id="07204858b25d23de2d27be735534585c" category="paragraph">受保护的配置文件将根据用户配置（ user.config ）文件的 protectionStatusRefreshRate 参数中指定的值以一定时间间隔刷新。</block>
  <block id="93d970f724116688348078681ce8bad2" category="paragraph">您可以将此值从默认值（ 300 秒）增加，以便仅在指定时间间隔后刷新受保护的配置文件。</block>
  <block id="27933000ffc327d379819bb3e282303a" category="list-text">在基于 UNIX 的环境上安装新版本的 SnapManager 之前，请删除以下位置提供的 SnapManager 客户端条目：</block>
  <block id="068d5cc3072f67f9d5f41fa83906c844" category="paragraph">/root/.netapp</block>
  <block id="44faa40ec6d26b272aff9573a2be8b0a" category="paragraph">如果 Oracle 数据库的语言未设置为英语，则 SnapManager 操作可能会失败。将 Oracle 数据库的语言设置为英语：</block>
  <block id="fc5921530ca9d9d61709d18c75136bbe" category="list-text">在 /etc/init.d/smo_server 的初始注释下添加以下内容</block>
  <block id="8991d2bd7180d90993cad53c13551a3d" category="list-text">NLS_LANG_= 美洲</block>
  <block id="beeb814ef4d7a9bd1f85c9edd2bbf468" category="list-text">导出 NLS_LANG</block>
  <block id="72fb73a051bb39bc19b04865e97d8be6" category="list-text">使用以下命令重新启动 SnapManager 服务器： smo_server restart</block>
  <block id="bb5f5ccaaa06a3aa276d1575a6fe57e5" category="admonition">如果 Oracle 用户的登录脚本（例如 .bash_profile ， .bashrc 和 .cshrc ）设置为 NLS_LANG ，则必须编辑此脚本，以使其不会覆盖 NLS_LANG 。</block>
  <block id="eb53313de1fee52775503ae91e819796" category="list-text">从 installationdirectory/bin/sunchjava 路径打开此启动 java 文件。</block>
  <block id="a5fd8dae47fa486f7c472bdf653bb7f7" category="paragraph">如果无法使用受保护的备份还原或克隆，您会怎么做？</block>
  <block id="a30b28ca03d2e1d70e0794b0a6242ae0" category="paragraph">如果您将 SnapManager 3.3.1 与集群模式 Data ONTAP 结合使用并升级到 SnapManager 3.4 ，则会发现此问题描述。在 SnapManager 3.3.1 中，备份会使用后脚本进行保护。从 SnapManager 3.4 开始，备份将使用创建配置文件时选择的 _SnapManager_cDOT_Mirror_ 或 _SnapManager_cDOT_Vault_policies 进行保护。升级到 SnapManager 3.4 后，您可能仍在使用旧配置文件，因此备份将使用备份脚本进行保护。 但是，您不能使用它们通过 SnapManager 进行还原或克隆。</block>
  <block id="6c0fdcb7fe06025480e1434a9120c303" category="paragraph">您必须更新配置文件并选择 _SnapManager_cDOT_Mirror_ 或 _SnapManager_cDOT_Vault_policy ，然后删除 SnapManager 3.3.1 中用于数据保护的后处理脚本。</block>
  <block id="6a17e20049d60548af64182c7025dcb8" category="paragraph">如果计划的备份不受保护（ SnapVault ），您会怎么做？</block>
  <block id="255a362800516bf9936143edf672e719" category="paragraph">在克隆拆分操作后， SnapManager 无法生成新配置文件，并且用户不知道是否已创建新配置文件。</block>
  <block id="e8a2e5b00c434d2a8ff1cf9d8c7bbb84" category="paragraph">如果在执行克隆拆分操作后未创建新配置文件，则 SnapManager 无法提示。由于不显示提示符，您可能会假定已创建配置文件。</block>
  <block id="1c080a7747d4b4be5a167a6ba68f6fb3" category="paragraph">在 SnapManager 命令行界面（ CLI ）中，输入 clone split result 命令以查看克隆拆分操作的详细结果。</block>
  <block id="0e0248cb8098a486d5b651cd62982300" category="paragraph">将备份克隆到远程主机失败，并显示以下错误消息 Error ： Access is denied 。</block>
  <block id="b794e3ec8510a9a6ac67d4bc2716e9e9" category="paragraph">挂载时，如果为 snap mount 命令提供了主机的 IP 地址，则克隆操作可能会失败。如果数据库所在的主机位于工作组中，而远程主机位于域中，则会发生此问题描述，反之亦然。</block>
  <block id="3440680542341e4f51d998461223eac8" category="paragraph">您必须确保远程主机和数据库所在的主机均位于域中，而不是工作组中。</block>
  <block id="4766f144a2f16a2df1ce79d0a7e35ffb" category="admonition">您必须以 root 用户或 Oracle 用户的身份计划备份。如果您尝试以非现有用户的身份计划备份， SnapManager 将显示错误消息： Invalid user ： username ： cannot create schedule backup for a given use.</block>
  <block id="2206b90c8813ac106b19a7fa9cbafc26" category="summary">克隆拆分估计值可帮助您了解聚合上的可用总空间，克隆与原始数据库之间共享的空间量以及克隆专用的空间。此外，您还可以查看创建底层克隆的日期和时间以及克隆的期限。根据此估计值，您可以决定是否拆分克隆。</block>
  <block id="89dd098dd2d41fc7a434cd1f8a1b5971" category="doc">查看克隆拆分估计值</block>
  <block id="ee79055d66d617b01c0a5f367facca20" category="paragraph">要查看克隆拆分估计值，必须输入原始克隆的配置文件名称以及克隆操作的标签或 GUID 。如果克隆位于其他主机中，则可以指定主机名。</block>
  <block id="403b088cdae2886e7149bf0efdaf2154" category="list-text">要查看克隆拆分估计值，请输入以下命令： `smo clone split -estimate -profileprofile "-hosthostname] "-labelclone-label | -idclone-id] （ -quiet | -verbose ）`</block>
  <block id="480a1ae7f842d9020f50185faf2346dd" category="paragraph">以下示例显示了用于克隆拆分存储估计的命令：</block>
  <block id="8884565572035aba24f629dff765f799" category="paragraph">管理员指定应备份的数据库后， SnapManager 会自动识别要备份的数据库文件。SnapManager 将显示有关存储库，主机，配置文件，备份和克隆的信息。您可以监控特定主机或数据库上的操作。您还可以确定受保护的备份并确定备份正在进行中还是计划进行。</block>
  <block id="2597cc9caa2c944221c50fd844c0e8e3" category="inline-xref-macro">smo plugin check 命令</block>
  <block id="be7eeed7352fae577563ed18df9ed20a" category="paragraph"><block ref="be7eeed7352fae577563ed18df9ed20a" category="inline-xref-macro-rx"></block></block>
  <block id="1911f7649790de05e74025d763fc8b8f" category="summary">smo clone split result 命令。</block>
  <block id="417cab92c734f052390ff62c5c4db860" category="doc">smo clone split result 命令</block>
  <block id="a2d6c88d7f5ae161f8929b2c147bee8f" category="paragraph">使用此命令可以查看克隆拆分过程的结果。</block>
  <block id="a3234972df01aa6f71c0b5655bdde9df" category="paragraph">指定克隆的配置文件名称。</block>
  <block id="8bc4f87d28637b246a47bfbe1c6dc018" category="paragraph">指定克隆所在的主机名。</block>
  <block id="f955b4c214f960ffcdd2918b0fa016c0" category="list-text">* —标签拆分标签 *</block>
  <block id="9749e8b37a23b3575872cc8901885ade" category="paragraph">指定克隆拆分启动进程生成的标签名称。</block>
  <block id="14ce12cb3f8ae0230e80c2b7d8096dc9" category="list-text">* — id 拆分 ID *</block>
  <block id="a542b7748690f5371ca2efa9a79f4f7b" category="paragraph">指定克隆拆分启动进程生成的唯一 ID 。</block>
  <block id="ac4b279c54521e7e07533adfd231e7e6" category="summary">您可以将 SnapManager 配置为在 Oracle 工具 Recovery Manager\ （ RMAN\ ）中对其备份进行目录，以便使用 RMAN 执行块级恢复。RMAN 可以使用数据库的控制文件或单独的恢复目录数据库作为其存储库。</block>
  <block id="05d8c5e4bfb757192f8401bfe59a5058" category="paragraph">阻止从标记 backup_RMAN_tag 中恢复数据文件 "` /mountpoint/path/file.dbf` " block block_id</block>
  <block id="b1641d70c61bbd36bf7577c65660ec87" category="list-text">要更新备份计划，请输入以下命令： `smo schedule update -profile profile_name-schedule-nameschedulename （ -schedule-commentschedule comment] -interval ｛ -hourly | -daily | -weekly | -monthly | -onetimeonly ｝ -start-timestarttime-cronstringcronstrictrunstringstringstrict-runasusunasuser （ -quiet ）`</block>
  <block id="3790c205a3df00b5dee8a6cc72f1ab15" category="summary">您可以部署和运行 asmmain.sh 和 asmquerydisk.sh 脚本，以支持 ASM 数据库，而无需 ASMLib 。</block>
  <block id="2ba9849f93e60762119f545d6430c769" category="doc">部署和运行脚本</block>
  <block id="2625ecc516ec9ef05cf659b8a72e0529" category="paragraph">这些脚本不遵循预脚本或后脚本语法，启用 intitasmdisks 时会调用工作流。您可以在脚本中更改与配置设置相关的任何内容。建议通过执行快速试运行来验证脚本中的所有内容是否均按预期工作。</block>
  <block id="bbe3b6f07038d45edb8d4fbfc25c00ba" category="admonition">这些脚本不会因故障而对系统造成损害，也不会影响系统。执行这些脚本可更新与 ASM 相关的磁盘以获得适当的权限和所有权，从而使这些磁盘始终处于 ASM 实例控制之下。</block>
  <block id="467594054515791e817e58b65dc2e033" category="list-text">使用已分区的磁盘创建 ASM 磁盘组。</block>
  <block id="bc32e07a402570f6040f199b4be63864" category="list-text">在磁盘组上创建 Oracle 数据库。</block>
  <block id="9c2457256dcea2168d50df98ee1b1119" category="list-text">停止适用于 Oracle 服务器的 SnapManager 。</block>
  <block id="36fb7b2a9964479cea1f1a044671040f" category="admonition">在 RAC 环境中，您需要对所有 RAC 节点执行此步骤。</block>
  <block id="b8cc9091a66a3e720091962597ff9f83" category="list-text">修改 smo.conf 以包含以下参数：</block>
  <block id="0bd23b76dd4023ee88dcda51e3217c6e" category="list-text">oracleasma.support.without .asmlib = true</block>
  <block id="8a852cd6389e6df495062292d5743d6a" category="list-text">oracleasma.support.without .asmlib.ownership = true</block>
  <block id="32f925a9f4963674c008ff10482557f3" category="list-text">oracleasm.support.without.asmlib.username = ASM 实例环境的用户名</block>
  <block id="f213dd4ddae1465fcd1bccdaf00a8da4" category="list-text">oracleasm.support.without.asmlib.groupname = ASM 实例环境的组名称</block>
  <block id="2f994735402217ebe8bb579a0c9d12cf" category="paragraph">这些修改仅为绝对路径设置权限，这意味着，将仅为 dm-* 设备设置权限，而不是分区设备。</block>
  <block id="e0c68add5fb51605a9dc100eaa741369" category="list-text">修改 /opt/netapp/smO/plugins/examples/noasmlib 中提供的插件脚本，以便在这些脚本中包含您的配置设置。</block>
  <block id="6054ff541ed89b55a9e10a9383210aa6" category="list-text">在主机上启动 SnapManager for Oracle 服务器之前，请将脚本复制到 /opt/netapp/smO/plugins/noasmlib 。</block>
  <block id="805248ccef401dacc3c72ff37581cdd1" category="list-text">导航到 /opt/netapp/smo 目录，然后运行以下脚本执行试运行： sh plugins/noasmlib/asmmain.sh</block>
  <block id="6058e6f273628a0645add81acd193bf5" category="paragraph">此时将创建 etc/initasmdisks 文件，该文件是所使用的主文件。</block>
  <block id="38dd293a77fd790443d9a8442d22e975" category="paragraph">您可以确认 etc/initasmdisks 文件包含与已配置的 ASM 数据库相关的所有设备，例如：</block>
  <block id="f7fc520cf12b4ab8d4df80c314c5eec5" category="list-text">启动适用于 Oracle 服务器的 SnapManager 。</block>
  <block id="984110bec7606f35fdc3f0a0ac645e9c" category="list-text">通过将以下内容添加到 SnapDrive.conf file.disconnect -luns-before-vbsr=on 来配置 SnapDrive for UNIX</block>
  <block id="1430f4dbec6db8d4af6e79d85a3512e6" category="list-text">重新启动适用于 UNIX 的 SnapDrive 服务器。</block>
  <block id="967f8b756f64518f411b5cd99994c898" category="admonition">在 RAC 环境中，您需要对所有 RAC 节点执行步骤 3 到步骤 10 。</block>
  <block id="9a020bdf439921a29359dcbf8e8e9355" category="paragraph">创建的 /etc/initasmdisks 文件必须从其中一个启动脚本或 rc3.d 中新定义的脚本执行在 oracleha 服务启动之前，应始终执行 /etc/initasmdisks 文件。</block>
  <block id="46e05f1103498ff11c12df5f8d285588" category="paragraph">在以下示例中，默认情况下， sh -x/etc/initasmdisks 不可用，您需要将其附加为 ohasd 脚本中函数 `stt_stack （）` 的第一行：</block>
  <block id="8405b8643bc97a203670103b23882f75" category="paragraph">在高可用性集群多处理（ HACMP ）环境中发生故障转移时，您必须重新启动适用于 Oracle 服务器的 SnapManager ，以便将服务（虚拟）地址映射到活动主机，并根据活动 SnapManager 主机调整 SnapManager 计划。您可以在预处理或后处理 HACMP 故障转移脚本中添加此信息。</block>
  <block id="2043bb4c55399a813323024f03569bba" category="list-text">输入以下命令： SMO schedule create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain （ -hourly ； -daily ）； -weekly ； -monthly ； -unlimited] （ -data ）（ -filesfiles 文件 [ 文件 ] ））；（ -tablesogs-tablespaces （ -tablespaces ））））） ｛ -online ； -weekly （ -online ； -unlimited ） -reverify （ -weekly ； -unlimited ） _unlimited ） -commentsaces （ -ly-now] -noprotect] -backup-destpath1 [ ， &lt;path2]] （ -exclude-destpath1 ， path2]] （ -prunelogs ｛ -all _ untilscntsn _ -until dateyyyy-mm-dd HH ： mm ： ss | -before ｛ -months | -weeks | -days | -hours ｝ -time-schedule_source_source_source_sourcetruny&gt; -time-schedule</block>
  <block id="ed67d06beba70cde1eb4018d57e4bd50" category="paragraph">默认安装位置 / 属性 /SMO.config</block>
  <block id="65ce12f4c01f7f52ec8d79a8789bd1a4" category="list-text">在所有目标主机上安装和配置适当版本的 SnapDrive for UNIX 。</block>
  <block id="bb56afaa71d5a4fe630ebbc7fcff2808" category="paragraph">restore.secondaryAccessPolicy</block>
  <block id="507243b3057c0fc17590483aaea2e027" category="paragraph">此参数用于定义 SnapManager 在无法使用 Protection Manager 直接还原二级存储上的数据时如何访问该数据。访问二级存储上的数据的不同方式如下：</block>
  <block id="f1113a2745eb6f88db74e491f95ff928" category="list-text">Direct （默认）</block>
  <block id="7982886d58669d4e7f6d88cdcd969465" category="paragraph">如果 restore.secondaryAccessPolicy 设置为 Direct ，则 SnapManager 会克隆二级存储上的数据，将克隆的数据从二级存储挂载到主机，然后将数据从克隆复制到活动环境。</block>
  <block id="0b5ca9d0c6dbcbb3e299361cd4e4a79c" category="list-text">间接</block>
  <block id="a78401310ac7b293d0d587579092f9ea" category="paragraph">如果将间接分配给 restore.secondaryAccessPolicy ，则 SnapManager 会将数据复制到主存储上的临时卷，将数据从临时卷挂载到主机，然后将数据从临时卷复制到活动环境。</block>
  <block id="11b4812275b687eb449ba24d33800964" category="paragraph">只有当主机无法直接访问二级存储系统时，才必须使用间接方法。此方法所需时间是直接方法的两倍，因为会创建两个数据副本。</block>
  <block id="e4297e15cbf4b4444545f42e5310643d" category="admonition">在使用网络文件系统（ NFS ）作为协议的存储区域网络（ SAN ）中， SnapManager 无需直接连接到二级存储即可执行还原。</block>
  <block id="9ef23773c3c3b02e02d0669fd7025fe3" category="paragraph">Retain 。 alwaysFreeExpiredBackups</block>
  <block id="4a17e0b790f807f4508360d0833dd732" category="paragraph">此参数允许 SnapManager 在备份到期时以及执行快速还原时释放备份，即使未配置数据保护也是如此。此参数将释放已过期的受保护备份，并删除已过期的未受保护备份。您可以分配的可能值如下：</block>
  <block id="f827cf462f62848df37c5e1e94a4da74" category="list-text">true</block>
  <block id="ff018e488f22cd4abacc928537bb0516" category="paragraph">如果为 retain.alwaysFreeExpiredBackups 分配 true ，则无论备份是否受保护， SnapManager 都会释放已过期的备份。</block>
  <block id="0932ff638eef31185cdb62bc6ecc6ae4" category="paragraph">备份在未受保护或二级存储上受保护的副本也已过期时将被删除。</block>
  <block id="f8320b26d30ab433c5a54546d21f414c" category="list-text">false</block>
  <block id="66f979ee137274ba883a08ddb50bcbec" category="paragraph">如果为 retain.alwaysFreeExpiredBackups 分配 false ，则 SnapManager 会释放已保护的已过期备份。</block>
  <block id="cfef898c867d49981c2618ada8feb61d" category="paragraph">分配给这些参数的值可以是顶层目录或存在归档日志文件的挂载点，也可以是子目录。如果指定了顶级目录或挂载点，并且为主机上的配置文件启用了数据保护，则该挂载点或目录不会包含在 Protection Manager 中创建的数据集中。如果要从主机中排除多个归档日志文件，则必须使用逗号分隔归档日志文件路径。</block>
  <block id="580090964e74391cca4652380303c416" category="paragraph">例如，您可以设置 archivedLogs.exclude = /arch/logs/on/local/disk1/.* ， /arch/logs/on/local/disk2/.* 。对于 ASM 数据库，您可以设置 archivedLogs.exclude = \\+KHDB_ARCH_dest/kdb/archivelog/.* ， \\+KHDB_NONNAARCHTWO/kdb/archivelog/.* 。</block>
  <block id="a42c087d358cd78ecc28c5ac63ba5f6d" category="paragraph">例如，您可以设置 archivedLogs.exclude.fileslike = /arch/logs/on/local/disk1/% ， /arch/logs/on/local/disk2/% 。</block>
  <block id="d83557bfe9379e52c9b564bd11f8fd20" category="paragraph">例如，您可以设置 mydb.archivedLogs.exclude.fileslike = /arch/logs/on/local/disk1/% ， /arch/logs/on/local/disk2/% 。</block>
  <block id="6d4dc548fb72383e69fe8e5ae06e53da" category="paragraph">扩展名为 .sh 的 shell 脚本文件可用作预处理脚本和后处理脚本。</block>
  <block id="d4117999aa134b9f6cee47202fa5f8c8" category="paragraph">&lt;default_installation_directory&gt;/plugins/backup/create/pre</block>
  <block id="c421ca97460c91f812bc00f3cffc43e9" category="paragraph">&lt;default_installation_directory&gt;/plugins/restore/create/pre</block>
  <block id="113c833424e3a2fec375d89a817684cb" category="paragraph">&lt;default_installation_directory&gt;/plugins/clone/create/pre</block>
  <block id="1b91d8c43de67621be2cfc15535b1297" category="paragraph">&lt;default_installation_directory&gt;/plugins/backup/create/post</block>
  <block id="2100918ecc215e31c2dc3c211d1feff5" category="paragraph">&lt;default_installation_directory&gt;/plugins/restore/create/post</block>
  <block id="2579deff7a07c9b601e58318fada384d" category="paragraph">&lt;default_installation_directory&gt;/plugins/clone/create/post</block>
  <block id="5769d7648c6ecd32c55d95ef7f8313c3" category="paragraph">&lt;default_installation_directory&gt;/plugins/backup/create/policy</block>
  <block id="059eb68a1f92600e2a2b76ee109b7f70" category="paragraph">&lt;default_installation_directory&gt;/plugins/restore/create/policy</block>
  <block id="21988f8e39c928f35025ccd3bc3d5eca" category="paragraph">&lt;default_installation_directory&gt;/plugins/clone/create/policy</block>
  <block id="714d782d0d52780ad19cfe43f776be0c" category="list-text">&lt;default_installation_directory&gt;/plugins/examples/backup/create/pre</block>
  <block id="eba124a2faffe8dc582377f35bc35c4c" category="list-text">&lt;default_installation_directory&gt;/plugins/examples/backup/create/post</block>
  <block id="b9713085b5ba28564faa645fa69fcbdf" category="list-text">&lt;default_installation_directory&gt;/plugins/examples/clone/create/pre</block>
  <block id="6b11eac538ff2ce9a42c102637c50c22" category="list-text">&lt;default_installation_directory&gt;/plugins/examples/clone/create/post</block>
  <block id="8e66a74a57f068f2fa65959d8460f25d" category="paragraph">版权所有 © 2019 NetApp ， Inc. 。保留所有权利。Printed in the U.S.</block>
  <block id="464821ce353b86f770de0d09b5f5aabe" category="paragraph">本文所含数据与商用项目（定义见 FAR 2.101 ）相关，属于 NetApp ， Inc. 的专有信息政府拥有非独占，不可转让，不可再许可，全球有限且不可撤销的许可，仅可在与美国相关并为美国提供支持时使用此数据交付数据所依据的政府合同。除非本协议另有规定，否则不得使用，披露，复制，修改，执行， 或在未经 NetApp ， Inc. 事先书面批准的情况下显示。美国国防部的政府许可权利仅限于 DFARS 第 252.227-7015 （ b ）条中确定的权利。</block>
  <block id="8a07d5dba2178130508a2490bc475219" category="summary">在更新配置文件时，您可以将配置为在数据库操作完成时接收电子邮件通知。</block>
  <block id="e23bac3ac5776df3ae67e95a68bf869a" category="list-text">输入以下命令： smo profile update -profileprofile "-profile-passwordprofile_password]] ｛ -database-dbnamedb_dbname-host db_host "-siddb_sid] ｛ -login -usernamedb_username-password db_password-port db_port]] ｛ -groupm ｛ -controlfile _ ｛ -group-snap-name-snap-snap-snap-name]-snap-snap-name]-snap-snap-snapmirrorings1&lt;-snap-snap-name]-snap-snap-snap-snap-snap-snap-snap-name]&lt;-snap-snap-snap-snap-snap-name]&lt;-snap-snap-snap-snap-snap-name]-snap-snap-snap-snap-snap-snap-name]-snap-snap-snap-snap-snapmirrorings1&lt;-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-name]-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-name</block>
  <block id="e69ac72d8b84b423c58d717c457030fd" category="list-text">拆分克隆</block>
  <block id="d7bce620198f03754e2dd782ed333489" category="summary">使用此命令可以将更高版本的 SnapManager 回滚或还原到升级后的原始版本。</block>
  <block id="9ad6159067f46e358063cfa826a9ebb3" category="summary">了解建议的常规数据库布局和存储配置有助于避免与磁盘组，文件类型和表空间相关的问题。</block>
  <block id="43a327ab0a1779458bc91d1e81690912" category="doc">建议的常规数据库布局和存储配置</block>
  <block id="fc7710e6b7ae5d085df92ab65cfbec68" category="list-text">请勿在数据库中包含多种类型的 SAN 文件系统或卷管理器中的文件。</block>
  <block id="a5f987fd16bbd2af62ab9d3593808387" category="list-text">在 oratab 文件中包括数据库系统标识符。</block>
  <block id="c590bd3f1b2a22941c9a14ecbd8e97e0" category="paragraph">在 oratab 文件中为要管理的每个数据库添加一个条目。SnapManager 依靠 oratab 文件来确定要使用的 Oracle 主目录。</block>
  <block id="d045be1b79f08c4bf1a5bbec8c7c1ff1" category="paragraph">如果要利用基于卷的新还原或完整磁盘组还原，请考虑以下与文件系统和磁盘组相关的准则：</block>
  <block id="05f280140939c7f7b47cb2b07d3ee821" category="list-text">多个数据库不能共享同一个自动存储管理（ Automatic Storage Management ， ASM ）磁盘组。</block>
  <block id="0c4abe6117f7bada61d90cd7ce3278de" category="list-text">包含数据文件的磁盘组不能包含其他类型的文件。</block>
  <block id="81f277d06552b79e6c27442844c8f795" category="list-text">数据文件磁盘组的逻辑单元号（ LUN ）必须是存储卷中的唯一对象。</block>
  <block id="29c6a967c41aea2c7372927fe52e87db" category="list-text">您无需为临时数据库文件创建单独的卷，因为 SnapManager 不会备份临时数据库文件。</block>
  <block id="c07d9e5796c8b34d00fec0e53cbd444f" category="paragraph">您可能需要克隆数据库，以便在非生产环境中进行测试或升级。您可以克隆主存储或二级存储上的数据库。克隆可以与数据库位于同一主机上，也可以位于不同主机上。</block>
  <block id="126f7d58aaec2ca1fd1dfda20eb08677" category="list-text">必须安装要回滚到的 SnapManager 版本支持的 SnapDrive for UNIX 版本。</block>
  <block id="e2fa2e0887f64ca8118ee16ace2443df" category="list-text">克隆是使用主存储还是二级存储上的备份创建的</block>
  <block id="0db449412b97c256a3100bb93e70a3e7" category="list-text">输入以下命令： `smo clone show -profile profile_name [-label label | -id guid]`</block>
  <block id="3d61835f43488e5b5c1f1254ee887a9b" category="summary">DBA 应了解使用基于卷的快速恢复的优缺点。</block>
  <block id="8ee9086c9af11614c18d525e5714d0c6" category="doc">使用快速还原的优势和劣势</block>
  <block id="e9a50e9eab91b5192f003ca17b4e2961" category="paragraph">使用快速恢复还原数据库备份具有以下优势：</block>
  <block id="bcb57643ed0c96f0f26c4476edce5be7" category="list-text">基于卷的还原可减少还原备份所需的时间。</block>
  <block id="933812c45002df2f47636021ed189ffe" category="list-text">SnapManager 可提供快速恢复资格检查。SnapManager 将分析数据库备份并显示有关它是否可以执行基于卷的还原的信息。</block>
  <block id="41f04bd8b56d7561e77c56b49ca411f0" category="list-text">您可以预览还原操作并决定是继续使用建议的路径还是使用选定过程覆盖建议。</block>
  <block id="2c5b4be3ee90a4130ea5c7096b613dff" category="paragraph">使用快速还原还原数据库备份具有以下缺点：</block>
  <block id="32452a028d9300f5ee73087e619e2416" category="list-text">还原整个文件系统，包括不视为备份一部分的文件。卷上的其他文件，文件系统或 LUN 也将还原。</block>
  <block id="ae42dfd76e3c0ac7f1ce2f4ec378c1d1" category="list-text">SnapManager 会删除在还原到的 Snapshot 之后创建的所有 Snapshot 副本。实际上，您将丢失 Snapshot 副本日期之后的历史记录。例如，如果您已还原星期一的备份，则无法还原星期二的备份。</block>
  <block id="72e431aa72d9095144cf6ef447d0a11f" category="paragraph">您可以按照以下建议避免这些缺点：</block>
  <block id="76042df8b897c7dbd015fe9fc2d411f3" category="list-text">根据最佳实践优化数据库布局。</block>
  <block id="7a8c04d5ecd281961ad343d06fb3cce6" category="list-text">保护二级存储的备份。但是，如果从主存储中删除 Snapshot 副本，则无法使用快速还原从二级存储中还原它们。</block>
  <block id="88c4915e89e0069cdad1ca85d2e610b1" category="paragraph">"* 默认模式： SMO_\ ｛ profile ｝ _\ ｛ db-SID ｝ _\ ｛ scope ｝ _\ ｛ mode ｝ _\ ｛ smid ｝ * 示例： smo_my_profile_rc51_f_h_2_8abc01e915 a55ac50115a55Acc8d0001_0</block>
  <block id="786bce32c0611e95d0fdbabe47942f79" category="summary">通过 SnapManager ，您可以为各种操作安装和使用自定义脚本。SnapManager 提供了备份，还原和克隆插件，可在备份，还原和克隆操作前后自动执行自定义脚本。在使用备份，还原和克隆插件之前，您可以运行 plugin check 命令来验证插件脚本的安装情况。自定义脚本存储在三个目录中： policy （适用于在执行备份，还原或克隆操作之前应始终运行的脚本）， PRE （适用于预处理脚本）和 POST （适用于后处理脚本）。</block>
  <block id="83f499a540b1323009c200d6f8cc9396" category="section-title">参数</block>
  <block id="521fbe17817c2fb1005a720bb39173eb" category="list-text">* — osaccount*</block>
  <block id="a7bdd5fe21d56408b3e22ba14f2c0e95" category="paragraph">指定操作系统（ OS ）数据库用户名。如果不输入 -osaccount 选项， SnapManager 将以 root 用户身份检查插件脚本，而不是检查特定用户。</block>
  <block id="ff3ea81416b59c41cc9ad22a2ede55c6" category="paragraph">以下示例显示， plugin check 命令发现策略目录中存储的 policy1 自定义脚本是可执行文件。此示例还显示，存储在 PRE 目录中的另外两个自定义脚本不会返回任何错误消息（显示状态为 0 ）；但是， POST 目录中的第四个自定义脚本（ POST/plug-in1 ）包含错误（显示状态为 3 ）。</block>
  <block id="d96d490886111d30738a39836d3618a0" category="summary">DBA 希望确保在数据丢失，发生灾难时以及出于法规原因备份可用。这就需要为各种数据库仔细考虑保留策略。</block>
  <block id="cac3f3fc1cfccee27c3e72dbcdddb290" category="doc">备份计划和保留策略</block>
  <block id="8f756abaaa5bd47ea8b32951dbcd64e9" category="paragraph">对于生产薪资数据库， DBA 遵循以下 TechCo 保留策略：</block>
  <block id="4e92547e997fe98c132fd1cfb873bc65" category="cell">备份频率</block>
  <block id="5907dfa776d7446e825f07d4102d8c19" category="cell">保留期限</block>
  <block id="997fc0e21077ab89a41a6ff709aa9b3a" category="cell">备份时间</block>
  <block id="89779af7c95b822a4defdc67688267f5" category="cell">存储类型</block>
  <block id="af86450f13ed043b2746e8b622701cec" category="paragraph">每天一次</block>
  <block id="2d836c595463e39451f4bc5201b13c16" category="paragraph">10 天</block>
  <block id="b0a5c4b0ed15cf1a59a08290be13bc62" category="paragraph">下午 7 ： 00</block>
  <block id="09ab94870de8b7efa406878464fc2ae3" category="paragraph">主（本地）</block>
  <block id="7fc03df7d3f45b7a8f7f4f6bbe1fdca0" category="paragraph">二级（归档）</block>
  <block id="849589ea5be18466bffc8acccfacdaa6" category="paragraph">每周一次</block>
  <block id="2d51af82ba94916ee39534f3096a9034" category="paragraph">52 周</block>
  <block id="f31dfe4ef4625534a3e8bf8aaa5df1da" category="paragraph">星期六凌晨 1 点</block>
  <block id="3ed5e74a27d31318ea05640d7c200a35" category="list-text">* 本地备份的优势 *</block>
  <block id="c7a7f49b7d76f9a081e844bed6d237c8" category="paragraph">每日本地备份可提供即时的数据库保护，不占用任何网络带宽，最少使用额外存储空间，提供即时还原，并提供精细的备份和还原功能。</block>
  <block id="f1f65e9a2d42255dcc5786bd33ea9b24" category="paragraph">由于薪资数据库的最后每周备份会在二级存储站点保留至少 52 周，因此无需将每日备份保留超过 10 天。</block>
  <block id="8aaea1f6027815edc931c2bd1ca94187" category="list-text">* 受保护的备份优势 *</block>
  <block id="4b8c7978e2fd6ec7fdc37b0f1d60c97d" category="paragraph">每天和每周备份到远程位置的二级存储可确保在主存储站点的数据损坏时，目标数据库仍受保护，并且可以从二级存储进行还原。</block>
  <block id="8dbc44b440b1dfd5c195c66019610781" category="paragraph">每天备份到二级存储是为了防止主存储系统受到损坏。由于薪资数据库的最后每周备份至少保留 52 周，因此无需将每日备份保留 10 天以上。</block>
  <block id="747b45d3fc3036cfc7546a54274d040e" category="summary">如果您选择快速还原备份， SnapManager 会首先执行资格检查，以确定是否可以使用快速还原过程。</block>
  <block id="040c53985795b400159cd94eab778b49" category="doc">快速恢复资格检查</block>
  <block id="184a2134c5482f147fdd2f48c4b08b0b" category="paragraph">SnapManager 提供以下类型的检查：</block>
  <block id="5b833625a45f0de2d2701a50af10970f" category="list-text">必填检查：只有在此检查下的所有条件均已通过时， SnapManager 才能执行快速还原过程。</block>
  <block id="1dbb5b34be69c53175d818d6de21b567" category="list-text">可覆盖检查：如果此检查的条件失败，管理员可以覆盖此检查以强制执行快速还原过程。但是，您必须谨慎地覆盖这些检查。</block>
  <block id="b0732092e4b4b6c97b589104cc3170a2" category="paragraph">下表列出了您可能会遇到的问题，并指示是否可以覆盖快速还原资格检查：</block>
  <block id="a40955bf4f59202cffc26bfd10f02d8d" category="cell">需要通过</block>
  <block id="27bbd031ea405389b8a260d430b228ce" category="paragraph">11gR2 中的 ASM 磁盘组中存在 ACFS ，投票磁盘或 OCR</block>
  <block id="fb5d676528b39b2cf36f72526bb01daa" category="paragraph">无法执行快速还原。解决方法：无</block>
  <block id="da4bc92fa739b8e295728c2eed21f137" category="paragraph">无法覆盖。</block>
  <block id="8d653175d74f40f95115870790df044a" category="paragraph">只能快速还原使用 SnapManager 3.0 或更高版本创建的备份</block>
  <block id="cab8d503c488f471e20c19ac659697b4" category="paragraph">只能快速还原使用 SnapDrive for UNIX 4.0 或更高版本创建的 Snapshot 副本</block>
  <block id="a06517b316c3a5d2934c9ac7835bdf8e" category="paragraph">卷是根卷</block>
  <block id="0237783228fdfa58d6d0046103d78086" category="paragraph">要还原的卷是存储系统上的根卷。解决方法：不要在存储系统上使用根卷。</block>
  <block id="ae231ba81e1506addfdcfee9fa596e21" category="paragraph">卷还原在 Windows 上不可用</block>
  <block id="c7a81727a7d7bf017e69dcdf388432d4" category="paragraph">要还原的卷是存储系统上的根卷。解决方法：无</block>
  <block id="b97b0403ad8a4769103796b85ce7ed77" category="paragraph">已禁用卷还原</block>
  <block id="61b4d040a934af0c964b03baa8b40855" category="paragraph">已禁用卷还原。解决方案：启动还原时，通过选择不同的选项来启用卷还原。在命令行界面中，请勿使用 -fast -off 。</block>
  <block id="2e4bb63ec5c53f7d173b9af27ccd56a6" category="paragraph">控制同一卷上的文件和数据文件</block>
  <block id="5c196e73b2702fd5ca7441837e6b7525" category="paragraph">对于联机备份，控制文件和数据文件不能位于同一个卷上，因为 SnapManager 会为该卷创建两个 Snapshot 副本（其中一个数据文件在热备份模式下保持一致）。 热备份模式完成后，备份控制文件保持一致）。卷还原将还原到第一个 Snapshot 副本，此副本将删除包含备份控制文件的第二个 Snapshot 副本。发生纯数据文件还原时，控制文件将还原为不一致状态， SnapManager 将还原备份控制文件，然后使用 resetlogs 选项打开数据库，这不是所需的行为。</block>
  <block id="e8782cbec1bc731fe7be04231b01b984" category="paragraph">解决方案：将控制文件和数据文件迁移到不共享同一底层卷的单独文件系统。这对检查失败的还原没有帮助，但也有助于将来的备份还原操作。</block>
  <block id="38707873a1a095dec09f7bddff944f2e" category="paragraph">归档日志和数据文件不能位于同一个卷上</block>
  <block id="109a8be072e7f187083845ab0404fda8" category="paragraph">数据库归档日志和数据文件驻留在由同一存储系统卷提供支持的文件系统中。如果执行了卷还原， SnapManager 将无法在还原联机备份后打开数据库，因为在数据库退出热备份模式后写入的归档日志文件不可用。此外，您将无法在归档日志文件中的后续事务之间进行前滚。</block>
  <block id="1855d5faec2fb3ed540268bb8786f1c6" category="paragraph">解决方案：将归档日志和数据文件迁移到不共享同一底层存储系统卷的单独文件系统。这对检查失败的还原没有帮助，但也有助于将来的备份还原操作。</block>
  <block id="9c030b67c4f136c33ddd57ae67eeab91" category="paragraph">联机日志和数据文件不能位于同一个卷上</block>
  <block id="f790beff851c1114b0e23fdb693190c3" category="paragraph">数据库联机重做日志和数据文件驻留在由同一存储系统卷提供支持的文件系统中。如果执行了卷还原，则恢复无法使用联机重做日志，因为这些日志可能已还原。</block>
  <block id="f2abd5480a969f1edc421547373d47f2" category="paragraph">解决方案：将联机重做日志和数据文件迁移到不共享同一底层存储系统卷的单独文件系统。这对检查失败的还原没有帮助，但也有助于将来的备份还原操作。</block>
  <block id="4f93b5bf4886fc51078ae241ff163121" category="paragraph">文件系统中不属于还原范围的文件将被还原</block>
  <block id="6ba8a0485383e5868deee2c30ad7a393" category="paragraph">主机上可见的文件（不包括要还原的文件）存在于卷上的文件系统中。如果执行了快速还原或存储端文件系统还原，则在创建 Snapshot 副本时，主机上可见的文件将还原为其原始内容。如果 SnapManager 发现 20 个或更少文件，则资格检查中会列出这些文件。否则， SnapManager 将显示一条消息，指出您应调查文件系统。</block>
  <block id="702698b779e54a7a338d3ab689a0e309" category="paragraph">解决方案：将数据库未使用的文件迁移到使用不同卷的其他文件系统。或者，也可以删除这些文件。</block>
  <block id="012f9dbf2f915ba92b1a263647a2416b" category="paragraph">如果 SnapManager 无法确定文件用途，则可以覆盖检查失败。如果覆盖此检查，则会还原不在还原范围内的文件。仅当您确定还原文件不会对任何内容产生负面影响时，才覆盖此检查。</block>
  <block id="e49066497e67377e259305b13b3561fe" category="paragraph">将还原不属于还原范围的指定卷组中的文件系统</block>
  <block id="87de9c4ccd454294f770ac4949d763d8" category="paragraph">多个文件系统位于同一个卷组中，但并非所有文件系统都请求还原。存储端文件系统还原和快速还原不能用于还原卷组中的各个文件系统，因为卷组使用的 LUN 包含所有文件系统中的数据。要使用快速还原或存储端文件系统还原，必须同时还原卷组中的所有文件系统。如果 SnapManager 发现 20 个或更少文件， SnapManager 会在资格检查中列出这些文件。否则， SnapManager 将显示一条消息，指出您应调查文件系统。</block>
  <block id="7af7d150b848fc2933ef708d2d3bc51f" category="paragraph">解决方案：将数据库未使用的文件迁移到其他卷组。或者，也可以删除卷组中的文件系统。</block>
  <block id="ed2f56fcc84cac64d799f4d4304b754c" category="paragraph">可以覆盖。</block>
  <block id="cae7e049e26f145a184b72420c3791ae" category="paragraph">系统会还原不属于还原范围的指定卷组中的主机卷</block>
  <block id="e2f9b93359e58f244323ae6aefbf0ce3" category="paragraph">多个主机卷（逻辑卷）位于同一个卷组中，但并非所有主机卷都请求还原。此检查与卷组中的文件系统类似，除了卷组中的其他主机卷未作为文件系统挂载到主机上之外，不会还原此还原范围内的任何文件系统。解决方法：将数据库使用的主机卷迁移到其他卷组。或者，删除卷组中的其他主机卷。</block>
  <block id="083a2f8a402e0c2286ae3bf5439f12c8" category="paragraph">如果覆盖此检查，则卷组中的所有主机卷都将还原。仅当您确定还原其他主机卷不会对任何内容产生不利影响时，才覆盖此检查。</block>
  <block id="219efb3f2136f9c448bcd3de325fa0ce" category="paragraph">自上次备份以来，文件块区已发生更改</block>
  <block id="e4bdc5500b4cad3fac9f5cae3b3039c5" category="paragraph">还原卷中不属于还原范围的映射 LUN</block>
  <block id="98bd9136c2d10bf6348136ea6fc59304" category="paragraph">请求在卷中还原的 LUN 以外的 LUN 当前已映射到主机。无法执行卷还原，因为使用这些 LUN 的其他主机或应用程序将变得不稳定。如果 LUN 名称以下划线和整数索引（例如， _0 或 _1 ）结尾，则这些 LUN 通常是同一卷中其他 LUN 的克隆。可能会挂载数据库的另一个备份，或者存在另一个备份的克隆。</block>
  <block id="0183102875a5e88b26fb657b13ca5130" category="paragraph">解决方法：将数据库未使用的 LUN 迁移到其他卷。如果映射的 LUN 是克隆，请查找同一数据库或数据库克隆的已挂载备份，然后卸载此备份或删除此克隆。</block>
  <block id="4ea6f8e975d956c573c1b2b16502893a" category="paragraph">卷中不属于还原范围的未映射 LUN 将被还原</block>
  <block id="137df2e90d8e2b53badac9e98b135e01" category="paragraph">卷中存在请求还原的 LUN 以外的 LUN 。这些 LUN 当前未映射到任何主机，因此还原它们不会中断任何活动进程。但是， LUN 可能会暂时取消映射。解决方法：将数据库未使用的 LUN 迁移到其他卷或删除 LUN 。</block>
  <block id="ea2284f3463b86315c72249fe680fdf0" category="paragraph">如果覆盖此检查，则卷还原会将这些 LUN 还原到创建 Snapshot 副本时的状态。如果在创建 Snapshot 副本时 LUN 不存在，则在卷还原后 LUN 将不存在。只有在确定还原 LUN 不会对任何内容产生负面影响时，才会覆盖此检查。</block>
  <block id="341f326584f3ce217a4db897a9998925" category="paragraph">还原时，卷的 Snapshot 副本中的 LUN 可能不一致</block>
  <block id="824cb0fe07176fdeba552dbb1c97ec20" category="paragraph">在创建 Snapshot 副本期间，卷中存在请求 Snapshot 副本的 LUN 以外的 LUN 。这些其他 LUN 可能未处于一致状态。解决方法：将数据库未使用的 LUN 迁移到其他卷或删除 LUN 。这对检查失败的还原过程没有帮助，但也有助于还原在移动或删除 LUN 后所做的后续备份。</block>
  <block id="69da2c993997900c0855fd1ea64b0ca5" category="paragraph">如果覆盖此检查，则 LUN 将恢复为创建 Snapshot 副本时的不一致状态。只有在确定还原 LUN 不会对任何内容产生负面影响时，才会覆盖此检查。</block>
  <block id="a3aef15ab8fad86fdc2563a9002bd20d" category="paragraph">新 Snapshot 副本具有卷克隆</block>
  <block id="bff23490afc67b06887d9f5056fd793a" category="paragraph">已为在请求还原 Snapshot 副本之后创建的 Snapshot 副本创建克隆。由于卷还原将删除稍后的 Snapshot 副本，并且如果 Snapshot 副本具有克隆，则无法删除该副本，因此无法执行卷还原。解决方法：删除后续 Snapshot 副本的克隆。</block>
  <block id="b5b4d6e82e7fa834af9280d0d7fe6572" category="paragraph">此时将挂载较新的备份</block>
  <block id="766a8cbaab9a0ee45b321c3452a19878" category="paragraph">在还原备份后所做的备份将挂载。由于卷还原会删除稍后的 Snapshot 副本，因此如果 Snapshot 副本具有克隆，则无法删除该副本，备份挂载操作会创建克隆的存储，并且无法执行卷还原。解决方案：卸载后续备份，或者从挂载备份后创建的备份中还原。</block>
  <block id="dfee98d9817c46768908ee8e56774ba1" category="paragraph">存在较新备份的克隆</block>
  <block id="d85a755f3bd3e5dd7ee43dabc291720b" category="paragraph">还原备份后所做的备份已克隆。由于卷还原会删除稍后的 Snapshot 副本，并且如果 Snapshot 副本具有克隆，则无法删除该副本，因此无法执行卷还原。解决方案：删除较新备份的克隆，或者从包含克隆的备份之后创建的备份中进行还原。</block>
  <block id="8c2224f29c2ae4c477220c14bef4dd75" category="paragraph">卷的新 Snapshot 副本丢失</block>
  <block id="fde621b86bf071cad75dd0c40f057bad" category="paragraph">执行卷还原将删除在将卷还原到的 Snapshot 副本之后创建的所有 Snapshot 副本。如果 SnapManager 可以将更高版本的 Snapshot 副本映射回同一配置文件中的 SnapManager 备份，则会显示 " 较新的备份将被释放或删除 " 消息。如果 SnapManager 无法将更高版本的 Snapshot 副本映射回同一配置文件中的 SnapManager 备份，则不会显示此消息。解决方案：从后续备份还原或删除后续 Snapshot 副本。</block>
  <block id="2a807b589d449027518e1729b148abf1" category="paragraph">较新的备份将被释放或删除</block>
  <block id="3e504c62d2dc90ecd8c57dbe3981db43" category="paragraph">执行卷还原将删除在将卷还原到的 Snapshot 副本之后创建的所有 Snapshot 副本。因此，在还原的备份之后创建的任何备份都会被删除或释放。在以下情况下，稍后的备份将被删除：</block>
  <block id="22836cfc286a7761d932ebff5459e380" category="list-text">备份状态不受保护</block>
  <block id="c4b9e7afc68536aa26520b4a7c102b59" category="list-text">在 SMO.config 中， retain.alwaysFreeExpiredBackups 为 false</block>
  <block id="a75e8bc68e99aeb00f116510c0097642" category="paragraph">在以下情况下，将释放后续备份：</block>
  <block id="25f83460f82f438bf93f034e3160151a" category="list-text">备份状态为 " 受保护 "</block>
  <block id="0a3d12e33d06491a2f8a843d65316957" category="list-text">在 SMO.config 中， retain.alwaysFreeExpiredBackups 为 true false</block>
  <block id="15fb4f358adfdfe6dee4866d01533885" category="paragraph">解决方案：从后续备份还原，或者释放或删除后续备份。</block>
  <block id="183686bf807c4007e8e476fd4cef63b4" category="paragraph">如果覆盖此检查，则会删除或释放在还原的备份之后创建的备份。</block>
  <block id="f24631bdfe11f82bcab1d45d5a7d1f34" category="paragraph">卷的 SnapMirror 关系丢失</block>
  <block id="69480b492b181264c360db90000b9171" category="paragraph">是（如果禁用了 RBAC 或您没有 RBAC 权限）</block>
  <block id="0c88cc29992b2627db2a4c631914d9bd" category="paragraph">在 SnapMirror 关系中，将卷还原到早于基线 Snapshot 副本的 Snapshot 副本会销毁此关系。解决方案：从关系的基线 Snapshot 副本之后创建的备份还原。或者，手动中断存储关系（然后在还原完成后重新创建此关系并重新建立基线）。</block>
  <block id="2cf77f6e00c8ddf78d1eba42fdb89971" category="paragraph">如果已启用 RBAC 且您具有 RBAC 权限，则可以覆盖。</block>
  <block id="f2ff154294c778a511bcb79457d50508" category="paragraph">如果执行快速还原过程，则卷的 SnapVault 关系将丢失</block>
  <block id="d2ef70a070783f23c214da830d295433" category="paragraph">在 SnapVault 关系中，将卷还原到早于基线 Snapshot 副本的 Snapshot 副本会销毁此关系。解决方案：从关系的基线 Snapshot 副本之后创建的备份还原。或者，手动中断存储关系（然后在还原完成后重新创建此关系并重新建立基线）。</block>
  <block id="6b51df0342a690186fa67946b83afc5f" category="paragraph">如果已启用 RBAC 且您具有 RBAC 权限，则无法覆盖。</block>
  <block id="540e17ef0e5aea602ee52661409dd8b0" category="paragraph">卷中不属于还原范围的 NFS 文件将被还原</block>
  <block id="68c31654203f2a943acba64e7a87aab4" category="paragraph">如果执行卷还原，则会还原存储系统卷中不可见的文件，而这些文件在主机上不可见。解决方法：将数据库未使用的文件迁移到其他卷或删除这些文件。</block>
  <block id="1a8c5b5fb94daa160475dd1f0aa9a448" category="paragraph">可以覆盖。如果覆盖此检查失败，则会删除这些 LUN 。</block>
  <block id="32280d16b37a45081687c8b65e00f6b6" category="paragraph">卷存在 CIFS 共享</block>
  <block id="3bfb3811a84c72d9db9b7a6c07e5b0fd" category="paragraph">要还原的卷具有 CIFS 共享。在卷还原期间，其他主机可能正在访问卷中的文件。解决方案：删除不需要的 CIFS 共享。</block>
  <block id="b54af773b351cb563964b907d3a7dda1" category="paragraph">从备用位置还原</block>
  <block id="c59f437e282ddbcbf062c29e6b8b89aa" category="paragraph">为还原操作提供了还原规范，用于指定从备用位置还原文件。只能使用主机端复制实用程序从备用位置进行还原。</block>
  <block id="7da909a732ce7609338a2d675ca06d42" category="paragraph">解决方法：无。</block>
  <block id="c14a685079c2018cde6b61294478feaf" category="paragraph">RAC ASM 数据库不支持存储端文件系统还原</block>
  <block id="582d3c1fd8cbcf4b5cbd3790cc9b4e64" category="summary">您可以选择不同的策略来保护二级或三级存储系统上的备份。</block>
  <block id="455bc44b62c1e152ba3817a14bd254f7" category="doc">关于不同的保护策略</block>
  <block id="d1c3384cac891b28f3d47877552c5d09" category="paragraph">如果您使用的是在 7- 模式下运行的 Data ONTAP ，并且 SnapManager 与 Protection Manager 集成在一起，则在创建配置文件时必须选择以下保护策略之一。Protection Manager 的管理控制台提供了用于为数据集配置保护策略的模板。即使灾难恢复保护策略列在 SnapManager 用户界面中，也不支持这些策略。</block>
  <block id="278dad820960e96a9ce6541346dd4ba9" category="paragraph">备份</block>
  <block id="72a0186bf457bb75d8130c6aa6904a3e" category="paragraph">使用 SnapVault 或 SnapMirror 在本地备份数据集，并将数据集从主存储备份到二级存储。</block>
  <block id="8f4cf12915433c7c559418c1167cb0bf" category="paragraph">备份，然后镜像</block>
  <block id="5c5c49b7f29fa6020856694e3287f3e2" category="paragraph">使用 SnapVault 或 SnapMirror 将数据集从主存储备份到二级存储，然后将其镜像到 SnapMirror 配对存储。</block>
  <block id="a3f8a5608a681e202e5fa7f9f4996c7c" category="paragraph">仅限本地 Snapshot 副本</block>
  <block id="878f432cdf70aaaceeb4b9def6f8f353" category="paragraph">数据集仅使用主存储中的本地 Snapshot 副本。</block>
  <block id="2403def5083f02105e7802b3b315681e" category="paragraph">镜像</block>
  <block id="25e91c025e08fb43c3726a0394e06c25" category="paragraph">使用 SnapMirror 将数据集从主存储镜像到二级存储。</block>
  <block id="81a748462f41761c4f9f5dd6e7bc9b42" category="paragraph">镜像和备份</block>
  <block id="63abbfe1fbf712317aa2a4e3a5a31957" category="paragraph">数据集使用 SnapMirror 从主存储镜像到二级存储，然后使用 SnapVault 或 SnapMirror 备份到二级存储。</block>
  <block id="8b7a768909c68b062cb41c286bbbfb5b" category="paragraph">镜像和镜像</block>
  <block id="8b53699257b2fb364d6731f19fc89530" category="paragraph">数据集在两个不同的 SnapMirror 配对节点上从主存储镜像到二级存储。</block>
  <block id="6da46d32328222fafbb6c8b97cea9799" category="paragraph">镜像，然后备份</block>
  <block id="2bbff4ea6a6903d01c4ac44e847bf9c4" category="paragraph">数据集使用 SnapMirror 从主存储镜像到二级存储，然后使用 SnapVault 或 SnapMirror 备份到三级存储。</block>
  <block id="d3e84557b1cb7500789bb2cf9e292b61" category="paragraph">镜像，然后镜像</block>
  <block id="3579bc6d18f590982e6a5a08e1893c9e" category="paragraph">使用 SnapMirror 将数据集从主存储镜像到二级存储，然后再镜像到其他 SnapMirror 配对存储。</block>
  <block id="a057fb42f1c9c26ae5bd7ce20cd9ce48" category="paragraph">无保护</block>
  <block id="8a6a73683544a7bd94cb782373a670d4" category="paragraph">数据集没有任何类型的 Snapshot 副本，备份或镜像副本保护。</block>
  <block id="0a9b8b765700ec71054e1e2a0ddc460b" category="paragraph">仅限远程备份</block>
  <block id="09e9a784c3066f91db35fa9c9143ad86" category="paragraph">使用 SnapVault 或 SnapMirror 将存储系统上的数据远程备份到二级存储。获得许可的应用程序不会在主存储上执行本地备份。此保护策略可应用于安装了 Open Systems SnapVault 的第三方系统。</block>
  <block id="123b34baa1bcb92837764152704ab4bc" category="paragraph">如果您使用的是集群模式 Data ONTAP ，则必须在创建配置文件时选择以下保护策略之一。</block>
  <block id="f872d156514f536491f40a4d2abddba5" category="paragraph">SnapManager_cDOT_Mirror</block>
  <block id="f9da92f00c4a1f248e3dbcba4809e485" category="paragraph">镜像备份。</block>
  <block id="d229b0df999a2c8913e4c4436a3e890c" category="paragraph">SnapManager_cDOT_Vault</block>
  <block id="50b7ec9f26b60d5ae5139a319e6689e1" category="paragraph">存储备份。</block>
  <block id="e68f7617fa50fa1a945d21a5a517d9ef" category="list-text">NetApp ， Inc. ， 1395 Crossman Ave. ， Sunnyvale ， CA 94089 U.S.</block>
  <block id="3baf82cb0066683bef88117de33f52d8" category="list-text">输入以下命令： "smo profile update -profileprofile "-new-profilenew_profile_name"'</block>
  <block id="9fac3366817f07feaf6d4634c12ebb4a" category="paragraph">指定创建备份，验证备份，还原和恢复以及创建和拆分克隆操作的保留类。保留类会根据操作计数，天数，周数或月数进行设置。</block>
  <block id="194f4f78c784a36eaf9ede6102cf9cc7" category="paragraph">您可以为 Real Application Clusters （ RAC ）数据库创建联机备份，前提是主数据库处于打开状态，或者主数据库已挂载且实例处于打开状态。如果本地实例处于关闭状态或任何实例均未处于打开状态，则可以使用 -force 选项进行联机备份。Oracle 版本必须为 10.2.0.5 ；否则，如果挂载 RAC 中的任何实例，数据库将挂起。</block>
  <block id="3a478f9deafb520c356a0c9246c33f5f" category="paragraph">对于联机 RAC 数据库备份，如果本地实例处于关闭状态或任何实例均未处于打开状态，请使用 -force 选项。</block>
  <block id="b37ef353bc536d28a097ac318c992a75" category="admonition">Oracle 版本必须为 10.2.0.5 ；否则，如果挂载 RAC 中的任何实例，数据库将挂起。</block>
  <block id="9281e2106128d41514b90ced2318d687" category="list-text">-protect | -noprotect | -protectnow*</block>
  <block id="108f0c5396ec608f8632faae9ca954cd" category="paragraph">指示是否应将备份保护到二级存储。noprotect 选项指定不应将备份保护到二级存储。仅保护完整备份。如果未指定任何选项，则在备份为完整备份且配置文件指定保护策略时， SnapManager 会将备份作为默认备份提供保护。protectnow 选项仅适用于在 7- 模式下运行的 Data ONTAP 。选项指定立即将备份保护到二级存储。</block>
  <block id="16e22a3345f94cedb14d4a6ac77c2570" category="inline-xref-macro">从二级存储还原受保护的备份</block>
  <block id="1f9d0700d23bf8eaed3ca2d39637b648" category="paragraph"><block ref="1f9d0700d23bf8eaed3ca2d39637b648" category="inline-xref-macro-rx"></block></block>
  <block id="b2c9401d3e92b52adcf0779c69de2bd2" category="summary">只要配置文件不包含当前用于其他操作的成功备份，您就可以将其删除。您可以删除包含已释放或已删除备份的配置文件。</block>
  <block id="7ee492b9209d2cef3a5703c04bf02f1d" category="doc">删除配置文件</block>
  <block id="32ff3e75e7612ebf90b71169807c49e2" category="list-text">输入以下命令： `smo profile delete -profileprofile （ -quiet | -verbose ）`</block>
  <block id="9a645c38d1e72b5615a22b34fc3f1fc6" category="paragraph">您可以删除为克隆拆分创建的新配置文件。删除时， SnapManager 命令行界面会显示 If you delete the profile ， you cannot destroy the profile later 警告消息。</block>
  <block id="0a85c2d1681e4f39644db3b6b57e68fd" category="summary">除了基于角色的访问控制 \ （ RBAC ）之外，您还可以通过 SnapManager 为数据库用户设置访问存储库的凭据。您可以使用凭据限制或阻止对 SnapManager 主机，存储库，配置文件和数据库的访问。</block>
  <block id="7575f5d5f533bcc347c7b6f32fbdd183" category="paragraph">除了基于角色的访问控制（ Role-Based Access Control ， RBAC ）之外，您还可以通过 SnapManager 为数据库用户设置访问存储库的凭据。您可以使用凭据限制或阻止对 SnapManager 主机，存储库，配置文件和数据库的访问。</block>
  <block id="dfea6deee79ac6fbd0350fbfa494fb4a" category="paragraph">"smo credential set -repository -dbname repo_service_name -host repo_host -login -username repo_username [-password repo_password] -port repo_port"</block>
  <block id="572cde764f9cf92e4c14e1b7b7c2d5d1" category="list-text">输入以下命令： smo profile create -profileprofile "-profile-passwordprofile_password] -repositor-dbnamerepo_service_name-host-portrepo_port-login-usernamerepo_username-database-dbnamedb_dbname-hosterdb_host "-sidb_service_username-snap-snap-snap-snap-edusername-sd-zhunyour-[-mail-snap-snap-snap-name]-snap-snap-snap-snap-snap-snap-snap-snap-snap-name-snap-snap-snap-snap-snap-snap-snap-snap-edusername</block>
  <block id="d2df6d4455edded78d5250a31702b373" category="paragraph">以下示例显示了电子邮件主题模式：</block>
  <block id="a093bfda5037655254d4e28fc1b4a167" category="summary">为了支持将数据库备份到二级存储，存储管理员使用 Protection Manager 将使用 SnapVault 二级许可证启用的二级存储系统组织到备份资源池中。</block>
  <block id="a9261d528837d7011847d2367c5fcd8e" category="doc">使用 Protection Manager 配置二级资源池</block>
  <block id="899bea9c20968f57725f0fc7044c7a3f" category="paragraph">理想情况下，资源池中的存储系统可作为备份目标进行互换。例如，在为薪资数据库制定保护策略时，作为存储管理员，您确定了性能和服务质量级别相似的二级存储系统，这些系统适合属于同一资源池。</block>
  <block id="8e32dbc87c973b546ea8e847cb6f1493" category="paragraph">您已在要分配给资源池的存储系统上创建未使用空间聚合。这样可以确保有足够的空间来容纳备份。</block>
  <block id="555a28b52003cd9e4c10cd969c099658" category="list-text">从菜单栏中，单击 * 数据 * &gt; * 资源池 * 。</block>
  <block id="3548c6138221a6024d92d22aa71201a4" category="paragraph">此时将显示资源池窗口。</block>
  <block id="7dee7e783d13b6d5d415926ce0bfc306" category="list-text">单击 * 添加 * 。</block>
  <block id="f3d95d23504a65e00f0648719de94ed9" category="paragraph">此时将启动添加资源池向导。</block>
  <block id="0434bb10ea80b06d282fd9b616519f03" category="list-text">完成向导中的步骤以创建 * paydb_backup_resource* 资源池。</block>
  <block id="2635257caf21e718ad48524e09fc4e3d" category="paragraph">请使用以下设置：</block>
  <block id="c24fd44727590a76985807a5f5ee9b84" category="list-text">名称：使用 * paydb-backup_resource*</block>
  <block id="53665a33614608d4a37436eeabc8ab62" category="list-text">空间阈值（使用默认值）：</block>
  <block id="0dac0eb942c643929416c11c0f7bdfbb" category="list-text">空间利用率阈值：已启用</block>
  <block id="53194822b20adb37e785072fa1880693" category="list-text">接近全满阈值（对于资源池）： 80%</block>
  <block id="66ca2d41eaae0ba8c617f3763e3ffc0c" category="list-text">全满阈值（对于资源池）： 90%</block>
  <block id="e3d2ed1cb77c6cf59b0027a595d542fd" category="summary">您可以选择备份整个数据库或只备份一部分数据库。如果选择备份数据库的一部分，则可以选择备份一组表空间或数据文件。您可以选择对表空间和数据文件进行单独备份。</block>
  <block id="c74f225b79f96aff6a21606ce869e06d" category="summary">此命令将删除拆分的克隆 \ （数据库 \ ）以及克隆拆分过程中 SnapManager 生成的配置文件。</block>
  <block id="1de0da0b59b6b0762aebc4a0d34be782" category="doc">smo profile destroy 命令</block>
  <block id="e187b0724a1db8c0dada783c157fe498" category="paragraph">此命令将删除拆分的克隆（数据库）以及克隆拆分过程中 SnapManager 生成的配置文件。</block>
  <block id="f277285681489c082d823673fef597f1" category="paragraph">指定成功执行克隆拆分过程后 SnapManager 生成的配置文件。</block>
  <block id="f45b0bf0cc11cf5930aba373aa791311" category="paragraph">指定存在拆分克隆的主机名。</block>
  <block id="1663e01df4387f4a3875e15a9ab3bdf1" category="paragraph">以下示例将删除名为 SALES1 的配置文件。</block>
  <block id="05efea9f8b0b609d57d4173917938904" category="summary">如果使用的是 Oracle 10g ，则 asmcmd 命令不可用于列出磁盘。您可以使用 SQL 查询获取磁盘列表。</block>
  <block id="96b21a303fa51e8c96c518f19c670434" category="doc">支持不使用 ASMLib 的 Oracle 10g ASM 数据库</block>
  <block id="f0215a456884259257a3e268c6aac91b" category="paragraph">disk_list.sql 脚本包含在示例目录中提供的现有脚本中，用于支持 SQL 查询。执行 theasmquerydisk.sh 脚本时，必须手动执行 disk_list.sql 脚本。在 asmquerydisk.sh 文件中添加了示例脚本行以及注释。此文件可以放置在 /home/grid 位置或您选择的其他位置。</block>
  <block id="20f67c5dd9b578cb1008a7f46df9ff74" category="summary">SnapManager 支持不同版本的 ASMLib ，但在将 SnapManager 与 ASMLib 结合使用时，您必须考虑几个因素。</block>
  <block id="b60479682fcc5dd018e565584cef730c" category="doc">支持 ASMLib</block>
  <block id="7ff10b69a36173717f6323a46fb620c8" category="paragraph">SnapManager 支持 ASMLib 2.1.4 ， 2.1.7 和 2.1.8 。所有 SnapManager 操作均可使用 ASMLib 2.1.4 ， 2.1.7 和 2.1.8 执行。</block>
  <block id="6b0d57854b39287406eda93c2524c367" category="paragraph">如果已从 ASMLib 2.1.4 升级到 ASM 2.1.7 ，则可以使用与使用 ASMLib 2.1.4 创建的相同配置文件和备份来还原备份并创建克隆。</block>
  <block id="01767c774f33a6d213bd92d9f666bb25" category="paragraph">将 SnapManager 与 ASMLib 结合使用时，必须考虑以下事项：</block>
  <block id="ab1f7bf5df22b80aa5ee3f0a6b935daf" category="list-text">SnapManager 3.1 不支持 ASMLib 2.1.7 。</block>
  <block id="a7bbd651017233496451b6e8c8591959" category="paragraph">SnapManager 3.1p4 或更高版本支持 ASMLib 2.1.4 ， 2.1.7 和 2.1.8 。</block>
  <block id="f4af770b4b0cea6cfc5509e2efc97dfd" category="list-text">从 SnapManager 3.1 滚动升级到 3.2 后，只有在存储库回滚到 SnapManager 3.1 且 ASMLib 2.1.7 降级到 ASMLib 2.1.4 时，使用 ASMLib 2.1.7 创建的备份才起作用。</block>
  <block id="817def64e171a6df7b17fec341e15396" category="list-text">从 SnapManager 3.1 滚动升级到 3.2 后，如果使用 ASMLib 2.1.7 将存储库回滚到使用 ASMLib 2.1.7 的 SnapManager 3.1 ，则使用 ASMLib 2.1.7 创建的备份将不起作用。</block>
  <block id="4d73bfc628aefec72e24033c982bf6d4" category="paragraph">回滚成功，但无法使用配置文件和备份。</block>
  <block id="099d64c650e6ee6ec018a65ce5c12d69" category="paragraph">默认情况下， SnapManager 会根据备份是否受保护来删除或释放备份，如下所示：</block>
  <block id="1eddf6fcf8cbee7b8cf60db08f21ef60" category="list-text">对于受保护的备份， SnapManager 会在本地备份过期时将其释放。</block>
  <block id="d7b894ba8b16d49e1a7bff5384972247" category="list-text">对于未受保护的备份， SnapManager 会在本地备份过期时将其删除。</block>
  <block id="cadbabac49c1f80b3a0315a50bd14212" category="paragraph">您可以更改此默认行为。</block>
  <block id="aad92599011d11e2344ebff556a2cb2e" category="paragraph">对于受保护的备份， SnapManager 在确定是否删除本地副本时不考虑以下事项：</block>
  <block id="a0e22e826ac9ae0eedb3be37509ad811" category="list-text">二级存储备份失败或正在受到保护。</block>
  <block id="2e11209440304471e244cd7d28ac3808" category="paragraph">这样，可以在应用保留策略之前将备份传输到二级存储。</block>
  <block id="02b7149a01b5467db42c1ea64a245695" category="list-text">该副本随后从二级存储中删除。</block>
  <block id="2d95c7cd9789ea1108da5e0d53b96f54" category="paragraph">默认 SMO 安装位置 / 属性 /SMO.config</block>
  <block id="02d660b4ee5f1c645e057a665df1e4c0" category="doc">smo repository rolling upgrade 命令</block>
  <block id="cacc7c947c5ca067351bb37270dccc97" category="paragraph">如果在配置文件上启用了保护，并且保护策略包含来自使用镜像关系的主节点的连接，则在释放备份后，系统会删除主节点上的 Snapshot 副本。下次传输到二级存储时，这些 Snapshot 副本也会从镜像节点中删除。</block>
  <block id="d6a17f2707f971c59e32fe96ca212340" category="paragraph">释放受保护的备份后， SnapManager 会请求 Protection Manager 删除用于备份的本地 Snapshot 副本。如果受保护备份的备份可用操作成功，则 Protection Manager 会异步删除 Snapshot 副本。</block>
  <block id="3b752aaed87d5332b6f9057b2dc77a82" category="cell">保护状态</block>
  <block id="cfae9708b487290dfde5922c343834c3" category="cell">本地状态</block>
  <block id="922b12f77f84705e449e5b2cbd426d0e" category="cell">对主存储执行的操作</block>
  <block id="df116b47b3c40b58cb6262e7733c3f3d" category="cell">对二级存储执行的操作</block>
  <block id="19c6cb745ca2e3d414f9a46e38c583c8" category="paragraph">未请求（待保护）</block>
  <block id="2a8eb028670e972535e8e246be645821" category="paragraph">exists</block>
  <block id="293d5f8ddb63c770936aab5a04bde809" category="paragraph">释放备份</block>
  <block id="2d5b2a0eead4795c91afafb2d333decf" category="paragraph">无需执行任何操作</block>
  <block id="6dffa2b5092a5b50fc83df96270d4926" category="paragraph">SnapManager 可释放本地备份。</block>
  <block id="68455b952283fb78abd3237f00d0ae93" category="paragraph">已释放</block>
  <block id="447359ac8ba42a406fafb8a501067b5b" category="paragraph">本地备份已释放。</block>
  <block id="4aa6066b3ed6d1b995450c6c7ad4a3d8" category="paragraph">不受保护</block>
  <block id="1f6b5a0aa748479d3ff3b58c1ff88b48" category="paragraph">即使二级存储上不存在任何副本， SnapManager 也会释放本地备份。</block>
  <block id="56f0605c9795b173abd2e34fab7fc164" category="paragraph">受保护</block>
  <block id="f199fdca25f85050147bcfa99c170741" category="paragraph">无需执行任何操作；二级系统上的备份仍会保留</block>
  <block id="c572e6ed9130dabbdf2806c0ba87ded8" category="paragraph">SnapManager 可释放本地备份。副本仍保留在二级存储上。</block>
  <block id="67072139a2fe4511ee4e7f08129d8ee3" category="paragraph">要重新配置 SnapManager ，请编辑以下文件： /opt/NTAP/SMO/properties/SMO.config</block>
  <block id="d7b168e785fb5c4cf1dcac16f3d33b7a" category="paragraph">要启动 SnapManager 服务器，请输入以下命令： smo_server start</block>
  <block id="f7c3b490adc596030905af9aeebc489a" category="admonition">如果服务器已在运行，则会显示一条错误消息。</block>
  <block id="23673a9748600fff56ad7aec38732d89" category="paragraph">如果服务器已在运行，请执行以下步骤：</block>
  <block id="3819c8aee19e981197bf14c846659901" category="list-text">输入以下命令以停止服务器： smo_server stop</block>
  <block id="f63e077ab6e17f4ab1f39f500cdec0ef" category="list-text">输入以下命令重新启动服务器： smo_server start</block>
  <block id="f0c413ec28e1f0b413fffb9ce33c5d63" category="section-title">终止当前正在运行的 SnapManager 操作</block>
  <block id="83144b65d0e51bc30d85defe433c26f1" category="paragraph">如果 SnapManager 服务器挂起而您无法成功执行任何操作，则可以终止 SnapManager 及其操作。</block>
  <block id="16b3e582757f22f5b8624845e1c57f71" category="paragraph">SnapManager 可与 SnapManager 和 Protection Manager 配合使用。要列出正在运行的不同进程并停止上次运行的进程，必须执行以下步骤。</block>
  <block id="e44ca9285c8ef822b41b98791aebe4e6" category="list-text">列出正在运行的所有 SnapDrive 进程： PS</block>
  <block id="ed870863239b9e19e4e4152223be006f" category="paragraph">示例： PS | grep SnapDrive</block>
  <block id="e6824ad97ed1bb3cfda13731be248d60" category="list-text">停止 SnapDrive 进程： kill &lt;pid&gt;</block>
  <block id="029582f6eaee636b8da194cd7cbaa5eb" category="paragraph">PID 是使用 ps 命令找到的进程列表。</block>
  <block id="00b773b5d0b5fc289b4c2a864c3ead3f" category="admonition">请勿停止所有 SnapDrive 进程。您可能只想结束正在运行的最后一个进程。</block>
  <block id="098a405991c792a2175172707b413cc6" category="list-text">如果其中一项操作涉及从二级存储还原受保护的备份，请打开 Protection Manager 控制台并执行以下操作：</block>
  <block id="f1fc2ce9e167bd38f49ef9df411c63f3" category="list-text">从系统菜单中，选择 * 作业 * 。</block>
  <block id="f77361b272ce81d8275727f7b1a756a8" category="list-text">选择 * 还原 * 。</block>
  <block id="eb38bd68f205ae9d9d76dc238fa26c10" category="list-text">检查与 SnapManager 配置文件中的数据集是否匹配的数据集名称。</block>
  <block id="78dcb05c0f6ca88282b822b789d2e83f" category="list-text">右键单击并选择 * 取消 * 。</block>
  <block id="5d136017c09e0308890119a0632f725e" category="list-text">列出 SnapManager 进程：</block>
  <block id="34ddff2815f871a4f2a5c1843943d259" category="list-text">以 root 用户身份登录。</block>
  <block id="ae72d19673e22dc23e0cd7dd9cc28923" category="list-text">使用 ps 命令列出进程。</block>
  <block id="bb366190da1b8eeba1247f3b0a4c5cd5" category="paragraph">示例： PS | grep java</block>
  <block id="ca0cad4751d7b5b6afdb0e51abbe100b" category="list-text">结束 SnapManager 进程： kill &lt;pid&gt;</block>
  <block id="be0153d2a38e723e37c90dad51347f0f" category="section-title">无法删除或释放上次受保护的备份</block>
  <block id="d117cd92aeaad5913e0b3b4dafd823ae" category="paragraph">在二级存储上为配置文件创建第一个备份时， SnapManager 会将有关该备份的所有信息发送到 Protection Manager 。对于与此配置文件相关的后续备份， SnapManager 仅发送修改后的信息。如果删除最后一个受保护的备份， SnapManager 将无法识别备份之间的差异，因此必须找到一种方法来重新建立这些关系的基线。因此，尝试删除最后一个受保护的备份会导致显示一条错误消息。</block>
  <block id="755b20c9f43ffce6e99a77393f282ba4" category="paragraph">您可以删除此配置文件，也可以仅删除此配置文件备份。</block>
  <block id="66f5466401f6df1a0a3af5f9260e5784" category="paragraph">要删除此配置文件，请执行以下步骤：</block>
  <block id="370cd638edc7737c093c744103749478" category="list-text">删除配置文件的备份。</block>
  <block id="80cbe892f6a9975df72ad25bb98ee4f6" category="list-text">更新配置文件并在配置文件中禁用保护。</block>
  <block id="67bd11fa8683284d3d95698093bf74f4" category="paragraph">此操作将删除数据集。</block>
  <block id="8a5da7f26905c37874c14cf1819156ce" category="list-text">删除上次受保护的备份。</block>
  <block id="82faa99cda543ef5693d410960020eec" category="list-text">删除配置文件。</block>
  <block id="cc0d91f14b6364cbacc3a6f1624708e5" category="paragraph">要仅删除备份，请执行以下步骤：</block>
  <block id="bffc0bc74acfb354ac2abdffbd7106ef" category="list-text">为配置文件创建另一个备份副本。</block>
  <block id="097344ffe049639822ae36f6742e3acb" category="list-text">将该备份副本传输到二级存储。</block>
  <block id="f0d3f3030f32bb94ae6b60559acf1263" category="list-text">删除上一个备份副本。</block>
  <block id="450de18f1e1790bc5343030fe6ecae4e" category="paragraph">例如，假设有三个可供排除的目标： /dest ， /dest1 和 /dest2 。在创建归档日志文件备份时，如果使用命令排除 /dest ，请执行此操作</block>
  <block id="4ea7edb6b1825ae82b568d3d0b341428" category="paragraph">， SnapManager for Oracle 将排除以 /dest 开头的所有目标。</block>
  <block id="9fce91d719ff35daa12d13314b227878" category="list-text">在 v$archive_dest 中配置目标后，添加路径分隔符。例如，将 /dest 更改为 /dest/ 。</block>
  <block id="cefb53c65cca2f0706e39dcbc6de3157" category="section-title">还原自动存储管理（ Automatic Storage Management ， ASM ）和非 ASM 存储上多路传输的控制文件失败</block>
  <block id="031f2bea84826a184c4bf1fd4cb2d57e" category="paragraph">如果在 ASM 和非 ASM 存储上多路传输控制文件，则备份操作将成功。但是，当您尝试从该成功备份还原控制文件时，还原操作将失败。</block>
  <block id="d3df5829392a6444c00fee5d849f192f" category="section-title">SnapManager 克隆操作失败</block>
  <block id="08e3d30c5b5babe3b5a8633d76f98fa8" category="paragraph">在 SnapManager 中克隆备份时， DataFabric Manager 服务器可能无法发现卷，并显示以下错误消息：</block>
  <block id="f5124527467c298b0f6ed1a926e23f94" category="paragraph">SMO-13032 ：无法执行操作： clone Create 。根发生原因： SMO-1007 ：从快照克隆时出错： flow-11019 ： ExecuteConnectionSteps 失败： SD-00018 ：发现 /mnt/datfile_clone3 的存储时出错： SD-10016 ：执行 SnapDrive 命令 "/usr/sbin/SnapDrive storage show -fs /x.x.x.x.x/datfile_clone3" ： 0002-719_storage3 ：无法对用户执行 命令 "/usr/sbin/snapdrive storage show -fs /snapdrive storage show -fs /snapvx.25vol_clone3" ： VMFS_clone3" ： 0002-719_storage_storage_storage_storage_storage_storage_storage.00</block>
  <block id="61096ff7c6ce335781db4a6ddc490cf3" category="paragraph">原因：指定的资源无效。在 Operations Manager 服务器 10.x.x.x 上找不到其 ID</block>
  <block id="604345babb70312f060a8f435fb017c3" category="paragraph">如果存储系统包含大量卷，则会发生这种情况。</block>
  <block id="59e25f9da4b81cba114e384be95170fd" category="paragraph">您必须执行以下操作之一：</block>
  <block id="c7482094a6b5c09a3ace10d9898ee4c4" category="list-text">从 Data Fabric Manager 服务器中，运行 DFM 主机 discover storage_system 。</block>
  <block id="a370f8e58d80033a6f3a7d807d64c389" category="paragraph">您还可以在 Shell 脚本文件中添加命令，并在 DataFabric Manager 服务器中计划作业以频繁运行此脚本。</block>
  <block id="169afddc9d4eec786d73b5053d364fec" category="list-text">增加 SnapDrive.conf 文件中的 dft-rbac 重试次数值。</block>
  <block id="6160a47e82b739ac50868aec7c3e8581" category="paragraph">SnapDrive 使用默认刷新间隔值和默认重试次数。dfm_rbac 重试休眠秒的默认值为 15 秒， dfm - rbac 重试次数为 12 次迭代。</block>
  <block id="03f8b31b52ea65c8a7546dbd63301594" category="admonition">Operations Manager 刷新间隔取决于存储系统的数量，存储系统中的存储对象数量以及 DataFabric Manager 服务器上的负载。</block>
  <block id="3d9de8c20704fcb7016d625782dbea01" category="paragraph">作为建议，请执行以下操作：</block>
  <block id="4116666d5d3de16ba1a9cac2dbff15bc" category="list-text">从 DataFabric Manager 服务器中，对与数据集关联的所有二级存储系统手动运行以下命令： dfm host discover storage_system</block>
  <block id="e6d72352fc4a7ad1f111e8ca851452f2" category="list-text">将执行主机发现操作所需的时间增加一倍，并将该值分配给 dfm — rbac — retry-sep-secs 。</block>
  <block id="00b1576732a09ede2d658060cab7a433" category="paragraph">例如，如果该操作需要 11 秒，则可以将 dfm_rbac 重试休眠秒的值设置为 22 （ 11*2 ）。</block>
  <block id="6fc72b9a2320d38d8dce7df4f3b17ab9" category="section-title">无法将协议从 NFSv3 迁移到 NFSv4</block>
  <block id="429ed8aec7fc7eedcce37922dcbd7a26" category="paragraph">通过在 SnapDrive.conf 文件中启用 enable-migrate-nfs-version 参数，您可以将协议从 NFSv3 迁移到 NFSv4 。在迁移期间，无论 RW ， largefiles ， nosuid 等挂载点选项如何， SnapDrive 都只考虑协议版本。</block>
  <block id="52967a75c9009ebf974825a640146b73" category="paragraph">但是，将协议迁移到 NFSv4 后，在还原使用 NFSv3 创建的备份时，会发生以下情况：</block>
  <block id="4cd3d5dd1f0729eea4dc7681fe746587" category="list-text">如果在存储级别启用了 NFSv3 和 NFSv4 ，则还原操作将成功完成，但会使用备份期间可用的挂载点选项进行挂载。</block>
  <block id="93a723b0b4a4af4c00d40634cf7925ca" category="list-text">如果在存储级别仅启用了 NFSv4 ，则还原操作将成功，并且仅保留协议版本（ NFSv4 ）。</block>
  <block id="f909a2ccea5f581d37137aabe476ce90" category="paragraph">但是，不会保留其他挂载点选项，例如 RW ， largefiles ， nosuid 等。</block>
  <block id="9953e9947c2dc3f61c1e9c61f00fd22d" category="paragraph">您必须在还原之前手动关闭数据库，卸载数据库挂载点并使用可用选项进行挂载。</block>
  <block id="f7901dc3e24ceaed07ae580c35cc54ee" category="paragraph">操作失败。SnapManager 已自动执行中止过程并已清理此操作。* 注： * 您可以拆分创建的克隆。停止已启动的克隆拆分操作且操作成功停止后，克隆拆分操作状态将显示为失败。</block>
  <block id="c36a7b7022778c9a160ff8c5d639b617" category="list-text">已配置自动存储管理（ Automatic Storage Management ， ASM ）数据库，但 ASM 实例未运行。</block>
  <block id="def63f37d2886b000c6a1c2ac75a740d" category="list-text">未安装 SnapDrive for UNIX 或无法访问存储系统。</block>
  <block id="682773682813503fce0639d559f833cc" category="list-text">要查看 SnapManager 历史记录操作的列表，请输入以下命令： `smo history list -profile ｛ -name ， profile_name [profile_name1 ， profile_name2] | -all-repository-login （ -passwordrepo_password ） -usernamerepo_username-dberepo_dbname-hoespo_host-portrepo_operation2` -operation1 ， -quiet 操作</block>
  <block id="f0e0181aba34b163819d15397c2ddb92" category="list-text">SnapVault （取决于保护策略）</block>
  <block id="48352fc3387ba486d79d537e9be7f0fc" category="list-text">SnapMirror （取决于保护策略）</block>
  <block id="eaef4fd89fca539919fc92a0a0019ae7" category="list-text">网络文件系统（ NFS ）和克隆需要 FlexClone 。</block>
  <block id="c7235ad45e0df9aa696b5e5635270756" category="list-text">相应的协议，例如 NFS ， Internet 小型计算机系统接口（ iSCSI ）或光纤通道（ FC ）</block>
  <block id="94e00ba8b9ce8463a5490d3de5ebf11b" category="paragraph">SnapVault 或 SnapMirror 应基于所使用的保护策略位于主存储系统和二级存储系统上。基本备份保护策略仅要求在支持系统上安装 SnapVault 。包含镜像保护的策略要求在支持系统上安装 SnapMirror 。备份和镜像灾难恢复策略要求在支持系统上安装 SnapMirror 。</block>
  <block id="a95a7b1056e42e0320edb3be98fea051" category="list-text">可选：如果源上有原始设备，则必须指定源上原始设备的路径，然后为目标指定目标 auto-generate=` true` 。</block>
  <block id="c2280fa2ead1907180fb43af2b6246bc" category="paragraph">与先前版本的 SnapManager for Oracle 中的克隆映射文件不同，您无法在目标上为原始设备指定位置。SnapManager for Oracle 将为克隆的原始设备选择下一个可用设备名称。</block>
  <block id="91b56d012506aa594409c6958e99f0b6" category="paragraph">以下示例显示了克隆规范中使用的原始设备语法：</block>
  <block id="ff04aa08d9c18c3557c1d8720a950924" category="paragraph">+ 如果要将日志文件从一个位置移动到另一个位置，则可以使用 log_file_name_convert 参数并指定以逗号分隔的日志文件路径，如以下示例所示：</block>
  <block id="fc80b50d22e4467c977f6060e656f3ca" category="paragraph">以下示例显示了克隆规范结构，其中包括存储和数据库规范组件：</block>
  <block id="7fcff322ed51b59760ab67ae808e5fc4" category="summary">并非所有 SnapManager for Oracle 版本都支持所有还原过程。升级 SnapManager 后，您需要了解可用于还原备份的还原过程。</block>
  <block id="7e539e26788d3c04f74938427cb89b98" category="doc">还原进程类型</block>
  <block id="a996ecb673675103930ccad8de90150e" category="paragraph">使用 SnapManager 3.0 或更高版本创建的备份可以通过快速还原和基于文件的还原过程进行还原。但是，只能使用基于文件的还原过程来还原使用 SnapManager 3.0 之前版本创建的备份。</block>
  <block id="8f73d947cf505ee3a4679470ebe9c6ad" category="paragraph">您可以通过运行 -backup show 命令来确定用于创建备份的 SnapManager 版本。</block>
  <block id="89c41d009cdada47d8455b0b97b21215" category="paragraph"><block ref="89c41d009cdada47d8455b0b97b21215" category="inline-xref-macro-rx"></block></block>
  <block id="f51e439b02f617f5d4a635cd4132a372" category="paragraph">[options="header "]d.</block>
  <block id="d9d7f90c4b199de4724564bc9910c2d0" category="list-text">-from-secondary ：从二级存储还原数据。</block>
  <block id="35a177c31eab6333110ea42e8520e199" category="paragraph">如果备份位于主存储上，则不能使用此选项；必须先释放主备份，然后才能从二级存储还原备份。如果使用临时卷，则必须使用 -temp-volume 选项指定此卷。</block>
  <block id="701cd0864d4c7b118b92f73c1243176c" category="paragraph">每当指定 -from-secondary 选项时，都必须指定 -copy-id 选项。如果二级存储系统上有多个备份，则使用 -copy-id 选项指定二级存储上的哪个备份副本应用于还原操作。</block>
  <block id="f96e68c53623ce9221cfe078cb1f28e0" category="admonition">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则必须为 -copy-id 选项指定有效值。但是，如果使用的是集群模式 Data ONTAP ，则不需要 -copy-id 选项</block>
  <block id="bdf2d4226a840e4dceb86a1959124bc5" category="paragraph">从二级存储还原时， SnapManager 会首先尝试将数据直接从二级存储系统还原到主存储系统（而不涉及主机）。如果 SnapManager 无法执行此类还原（例如，如果文件不属于文件系统），则 SnapManager 将回退到主机端文件副本还原。SnapManager 可通过两种方法从二级系统执行主机端文件副本还原。SnapManager 选择的方法在 SMO.config 文件中进行配置。</block>
  <block id="aaba20127ba5bc992f5b8c70081f9557" category="list-text">Direct ： SnapManager 克隆二级存储上的数据，将克隆的数据从二级存储系统挂载到主机，然后将数据从克隆复制到活动环境。</block>
  <block id="cad5ea22ab552d05b8ee393eb7b12ccd" category="paragraph">这是默认的二级访问策略。</block>
  <block id="af4c2cf45864edc22fc78e42f13639d3" category="list-text">间接： SnapManager 首先将数据复制到主存储上的临时卷，将数据从临时卷挂载到主机，然后将数据从临时卷复制到活动环境。</block>
  <block id="a4e8ace7e6f7e7cce0bedb670a6e7a41" category="paragraph">只有当主机无法直接访问二级存储系统时，才应使用此策略。使用间接方法进行恢复所需时间是直接二级访问策略的两倍，因为会创建两个数据副本。</block>
  <block id="6fb90c7c335c77f8c383066cec2c8c01" category="paragraph">是否使用直接方法或间接方法由 SMO.config 配置文件中 restore.secondaryAccessPolicy 参数的值控制。</block>
  <block id="9a04dc9b2914f0f46943315cfe5e3131" category="list-text">将使用哪种还原机制（快速还原，存储端文件系统还原，存储端文件还原或主机端文件副本还原）来还原每个文件</block>
  <block id="a99336dabbaa6877adabccae3ee4078b" category="list-text">recover 选项不会影响命令。</block>
  <block id="60e7f2c86e763b5ac0d73891289a0581" category="list-text">ffast 选项（ -require, -override ， -back退 或 -off ）会对输出产生重大影响。要预览还原操作，必须挂载数据库。如果要预览还原计划，并且当前未挂载数据库，则 SnapManager 会挂载数据库。如果无法挂载数据库，则此命令将失败， SnapManager 会将数据库返回到其原始状态。</block>
  <block id="6992b7dea010c0d5eae266f1e474aba0" category="list-text">* 快速 *</block>
  <block id="0e3a96aa8f29d4793d4da184dce9b917" category="paragraph">用于选择要在还原操作中使用的过程。如果满足所有强制还原资格条件，您可以强制 SnapManager 使用基于卷的快速还原过程，而不是其他还原过程。如果您发现无法执行卷还原，也可以使用此过程通过快速还原过程来防止 SnapManager 执行资格检查和还原操作。</block>
  <block id="330916fe33cad4b3e48861dfefe5f97e" category="paragraph">ffast 选项包括以下参数：</block>
  <block id="50c40eb0641043f055c4aa03d6f5dd1a" category="list-text">-Require ：用于在满足所有还原资格条件时强制 SnapManager 执行卷还原。</block>
  <block id="5641ae2dafb26f4082ef7f3a3a1abfac" category="paragraph">如果指定 -fast 选项，但未指定 -fast 的任何参数，则 SnapManager 会默认使用 -Require 参数。</block>
  <block id="aada060df91e155d0c0aae56108f17d7" category="list-text">-override ：用于覆盖非强制资格检查并执行基于卷的快速还原过程。</block>
  <block id="ae6a5cb0da8be3298da1e1cb8e3dc269" category="list-text">-backfaller ：用于使用 SnapManager 确定的任何方法还原数据库。</block>
  <block id="d7f5e4e44c129530c1f4724f71b4fe23" category="paragraph">如果未指定 -fast 选项， SnapManager 将使用默认的 backup restore -fast backfallt 选项。</block>
  <block id="4050e84d1a51958cf58d65a8135b9505" category="list-text">-off ：用于避免执行资格检查所需的时间。</block>
  <block id="295e51630de2b5495edb8b90583a4261" category="paragraph">如有必要，将数据库状态更改为低于其当前状态。对于 Real Application Clusters （ RAC ），如果 SnapManager 需要将任何 RAC 实例的状态更改为更低的状态，则必须包含 -force 选项。</block>
  <block id="31963ad24489473678100432968db67e" category="list-text">直接 NFS （ DNFS ）环境中的 Oracle 11g 允许在 oranfstab 文件中进行额外的挂载点配置，例如多个路径用于负载平衡。</block>
  <block id="c297ce3431b72ed2efdcd5a4dce85c97" category="paragraph">SnapManager 不会修改 oranfstab 文件。您必须在 oranfstab 文件中手动添加希望克隆的数据库使用的任何其他属性。</block>
  <block id="3ebc18199c6d8cdeea7aa7f56afb23e9" category="summary">此命令将删除不再需要的备份计划。</block>
  <block id="41f7de0c814afde96b8556992e0ea320" category="summary">SnapManager for Oracle 可自动执行和简化与 Oracle 数据库的备份，恢复和克隆相关的复杂，手动且耗时的流程。您可以使用采用 ONTAP SnapMirror 技术的 SnapManager 在另一个卷上创建备份副本，并使用 ONTAP SnapVault 技术将备份高效归档到磁盘。</block>
  <block id="5122e14b5442c67abce060142dcc33b4" category="paragraph">SnapManager 可与原生 Oracle 技术集成，例如 Oracle Real Application Clusters （ Oracle RAC ），自动存储管理（ ASM ）以及跨 FC ， iSCSI 和 NFS 协议的直接 NFS 。或者，可以使用 Oracle 恢复管理器（ RMAN ）对使用 SnapManager 创建的备份进行编目，以保留备份信息；这些备份可稍后用于块级还原或表空间时间点恢复操作。</block>
  <block id="8a3a0240c155c884e28517f821d0639e" category="paragraph">SnapManager 可与 UNIX 主机上的 Oracle 数据库以及后端的 NetApp Snapshot ， SnapRestore 和 FlexClone 技术无缝集成它提供了易于使用的用户界面（ UI ）以及用于管理功能的命令行界面（ CLI ）。</block>
  <block id="447be78ba5bb9477c2cd49f72bd55761" category="paragraph">您可以单独备份数据文件和归档日志文件。</block>
  <block id="36a5d4c5b9ea103bca26cc328c4978ab" category="list-text">使用基于文件或基于卷的还原操作还原完整或部分数据库</block>
  <block id="cd8aa1d55c1830da5deedd9f76e9f08d" category="list-text">在主存储系统或二级存储系统上为备份创建节省空间的克隆</block>
  <block id="c8595d2c716c11ecf66da304ec106aa0" category="summary">SnapManager 将显示每个备份的状态。管理员必须了解不同的状态并监控其备份的状态。</block>
  <block id="96c681edb54770267cd33d332d36e22d" category="doc">什么是保护状态</block>
  <block id="96955921df1fa629871e01ce05b4d95a" category="paragraph">数据库备份可以具有以下保护状态：</block>
  <block id="0b890b1926b90387673882e6ccae7fdc" category="cell">定义</block>
  <block id="5844b075fa261ee618968187270fbbe2" category="paragraph">已请求保护并已启用。</block>
  <block id="48728116083a86b1e5cbdeefd030a452" category="paragraph">在 SnapManager 中为备份启用了保护，并且 Protection Manager 已成功将备份复制到另一组物理磁盘（也称为二级存储）。如果 Protection Manager 因保留策略而从二级存储中删除备份，则备份可能会返回到 " 不受保护 " 状态。</block>
  <block id="b7a3ea4248d0fb575ef23f27b1767422" category="paragraph">已请求保护，但未完成保护。</block>
  <block id="b12a223ca1180976f641d088fd421899" category="paragraph">已为备份启用保护，但备份不会复制到另一组物理磁盘。备份尚未受到保护，保护失败，或者先前受到保护，但不再受保护。创建备份时，备份的初始保护状态为未请求或未受保护。如果备份不受保护，则在传输到二级存储时，备份将受到保护。</block>
  <block id="4ccc09386ca69988d892d0c53ace16e1" category="paragraph">未请求</block>
  <block id="224987d046e55c3ff638f9486f5d989d" category="paragraph">未请求保护。</block>
  <block id="22d60f6846317bfa35b0f99ba72194a4" category="paragraph">未为备份启用保护。数据的逻辑副本位于同一物理磁盘上（也称为本地备份）。如果创建备份时未请求保护，则备份上的保护始终显示为未请求。</block>
  <block id="5d523501b378c0dbcf4c31d2d0cb0bda" category="paragraph">您可以从备用位置还原以下数据：</block>
  <block id="61f5f65653b72db7303cec36cac30baf" category="list-text">从中间文件系统到活动文件系统的数据文件</block>
  <block id="c871babfbfa94353b64e35d93bf8b4f5" category="list-text">从中间原始设备到活动原始设备的数据块</block>
  <block id="e3d53a4771bbb15a73a2091df46175cd" category="summary">当 SnapManager 在 NFS 环境中为卷创建 FlexClone 时， /etc/exports 文件中会添加一个条目。克隆或备份无法挂载到 SnapManager 主机上，并显示错误消息。</block>
  <block id="7644464befcc89e189760f5d82221ee6" category="doc">在 NFS 环境中挂载 FlexClone 卷失败</block>
  <block id="076823717ee2a5d456aa25abc709aaa0" category="paragraph">错误消息为： 0001-034 命令错误：挂载失败： MOUNT ： filer1 ： /vol/SnapManager_20090914112850837_vol14 on /opt/NTAPsmo/mnt/-ora_data02-20090914112850735_1 - 警告未知选项 "zone=vol14" NFS 挂载： filer1 ： SnapManager_2009091412850735_1 ：</block>
  <block id="40574a67bbde40feab3257a344f8dc0c" category="paragraph">同时，存储系统控制台会生成以下消息： Mon Sep 14 23 ： 58 ： 37 pdt [filer1 ： export.auto.update.disabled: warning] ：在运行 vol clone create 命令时，没有为 vol14 更新 /etc/exports 。请手动更新 /etc/exports 或将 /etc/exports.new 复制到该文件中。</block>
  <block id="e10de36ae97e485a48698cfe00a6da32" category="paragraph">此消息可能未捕获到 AutoSupport 消息中。</block>
  <block id="03ef03f8ef07c60bb99d9dba93c0d49c" category="admonition">在 NFS 上克隆 FlexVol 卷时，可能会遇到类似的问题。您可以按照相同步骤启用 nfs.export.auto-update 选项。</block>
  <block id="b8d13f734e55848286e9511fc77eb2d2" category="list-text">将 nfs.export.auto-update 选项设置为 on ，以便自动更新 /etc/exports 文件。选项 nfs.export.auto-updateon</block>
  <block id="4883871f40608fc9319f10cca4cf8e7e" category="admonition">在 HA 对配置中，确保将两个存储系统的 NFS 导出选项都设置为 on 。</block>
  <block id="43623e77ea10c7337b152b7105410fe5" category="list-text">要更新备份以使其符合保留策略删除的条件，请输入以下命令： `smo backup update -profileprofile_name ｛ -labelLabel [data | -archivelogs] | -idd ｝ -retain （ -hourly | -daily | -weekly | -monthly ）`</block>
  <block id="89c33fcc74a0ac2f804d5c0da5c2a2e8" category="summary">您可以使用 SnapManager 保护二级或三级存储系统上的备份副本。</block>
  <block id="d75fdf38abaaca79990e0dd37391f3cf" category="doc">保护二级或三级存储上的数据库备份</block>
  <block id="78ff48edd4785173120637c16df75411" category="list-text">输入以下命令： `smo backup create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain ｛ -hourly ； -daily ； -weekly ； -monthly ； -unlimited ｝ ] ｛ -verify] ｝ _ ｛ -data ｛ -filesfiles 【文件文件文件】 ｝ _ ｛ -tablespaces-tablesogs ｛ -tablespaces ） ]] "-snapvaultlabelsnapvault_lab]"-protect | -protectnow] -backup-destpath1 [ ， [path2]]] -exclude-destpath1 （， path2 ） ] （ -prunelog ｛ -all | -untilSCNutildump | -until date SCn-mm-dd ： ] ） -forth-dss-zh_untess_un&gt; -duntsun&gt; -duntsun&gt; -duntsun.-un.-un.-dumpsn.-un.-un.-un.-dun.-un.-dun.-un.-dun.-dun.-dm.-dun.-dun.-dun.-dun.-d`</block>
  <block id="9792a4eebc59c44369f1f98f9d27237a" category="cell">然后执行此操作 ...</block>
  <block id="f841e02a0257303e97b747a6dc5bc5a4" category="paragraph">* 为联机或脱机数据库创建备份，而不是让 SnapManager 管理联机还是脱机数据库 *</block>
  <block id="f245660dacb76932d72ff6633795b2b1" category="paragraph">指定 -offline 或 -online 选项以创建脱机数据库或联机数据库的备份。如果使用 -offline 或 -online 选项，则不能使用 -auto 选项。</block>
  <block id="e4fef55e49a13807928b5d7af6bfca08" category="paragraph">* 让 SnapManager 管理对数据库的备份，而不管它是联机还是脱机 *</block>
  <block id="30fdcb459a6b507acd1c760af9ca8d67" category="paragraph">指定 -auto 选项。如果使用 -auto 选项，则不能使用 -offline 或 -online 选项。</block>
  <block id="474dd28f7799d085aa00bf74c1936483" category="paragraph">* 添加有关备份的注释 *</block>
  <block id="a7e67a10e1ecdd94b69e4eca4a0aec77" category="paragraph">指定 -comment 选项，后跟问题描述字符串。</block>
  <block id="af9116c10674b517cb4d8c21744b0d9d" category="paragraph">* 强制数据库进入您指定的备份状态，而不管其当前处于何种状态 *</block>
  <block id="38505d9b3202680d28e0594efb333826" category="paragraph">* 创建时验证备份 *</block>
  <block id="f7e98d8520bacec510a365cdb453bd14" category="paragraph">* 在二级存储上创建备份 *</block>
  <block id="844ec3a58468948e670dee91ff313393" category="paragraph">指定 -protect 选项。</block>
  <block id="94bfa7cb4f671eec36d22bec6b6b25ab" category="list-text">如果您使用的是 ONTAP ，并且希望立即保护二级存储的备份，请指定 -protect 选项。</block>
  <block id="cf191ee4b98eff249a5695428074913a" category="admonition">protectnow 选项不适用于集群模式 Data ONTAP 。</block>
  <block id="6e0801c4d69c08340018c25525ccb5a7" category="list-text">如果您使用的是在 7- 模式下运行的 Data ONTAP ，并且希望立即保护到二级存储的备份覆盖 Protection Manager 保护计划，请指定 -protectnow 选项。</block>
  <block id="1a08fb5df5c566494046294f56b0075d" category="list-text">要防止备份到二级存储，请指定 -noprotect 选项。如果您使用的是 ONTAP ，并且在创建配置文件时选择了 _SnapManager_cDOT_Vault_protection 策略，则必须指定 -snapvaultlabel 选项。在将 SnapVault 关系设置为值时，您必须提供在 SnapMirror 策略规则中指定的 SnapMirror 标签。</block>
  <block id="92e235059c11bb212d5733d823353d45" category="paragraph">指定 -retain 选项，并根据以下保留类之一指示是否应保留备份：</block>
  <block id="fc1ad09952a577c3fd814933bd432486" category="list-text">-unlimited 如果未指定保留类，则 SnapManager 默认使用 -hourly 。</block>
  <block id="ff7c0fcd6a31e735a61c001f75426961" category="section-title">示例</block>
  <block id="72984649e90cf3cf185f32eb41288ad0" category="paragraph">以下命令可保护数据库备份：</block>
  <block id="d1e4d519e65727adf4975e360cc8ede8" category="paragraph">以下命令会立即保护数据库备份：</block>
  <block id="073ae60b916449e9a18069d89eecfdf0" category="list-text">&lt;default_install_directory&gt;/plugins/examples/backup/create</block>
  <block id="1665e6c41ee8e86fa16aa2f69d37640b" category="list-text">&lt;default_install_directory&gt;/plugins/examples/clone/create</block>
  <block id="3c143092c78ec0e36f76fc56fc57599f" category="list-text">&lt;default_install_directory&gt;/plugins/unix/examples/backup/create/post</block>
  <block id="f9f479197c9e527d67e61e2f6815adef" category="paragraph">Mirror_the_backup.sh</block>
  <block id="ba69995b564033c4257fa04c44b8eaae" category="paragraph">在使用 7- 模式 Data ONTAP 或集群模式 Data ONTAP 的 UNIX 环境中执行备份操作后，对卷进行镜像。</block>
  <block id="cdaa707633efb128b9e9f3303e351060" category="paragraph">Vault_the_backup_cDOT.sh</block>
  <block id="bc1bff266e6c4b67e17e7d51a23132cc" category="paragraph">在使用集群模式 Data ONTAP 的 UNIX 环境中执行备份操作后，将存储备份。</block>
  <block id="115ac61ef635b276dbe1e321cb418c0c" category="list-text">要验证您是否正在使用 bash shell ，请在命令提示符处输入以下命令： `bash`</block>
  <block id="292bd6e2d8058183012c9ba45ec83d10" category="paragraph">&lt;installdir&gt;/plugins/examples/clone/create</block>
  <block id="545b73f45d2361a777b9dafe6dd6feef" category="list-text">拆分克隆。</block>
  <block id="61882a627886f0ddd98370f3468ee4d8" category="list-text">更改配置文件的保护状态。</block>
  <block id="0376b45246c6499476a18ad6becabbb1" category="list-text">分配保护策略，保留类或 SnapVault 和 SnapMirror 关系。</block>
  <block id="dfc7436b3a9dff32985c2e295e3349c0" category="paragraph">在这种情况下，执行回滚后，您必须手动删除已分配的保护策略，保留类或 SnapVault 和 SnapMirror 关系。</block>
  <block id="f30b72991f5f4c44d399e13ec88a53f4" category="summary">要启用数据保护，您必须将 DataFabric Manager 服务器的 root 用户或管理员以及存储系统的 root 用户注册到 SnapDrive 。</block>
  <block id="7f8862fc0f0d0bcbc9bf92b662dbac81" category="doc">未启用 RBAC 时配置 SnapDrive</block>
  <block id="16007b5726b4a85b3bea06da92284a67" category="list-text">要刷新 DataFabric Manager 服务器以更新目标数据库直接在存储系统上所做的更改，请输入以下命令：</block>
  <block id="9c93b1ec2da2e27ef5ca0a0a8e542135" category="paragraph">dfm 主机发现 storage_system</block>
  <block id="31d6a33bba460ec34a74f2340a58476e" category="list-text">要向 SnapDrive 注册 DataFabric Manager 服务器的 root 用户或管理员，请输入以下命令：</block>
  <block id="727e36d30d7ac353ac07851cb443af0f" category="paragraph">SnapDrive 配置集 -dfm 管理 fm_host</block>
  <block id="f4adf08720aec5486c2edfda27f7134e" category="list-text">要向 SnapDrive 注册存储系统的 root 用户或管理员，请输入以下命令：</block>
  <block id="9ce07bfa9a8b1cacab47a5777380b2b4" category="paragraph">SnapDrive 配置集 root storage_system</block>
  <block id="701cc6a37654de3d8f91eca71625dcbb" category="summary">如果在 NFS 环境中使用自动存储管理 \ （ ASM\ ），则在安装 SnapManager 后，必须确保 ASM 能够发现 SnapManager 导入的磁盘。为此，您可以将 ASM 目录的路径添加到 asm_DISKSTRING 参数中。</block>
  <block id="3b60809bd8be0bb52c6a9df27dc4309f" category="doc">确保 ASM 发现导入的磁盘</block>
  <block id="e481ee26ee1dd37f4352941d0e186897" category="paragraph">如果在 NFS 环境中使用自动存储管理（ Automatic Storage Management ， ASM ），则在安装 SnapManager 后，必须确保 ASM 能够发现 SnapManager 导入的磁盘。为此，您可以将 ASM 目录的路径添加到 asm_DISKSTRING 参数中。</block>
  <block id="85b96d2a2caed26987af9d20418e32b6" category="paragraph">您可以使用 Oracle 工具编辑 ASM_DISKSTRING 参数。有关编辑 ASM_DISKSTRING 的信息，请参见 Oracle 文档。</block>
  <block id="d85fe5ac9cea34a5f8c5043225ac7988" category="paragraph">必须将 ASM 磁盘路径 /opt/netapp/smO/mnt/*/*/disk* 添加到 ASM_DISKSTRING 参数中定义的现有路径中。例如，如果在 ASM_DISKSTRING 中定义的路径为 /mnt/my-asm-disks/dir1/disk* ，则在添加 ASM 磁盘路径之后，更新后的路径将为 "/mnt/my-asm-disks/dir1/disk* ， /opt/netapp/smO/mnt/*/*/disk* 。</block>
  <block id="c1b2e996bc46e50d78707d7c6633f980" category="admonition">ASM_DISKSTRING 参数只能与 ASM 磁盘文件匹配，而不能与任何其他文件匹配。</block>
  <block id="5efce67e29c9bedfb1d88a3a15d68938" category="list-text">第一个星号（ * ）表示 SnapManager 为根挂载点生成的名称。</block>
  <block id="8cb3357ddf0e00bd3fd069b20a647f05" category="list-text">第二个 * 表示挂载点内的目录。</block>
  <block id="cc57bb4c6777f99d31aa128799377b67" category="list-text">第三个 * 表示 NFS 文件的名称。</block>
  <block id="2eb0e4912ae668ce88645cdcbbf25f1e" category="paragraph">如果磁盘挂载在 /opt/netapp/smO/mnt/&lt;smo-generated -name&gt;/ 下的目录中，则必须确保 * 与 NFS 文件系统的拓扑匹配。</block>
  <block id="98b28ecbc687a072c9baeb651b7d1b73" category="list-text">如果在网络连接存储（ NAS ）环境中将 ASM 磁盘与 NFS 结合使用，请编辑 ASM_DISKSTRING 参数，使其指向当前 ASM 目录路径。</block>
  <block id="4009931c1d72a11e9f8a0a8cfab9f1b9" category="paragraph">如果 ASM 磁盘挂载点为 /mnt/my-asf-disks/*/disk* ，则在编辑 ASM_DISKSTRING 后，更新后的路径为 /opt/netapp/smO/mnt/my-as-disks-20081012/disk1.nfs 。ASM_DISKSTRING 参数的格式为 /opt/netapp/smO/mnt/*/disk* 。</block>
  <block id="8c84e5e76097c74bee4f6faaa1bffd4e" category="list-text">第一个 * 与 my-as-disks-20081012 匹配。</block>
  <block id="98f275671a9c88feb15aae61432ed41c" category="list-text">该磁盘 * 与 disk1.nfs 匹配。编辑 ASM_DISKSTRING 参数后， ASM 发现 SnapManager 导入的磁盘的结果如下：</block>
  <block id="c6a6dea51f5a2a7e5050c33e067ce45c" category="list-text">NFS 磁盘 1 上的 ASM 克隆为 /opt/netapp/smO/mnt/-mnt-my-as-disks-20081012/dir1/disk1.nfs 。</block>
  <block id="d65c54fa9278d571f9e761344b18ca24" category="list-text">NFS 磁盘 2 上的 ASM 克隆为 /opt/netapp/smO/mnt/-mnt-my-as-disks-20081012/dir1/disk2.nfs 。ASM_DISKSTRING 参数的格式为 /opt/netapp/smO/mnt/*/*/disk* 。</block>
  <block id="68962a964d644fd2d0ea78d18df4b830" category="list-text">第一个 * 与 -mnt-my-as-disks-20081012 匹配。</block>
  <block id="db4cefb605969762392d1306f7d6fdb7" category="list-text">第二个 * 与 dir1 匹配。</block>
  <block id="fea8b05444b47d67e76e9fdb893af64d" category="list-text">第三个 * 与 disk1.nfs 和 disk2.nfs 匹配。</block>
  <block id="30eb16f00ab9ed89153eaf54ae8e6579" category="list-text">如果在存储区域网络（ SAN ）环境中使用 ASM 磁盘，则根据环境执行以下操作之一：</block>
  <block id="371a6ffa2bb83e8aacc6410bd873b483" category="cell">如果使用的 ASM 磁盘具有 ...</block>
  <block id="5da31a08fa4309be1e96d84fdbff8d64" category="paragraph">基于 FCP 的 ASMLib 以及 Linux 上的 iSCSI</block>
  <block id="27caab342d25a73c9ab3b1410541ec32" category="paragraph">仅使用字符设备更改 Oracle 软件所有者和用户主组的权限。ASM_DISKSTRING 路径必须为 ASM DISKSTRING = ORCL ： * 。</block>
  <block id="2d07e391c1d3a50355128d74fc3a7831" category="paragraph">AIX 上的 FCP 和 iSCSI</block>
  <block id="a83f4583a6d9f8cb9c78db4e5f38774d" category="paragraph">添加 ASM_DISKSTRING 参数的路径名称，直到 ASM 目录路径为止。ASM_DISKSTRING 路径必须为 ASM DISKSTRING = /dev/hdsk/* ，其中 * 表示 ASM 磁盘名称。</block>
  <block id="eb9e93c4be7bb1dcb33bc6cb27142572" category="paragraph">Solaris 上的 FCP 和 iSCSI</block>
  <block id="e3a6bfc8fa33ff5370a22babf0edad13" category="paragraph">添加 ASM_DISKSTRING 参数的路径名称，直到 ASM 目录路径为止。ASM_DISKSTRING 路径必须为 ASM DISKSTRING = /dev/rdsk/* ，其中 * 表示 ASM 磁盘名称。</block>
  <block id="0dba76d6bfb085b437ae567fec707a99" category="inline-link">Oracle 文档： www.oracle.com/technetwork/indexes/documentation/index.html</block>
  <block id="7cf08355f31271d71a546f9367223701" category="paragraph"><block ref="7cf08355f31271d71a546f9367223701" category="inline-link-rx"></block></block>
  <block id="3f757ef84cde54e4d99093c2ea118083" category="summary">您可以使用 Single File SnapRestore \ （ SFSR\ ）方法还原备份。</block>
  <block id="292d1fccd670aa150eb961ca36e85399" category="doc">使用单个文件 SnapRestore 还原备份</block>
  <block id="6b84e9ccc2e03c04bf380053acb26d82" category="paragraph">您可以使用单文件备份（ Single File SnapRestore ， SFSR ）方法还原备份。</block>
  <block id="9e950c0bfed9cd2e2dafc46bacc72def" category="list-text">从 SnapManager 图形用户界面（ GUI ）创建配置文件。</block>
  <block id="16ff542b6b52c5ee363b3ee1d1a08723" category="list-text">使用 GUI 备份数据库。</block>
  <block id="8b392c8ee8b82cfd39fc38d99b1c9def" category="list-text">从集群服务组取消 Oracle 和网络文件系统（ NFS ）服务组的链接并将其冻结。</block>
  <block id="0b5f080067d659b306bec58c7dcf1bb1" category="list-text">通过在 SnapDrive.conf 文件中将 #secure communication-amongst cluster-nodes 设置为 on ，确保在主机和适用于 UNIX 的 SnapDrive 之间配置了安全 Shell （ SSH ）。</block>
  <block id="62214f075a2dccba90e73a3bb719ca81" category="list-text">在 SnapManager 图形用户界面中，使用 -alllogs 执行完整备份还原和恢复。</block>
  <block id="ce526400c1e4d0118376fdb0f6482c5c" category="list-text">取消冻结服务组并将其链接回集群服务组。</block>
  <block id="667578b2f03b61916fc9f02a2e15c18c" category="admonition">只有在使用适用于 UNIX 的 SnapDrive 4.1.1 D2 和适用于 UNIX 的 SnapDrive 4.2 时，此配置才适用。</block>
  <block id="def62d870489619db1f82a93ee15a826" category="paragraph">如果在执行一个还原操作后执行另一个还原操作，则创建备份 Snapshot 副本可能会失败。如果您在 SFSR 可以完成的指定时间内运行连续还原操作，则 SnapManager for Oracle 将遇到 Snapshot 副本创建错误。</block>
  <block id="aebc62e2a9d152f6219abfd7cbec2134" category="paragraph">要防止 Snapshot 副本创建错误，请确保在 SFSR 进行期间之后执行还原操作。</block>
  <block id="c228c2972120cda916d7b2af6db58744" category="paragraph">为此，请在存储系统命令行界面（ CLI ）中输入以下命令，以检查 LUN 克隆拆分进程状态： rshfilernnamelun clone split statuslun-name</block>
  <block id="eb3a30e20ebd430bf248ea47626bca00" category="admonition">运行 Veritas 堆栈且具有 SFRAC 和 VCS 环境的 Solaris 主机不支持基于卷的 SnapRestore （ VBSR ）。</block>
  <block id="8c0fa9bbc9fb2597cadc578623e1cb19" category="summary">创建配置文件时，您可以根据归档日志保护策略为归档日志备份启用保护。</block>
  <block id="ac86f0a01bff539551e27d01b1a8095b" category="doc">保护归档日志备份</block>
  <block id="cbe10a3ce548e83b93f10dee6dcccf0d" category="list-text">输入以下命令： `smo profile create -profileprofile "-profile-passwordprofile_password] -repositor-dbnamerepo_dbname-host-portrepo_port-login-usernamerepo_username-database-dbnamedb_dbname-hostdb_host "-siderman_db] -login-namese-userworedb_username-snap-snap-snap-snap-snap-name-snap-snap-snap-snap-edit-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-editings1_duration_durations1s1]-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-edusername [-snap-snap-snap-snap-snap-snap-snap-snap-snap-man_edusername`</block>
  <block id="db9d67600db728e6939dd20e9e341cef" category="paragraph">* 您希望单独备份归档日志备份并保护归档日志文件 *</block>
  <block id="19681d9787c239b2a7e0850b3287af30" category="list-text">使用 -separate archivelog-backups 可以将归档日志文件与数据文件分开。</block>
  <block id="02d801e76c8c471510cada97967a0cee" category="list-text">-protect 为归档日志归档日志备份分配一个单独的保护策略。</block>
  <block id="29b5b7fa63ab44e728e63359627533ba" category="list-text">-protection-policy 为归档日志备份分配保护策略。</block>
  <block id="7ce4cf10dc412544f2a33532b259c770" category="summary">为了支持将数据库备份到二级存储，存储管理员使用 Protection Manager 配置备份计划。</block>
  <block id="f541b61c4943f6c97a4c0cfb55d5f27f" category="doc">使用 Protection Manager 配置二级备份计划</block>
  <block id="7f219c1a65e005c6e2a22548342f2139" category="paragraph">在配置二级备份计划之前，存储管理员会向 DBA 配对节点授予以下信息：</block>
  <block id="d3d65e15ce6d2f35edac70f3fbb2c248" category="list-text">DBA 希望二级备份遵循的计划。</block>
  <block id="4eae4e8fecc0693a911ec466c86964a9" category="paragraph">在这种情况下，每天晚上 7 点进行一次备份每周一次的备份在星期六凌晨 1 点进行</block>
  <block id="fc6524a310fbc8eea420dc2c72ef9acf" category="list-text">转到 Protection Manager 的 NetApp 管理控制台。</block>
  <block id="e8b7b68faa8fe8287912f04969725bbb" category="list-text">从菜单栏中，单击 * 策略 * &gt; * 保护 * &gt; * 计划 * 。</block>
  <block id="b63170773e54e9775008a91881fdca1a" category="paragraph">此时将显示保护策略窗口的计划选项卡。</block>
  <block id="a735685ae66d8b77e254b7622471ef75" category="list-text">在计划列表中选择每日计划 * 每天晚上 8 ： 00 点 * 。</block>
  <block id="a9320a3f6836ed5a97720b08ba97994a" category="list-text">单击 * 复制 * 。</block>
  <block id="f101ef2c9368ede7f414c1ca79d28af8" category="paragraph">列表中将显示一个新的每日计划 * 每天晚上 8 ： 00 的副本 * 。已选择此选项。</block>
  <block id="4a1938d0e423380a1497b6177cf5dc1c" category="list-text">单击 * 编辑 * 。</block>
  <block id="6779846427ee9808251f01dc6a8dfe28" category="paragraph">此时将打开编辑每日计划属性表并显示计划选项卡。</block>
  <block id="fbfa3f111924a03aecc0be537be1015b" category="list-text">将计划名称更改为 * 每天晚上 7 点发放工资 * ，更新问题描述，然后单击 * 应用 * 。</block>
  <block id="17caf3ea37143a74ca0d7e6bf4675c86" category="paragraph">您所做的更改将被保存。</block>
  <block id="c421cd21afbc6072e6175066b4ec6ae0" category="list-text">单击 * 每日事件 * 选项卡。</block>
  <block id="9509710e6fcd4f98454e6323de48c30f" category="paragraph">计划的当前每日备份时间为晚上 8 ： 00将显示</block>
  <block id="73dbdd2f9891e55a73d4b8139693d9ad" category="list-text">单击 * 添加 * 并在新时间字段中输入 * ： 7 ： 00 PM* ，然后单击 * 应用 * 。</block>
  <block id="2d664ac3201f65709bc0e22ad213cd5b" category="paragraph">该计划的当前每日备份时间现在为晚上 7 ： 00</block>
  <block id="1eab092956914cdfeae0a4db24509501" category="list-text">单击 * 确定 * 保存更改并退出属性表。</block>
  <block id="cade4ca2c78637b347302245ac039745" category="paragraph">新的每日计划 * 每天晚上 7 点的薪资 * 将显示在计划列表中。</block>
  <block id="a4c2f21fe7d4d16b1469af699ed7fa4a" category="list-text">在计划列表中选择每周计划 * 星期日在晚上 8 ： 00 加上每日 * 。</block>
  <block id="579d5c2b52da1bffb40fb93b4c555aa1" category="paragraph">列表中将显示一个新的每周计划，即 * 在晚上 8 ： 00 复制星期日加上每日 * 。已选择此选项。</block>
  <block id="deac90b06cad03592ad6907b4e484b95" category="paragraph">此时将打开编辑每周计划属性表并显示计划选项卡。</block>
  <block id="ac7032a6c9461fa673a992d3715315cc" category="list-text">将计划名称更改为 * 星期六凌晨 1 点加每天晚上 7 点 * 的薪资，然后更新问题描述。</block>
  <block id="45ee4021eed226ef4f7e277bad7b9b27" category="list-text">从 * 每日计划 * 下拉列表中，选择刚刚创建的每日计划 * 每天晚上 7 点发放工资 * 。</block>
  <block id="356b83c630b39a3de3fb0c46517b34c0" category="paragraph">选择 * 每天 7 点工资 * 意味着，此计划定义在对策略应用 * 星期六凌晨 1 点加每天晚上 7 点 * 计划时，何时发生每日操作。</block>
  <block id="5bf7ba236682c244a286b85099f05a3e" category="paragraph">新的每周计划 * 薪资星期六凌晨 1 点加上每天晚上 7 点 * 将显示在计划列表中。</block>
  <block id="2e214237ef860c5f492ca230ef5823a2" category="summary">升级到更高版本的 SnapManager 后，您必须更新现有存储库。您可能还需要修改分配给现有备份的备份保留类，并确定可以使用的还原过程。</block>
  <block id="9f9a001328b5d5c6cb09911447af3393" category="paragraph">升级到更高版本的 SnapManager 后，您必须更新现有存储库。您可能还需要修改分配给现有备份的备份保留类，并确定可以使用的还原过程。</block>
  <block id="ef2c12e0e8c436902a6a5607d09146fe" category="list-text">要验证配置文件是否设置正确，请输入以下命令： `smo profile verify -profile profile_name`</block>
  <block id="2e1cd3c87dea5ca667d814b52031fa46" category="paragraph">以下示例显示了配置文件的详细信息：</block>
  <block id="a9785e71a5b0e28a1e3ec5270faaa5b5" category="summary">您必须了解将数据库与网络文件系统（ NFS ）和 SnapManager 结合使用的要求。建议包括以 root 用户身份运行，属性缓存和符号链接。</block>
  <block id="d3badddfe8860365d6f521a6a1fcff4f" category="doc">将数据库与 NFS 和 SnapManager 结合使用的要求</block>
  <block id="15ecf99b05f8800e3a2f197a61f3ba08" category="list-text">您必须以 root 用户身份运行 SnapManager ； SnapManager 必须能够访问包含数据文件，控制文件，联机重做日志，归档日志和数据库主目录的文件系统。</block>
  <block id="d86a81859c658b89c474c80d9206ad19" category="paragraph">设置以下 NFS 导出选项之一，以确保 root 用户可以访问文件系统：</block>
  <block id="05039c1386048db11f97cd0d21be04c4" category="list-text">root= 主机名</block>
  <block id="6542a66fbb3cd01ba18ed3ed8c12352a" category="list-text">rw= 主机名， anon=0</block>
  <block id="c2f6d2feb58010767545a0e9ada17416" category="list-text">您必须对包含数据库数据文件，控制文件，重做和归档日志以及数据库主目录的所有卷禁用属性缓存。</block>
  <block id="4635ba673870445ad9140109ac9dd411" category="paragraph">使用 noac （适用于 Solaris 和 AIX ）或 actimeo=0 （适用于 Linux ）选项导出卷。</block>
  <block id="8c1591e7d1ba4bdd5b9dbeb8d5149b0a" category="list-text">您必须将数据库数据文件从本地存储链接到 NFS ，以便仅在挂载点级别支持符号链接。</block>
  <block id="cf36409e51e780188f7f0ca6714f04e3" category="paragraph">默认情况下， SnapManager 会尝试执行基于卷的快速还原，并提供资格检查信息。如果需要，您可以覆盖某些资格检查。如果您确定无法使用快速还原执行备份，则可以禁用快速还原资格检查并执行基于文件的还原。</block>
  <block id="d7fdd1622561b055505373af4396dbdf" category="paragraph">SnapManager 为 Oracle 提供了外部位置。但是， Oracle 无法识别外部目标中的文件。在闪存恢复区域目标和自动存储管理（ ASM ）目标中会注意到此行为。这是 Oracle 存在的问题，临时解决策始终需要备份此类数据库布局中的归档日志文件。</block>
  <block id="456a3f332a59710f129d5769dd16ea00" category="paragraph">如果 NFS 挂载点上的归档日志目标不是支持 Snapshot 的存储，则可以使用 SnapManager 配置文件恢复已还原的数据库备份。在对不支持 Snapshot 的存储执行 SnapManager 操作之前，您应在 SMO.config 中为 archivedLogs.exclude 添加目标。</block>
  <block id="b2b0f0fc9e09fc4a3501caf3ad1ea70e" category="admonition">如果数据库是 ASM 磁盘组上不支持 Snapshot 的存储，而选择数据库作为归档日志目标，则 SnapManager 不支持使用配置文件还原备份。</block>
  <block id="f81537dfede8660381de0a35d1a8abbe" category="paragraph">在 Real Application Clusters （ RAC ）环境中恢复数据库备份</block>
  <block id="e9d6176c4f67f13d776c10864dbad9b2" category="paragraph">在 RAC 环境中恢复数据库备份期间，如果未找到所需的归档日志文件，则 Oracle 会请求归档日志文件，并在 RAC 数据库中的不同线程和更改编号之间切换。SnapManager for Oracle 会尽力恢复数据库。在 RAC 环境中成功恢复数据库备份取决于备份中归档日志文件的可用性。</block>
  <block id="d6e4606cb173df700745bb4344f8cd2e" category="paragraph">RAC 数据库的建议恢复机制如下：</block>
  <block id="713302f3fc32a0dce0c68e79c34651e4" category="list-text">确保所有归档日志文件均可在备份中使用，或者所有归档日志文件均可在一个外部归档日志目标中使用。</block>
  <block id="2ce06c3ae68f5c568cb5cb1782d87c99" category="list-text">如果提供了多个外部归档日志目标，则可以在为所有线程指定外部归档日志目标的同时，提供归档日志文件的重叠。</block>
  <block id="44f721fab4d0d3f5b3088c4b61c319f0" category="paragraph">例如，外部归档日志位置 - 我可以有 1 到 100 个归档日志文件，外部归档日志位置 - II 可以有 98 到 200 个归档日志文件，外部归档日志位置 - III 可以有 198 到 300 个归档日志文件。</block>
  <block id="e1e22e915d5286df1ec9a03c63bf5fbf" category="list-text">在对归档日志文件进行删减时，您可以删除归档日志文件，而不是删除所有归档日志文件，直到 SCN 或日期为止，以便备份可以具有相同的归档日志文件。</block>
  <block id="4553fc3432e461f387f6d5bca54e33e5" category="paragraph">SMO 备份还原 -profile targetdb1_prop1 -label full_bkup_sales _nov_08 -files /u02/orada/Sales02.dbf /u02/oradon/Sales03.dbf /u02/oradon/sales 04.sales f -recover -alllogs -verbose</block>
  <block id="57d05504f637f7d92c00298409b550c0" category="paragraph">SMO backup restore -profile targetdb1_profile1 -label full_bkup_sales _nov_08 -complete -using-backup-controlfile -recover -alllogs -recover-from-location /user1/archive -verbose</block>
  <block id="30593316fc1ca21a1ab6be6120b834f3" category="list-text">查看快速还原资格检查。</block>
  <block id="9b4c1819ce04c304873209311d03dc63" category="paragraph">输入以下命令： smo backup restore -profile targetdb1_prop1 -label full_bkup_sales _nov_08 -complete -recover -alllogs -recover-from-location /user1/archive -verbose</block>
  <block id="d4ff0f757af10fc76c42439d18e38c38" category="list-text">如果资格检查显示没有强制检查失败，并且某些条件可以被覆盖，并且您要继续执行还原过程，请输入以下内容： backup restore -fast override</block>
  <block id="72bbe9a4bea23231be6eef9a60fd5dcb" category="inline-xref-macro">使用快速还原还原备份</block>
  <block id="424b32070da49468bc2e2052512fafe7" category="paragraph"><block ref="424b32070da49468bc2e2052512fafe7" category="inline-xref-macro-rx"></block></block>
  <block id="94f775c7a07a11f71d10bb1f6f971b77" category="summary">您可以使用命令行界面在 UNIX 主机上重新启动服务器。</block>
  <block id="2bfa2b2f3406935135ec9e932bef6f6a" category="doc">重新启动 SnapManager UNIX 主机服务器</block>
  <block id="77b90c6a945555e8b1cff0d173620984" category="list-text">要重新启动服务器，请输入以下命令： `smo_server restart`</block>
  <block id="c66aab19ad7e5dbd6a07af9445333125" category="summary">您必须将 SnapManager 和 Protection Manager 配置为支持将数据库备份到二级存储。数据库管理员和存储管理员必须协调其操作。</block>
  <block id="da5dedf002dc4eefc8136792bae60091" category="doc">受保护的备份配置和执行</block>
  <block id="60a12453f3482751d4ed8c4a573e0670" category="summary">在使用 SnapDrive 为 SnapManager 启用基于角色的访问控制（ RBAC ）后，您可以将 RBAC 功能和用户添加到角色以执行 SnapManager 操作。</block>
  <block id="350dec103e9dd3acd998ce00d25271ee" category="doc">设置基于角色的访问控制功能和角色</block>
  <block id="8045d303358d4372f0dfeda1e9223b0a" category="paragraph">在使用 SnapDrive 为 SnapManager 启用基于角色的访问控制（ Role-Based Access Control ， RBAC ）后，您可以向角色添加 RBAC 功能和用户以执行 SnapManager 操作。</block>
  <block id="e92ec137276acfb4e60620aba46d1fe3" category="paragraph">您必须在 Data Fabric Manager 服务器中创建一个组，并将该组添加到主存储系统和二级存储系统。运行以下命令：</block>
  <block id="52420f6814bc7de88525802a7ffaad51" category="list-text">dfm group create smo_grp</block>
  <block id="eba9d3ec5e197e555428b08079073ea7" category="list-text">dfm group add smo_grpprimary_storage_system</block>
  <block id="d175d0179a977465e450a94c4bf9fed2" category="list-text">dfm group add smo_grpsecondary _storage_system</block>
  <block id="98ff877fcee9051239fce10f2ff5bd8a" category="paragraph">您可以使用 Operations Manager Web 界面或 Data Fabric Manager 服务器命令行界面（ CLI ）来修改 RBAC 功能和角色。</block>
  <block id="fb318214bbd3707141e6e1736b25b230" category="paragraph">下表列出了执行 SnapManager 操作所需的 RBAC 功能：</block>
  <block id="0d8d56f44ef5b08f5ada465ee99a6ca5" category="cell">SnapManager 操作</block>
  <block id="d651c71244114c1fbff189c8a99148f7" category="cell">未启用数据保护时所需的 RBAC 功能</block>
  <block id="7a2a8843da5176fb9c51017e499d7951" category="cell">启用数据保护时所需的 RBAC 功能</block>
  <block id="1036ebd7c0d5b33be41dfd686a7ce874" category="paragraph">配置文件创建或配置文件更新</block>
  <block id="a5d0ed82a4e1f416a7ef550cb802e13c" category="paragraph">sd.Storage.Read （ SMO_grp ）</block>
  <block id="5333697616a112cf0751bbeb9b0c9a65" category="paragraph">sd.Storage.Read （ SMO_PROFILE 数据集）</block>
  <block id="54f78830880712e945332ce71b5d923a" category="paragraph">配置文件保护</block>
  <block id="88e9d67b48593af1bb893210806c2da3" category="paragraph">dfm.Database.Write （ SMO_grp ）</block>
  <block id="07c92b6caa8cd73fb29b309ce7f0b5f0" category="paragraph">sd.Config.Read （ SMO_grp ）</block>
  <block id="e9cc2b1488df37e8b590c5679c5da449" category="paragraph">sd.Config.Write （ SMO_grp ）</block>
  <block id="3ae8385927ec8efdcdc2921ff9ce9b12" category="paragraph">sd.Config.Delete （ SMO_grp ）</block>
  <block id="a1465bedbb9d9f7d5cc1393d64681f23" category="paragraph">GlobalDataProtection</block>
  <block id="6adf97f83acf6453d4a6a4b1070f3754" category="paragraph">无</block>
  <block id="546ea9be97922c34a5b6cc4fb3f3f5fc" category="paragraph">sd.Snapshot.Write （ SMO_grp ）</block>
  <block id="98fedbe89582be308945b2f6c59e7efc" category="paragraph">sd.Snapshot.Read （ SMO_grp ）</block>
  <block id="64dd0acf284d410627fd39afa111c308" category="paragraph">sd.Snapshot.Delete （ SMO_grp ）</block>
  <block id="878843c1cbd12db9cd0a69dd01ffa040" category="paragraph">sd.Snapshot.Write （ SMO_PROFILE 数据集）</block>
  <block id="f0fc6a5b5aefd9d89b3b5b22a2748bff" category="paragraph">sd.Snapshot.Read （ SMO_profile 数据集）</block>
  <block id="40a9f4719f3a7d26d7db557e271abacc" category="paragraph">sd.Snapshot.Delete （ SMO_PROFILE 数据集）</block>
  <block id="54639aa0115681465211cebba8dab84f" category="paragraph">备份创建（使用 DBverify ）</block>
  <block id="be2b5433c5dd16cd1d00b1ec1e537daa" category="paragraph">sd.snapshot.Clone （ SMO_grp ）</block>
  <block id="dd38a1bbfc36596ce327ae47ffe96f0b" category="paragraph">sd.snapshot.Clone （ SMO_profile 数据集）</block>
  <block id="e0afb3e5a2c91bc693a17995ed1c6e3b" category="paragraph">备份创建（使用 RMAN ）</block>
  <block id="7c0e9d08129c77db721f1ffdb2fa5470" category="paragraph">sd.Snapshot.Restore （ SMO_grp ）</block>
  <block id="625e011ed3afc21a6862d38a184b51c5" category="paragraph">sd.Snapshot.Restore （ SMO_PROFILE 数据集）</block>
  <block id="30160dc6579cc92fca6f95363252c55c" category="paragraph">备份删除</block>
  <block id="68079dcb61a6817e69fbd0ce26885597" category="paragraph">sd.Snapshot.Clone （ SMO_grp ）</block>
  <block id="841f0d3db82ac1ece1ccd3ee2fa7ccee" category="paragraph">sd.Snapshot.Clone （ SMO_PROFILE 数据集）</block>
  <block id="c0abadf2fc5431ef044e510764bea945" category="paragraph">备份挂载</block>
  <block id="ad7f7d92dc137dedb5d0a03760bf2cc1" category="paragraph">sd.Snapshot.Clone （ SMO_grp ）</block>
  <block id="ce8ff2b186bbd769c949b5f061d526bb" category="paragraph">备份卸载</block>
  <block id="71af7ec71fc19908cc964d460d9d64a0" category="paragraph">克隆删除</block>
  <block id="0ed6cf43eac9e52e09ff101db70aab13" category="paragraph">克隆拆分</block>
  <block id="4b038a46d7bc278b0afadbebcaf1d8d0" category="paragraph">sd.Storage.Write （ SMO_GRP ）</block>
  <block id="246224445f4cd155e074172f7f027e98" category="paragraph">sd.Storage.Write （ SMO_PROFILE 数据集）</block>
  <block id="f5db4e3174e806fcd68eede6fbc05df2" category="paragraph">有关定义 RBAC 功能的详细信息，请参见 _Unified Manager OnCommand 操作管理器管理指南 _ 。</block>
  <block id="3b82a1c2a7d1b3d20faa0141ce25c5d6" category="list-text">访问 Operations Manager 控制台。</block>
  <block id="da501e1aa1f9a448b19f9accf97dd274" category="list-text">从设置菜单中，选择 * 角色 * 。</block>
  <block id="78013a1f10f01f3b9e37389a56f1a350" category="list-text">选择一个现有角色或创建一个新角色。</block>
  <block id="a061b5354beff402c2d81375588b4ed9" category="list-text">要为数据库存储资源分配操作，请单击 * 添加功能 * 。</block>
  <block id="d6b2e6cbbc451177875efe8d575707ca" category="list-text">在编辑角色设置页面上，要保存对角色所做的更改，请单击 * 更新 * 。</block>
  <block id="cad748e2394d754a800279229e64bb8e" category="inline-link">_Unified Manager OnCommand 操作管理器管理指南 _ ： mysupport.netapp.com/documentation/productsatoz/index.html\]<block ref="becbe90d853340c5493f9860521b5be8" category="inline-link-rx"></block></block>
  <block id="65f0f411b9e156eac4f5ebf1b550ab45" category="paragraph"><block ref="65f0f411b9e156eac4f5ebf1b550ab45" category="inline-link-rx"></block></block>
  <block id="29aa045c55ba20a2ba36653ba9a514e6" category="list-text">输入以下命令： `smo backup list -profileprofileprofile_name "-delimitcharacter] [data | -archivelogs] [-quiet | -verbose ]`</block>
  <block id="76a353848ec726a2fc0a8bda7e04145e" category="paragraph">sm_backup_protection</block>
  <block id="f4eef5684b3564a930ee301c588a2131" category="paragraph">指定是否启用备份保护</block>
  <block id="dc9501365023464d4f1f6da2c2807201" category="paragraph">sm_asm_disk_groups</block>
  <block id="58fab39cfdbd753cb53778b016d75cf6" category="paragraph">指定 ASM 磁盘组列表</block>
  <block id="ac2f30194e4c77c92e8506796b27306f" category="paragraph">为存储库数据库指定具有 root 权限的授权用户凭据。</block>
  <block id="34f9799f2a60636b7659ab168ceb5b2c" category="summary">SnapManager 可通过使用后处理脚本或保护二级或三级存储资源上的备份来备份本地存储资源上的数据。选择备份到二级存储可提供一个额外的层，用于在发生灾难时保留数据。</block>
  <block id="5229ec41b5f6a2e4b36a8ec266013a5b" category="paragraph">SnapManager 通过保护二级或三级存储资源上的备份，可以使用后处理脚本或备份本地存储资源上的数据。选择备份到二级存储可提供一个额外的层，用于在发生灾难时保留数据。</block>
  <block id="cecf130bd32fa6fb57c546e03546d15f" category="paragraph">此外，存储管理员还可以通过 SnapManager 根据策略计划配置其备份。通过使用 SnapManager ，管理员可以确定不符合策略要求的备份，并立即更正这些备份。</block>
  <block id="bcc158bdd2ecc81ba76c948507e3e140" category="list-text">将数据库备份到主存储（也称为本地存储），并通过将其备份到二级或三级存储（也称为远程存储）来对其进行保护。</block>
  <block id="cce9817168d99978a4472e7cf2ea0566" category="list-text">根据归档日志保护策略保护仅归档日志备份</block>
  <block id="a1a9fddbf22b9f3bceff559e587f31ae" category="paragraph">您可以根据仅归档日志备份的要求为其选择不同的保护策略。</block>
  <block id="15a858bdc3aaeebebe48c61598104471" category="list-text">&lt;default_install_directory&gt;/plugins/backup/create/pree ：在执行备份操作之前执行脚本。指定备份创建时也可以选择使用它。</block>
  <block id="ec1198a3cdff41315ea77bbe0e744e3e" category="list-text">&lt;default_install_directory&gt;/plugins/backup/create/post ：在执行备份操作后执行脚本。指定备份创建时也可以选择使用它。</block>
  <block id="5bfddbcdde20a5484878715f1481d1d5" category="list-text">&lt;default_install_directory&gt;/plugins/backup/create/policy ：始终在执行备份操作之前执行脚本。SnapManager 始终对存储库中的所有备份使用此脚本。* 还原操作脚本 *</block>
  <block id="6989def4e81d1552110b79c75f722a21" category="list-text">&lt;default_install_directory&gt;/plugins/restore/create/pree ：在执行备份操作之前执行脚本。指定备份创建时也可以选择使用它。</block>
  <block id="5b3f0f728eb1ad15336d33643e8ded67" category="list-text">&lt;default_install_directory&gt;/plugins/restore/create/post ：在执行备份操作后执行脚本。指定备份创建时也可以选择使用它。</block>
  <block id="fb7d696a2339bec9b18a9ee776af790a" category="list-text">&lt;default_install_directory&gt;/plugins/restore/create/policy ：始终在执行备份操作之前执行脚本。SnapManager 始终对存储库中的所有备份使用此脚本。* 克隆操作脚本 *</block>
  <block id="f095a2e6e613f2b99a9127e082b7377d" category="list-text">&lt;default_install_directory&gt;/plugins/clone/create/pree ：在执行备份操作之前执行脚本。指定备份创建时也可以选择使用它。</block>
  <block id="b94285503ebccf1f74c643867c8f24bd" category="list-text">&lt;default_install_directory&gt;/plugins/clone/create/post ：在执行备份操作后执行脚本。指定备份创建时也可以选择使用它。</block>
  <block id="aef0d3a339c612818a705447c320fb10" category="list-text">&lt;default_install_directory&gt;/plugins/clone/create/policy ：始终在执行备份操作之前执行脚本。SnapManager 始终对存储库中的所有备份使用此脚本。</block>
  <block id="15c37a678c0a4d054ef9dc63454c87e9" category="summary">通过 SnapManager ，您可以使用保护策略或后处理脚本在主（本地）存储以及二级（远程）存储上创建备份。</block>
  <block id="efdcaa24130e1b23f1514ac09dd1392e" category="summary">您必须配置 SnapDrive 和 DataFabric Manager 服务器，以便在配置文件上启用数据保护，从而保护二级存储系统上的备份。您可以在 Protection Manager 的控制台中选择保护策略，以指定如何保护数据库备份。</block>
  <block id="1e99c67280fc8058b4929f7bc90f6067" category="doc">配置和启用策略驱动型数据保护</block>
  <block id="560b89205d79bd979af769563c00cb13" category="paragraph">您必须配置 SnapDrive 和 DataFabric Manager 服务器，以便在配置文件上启用数据保护，从而保护二级存储系统上的备份。您可以在 Protection Manager 的控制台中选择保护策略，以指定如何保护数据库备份。</block>
  <block id="b196c8e7cabcf60dccec61ecd7baebce" category="admonition">要启用数据保护，您必须确保 OnCommand Unified Manager 安装在单独的服务器上。</block>
  <block id="09bfc2274814e6332445e5343e12302e" category="summary">SnapManager 可以灵活地还原完整数据库，特定表空间，文件，控制文件或这些实体的组合。通过 SnapManager ，您可以使用基于文件的还原过程或基于卷的更快还原过程来还原数据。数据库管理员可以选择要使用的过程，也可以让 SnapManager 决定哪个过程适合。</block>
  <block id="2c27f8cccfd20789aab4b6e1638f39a2" category="paragraph">SnapManager 可以灵活地还原完整数据库，特定表空间，文件，控制文件或这些实体的组合。通过 SnapManager ，您可以使用基于文件的还原处理器更快地执行基于卷的还原过程来还原数据。数据库管理员可以选择要使用的过程，也可以让 SnapManager 决定哪个过程适合。</block>
  <block id="04c20b38bc2f7ae41d00f4dca9a83881" category="paragraph">卷管理器</block>
  <block id="94ef78959b75f50074aecba149efd434" category="paragraph">必须在源主机和目标主机上配置，并且版本必须兼容</block>
  <block id="f9583762a68d682df0edb01beb540b65" category="paragraph">您还可以将自动存储管理（ Automatic Storage Management ， ASM ）数据库克隆到远程主机。执行此操作时，您必须确保 ASM 实例正在远程主机上运行。</block>
  <block id="94312c6254178806d3f2bde3d97a0517" category="summary">您可以从二级存储还原受保护的备份，并选择将数据复制回主存储的方式。</block>
  <block id="22b12f62eb79cec4dfc17b204596f371" category="doc">从二级存储还原备份</block>
  <block id="08b973c2b189d5771c00f9bfb91aca8e" category="paragraph">您可以使用带有 -from-secondary 选项的 backup restore 命令从二级存储还原数据。如果未指定 -from-secondary 选项，则 SnapManager 将从主存储上的 Snapshot 副本还原数据。</block>
  <block id="200c6068ab19b40754dae5d6113195a3" category="paragraph">如果备份位于主存储上，则不能使用 -from-secondary 选项；必须先释放主备份，然后才能从二级存储还原备份。如果使用临时卷，则必须使用 -temp-volume 选项指定此卷。</block>
  <block id="9d47ef1494b168390ace65d87d3d3a39" category="paragraph">从二级存储还原数据时， SnapManager 会首先尝试将数据直接从二级存储系统还原到主存储系统（而不涉及主机）。如果 SnapManager 无法执行此类还原（例如，如果文件不属于文件系统），则 SnapManager 将回退到主机端文件副本还原。SnapManager 可通过两种方法从二级存储执行主机端文件副本还原。SnapManager 选择的方法在 SMO.config 文件中进行配置。</block>
  <block id="63748841e9de754c10d399d4c13b418f" category="list-text">如果 restore.secondaryAccessPolicy = Direct ，则 SnapManager 会克隆二级存储上的数据，将克隆的数据从二级存储系统挂载到主机，然后将数据从克隆复制到活动环境。</block>
  <block id="0ac305939c7e61393891570ab7759a5b" category="list-text">如果 restore.secondaryAccessPolicy = 间接，则 SnapManager 会首先将数据复制到主存储上的临时卷，将数据从临时卷挂载到主机，然后将数据从临时卷复制到活动环境。</block>
  <block id="3b2531664159ae4d7cba9536d78549ef" category="paragraph">只有当主机无法直接访问二级存储系统时，才应使用此策略。使用间接方法恢复所需时间是直接方法的两倍，因为会创建两个数据副本。</block>
  <block id="f0fa3285880630c1b62174ccb32eb58a" category="paragraph">如果选定备份位于主存储上，请还原完整的数据库</block>
  <block id="2ad4dc91b2e9dd109cd209ce97567bee" category="paragraph">输入以下命令： smo backup restore -profileprofile_name-labelLabel-complete-recover -alllogs[-copy-idi]</block>
  <block id="b0f79167889d7a7db39ad6110e96fb41" category="paragraph">如果选定备份不在主存储上，请还原完整的数据库</block>
  <block id="f580b76a630274558f76137280f0b637" category="paragraph">输入以下命令： smo backup restore -profileprofileprofile_name-labelLabel-complete-recover -alllogs-from-secondary （ -temp-volume &lt;temp_volume&gt;] ）（ -copy-ididid ）</block>
  <block id="a80f96d61830f41ce89e3c70051821b0" category="paragraph">以下命令将从二级存储系统还原受保护的备份：</block>
  <block id="28a60e1db9f5ff31ddf1abc27d675230" category="list-text">输入以下命令： `smo schedule create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain （ -hourly ； -daily ； -weekly ； -monthly ； -unlimited] （ -verify] ）；（ -data （ -filesfiles ）【文件文件文件】）；（ -tablesogs-tablespaces ）【 -tablespaces （ -tablespaces ）】） ｛ -online ； -online ； -weekly ； -unlimited ； -unlimited ； -retain （ -unlimited ； -daily ） -commentson-now] -noprotect] -backup-destpath1 [ ， &lt;path2]] -exclude-destpath1 [ ， path2]] -prunelog ｛ -all _ -untilSCNuntilSCN _ -before ｛ -dateyyyy-mm-rundd HH ： mm ： ss _ -monthsmonths _ -weeksweeks | -daysmsningsmsningsme _ sed_sed&gt; -time-schedule _ -time-sed_sed_sed_sun hun-srun-srun-sme` _</block>
  <block id="e23d3edc1d0905ed826307e8845fdb70" category="summary">通过 SnapManager ，您可以销毁与拆分克隆（数据库）关联的配置文件以及底层存储。在销毁此配置文件之前，请确保删除关联的备份和克隆。</block>
  <block id="68d17fe61f8fc341375d39af0ac46a85" category="doc">销毁配置文件</block>
  <block id="55681b2791e2a117ba81c5c223f82ceb" category="paragraph">通过 SnapManager ，您可以销毁与拆分克隆（数据库）关联的配置文件以及底层存储。在销毁此配置文件之前，请确保删除关联的备份和克隆。</block>
  <block id="605e29daf8ed70b4851c107d225affe4" category="list-text">要销毁使用拆分克隆操作创建的配置文件以及拆分克隆数据库，请输入以下命令： `smo profile destroy -profileprofile "-hosthostname] "-quiet | -verbos]`</block>
  <block id="6aa369f6034e87adcb532abdf66847fe" category="summary">您可以使用 clone split 命令拆分克隆。克隆拆分完成后，克隆元数据将从存储库数据库中删除，并且可以删除或释放与克隆关联的备份。</block>
  <block id="793a1994df8bd004e97ed592eacd2bfb" category="doc">拆分主存储或二级存储上的克隆</block>
  <block id="e8e311df4637b5e7c0765bce5fd6fdab" category="paragraph">成功执行拆分操作后创建的新配置文件用于管理拆分克隆。新配置文件将与 SnapManager 中的任何其他现有配置文件类似。您可以使用此配置文件执行备份，还原和克隆操作。</block>
  <block id="84370954b3cebc62e82e8ff013ee2770" category="paragraph">此外，您还可以为新配置文件配置电子邮件通知。这样，可以向数据库管理员通知使用配置文件执行的数据库操作的状态。</block>
  <block id="d222c722797ae9b56893c8f2190ac3b0" category="admonition">如果仅在 FlexClone 上执行拆分操作，则 SnapManager 支持拆分操作。</block>
  <block id="c9dd65c68266d6012aee905e5b0b9dd8" category="paragraph">如果拆分操作失败，则会显示相应的错误消息，其中包含失败原因。多个操作的状态也会显示在操作日志中。例如：</block>
  <block id="1dde32643299f6c3243166bff49fb32d" category="paragraph">您可以选择在克隆拆分操作成功或失败后收集转储文件。</block>
  <block id="bbb23f2970348d8f5db6bf0d8145e5c4" category="admonition">输入 clone split 命令后，在克隆拆分操作开始之前，不应停止 SnapManager 服务器。</block>
  <block id="702a3f3a3e705af0eae5789155d35620" category="admonition">即使您未为 Oracle 帐户（ osaccount 和 osgroup ）提供任何值， SnapManager 也会生成配置文件。</block>
  <block id="bac7fe1d98041fa02629445924dccb6c" category="list-text">输入以下命令： smo clone split -profileclone-profile-hosthostname "-labelclone-label | -idclone-id]-ssplit -labelssplit — operation-label-commentnew-profilenew-profile-profile-name-name "-profile-passwordnew-profile_password] -db-dbcounerepo_service_service_username-username-&lt;-username-man-username-sport-&lt;-username-sport-&lt;-man-username_username-sport-sport-&lt;-file_username-file_username-sport-&lt;-sport-file_username-sport-&lt;-sport-file-man-file-man-files&gt;</block>
  <block id="bfacdbb23532ae30092aa501db4c5d2a" category="summary">您必须了解将 Real Application Clusters （ RAC ）数据库与 SnapManager 结合使用的建议。建议包括端口号，密码和身份验证模式。</block>
  <block id="f4eba2064107719814adb1da404fb059" category="doc">将 RAC 数据库与 SnapManager 结合使用的要求</block>
  <block id="92f11cb70fd043dc8928cae71f105e05" category="list-text">在数据库身份验证模式下，必须将与 RAC 数据库实例交互的每个节点上的侦听器配置为使用相同的端口号。</block>
  <block id="e7ae52de18b2c3730b942c44ed697165" category="paragraph">在启动备份之前，必须启动与主数据库实例交互的侦听器。</block>
  <block id="e34d6df3845432c741fb00f8ce3ad612" category="list-text">在操作系统身份验证模式或自动存储管理（ ASM ）环境中，必须在 RAC 环境中的每个节点上安装并运行 SnapManager 服务器。</block>
  <block id="cf5e21d7e531c1144efbd9e4feef8ed8" category="list-text">RAC 环境中所有 Oracle 数据库实例的数据库用户密码（例如，系统管理员或具有 sysdba 权限的用户密码）必须相同。</block>
  <block id="4267beacbdb076c1c980c793f92dcd58" category="summary">您可以停止正在运行的克隆拆分过程。</block>
  <block id="4ab801bece637e88e1615682b4f9063e" category="doc">停止克隆拆分过程</block>
  <block id="817f53876f89bc2d5424022306355eb7" category="paragraph">停止拆分过程后，您将无法恢复该过程。</block>
  <block id="5c5a150b914ef69bcd92229f85744f0e" category="list-text">要停止克隆拆分操作，请输入以下命令： `smo clone slab-stop -profileprofile "-hosthostname] "-labelslab-label | -idssplit -id] "-quiet | -verbos]`</block>
  <block id="0ab69e66ce766964b4b8a964cf33c99a" category="summary">您必须了解将自动存储管理（ Automatic Storage Management ， ASM ）数据库与 SnapManager 结合使用的要求。了解这些要求有助于避免 ASMLib ，分区和克隆规范等方面的问题。</block>
  <block id="47aea972c649bc8496f616411f6d6480" category="doc">将 ASM 数据库与 SnapManager 结合使用的要求</block>
  <block id="8005bada25be7f07e9e14c059e96fc1e" category="list-text">SnapManager （ 3.0.3 或更高版本）使用 Oracle 11gR2 提供的新 sysasm 特权，而不是 sysdba 特权来管理 Oracle ASM 实例。</block>
  <block id="9cc746124e5b68a85e10b2e9e6cd5134" category="paragraph">如果您使用 sysdba 权限对 ASM 实例运行管理命令，则会显示一条错误消息。数据库使用 sysdba 权限访问磁盘组。如果您使用 sysasm 权限连接到 ASM 实例，则可以完全访问所有可用的 Oracle ASM 磁盘组和管理功能。</block>
  <block id="b6e5f7f1645e699057a8bfc1946d9d72" category="admonition">如果您使用的是 Oracle 10gR2 和 11gR1 ，则必须继续使用 sysdba 权限。</block>
  <block id="8ba2c0b91d9385cc8c42ee1f5f5cea73" category="list-text">SnapManager （ 3.0.3 或更高版本）支持备份直接存储在 ASM 磁盘组上的数据库，前提是该磁盘组还包含自动集群文件系统（ ACFS ）卷。</block>
  <block id="73655468de1dc60d31dd1b077917bd58" category="paragraph">这些文件由 SnapManager 间接保护，可以使用 ASM 磁盘组的其余内容进行还原，但 SnapManager （ 3.0.3 或更高版本）不支持 ACFS 。</block>
  <block id="88be558832652133dfd9e0ca074c29e2" category="admonition">ACFS 是 Oracle 11gR2 提供的一种多平台，可扩展的文件系统存储管理技术。ACFS 扩展了 ASM 功能，可支持在 Oracle 数据库外部维护的客户文件。</block>
  <block id="d25216aa923cf45e1871b558bdb6ae08" category="list-text">如果 SnapManager （ 3.0.3 或更高版本）磁盘组还包含 Oracle 集群注册表（ Oracle Cluster Registry ， OCR ）文件或表决磁盘文件，则支持备份存储在 ASM 磁盘组上的文件；但是，还原操作需要使用速度较慢，基于主机或部分文件快照还原（ PFSR ）方法。</block>
  <block id="02b5ae28d9b5c9c9dc7175a31ea237ec" category="paragraph">最好在不包含数据库文件的磁盘组上使用 OCR 和投票磁盘。</block>
  <block id="cb3bfbce9b94f5bc8f157936373eb587" category="list-text">用于 ASM 的每个磁盘只能包含一个分区。</block>
  <block id="d33ab264992e34aadc2a527342459260" category="list-text">托管 ASM 数据的分区必须正确对齐，以避免出现严重的性能问题。</block>
  <block id="f5de5a65bc4e9048e1d05180af7f44fb" category="paragraph">这意味着 LUN 的类型必须正确，分区的偏移量必须为 4 k 字节的倍数。</block>
  <block id="961708117976bb9b0b2a560acfd5b33c" category="admonition">有关如何创建与 4K 对齐的分区的详细信息，请参见知识库文章 1010717 。</block>
  <block id="e390a5ea01b7db9b98b396b0db379f2a" category="list-text">未在克隆规范中指定 ASM 配置。</block>
  <block id="177c21aebfebc49c8a468f8522c1bf85" category="paragraph">在将主机升级到 SnapManager （ 2.2 或更高版本）之前，您必须手动删除使用 SnapManager 2.1 创建的克隆规范中的 ASM 配置信息。</block>
  <block id="33c4d79bfb53fadd08fbe5787726d653" category="list-text">SnapManager 3.1 ， 3.1p1 和 3.2 或更高版本支持 ASMLib 2.1.4 。</block>
  <block id="aec13c503df9a1a03cd8e87d80cc1fb0" category="list-text">/var/log/SMO</block>
  <block id="e44d0e9b4fde265565c289bc9335959f" category="list-text">输入以下命令： smo profile create -profileprofileprofileprofile_name -profile-passwordprofile_password] -repositor-dbnamerepo_service_name-host-host-portrepo_port-login-usernamerepo_username-database-groupnamedb_dbname-hostdb_host （ -sid_host ） [-dursm-password] &lt;-snap-name]-snap-snap-snap-snap-man-name]-snap-snap-snap-snap-snap-snap-man-snap-snap-snap-man_policyman_name]</block>
  <block id="cc5794de1fdbb101219db783edc0d73b" category="summary">《适用于 UNIX ® 的 SnapManager for Oracle 3.4.2 管理指南》</block>
  <block id="c4ae7cbc536d5b9efb02798d83e46c05" category="doc">《 UNIX ® 管理指南》</block>
  <block id="66698321e2666cbd4ad475146eabde3b" category="paragraph">本指南介绍部署完成后如何在 UNIX 环境中管理适用于 Oracle 的 SnapManager 3.4.2 ，包括如何配置，升级和卸载产品，如何备份，还原和克隆数据库。</block>
  <block id="512d386629d1c220ac8a802ead4199d7" category="list-text">要删除用户的主机凭据，请输入以下命令： "mo credential delete -host-namehost_name-username-username"</block>
  <block id="9020134c277f6f5c948612954dce4033" category="paragraph">在二级存储上克隆或挂载且使用镜像保护策略的备份</block>
  <block id="50af6198a54cc7954ddaebb2cae52925" category="paragraph">如果 SnapManager 删除了主存储资源上用于备份的 Snapshot 副本，并且镜像了这些 Snapshot 副本，则下次备份到二级存储时将失败。</block>
  <block id="27a85295312ac9db4ab4e3f868a21a81" category="paragraph">从主存储资源释放备份时，备份使用的主资源（ Snapshot 副本）将被销毁，但备份元数据仍可用。SnapManager 不会在备份保留计数中考虑已释放的备份。</block>
  <block id="e519747a09ccc4de619709d5550586dd" category="paragraph">可以通过备份到二级存储来保护主存储上的备份。虽然 SnapManager 负责管理主存储上备份的保留和计划，但 Protection Manager 负责管理二级存储上备份的保留和计划。</block>
  <block id="56050c6a40a4fbb2786d6fdafa151292" category="paragraph">根据本地备份的保留策略，当本地备份到期时，它们将被删除或释放，具体取决于它们是否受保护。</block>
  <block id="f0c17472fce270984d76ca31b7db7aac" category="list-text">如果这些备份受到保护，则会释放本地备份。其存储资源或 Snapshot 副本将被删除，但备份仍保留在 SnapManager 存储库中，可从二级存储进行还原。您不必释放备份（例如，使用 backup free 命令）。备份将被释放，直到二级存储上不再存在备份，此时备份将被删除。</block>
  <block id="92ff090b0034a206396c5b26758aa697" category="list-text">如果这些备份不受保护，则会删除本地备份。</block>
  <block id="a68889846117b3e27f0eaf949b1015b7" category="list-text">在二级甚至三级存储上克隆受保护的备份。</block>
  <block id="eebc1f9c67c1b443da0c5fdc761503d9" category="list-text">克隆 RAC 数据库。</block>
  <block id="d6a4d63de43d6e05212da9a7a8b317f0" category="summary">只有在具有相应凭据的情况下，才能执行 SnapManager 操作。SnapManager 中的安全性受用户身份验证和基于角色的访问控制（ Role-Based Access Control ， RBAC ）的制约。通过 RBAC ，数据库管理员可以限制 SnapManager 对数据库中存放数据文件的卷和 LUN 执行的操作。</block>
  <block id="94acdb635a81f757a393b8ed038cad08" category="paragraph">数据库管理员使用 SnapDrive 为 SnapManager 启用 RBAC 。然后，数据库管理员在 Operations Manager 图形用户界面（ GUI ）或命令行界面（ CLI ）中为 SnapManager 角色分配权限，并将这些角色分配给用户。RBAC 权限检查会在 DataFabric Manager 服务器中进行。</block>
  <block id="174d5e0f93f05fb995a661894327d7a5" category="paragraph">除了基于角色的访问之外， SnapManager 还通过密码提示或设置用户凭据来请求用户身份验证，从而保持安全性。有效用户通过 SnapManager 服务器进行身份验证和授权。</block>
  <block id="f52d95ec7f663abecfa0ede3c301fa59" category="summary">通过基于角色的访问控制（ Role-Based Access Control ， RBAC ），您可以控制谁有权访问 SnapManager 操作。通过 RBAC ，管理员可以通过定义角色并将用户分配给这些角色来管理用户组。您可能希望在已安装 SnapManager RBAC 的环境中使用 RBAC 。</block>
  <block id="0df47ccec128fd3ce0aef6088b0da685" category="doc">关于基于角色的访问控制</block>
  <block id="d3680c0976401316dbc48f7d27ffa6c7" category="paragraph">RBAC 包括以下组件：</block>
  <block id="5499c0cca41190dcd3aa365ca40505eb" category="list-text">资源：用于存放构成数据库的数据文件的卷和 LUN 。</block>
  <block id="1627a44b83eae745d3cc0b5ca93a2473" category="list-text">功能：可对资源执行的操作类型。</block>
  <block id="05c317dfd99a01daddc2ae6db9179706" category="list-text">Users ：授予权限的人员。</block>
  <block id="7502ddac7e300bbb761b4deee3f436d6" category="list-text">角色：一组允许使用的资源和功能。您可以为应执行这些功能的用户分配特定角色。</block>
  <block id="d1a9daef082fadc85f5ab3a43fc8ea0c" category="paragraph">您可以在 SnapDrive 中启用 RBAC 。然后，您可以在 Operations Manager Web 图形用户界面或命令行界面中为每个角色配置特定功能。RBAC 检查在 DataFabric Manager 服务器中进行。</block>
  <block id="6a90d043483f7e3f1685121de9403fe8" category="paragraph">下表列出了一些角色及其在 Operations Manager 中设置的典型任务。</block>
  <block id="bbbabdbe1b262f75d99d62880b953be1" category="cell">Role</block>
  <block id="87c0d236e9519b9530b594d901408404" category="cell">典型任务</block>
  <block id="054d46ea9f234864313e2463de935c2a" category="paragraph">Oracle 数据库管理员</block>
  <block id="57f176c242319d2ac429ef22bca4a726" category="list-text">创建，维护和监控主机上的 Oracle 数据库</block>
  <block id="148238507d278ac626833b7282623d56" category="list-text">计划和创建数据库备份</block>
  <block id="232cca409885767d2239116a6be3f782" category="list-text">确保备份有效且可以还原</block>
  <block id="a72ef0e2a77144db980d5fdc285ed44e" category="list-text">克隆数据库</block>
  <block id="5e4bdc2cbfaa42a988fd7d021f4d88a5" category="paragraph">服务器管理员</block>
  <block id="dd6c37329e714282af3ea59f99b20598" category="list-text">设置存储系统和聚合</block>
  <block id="c53a61452906633f10948b2be075edc3" category="list-text">监控卷的可用空间</block>
  <block id="b6c52bfe72b14840fc67374e5cd3adfd" category="list-text">根据用户的请求配置存储</block>
  <block id="e16434535968e13c6985348cb1f504e7" category="list-text">配置和监控灾难恢复镜像</block>
  <block id="5f1063c58d466f081d28832d42bef7b2" category="paragraph">存储架构师</block>
  <block id="d00c148340365e48161b17787c27ea45" category="list-text">制定有关存储的架构决策</block>
  <block id="88ed17a92b97c78298850c37751ec1a8" category="list-text">规划存储容量增长</block>
  <block id="094b6670d6de59fde54053f662736158" category="list-text">规划灾难恢复策略</block>
  <block id="7315f6ce414d8e530fd0b17d6e5d7979" category="list-text">将能力委派给团队成员</block>
  <block id="48039c845e26895a45d6d5e49c05397f" category="paragraph">如果正在使用 RBAC （这意味着已在 SnapDrive 中安装 Operations Manager 并启用 RBAC ），则存储管理员需要在数据库文件的所有卷和存储系统上分配 RBAC 权限。</block>
  <block id="a8bd9f7a7c5cd7750529de24f82396ef" category="summary">SnapManager 在操作期间使用 oratab 文件来确定 Oracle 数据库主目录。Oracle 数据库的条目必须位于 oratab 文件中， SnapManager 才能正常工作。oratab 文件是在 Oracle 软件安装期间创建的。</block>
  <block id="5fd34256481ff6570674f79dea053531" category="doc">使用 oratab 文件定义数据库主目录</block>
  <block id="3ddd333f3c8efc82ccb914d34411016d" category="paragraph">根据主机操作系统， oratab 文件位于不同位置，如下表所示：</block>
  <block id="1af248136829615eac4fb39a00df1558" category="cell">主机操作系统</block>
  <block id="24f9e53eb92c0995d04433c1f7a4c9c0" category="cell">文件位置</block>
  <block id="edc9f0a5a5d57797bf68e37364743831" category="paragraph">Linux</block>
  <block id="2c0b0433aa1c96a2be6f40d9e71bc6af" category="paragraph">/etc/oratab</block>
  <block id="eaf36c98b91893b7f79bd5184a23d377" category="paragraph">Solaris</block>
  <block id="16ab0c0c3517f8fc29e1515da8ddf176" category="paragraph">/var/opt/oracle/oratab</block>
  <block id="23802d94b756cf69028557bea156ab1a" category="paragraph">IBM AIX</block>
  <block id="127ba117d3e029596da19fe7a1ac14e5" category="paragraph">示例 oratab 文件包含以下信息：</block>
  <block id="8d917153a0db101e8f1b361713327160" category="admonition">安装 Oracle 后，您必须确保 oratab 文件位于上表中指定的位置。如果 oratab 文件不在您的操作系统中的正确位置，您必须联系技术支持以获得帮助。</block>
  <block id="1483775d8f6f3ffc6bbf2855a65487ed" category="paragraph">/vol/volA</block>
  <block id="1606a3d69e4b3b26daf9d1207594b66f" category="summary">您可以还原主存储上的本地备份。整个过程使用适用于 Oracle 的 SnapManager 来执行。</block>
  <block id="23b18fa8792c9ae16ce8a1b820ceec1b" category="doc">使用 SnapManager for Oracle 在主存储上还原本地备份</block>
  <block id="edc09536da99fc5b3a159cac0de938c6" category="paragraph">您可以还原主存储上的本地备份。整个过程使用适用于 Oracle 的 SnapManager 执行。</block>
  <block id="5ce9da95f67b2a169f71703fc19cafe8" category="paragraph">您还可以预览有关备份还原过程的信息。您可能希望执行此操作以查看有关备份的还原资格的信息。SnapManager 会分析备份上的数据，以确定是否可以使用基于卷的还原或基于文件的还原方法来完成还原过程。</block>
  <block id="2e19e0e68ba397f27a3ddb2d412e0fdb" category="paragraph">还原预览显示以下信息：</block>
  <block id="68b08a0131b06f835dc284f4514ba664" category="list-text">将使用哪种还原机制（快速还原，存储端文件系统还原，存储端文件还原或主机端文件副本还原）来还原每个文件。</block>
  <block id="ee98a0dcc6282073b512a7ac0e5c004d" category="list-text">为什么不使用更高效的机制来还原每个文件。</block>
  <block id="5d676b5a5d5f8238d0003230d3c0a0d1" category="paragraph">在还原计划预览期间， SnapManager 不会还原任何内容。预览最多可显示 20 个文件的信息。</block>
  <block id="e48d4b0fdc2d01bfcb3957d7cdadbddc" category="paragraph">如果要预览数据文件的还原，但未挂载数据库，则 SnapManager 会挂载数据库。如果无法挂载数据库，则操作将失败， SnapManager 会将数据库返回到其原始状态。</block>
  <block id="36c5ce0ba1fff41940f369eda077b766" category="list-text">在存储库树中，右键单击要还原的备份，然后选择 * 还原 * 。</block>
  <block id="ec2f872a052ce8a242bf01422fa74a56" category="list-text">在还原和恢复向导欢迎页面上，单击 * 下一步 * 。</block>
  <block id="59cf6a95b84eb8fcdef526043b89e094" category="list-text">在还原配置信息页面上，选择 * 使用控制文件完成数据文件 / 表空间还原 * 。</block>
  <block id="aa72ef29800a3743fd4f045c03b80cb2" category="list-text">单击 * 如果需要，允许关闭数据库 * 。</block>
  <block id="e385eec0f54813794281b1d3710364ae" category="paragraph">SnapManager 会根据需要更改数据库状态。例如，如果数据库处于脱机状态且需要联机，则 SnapManager 会强制其联机。</block>
  <block id="050d9618059c7b05e2107c15e310ae9f" category="list-text">在恢复配置信息页面上，单击 * 所有日志 * 。</block>
  <block id="04d0876ae466eb569869734eb69536eb" category="paragraph">SnapManager 会将数据库还原并恢复到最后一个事务，并应用所有必需的日志。</block>
  <block id="2db554020b55b45e3640e4a195312e6f" category="list-text">在 Restore Source Location Configuration 页面上，查看有关主备份的信息，然后单击 * 下一步 * 。</block>
  <block id="1bf61f664cc4a024990a978feec41226" category="paragraph">如果备份仅存在于主存储上，则 SnapManager 会从主存储还原备份。</block>
  <block id="49862dfbea350ddd5e21c7bece5edb7c" category="list-text">在卷还原配置信息页面上，选择 * 尝试卷还原 * 以尝试卷还原方法。</block>
  <block id="c3386cc31d9fafacbeddd627610e2e84" category="list-text">单击 * 回退到基于文件的还原 * 。</block>
  <block id="b2ab78b3fc261cae57ed3ad86639f662" category="paragraph">这样，如果无法使用卷还原方法， SnapManager 就可以使用基于文件的还原方法。</block>
  <block id="530b7ac2a25d14fd697742d1f15246c5" category="list-text">单击 * 预览 * 可查看快速还原的资格检查以及有关强制检查和可覆盖检查的信息。</block>
  <block id="9f8d129128cc7fa05eec520037b964cf" category="list-text">在 Perform Operation 页面上，验证您输入的信息，然后单击 * 还原 * 。</block>
  <block id="dd91792938288317a76b2a6740aaec27" category="list-text">要查看有关此过程的详细信息，请单击 * 操作详细信息 * 。</block>
  <block id="a59f5fd989dc21f42fc7bb43b46f49bc" category="list-text">要显示有关特定配置文件的 SnapManager 历史记录操作的信息，请输入以下命令： `smo history show -profileprofile_name`</block>
  <block id="5f5f2339c8b25fb1c4392644f14c1b46" category="summary">您可以使用命令行界面 \ （ cli\ ）在一个或多个 SnapManager 服务器主机上执行滚动升级。然后，升级后的 SnapManager 服务器主机只能使用更高版本的 SnapManager 进行管理。</block>
  <block id="82d83828aa3f5d66b2c0bf364afc153c" category="list-text">要在单个主机上执行滚动升级，请输入以下命令： "morepository rollingupgrade-repository-dbnamerepo_service_name-host-login-usernamerepo_username-portrepo_port-upgradehosthost_wing_target_database-force "-quiet | -verbose</block>
  <block id="a87ff0fe42d9c0a0b654487a85309983" category="list-text">要在多个主机上执行滚动升级，请输入以下命令： "morepository rollingupgrade-repository-dbnamerepo_service_name-host-login-usernamerepo_username-portrepo_port-upgradehosthost_wing_target_database1 ， host_wing_target_database2-force [' -verbose</block>
  <block id="0e46549100f29c70052e3d7be02b708d" category="admonition">对于多个主机，请输入以逗号分隔的主机名，并确保在逗号和下一个主机名之间不包含任何空格。如果您使用的是 Real Application Clusters （ RAC ）配置，则必须手动升级所有与 RAC 关联的主机。您可以使用 -allhosts 对所有主机执行滚动升级。</block>
  <block id="4ebd8f0fc6c1b90d9952acc2af0d88e3" category="list-text">要对存储库数据库上的所有主机执行滚动升级，请输入以下命令： "morepository rollingupgrade-repository-dbnamerepo_service_name-host-login-usernamerepo_username-portrepo-allhosts-force "-quiet | -verbose ]"</block>
  <block id="5ec044ebce83db26193e48f8369fa054" category="inline-xref-macro">执行滚动升级的前提条件</block>
  <block id="0b06efda8d30e92da145af59971dd4f5" category="paragraph"><block ref="0b06efda8d30e92da145af59971dd4f5" category="inline-xref-macro-rx"></block></block>
  <block id="5a0f22990b70c10583edc4f525706081" category="summary">您可以运行 protection-policy 命令列出可应用于配置文件的保护策略。创建新配置文件或更新现有配置文件时，可以应用保护策略。您也可以使用 Protection Manager 控制台为配置文件设置保护策略。</block>
  <block id="90a9f6de6ef7157339a96e466fd785b1" category="doc">smo protection-policy 命令</block>
  <block id="b50f5e4283d079924e4d0e2bd8705cc5" category="admonition">要使用此命令，必须在服务器上安装 Protection Manager 和 SnapDrive 。</block>
  <block id="7e66f49f33a74b1af3356b172d42fbfe" category="list-text">* 列表 *</block>
  <block id="b49cb5a470046ee976dfc3fc178ed737" category="paragraph">显示可在配置文件上设置的保护策略列表。</block>
  <block id="9e480fed3b624e4673076c03d57855ac" category="paragraph">以下示例列出了可设置为配置文件的保护策略：</block>
  <block id="70ac42f673b1e0bdb953c532979d84c7" category="summary">升级后， SnapManager 会为现有备份分配默认备份保留类。您可以根据备份要求修改默认保留类值。</block>
  <block id="dc83fd338d1808407de970398071826b" category="list-text">SnapManager 支持文件系统或 ASM 磁盘组中的控制文件，不支持原始设备上的控制文件。</block>
  <block id="0e960c68d9d2de94a7db16642f295569" category="list-text">在 Red Hat Enterprise Linux （ RHEL ）和 Oracle Enterprise Linux 4.7 ， 5.0 ， 5.1 ， 5.2 和 5.3 中，如果在多路径网络 I/O （ MPIO ）环境中使用动态多路径（ DMP ）在原始设备上部署 Oracle ，则不支持 ext3 文件系统。</block>
  <block id="98a6c3ae059cb81291374c15645d3f92" category="paragraph">只有在使用适用于 UNIX 的 SnapDrive 4.1 或更早版本时，才会在 SnapManager 中注意到此问题描述。</block>
  <block id="0b17d3b304c59fdbf500861a0a057564" category="list-text">RHEL 上的 SnapManager 不支持使用 * parted * 实用程序对磁盘进行分区。</block>
  <block id="e055f8aac7347b311eea4c6b6193aac2" category="paragraph">这是一个具有 RHEL * parted * 实用程序的问题描述。</block>
  <block id="e08a63ff0a87bfd2346e0fa2f68e60d4" category="list-text">在 RAC 配置中，从 RAC 节点 A 更新配置文件名称时，此配置文件的计划文件仅针对 RAC 节点 A 进行更新</block>
  <block id="5de9f57758272e5ecfb4322565fcb8b9" category="paragraph">RAC 节点 B 上同一配置文件的计划文件不会更新，并且包含先前的计划信息。从节点 B 触发计划备份后，计划的备份操作将失败，因为节点 B 包含早期的计划文件。但是，已从重命名配置文件的节点 A 成功执行计划的备份操作。您可以重新启动 SnapManager 服务器，以便在节点 B 上接收配置文件的最新计划文件</block>
  <block id="ba227880eeb1faba48cbd3039deb8a9a" category="list-text">SnapDrive for UNIX 在某些平台上支持多种类型的文件系统和卷管理器。</block>
  <block id="c823a8783ad9f205e0cddf57d1634458" category="paragraph">必须在 SnapDrive 配置文件中将用于数据库文件的文件系统和卷管理器指定为默认文件系统和卷管理器。</block>
  <block id="742ca079b8a571814908c3cfb70ee24d" category="list-text">卷中的所有 LUN 应位于卷级别或 qtree 内，但不能同时位于这两者。</block>
  <block id="2cc13131f6e1ea6f6315d58990108ae4" category="paragraph">这是因为，如果数据驻留在 qtree 上，而您挂载了卷，则 qtree 内的数据将不受保护。</block>
  <block id="54a0aa262d08b22c57f04afc37411eb9" category="list-text">如果在同一主机上对不同的 ASM 数据库同时运行 SnapManager 操作，则备份创建可能会失败。</block>
  <block id="032198f63daaa0c134bee2aa7bd14865" category="list-text">如果通过 ASM 在 10gR2 和 11gR2 RAC 数据库上同时执行备份或克隆操作，则其中一个备份或克隆创建操作将失败。</block>
  <block id="cabb8306dd03bd004f4baf30f8e530af" category="paragraph">此故障是由于已知的 Oracle 限制造成的。</block>
  <block id="a9c78d5307d417e708e53ec4bf5f162d" category="list-text">与 Protection Manager 集成的 SnapManager 支持将主存储中的多个卷备份到二级存储中的单个卷，以实现 SnapVault 和 qtree SnapMirror 。</block>
  <block id="8e8dafe81d2db17161b28e631033e0fe" category="paragraph">不支持动态二级卷大小调整。有关此问题的详细信息，请参见《适用于 DataFabric Manager Server 3.8 的 Provisioning Manager 和 Protection Manager 管理指南》。</block>
  <block id="f58992cefafe5a75f774408e63e17a71" category="list-text">SnapManager 不支持使用后处理脚本存储备份。</block>
  <block id="5610a03160d9a82865f6b37fbd222f75" category="list-text">升级到 SnapManager 3.4 或更高版本后，使用 SnapManager 3.3.1 的后处理脚本计划的任何备份都无法更新。</block>
  <block id="3cf25cd0b97a27a9e8fb078de85dfba3" category="paragraph">您必须删除现有计划并创建新计划。</block>
  <block id="aaf697831e3275025d7f72f39dd6e369" category="list-text">如果您使用间接方法执行还原操作，并且恢复所需的归档日志文件仅在二级存储系统的备份中可用，则 SnapManager 将无法恢复数据库。</block>
  <block id="5bb25284478f4f7483ae6a1280b07662" category="paragraph">这是因为 SnapManager 无法从二级存储系统挂载归档日志文件的备份。</block>
  <block id="51be0cfb0d39f9a8491d55781332813d" category="list-text">当 SnapManager 执行卷还原操作时，不会清除在还原相应备份之后创建的归档日志备份副本。</block>
  <block id="c4bc1805ecc6da770b15e54dc5381908" category="paragraph">如果数据文件和归档日志文件目标位于同一个卷上，则在归档日志文件目标中没有可用的归档日志文件时，可以通过卷还原操作来还原数据文件。在这种情况下，在备份数据文件后创建的归档日志 Snapshot 副本将丢失。</block>
  <block id="fa1e1cb2e97981ad7640bed7eff60054" category="paragraph">您不应从归档日志目标中删除所有归档日志文件。</block>
  <block id="954e2e54e36b920982c38d97f0b948de" category="list-text">在 ASM 环境中，如果 Oracle 集群注册表（ Oracle Cluster Registry ， OCR ）和表决磁盘文件共存于包含数据文件的磁盘组中，则快速还原预览操作会为 OCR 和表决磁盘显示错误的目录结构。</block>
  <block id="68f9d31b5c8cfc381539d53cb1fc7946" category="list-text">由于包含灵活卷的存储系统发现和处理索引节点的速度较快，因此您无法查看克隆拆分操作进度中介于 0 到 100 之间的任何数值。</block>
  <block id="ceaae1d6ba8a2e40d0343e7483f12065" category="list-text">SnapManager 不支持仅为成功的克隆拆分操作接收电子邮件。</block>
  <block id="2d923f95509ab73653f8406e2072fb9c" category="list-text">SnapManager 仅支持拆分 FlexClone 。</block>
  <block id="1c254a885cbc2bdcebdf34d2c41546ba" category="list-text">由于恢复失败，克隆使用外部归档日志文件位置的 RAC 数据库的联机数据库备份失败。</block>
  <block id="2d326bc3bf7f94b38d3fdac3b60da343" category="inline-link">Oracle 支持站点</block>
  <block id="c128202cd30c95792875779ae67a6cb1" category="paragraph">克隆失败，因为 Oracle 找不到要从外部归档日志位置恢复的归档日志文件并将其应用。这是 Oracle 的一个限制。有关详细信息，请参见 Oracle 错误 ID ： 13528007 。Oracle 不会应用中非默认位置的归档日志<block ref="5f879919bb80cf412d34d34a1e8097c7" category="inline-link-rx"></block>。您必须具有有效的 Oracle Metalink 用户名和密码。</block>
  <block id="ac7545ab93fcef8ea9c6860a322fcab8" category="list-text">如果 UNIX 客户端上没有可用的 Java Runtime Environment （ JRE ），则 SnapManager 不会在 Mozilla Firefox 中显示图形用户界面。</block>
  <block id="61dd07ad1918d7cf9bdcee9a31b6ad94" category="list-text">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则不支持 SnapVault 后处理脚本。</block>
  <block id="0ab370a3686b94b21cac9c0912b52fa2" category="list-text">如果您使用的是 ONTAP ，则无法对在已建立 SnapMirror 关系的卷中创建的备份执行基于卷的 SnapRestore （ VBSR ）。</block>
  <block id="a00339b94145529cb1e13af54011b16e" category="paragraph">这是因为 ONTAP 限制，它不允许您在执行 VBSR 时中断关系。但是，只有在卷建立了 SnapVault 关系时，才能对最后创建的备份或最近创建的备份执行 VBSR 。</block>
  <block id="0cea9bd980c7899b081d1ada0c14cfaa" category="list-text">如果您使用的是在 7- 模式下运行的 Data ONTAP ，并且希望对在已建立 SnapMirror 关系的卷中创建的备份执行 VBSR ，则可以在 SnapDrive for UNIX 中将 override-vbsr-snapmirror-check 选项设置为 on 。</block>
  <block id="71d5c2b9fcd129a7e971457183ec8ce9" category="paragraph">SnapDrive 文档提供了有关此问题的详细信息。</block>
  <block id="b2e9f4a4c85068ac17203e85b547a148" category="summary">在执行滚动升级之前，您必须确保您的环境满足特定要求。</block>
  <block id="1571511b955a048b42b37a40212acd60" category="list-text">必须安装要升级到的 SnapManager 版本支持的 SnapDrive for UNIX 版本。</block>
  <block id="f5ac1996a7ea0cf02cc8aa20b87c5e2c" category="paragraph">SnapDrive 文档包含有关安装 SnapDrive 的详细信息。</block>
  <block id="be0e7083d3a52aa7ab3d4cc31a892145" category="paragraph">在其他主机上计划或运行的操作将等待滚动升级完成。</block>
  <block id="9b61c6c91828a563c2279a2ee82965fc" category="admonition">建议您在存储库最不繁忙的情况下执行滚动升级，例如周末或未计划操作。</block>
  <block id="966f85165c66d355cf01c179bff28280" category="list-text">要指定备份不受限制地保留，请输入以下命令： `smo backup update -profileprofileprofile_name ｛ -labelLabel [data | -archivelogs] | -idd ｝ -retain -unlimited`</block>
  <block id="c452982e0dde818cdab9672ac4d85d62" category="summary">已使用 SnapDrive 启用基于 SnapManager 角色的访问控制 \ （ RBAC ）。安装 SnapDrive 后， RBAC 默认处于禁用状态。在 SnapDrive 中启用 RBAC 后， SnapManager 会在启用 RBAC 的情况下执行操作。</block>
  <block id="1baccc0006c3246562878aa200b0eb4c" category="doc">启用基于角色的访问控制</block>
  <block id="e458b5d23c092d9faa5475f15de9d03f" category="paragraph">SnapManager 基于角色的访问控制（ Role-Based Access Control ， RBAC ）可使用 SnapDrive 启用。安装 SnapDrive 后， RBAC 默认处于禁用状态。在 SnapDrive 中启用 RBAC 后， SnapManager 会在启用 RBAC 的情况下执行操作。</block>
  <block id="fa4c4abbaa085c05b3adc2bec7e03292" category="paragraph">SnapDrive 中的 SnapDrive.config 文件设置了许多选项，其中一个选项启用了 RBAC 。</block>
  <block id="bf2920f58d9e78819a143bcf54414547" category="paragraph">SnapDrive 文档包含有关 SnapDrive 的详细信息。</block>
  <block id="5f1c8ee6e61455d8f6d8f9016edaa351" category="list-text">在编辑器中打开 SnapDrive.conf 文件。</block>
  <block id="dfa4720a8e4076b8624b60d12ac2d0bf" category="list-text">通过将 RBAC 方法参数的值从原生更改为 DFM 来启用 RBAC 。</block>
  <block id="7f9dd549fa013b6582b1de777e9605ab" category="paragraph">此参数的默认值为原生，它将禁用 RBAC 。</block>
  <block id="dca2b1e91be365bd8a4b6c5a2887cd64" category="summary">如果 SnapManager 安装在 Solaris 上，则可以将 SnapManager 配置为支持 Veritas Storage Foundation for Oracle RAC \ （ SFRAC\ ）环境。</block>
  <block id="fb583e11b041e06d766643f355a5519d" category="doc">配置 SnapManager 以支持 Veritas SFRAC 环境</block>
  <block id="4a644802bb547c0b093d3e669f44f6c8" category="paragraph">如果 SnapManager 安装在 Solaris 上，则可以将 SnapManager 配置为支持 Veritas Storage Foundation for Oracle RAC （ SFRAC ）环境。</block>
  <block id="eb04c7689114472f8b48c83301666674" category="list-text">主机必须安装 Solaris ，主机实用程序和 Veritas 。</block>
  <block id="ea6fae188ad9570029fd2218a30116eb" category="list-text">使用适用于 UNIX 的 SnapDrive 为 SnapManager 创建共享磁盘组和文件系统，以便文件系统同时挂载在 Real Application Clusters （ RAC ）的两个节点上。</block>
  <block id="dd9d0020d8b3680e15e86d0e1db785f5" category="paragraph">有关如何创建共享磁盘组和文件系统的信息，请参见 SnapDrive 文档。</block>
  <block id="6324a467494b99f6d5da32cf8837deaf" category="list-text">安装和配置要挂载到共享文件系统上的 Oracle 数据库。</block>
  <block id="862b26190153af483301212d05f5fa77" category="list-text">在 RAC 的任一节点上启动数据库实例。</block>
  <block id="5d43488d64df5ea393acbc50a2977bf6" category="paragraph">凭据文件位于 /root/.NetApp/SMO/3.3.0 。</block>
  <block id="a5d4eb87bf3363828cd125dba77170ec" category="summary">资源池是指一组未使用的物理存储（例如存储系统或聚合），可从中配置新卷或 LUN 以包含数据。如果将存储系统分配给资源池，则该存储系统上的所有聚合都可供配置。</block>
  <block id="8afd4bd2ca0358c73be825380e11ca41" category="doc">什么是资源池</block>
  <block id="56dea12c73addb6cb18f33bfa954766d" category="paragraph">存储管理员可以使用 Protection Manager 的控制台为备份和镜像副本分配资源池。然后，配置应用程序可以从资源池中的物理资源自动配置卷，以包含备份和镜像副本。</block>
  <block id="d5b398740b971d11200b159c381526f0" category="paragraph">对于受保护的配置文件， SnapManager 将显示有关配置文件的信息，并指示是否已为该配置文件分配存储资源池。否则，该配置文件将被视为 " 不合规 " 。 将存储资源池分配给相应配置文件的数据集后，该配置文件将被视为 " 符合 " 。</block>
  <block id="dd0ff9ca4fe5346f378f8a7c7ddf2080" category="summary">使用快速还原实现最佳还原性能时，需要遵循特定规则。在某些情况下，您无法使用快速还原。</block>
  <block id="0adaa68594cf0ef9bad44e94476bc9ad" category="doc">有关何时可以使用快速还原的准则</block>
  <block id="544514925a7bf007097fd87ca8d3aa03" category="paragraph">要获得最佳还原性能（卷还原或完整磁盘组还原），必须遵循以下规则：</block>
  <block id="e218cd99bf1ed3e39e90919f7ab9dcea" category="list-text">只有完整备份的完全还原才有资格进行快速还原。</block>
  <block id="32eea0cf03d507e02c95f6568c2ab500" category="list-text">只有数据文件才有资格进行快速还原。</block>
  <block id="4e8ffbe2635f5c15e832d8e241a7209c" category="list-text">数据文件必须是卷中唯一符合快速还原条件的文件。</block>
  <block id="20cc04e60b25dbfcef53b80c24d3163d" category="paragraph">尽管临时数据文件可以驻留在卷中，但控制文件，日志， pfiles 或其他文件必须驻留在与数据文件不同的卷上。您必须设置一个 Oracle 数据库，其中的数据文件与控制文件，归档日志和联机日志文件位于不同的卷上。</block>
  <block id="debd788cae15370c128ab8108b459647" category="list-text">卷中只能包含一个数据库的数据文件。</block>
  <block id="a2b3453e456d1a066fd09876a6722818" category="list-text">可以使用多个文件系统，但这些文件系统中的文件只能是一个数据库的数据文件。</block>
  <block id="f55f3a2810b35ec821fb9d02e793e430" category="list-text">对于 ASM 数据库，每个数据库都必须使用自己的 ASM 磁盘组，并且 ASM 数据库不能与任何其他 ASM 数据库共享存储。</block>
  <block id="597e82df463c19d77dd1a09623cb474a" category="admonition">要使用快速还原检查先前创建的备份是否可还原，您可以使用 smo backup restore 命令的 -preview 选项。</block>
  <block id="fdfd0840d5a9b298c6900a0467dfc6d2" category="paragraph">在以下情况下，无法使用快速还原过程：</block>
  <block id="59a3e63aeaa0cc9d24ebf29c266fdd39" category="list-text">进行部分备份时</block>
  <block id="36b9c77174adcfd1b57afe3c5ddd9977" category="list-text">从二级存储备份时，如果备份也位于主存储上</block>
  <block id="c668ee003199f69d7bf4949e8d32e2b7" category="paragraph">您不能使用基于文件或基于卷的还原来还原这些。</block>
  <block id="795fa185c4e963a3dedf2d71fe9c9bf5" category="list-text">使用 SnapVault 保护的备份</block>
  <block id="b720e00182230219263ed0b97bed769b" category="paragraph">快速还原过程不能用于在上次受保护备份之前创建的备份。但是，您可以对上次受保护备份之后创建的备份使用快速还原过程。例如，请考虑备份 A ， B 和 CB 是使用 SnapVault 传输到二级存储的最后一个备份。您可以快速还原 B 和 C ，但无法快速还原 A ，因为它是在上次受保护备份之前创建的。SnapVault 需要一个基线 SnapVault 来计算时间差，并在下次将备份传输到二级存储时发送到二级存储。最后一个受保护备份充当基线 Snapshot 副本。因此，使用快速还原过程会使 SnapVault 无法识别基线。</block>
  <block id="1f7558756ae6f9d52ce31f51c41ac995" category="list-text">使用在将卷还原到的 Snapshot 副本之后创建的 Snapshot 副本的 FlexClone 或 LUN 克隆</block>
  <block id="9aa96b4fdfce48af3d5258d4a5585773" category="paragraph">例如，克隆可能是 SnapManager 稍后挂载或克隆的备份的结果。</block>
  <block id="176e3a78f2dff76c99af6ce11b91de8d" category="list-text">不属于活动 SnapDrive Snapshot 副本的 LUN</block>
  <block id="75a0dd3f3bf2d7258434640945ab2761" category="paragraph">您不能对同一备份执行快速还原以及其他类型的还原。例如，如果一个数据卷可以使用快速还原过程进行还原，但另一个数据卷无法进行还原，则使用快速还原过程也不会还原这两个数据卷。在这种情况下，您可以选择基于文件的还原。</block>
  <block id="ebce74f6e7c96c2ae6a04663841d2184" category="paragraph">此外，您还应考虑以下关于数据库还原的几点：</block>
  <block id="048a4f62544dd2deb2c9b3adaeac4887" category="list-text">SnapManager 从不还原归档日志或重做日志，但会挂载归档日志文件的备份并使用它们进行恢复。</block>
  <block id="dcdd4202abe5c614b791e976be30769a" category="list-text">SnapManager 从不使用卷还原来还原控制文件。</block>
  <block id="77253357e2bb2e22536e8d56ffd17a42" category="list-text">如果您要还原控制文件和数据文件， SnapManager 将通过两个步骤执行还原。</block>
  <block id="a15ed11d8dc8d030b0e962553b4a799b" category="paragraph">SnapManager 首先还原控制文件，然后还原数据文件。</block>
  <block id="cb2df21a113c823ad259ec4418e3f34e" category="list-text">如果 SnapManager 发现临时文件与标准表空间文件位于同一个卷中，则无需执行问题描述覆盖即可执行卷级还原。</block>
  <block id="605f5f454b7aca51ad33da4cffd29847" category="paragraph">卷还原后，此临时表空间将恢复联机。</block>
  <block id="50249be690c89e83e750cc5b374705ba" category="paragraph"><block ref="50249be690c89e83e750cc5b374705ba" category="inline-xref-macro-rx"></block></block>
  <block id="3ad019372d2cfb0cacd6b143f13af20c" category="summary">SnapManager 具有某些卷管理限制，这些限制可能会影响您的环境。</block>
  <block id="2ed5a82d5a022e777d7a47a5c90ea987" category="doc">卷管理限制</block>
  <block id="b6559a70effd32b7ca74836fa20fcc7c" category="paragraph">一个数据库可以有多个磁盘组；但是，以下限制适用于给定数据库的所有磁盘组：</block>
  <block id="7f34a03bd3170ce65d996e9e72742494" category="list-text">数据库的磁盘组只能由一个卷管理器管理。</block>
  <block id="d5c532eb9566a73d17a7aa4cd544d211" category="list-text">不支持使用逻辑卷管理器支持的原始设备来保护 Oracle 数据。</block>
  <block id="515f69648831be56e4a8cf642163d2e1" category="paragraph">原始设备存储和自动存储管理（ Automatic Storage Management ， ASM ）磁盘组必须直接在物理设备上配置。在某些情况下，需要进行分区。</block>
  <block id="0c33a8c196b454d80c55fdce8d773d82" category="list-text">没有逻辑卷管理的 Linux 环境需要一个分区。</block>
  <block id="bc81844b5eefc409963bc51058c48ee6" category="paragraph">对于自动存储管理（ ASM ），磁盘组名称必须与 SnapManager 克隆的磁盘组相同，以便将备份注册到 Oracle 恢复管理器（ RMAN ）中。可以通过查看备份属性来获取此名称。</block>
  <block id="b6498611dbc7d0f6b6fb3fc26e56c70d" category="summary">创建配置文件时，您可以为此配置文件分配特定的 Oracle 数据库用户帐户。您可以为配置文件设置保留策略，为使用此配置文件的所有备份启用对二级存储的备份保护，以及为每个保留类设置保留计数和持续时间。</block>
  <block id="a59841919a919ba215830b296430b4fb" category="paragraph">创建配置文件时，您可以为此配置文件分配特定的 Oracle 数据库用户帐户。您可以为配置文件设置保留策略，为使用此配置文件的所有备份启用二级存储备份保护，以及为每个保留类设置保留计数和持续时间。</block>
  <block id="c6811cb3a4c6e2634867fb1d8e018e42" category="paragraph">创建配置文件时， SnapManager 会执行还原资格检查，以确定可用于还原数据库的还原机制。如果数据库位于 qtree 上，并且父卷不符合快速或基于卷的还原条件，则分析可能会出错。</block>
  <block id="856be26d149499821ba7ff1670b23e7b" category="list-text">要使用用户名，密码和端口（ Oracle 身份验证）创建配置文件，请输入以下命令： smo profile create -profileprofile "-profile-passwordprofile_password] -repositor-dbnamerepo_dbname-host-host-portrepo_port-login-usernamerepo_username-database-dbnamedb_dbname-hostdb_host "-siderdb_sider_dsb] -login （ -userwordynms-username ） [-snap-snap-man-snap-snap-name</block>
  <block id="57edc38feba8423f486bed77e03a66f9" category="paragraph">'-force]-noprompt]'</block>
  <block id="715f46869c8ff279758e1c914135464c" category="paragraph">'[ 静默 &gt; 详细信息 ]'</block>
  <block id="72599423c08dabe75d5262fff0c15ddf" category="admonition">对于 Real Application Clusters （ RAC ）环境，在创建新配置文件时，必须将 db_unique_name 参数的值提供为 db_dbname 。</block>
  <block id="ec3676c6d0d3607a5d7c4407ebe3b69c" category="paragraph">* 您希望使用操作系统身份验证来创建配置文件 *</block>
  <block id="f5c1e0145b32584039c8da97a631722c" category="paragraph">为 DBA 组中的操作系统帐户指定变量（通常是用于安装 Oracle 的帐户）。请指定以下内容，而不是添加用户名，密码和端口：</block>
  <block id="6a1da82bfceb2c19e3733407d191597d" category="list-text">-osaccountaccountaccount_name 作为操作系统帐户的名称</block>
  <block id="b35e8e74ef264ec7ae85a990d0a18027" category="list-text">-osgroupos 组作为与操作系统帐户关联的组</block>
  <block id="1956611b5f6ac2e360cc4802c0966cd9" category="paragraph">* 要使用自动存储管理（ Automatic Storage Management ， ASM ）实例身份验证来创建配置文件 *</block>
  <block id="0c067ee26caadcec80913fba24f45066" category="paragraph">指定 ASM 实例身份验证的凭据。</block>
  <block id="f2cb53fcce1ffd0b06a4de7b36da4608" category="list-text">-asmusernameasmintation_username 是用于登录到 ASM 实例的用户名。</block>
  <block id="ac7d3e0454a8f4ef916350422d2e7932" category="list-text">-asmpasswordasminstance_password 是用于登录到 ASM 实例的密码。</block>
  <block id="b9e918d8d1945989659b8a5a7f75040c" category="paragraph">指定数据库登录详细信息。如果密码包含感叹号（！），美元符号（ $ ）或重音符（` ）等特殊字符，则 SnapManager 不允许您从命令行界面（ CLI ）创建经过数据库身份验证的配置文件。</block>
  <block id="7e9a06bee0e6d4216859f84d5ff3d474" category="paragraph">* 您正在使用目录作为 Oracle Recovery Manager （ RMAN ）存储库 *</block>
  <block id="8d2f89829a88a3a2e982f89cd6239a5b" category="list-text">-tnsnametnssname 作为 tnsnames.ora 文件中定义的 tnsnamname 。</block>
  <block id="d29110d7790a4a18c209868d56f137cf" category="list-text">-login -usernameusername 作为连接到 RMAN 目录所需的用户名。</block>
  <block id="41ce52f407abba3e630a2243e2f38763" category="paragraph">如果未指定， SnapManager 将使用操作系统身份验证信息。您不能对 RAC 数据库使用操作系统身份验证。</block>
  <block id="c1caaddf8c0077437af525fb89779f1a" category="list-text">-passwordpassword 作为连接到 RMAN 目录所需的 RMAN 密码。</block>
  <block id="afe802c34594f0e7399aff953558ee49" category="paragraph">* 您正在使用控制文件作为 RMAN 存储库 *</block>
  <block id="ebb81b4086ae27c1b3c9ca2b3d83131e" category="paragraph">指定 -controlfile 选项。</block>
  <block id="54169fc09d4dafb7e0d194225aa2bebc" category="paragraph">* 您要为配置文件启用备份保护 *</block>
  <block id="45c2797a5a03ff24504d9870c5abc490" category="list-text">-protect 用于启用备份保护。</block>
  <block id="33a5ee3a07661243c4dd1627f3f00b36" category="paragraph">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则此选项会在 Data Fabric Manager （ DFM ）服务器中创建一个应用程序数据集，并添加与数据库，数据文件，控制文件和归档日志相关的成员。如果数据集已存在，则在创建配置文件时会重复使用同一数据集。</block>
  <block id="df52f47fb8c6b70d4810f4475ff9d415" category="list-text">使用 -protection-policy policy 可以指定保护策略。</block>
  <block id="1152bdf76b2dc82942c43295cb18ff4a" category="paragraph">如果您使用的是在 7- 模式下运行的 Data ONTAP ，并且 SnapManager 与 Protection Manager 集成在一起，则必须指定其中一个 Protection Manager 策略。</block>
  <block id="a52f59c2b95f96b4693310eb4ea61df0" category="admonition">要列出可能的保护策略，请使用 smo protection-policy list 命令。</block>
  <block id="3542c8da81ac7d8d42b966fff7d15222" category="paragraph">如果您使用的是集群模式 Data ONTAP ，则必须选择 _SnapManager_cDOT_Mirror_ 或 _SnapManager_cDOT_Vault_Vault 。</block>
  <block id="8d572ad3c0279394139de1a7df653944" category="admonition">在以下情况下，配置文件创建操作失败：</block>
  <block id="38db496443a5437c04792be1ba678111" category="list-text">如果您使用的是集群模式 Data ONTAP ，但选择保护管理器策略</block>
  <block id="c90ad503ab3c3357cf20f8c3120f16ab" category="list-text">如果您使用的是在 7- 模式下运行的 Data ONTAP ，但选择 _SnapManager_cDOT_Mirror_ 或 _SnapManager_cDOT_Vault_policy</block>
  <block id="c233cccb77849b064530f0c6820406b6" category="list-text">如果您创建了 SnapMirror 关系，但选择了 _SnapManager_cDOT_Vault_policy 或创建了 SnapVault 关系，但选择了 _SnapManager_cDOT_Mirror_ 策略</block>
  <block id="1b35096731568bc5a10617277ef929b3" category="list-text">如果尚未创建 SnapMirror 或 SnapVault 关系，但选择了 _SnapManager_cDOT_Vault_or _SnapManager_cDOT_Mirror_ 策略</block>
  <block id="8b8f58f724eb2a2d6558530850d6e5be" category="list-text">-noprotect 表示不保护使用配置文件创建的数据库备份。* 注： * 如果指定 -protect 时未指定 -protection-policy ，则数据集将没有保护策略。如果在创建配置文件时指定了 -protect 且未设置 -protection-policy ，则可以稍后通过 smo profile update 命令进行设置，也可以由存储管理员使用 Protection Manager 控制台进行设置。</block>
  <block id="15812a7594b75651f6ea46ee8ed9f1da" category="list-text">-subjectsubject_text 指定创建新配置文件或现有配置文件时电子邮件通知的主题文本。如果未为此存储库配置通知设置，而您尝试使用命令行界面配置配置文件或摘要通知，则控制台日志中会记录以下消息： "MO-14577： Notification Settings not configureed" 。</block>
  <block id="9f04b5303a509202f2623ffc8bdceb97" category="paragraph">如果您已配置通知设置，并尝试使用命令行界面配置摘要通知，但未启用存储库的摘要通知，则控制台日志中会显示以下消息： "MO-14575 ： summary notification configuration not available for this repository______"</block>
  <block id="75694a3b79ff965cc5891a6dba7f6249" category="list-text">-protect 用于保护归档日志备份。</block>
  <block id="f8589bcb44f600f287cc2ae4b300eb24" category="list-text">-protection-policy 将保护策略设置为归档日志备份。</block>
  <block id="5ee76080a3967a5c7f63ca9ec84e099d" category="paragraph">归档日志备份会根据归档日志保护策略进行保护。数据文件备份会根据现有保护策略进行保护。</block>
  <block id="3f9d5e080943cc3074ff58927d566f37" category="paragraph">创建配置文件时， SnapManager 会分析这些文件，以备日后需要对配置文件中指定的文件执行基于卷的还原操作时使用。</block>
  <block id="f901a15300a364fae4673e491d93ccdf" category="list-text">自动存储管理（ ASM ）实例 OPatch 本地清单详细信息</block>
  <block id="50d77a5e144a91c67c15bf8a2ce9a93f" category="list-text">存储系统版本</block>
  <block id="a99fbf8e541682a7fd653c3c9beadc0f" category="list-text">Oracle oratab 文件</block>
  <block id="9ae9d97ca00ddf58d92312b0e04a38fa" category="list-text">Oracle 侦听器状态</block>
  <block id="f020824aedbdf8186183779afc52c4da" category="list-text">Oracle 网络配置文件（ listener.ora 和 tnsnames.ora ）</block>
  <block id="c49c85e10a2a92d6eead11e3d7637538" category="list-text">目标数据库类型（独立或实际应用程序集群（ RAC ））</block>
  <block id="352ae9162b8f1f3acb8fbaee1010ec41" category="list-text">目标数据库 ASM 实例版本</block>
  <block id="d0c90a91a74b36ecfafb2641b62ef3b3" category="list-text">内核版本</block>
  <block id="af53aab3fbed4eb15c35408b340cea18" category="list-text">fstab</block>
  <block id="51e92bf825b477028852603462432762" category="list-text">SnapDrive 使用的协议</block>
  <block id="0bd28164131de220aecb4625f7572a56" category="list-text">RAC</block>
  <block id="5a40625aed32f15e519d302bc4b79818" category="list-text">支持的卷管理器</block>
  <block id="e17c82a852e4ac5b6c92f08b17fe2e0c" category="list-text">Operations Manager 版本</block>
  <block id="005d3f6b10ffb045e635e295f2226b3d" category="list-text">支持的文件系统</block>
  <block id="2590cf37fa1aef63ce368571c6b80e50" category="list-text">sdconfcheck 命令的输出</block>
  <block id="44729d3cb779813dc7c900ab52173811" category="summary">您可以使用命令行界面 \ （ cli\ ）在一个或多个 SnapManager 服务器主机上执行回滚。</block>
  <block id="5a57d76246deb0a98d196979d65ca178" category="list-text">要在单个主机上执行回滚，请输入以下命令： `smorepository rollback-repository-dbnamerepo_service_name-host-login-usernamerepo_username-portrepo_port-rollbackhosthost_wing_target_database`</block>
  <block id="fa3cb508cdfa059728df7cdf884a9979" category="admonition">对于多个主机，请输入以逗号分隔的主机名，并确保逗号和下一个主机名之间没有空格。</block>
  <block id="96c27e654a89e5740a5726fba87181ff" category="paragraph">如果您使用的是 Real Application Clusters （ RAC ）配置，则必须手动回滚所有与 RAC 关联的主机。您可以使用 -allhosts 对所有主机执行回滚。</block>
  <block id="753fcab077c43ab2a43d975242721387" category="summary">在从备用位置还原之前，您需要连接到本地主机上所需的原始设备。</block>
  <block id="fdc6455046631624e5c6cfeadfb4d9f0" category="doc">从原始设备还原数据</block>
  <block id="f19da1f2eb9eebf59e4530c2f011d31a" category="paragraph">您可以从备用位置操作调用还原，将数据块从备用原始设备复制到活动原始设备。要执行此操作，您需要通过创建还原规范来指定用于还原原始原始原始原始原始设备的备用原始设备。</block>
  <block id="7c82004c839ebef3a682075953c69ed2" category="paragraph">mountpoint 是指目录路径 /mnt/myfs/ 或自动存储管理（ Automatic Storage Management ， ASM ）磁盘组 mountpoint （例如 +my_dg ）。mountpoint 映射指定从中还原文件的挂载点。原始位置是备份时挂载点在活动文件系统中的位置。备用位置是指用于还原原始位置中文件的挂载点。snapname 是备份原始文件的 Snapshot 副本的名称。</block>
  <block id="535d1bbba4d1f517150025a285373607" category="paragraph">对于 ASM ，磁盘组名称必须与 SnapManager 为向 RMAN 注册备份而克隆的磁盘组相同。可以通过查看备份属性来获取此名称。</block>
  <block id="17eeed710e01b74cad13c8d519122882" category="list-text">使用示例中所示的格式输入原始设备映射标记和位置：</block>
  <block id="c5f5cf56fff3e79b23b890b802d1607e" category="paragraph">原始设备映射指定恢复原始设备的位置。</block>
  <block id="231cecfcc9252c4af209c849906fda02" category="section-title">还原规范示例</block>
  <block id="9ab0c5139b1fe9f78f64bb586dc8e03d" category="paragraph">以下示例显示了还原规范结构：</block>
  <block id="e387746d8d760541200416cf04f0c09c" category="summary">在此示例中， DBA （使用 SnapManager ）和存储管理员（使用 NetApp 管理控制台数据保护功能）会协调相关操作，以配置目标数据库的本地备份和二级备份（也称为受保护备份）。</block>
  <block id="05ef21796cf32fd145ca8bf46bd2d113" category="doc">本地和二级数据库备份的工作流摘要</block>
  <block id="1f08fa2c9fc4d069341c7471b1f6a312" category="paragraph">执行的操作顺序总结如下：</block>
  <block id="b7dd8b00b0965ad0761921fdacf5fd1c" category="list-text">* 二级资源池配置 *</block>
  <block id="ccaa6e1cdedfebf97582a69c19e72558" category="paragraph">存储管理员可使用 NetApp 管理控制台数据保护功能在二级站点上配置存储系统的资源池，以用于存储薪资数据库备份。</block>
  <block id="cc7b65155aecb20590993298d62c5b50" category="list-text">* 二级备份计划 *</block>
  <block id="f57cdefcb20937d5fb2e0411aae6e21d" category="paragraph">存储管理员使用 NetApp 管理控制台数据保护功能配置二级备份计划。</block>
  <block id="caee6a1c39107349975068fbd6435bdb" category="list-text">* 保护策略配置 *</block>
  <block id="8ba2da947e93746889592c43c1e7b1ea" category="paragraph">存储管理员使用 NetApp 管理控制台数据保护功能为目标数据库配置二级备份保护策略。此保护策略包括计划并指定实施备份保护（备份，镜像或两者的组合）的基本保护类型，以及主数据节点，二级存储节点，有时还包括三级存储节点的名称保留策略。</block>
  <block id="b222095684bee975a8eabf57276f21c9" category="list-text">* 数据库配置文件配置和保护策略分配 *</block>
  <block id="e9c78085b105f6edeef748382b408138" category="paragraph">DBA 使用 SnapManager 创建或编辑支持二级备份的目标数据库的配置文件。配置配置配置文件时， DBA 会：</block>
  <block id="1f3cb52f958917825e3e807356081e56" category="list-text">为二级存储启用备份保护。</block>
  <block id="e2294086745833c275755718f057ace2" category="list-text">将在 NetApp 管理控制台数据保护功能中创建并检索到的新保护策略分配给此配置文件。</block>
  <block id="71a0da49168e46edba2ec3e6a315fc19" category="paragraph">分配保护策略时，会自动将目标数据库包含在部分配置但不符合 NetApp 管理控制台数据保护功能数据集中。完全配置后，数据集配置可将目标数据库备份到二级存储。</block>
  <block id="20db18be1b733afe0426a03b43100543" category="paragraph">数据集名称使用以下语法： smo_hostname_databasename ，该语法将转换为 smo_payroll.techco.com_paydb" 。</block>
  <block id="bc969971efe6b2335ed2e9bf9dce69d3" category="list-text">* 二级和三级存储配置 *</block>
  <block id="f0d6db211b52cfebdbe55cf892d17d7b" category="paragraph">存储管理员可以使用 NetApp 管理控制台数据保护功能分配资源池来配置二级存储节点，有时还可以配置三级存储节点（如果分配的保护策略指定三级存储节点）。</block>
  <block id="1f2735d905232d4991064205378ebe0d" category="list-text">* 在本地存储上备份 *</block>
  <block id="6747f6fdfd21d649c000da588a132da9" category="paragraph">DBA 将打开配置文件并在 SnapManager 中启用保护，然后创建到本地存储的完整备份。新备份在 SnapManager 中显示为已计划保护，但尚未受到保护。</block>
  <block id="0981bd079b79aa1c3280cf380bc89eb4" category="list-text">* 二级备份确认 *</block>
  <block id="fde253d8c1e99563b07087855584b4f3" category="paragraph">由于备份基于启用了保护的配置文件，因此备份将根据保护策略的计划传输到二级系统。DBA 使用 SnapManager 确认将备份传输到二级存储。将备份复制到二级存储后， SnapManager 会将备份保护状态从 " 未受保护 " 更改为 " 受保护 " 。</block>
  <block id="b5daa551b7c353f51df4d5875037589e" category="list-text">拆分克隆</block>
  <block id="d8e8eb82537c247155c7fb04a0671b83" category="image-alt">SCRN en drw 滚动升级架构 UNIX</block>
  <block id="1ad458587ac41bf730fa999f8d134cc0" category="summary">重命名存储系统或成功重命名存储系统后，您可能会遇到问题。</block>
  <block id="a602c0dd4a7ddcf5efbba7f724b1aba7" category="doc">对存储系统重命名问题描述进行故障排除</block>
  <block id="f6a0c019e1a75d18c2a254f8f66abb86" category="paragraph">尝试重命名存储系统时，此操作可能会失败，并显示以下错误消息： SMO-05085 No storage controller "FAS3020-rtp07New" is found to be associated with the profile</block>
  <block id="adc04906680cd15cada87de318672c79" category="paragraph">您必须输入运行 SMO storage list 命令时列出的存储系统的 IP 地址或名称。</block>
  <block id="3db959bf727dd1cc8f838ecb6647e2d2" category="paragraph">重命名存储系统后，如果 SnapManager 无法识别存储系统， SnapManager 操作可能会失败。要解析此问题描述，您必须在 DataFabric Manager 服务器主机和 SnapManager 服务器主机中执行一些额外步骤。</block>
  <block id="7bf1012865a78360d244d46bf04163f6" category="paragraph">在 DataFabric Manager 服务器主机中执行以下步骤：</block>
  <block id="cd618cf9113e33a332e8859a30efbcae" category="list-text">在 DataFabric Manager 服务器主机中 /etc/hosts 的主机文件中删除早期存储系统的 IP 地址和主机。</block>
  <block id="ab1ab3f122f6ae47762b017990d993e1" category="list-text">将新存储系统的新 IP 地址和主机添加到 DataFabric Manager 服务器主机中 /etc/hosts 的主机文件中。</block>
  <block id="356bd6f4a88e27ff37f61f2932ba1568" category="list-text">输入以下命令以更改存储主机名： dfm host rename -a old_host_namenew_host_name</block>
  <block id="86b0798ae3a373cc9059ca92401d6277" category="list-text">通过输入以下命令设置主机中的新 IP 地址： dfm host set old_host_name_or_objid hostPrimaryAddress = new_storage_controller_ip_address</block>
  <block id="14dbbe9934bf65fc3f6fbb377ca86583" category="admonition">只有在将 IP 地址指定为新存储系统名称时，才必须执行此步骤。</block>
  <block id="555108a8d6d5327fff4b37741077bb91" category="list-text">输入以下命令以更新 DataFabric Manager 服务器主机中的新存储系统名称： dfm host diag old_storage_name</block>
  <block id="06d5c80fd074efa1ed37268ebae8aa7a" category="paragraph">您可以输入以下命令来验证先前的存储控制器名称是否已替换为新的存储控制器名称： dfm host discover new_storage_name</block>
  <block id="a5957a1500ba5289dfc0071a2c599b3b" category="paragraph">在 SnapManager 服务器主机中以 root 用户身份执行以下步骤。</block>
  <block id="8811b68b25e66d85533ec4b62e7876aa" category="admonition">输入新的存储控制器名称时，请确保使用系统别名，而不是完全限定域名（ FQDN ）。</block>
  <block id="f1ff95074edc40047ad777e6bd34c382" category="list-text">输入以下命令删除早期的存储系统名称： SnapDrive config delete old_storage_name</block>
  <block id="d9e0ccda2a169f379eb5423a16702a1f" category="admonition">如果不删除早期的存储系统名称，则所有 SnapManager 操作都将失败。</block>
  <block id="13377c8396575de5aa2abeb4d6436b2f" category="list-text">在目标数据库主机 etc/hosts 的主机文件中删除早期存储系统的 IP 地址和主机。</block>
  <block id="8c726f11d6396ca5bf13dc8888486327" category="list-text">将新存储系统的新 IP 地址和主机添加到目标数据库主机中 /etc/hosts 的主机文件中。</block>
  <block id="e75f04631c0c7429a698fc8c6b1998ae" category="list-text">输入以下命令以添加新的存储系统名称： SnapDrive config set root new_storage_name</block>
  <block id="f433365b3f3309c7de1215912d0af231" category="list-text">输入以下命令映射早期和更高版本的存储系统名称： SnapDrive config migrate set old_storage_namenew_storage_name</block>
  <block id="9318b5988364e099324369f5b1eb43bd" category="list-text">输入以下命令删除早期存储系统的管理路径： snapdrive config delete -mgmtpath old_storage_name</block>
  <block id="f07fc906b2e156006bdc2d6dc034dd9e" category="list-text">输入以下命令以添加新存储系统的管理路径： SnapDrive config set -mgmtpath new_storage_name</block>
  <block id="5d865ffb85dd77d2b30c3c0d165e9c69" category="list-text">输入以下命令，使用新的存储系统名称更新数据文件和归档日志文件的数据集： SnapDrive dataset changehostname -dndataset_name-oldnameold_storage_name-newnamenew_storage_name</block>
  <block id="0b6c9409b91445bf1dcc46f6468c11b7" category="list-text">输入以下命令以更新新存储系统名称的配置文件： smo storage rename -profileprofileprofile_name-oldnameold_storage_name-newnamenew_storage_name</block>
  <block id="efaad5b9fca4f4964c8fcc0fdcf4ab5d" category="list-text">输入以下命令，验证与配置文件关联的存储系统： smo storage list -profileprofileprofile_name</block>
  <block id="ed8c6d94aef656b8ec63aa7c9ae6fd29" category="summary">使用适用于 Oracle 的 SnapManager ，您可以查看与配置文件关联的备份列表，确定备份是否已启用保护，并查看保留类 \ （在此示例中为每日或每周 \ ）。</block>
  <block id="8b0824c1dcd532f2475fc390528e8a5f" category="doc">使用适用于 Oracle 的 SnapManager 确认备份保护</block>
  <block id="059701f6120e92d7a0e1ad87161b910e" category="paragraph">使用 SnapManager for Oracle ，您可以查看与配置文件关联的备份列表，确定备份是否已启用保护，并查看保留类（在此示例中为每日或每周）。</block>
  <block id="32f347bc410d05a262770b7dc88262f1" category="paragraph">首先，此示例中的新备份显示为已计划保护，但尚未受到保护（在 SnapManager 图形用户界面和 backup show 命令输出中）。在存储管理员确保备份已复制到二级存储之后， SnapManager 会在图形用户界面和 backup list 命令中将备份保护状态从 " 不受保护 " 更改为 " 受保护 " 。</block>
  <block id="5d22205092cad591c9a480a8b82ff395" category="list-text">在 SnapManager 存储库树中，展开配置文件以显示其备份。</block>
  <block id="03514cb93c5bfd139a9a9a84b4d37689" category="list-text">单击 * 备份 / 克隆 * 选项卡。</block>
  <block id="d0e7388372e0e4873ef9f755f2b20070" category="list-text">在报告窗格中，选择 * 备份详细信息 * 。</block>
  <block id="0d448f9111d8caa7bdc7c7bccdbcd47d" category="list-text">查看保护列并确保状态为 " 受保护 " 。</block>
  <block id="201ce2080940d42af5c90b86b64f1f4b" category="summary">SnapManager 会自动卸载备份，使其不可供主机服务器使用。如果您使用外部工具（例如 Oracle 恢复管理器 \ （ RMAN\ ）访问备份中的文件，则还可以卸载 SnapManager ，并更改备份的状态以删除访问权限。</block>
  <block id="0e24ffb5b6fdec522153239906233983" category="paragraph">如果要从远程主机卸载数据库备份，则必须确保两个主机上的自动存储管理（ Automatic Storage Management ， ASM ）凭据相同。</block>
  <block id="c1577a7b6ba8e9fdf085066d66f49a89" category="paragraph">如果挂载点处于繁忙状态，则卸载操作可能会在一段时间内失败并显示错误消息，例如， -[ 错误 ] flow-11019 ： Disconnect 中出现故障： SD-10046 ：由于挂载点使用以下挂载路径和 PID 处于繁忙状态，您无法卸载备份： /opt/netapp/smO/mnt/-05-nt-Neuse_nfsvr_arch_2016520409_201409_27403-16599403-16599403-165db_pid 。</block>
  <block id="d895f321f902229ef163f5afcb4b47bf" category="paragraph">您必须确定导致卸载操作失败的会话的 PID 。运行以下命令以停止会话： `kill pid`</block>
  <block id="97bfbc130a455a47b599434a8f29b0e2" category="paragraph">然后，您可以成功运行卸载操作。</block>
  <block id="d0fcad19f8c90457acf4ef118b440693" category="list-text">输入以下命令： `smo backup unmount -profile profile_name ｛ labelLabel [data | -archivelogs] | -idd ｝ （ -quiet | -verbose ） -dump-force-verbose`</block>
  <block id="49026e5ea4f54839bb2fd0f5775e3ba0" category="list-text">保护策略</block>
  <block id="31a0dbdc15d7b6ab1297c670152dae71" category="summary">SnapManager \（ 3.2 或更高版本） for Oracle 可用于更新 SnapManager 配置文件中目标数据库的主机名。</block>
  <block id="591ecc753bd669abe1873c288a5f6fe3" category="list-text">在 Real Application Clusters （ RAC ）环境中，必须删除并卸载配置文件中指定的主机上可用的克隆或挂载备份。</block>
  <block id="94c244f09776b3cfdde5e3cbc4e626fa" category="list-text">如果 SnapManager 安装在 Solaris 上，并且数据库逻辑单元号（ LUN ）是使用带有 SVM 堆栈的主机挂载文件系统创建的，则更改目标数据库主机名。</block>
  <block id="b06aad1ecceeee9b051c56f98381590a" category="paragraph">在已启用保护的配置文件中更新新的目标数据库主机名后，系统会为已更新的配置文件保留相同的数据集和保护策略。</block>
  <block id="1b3ffa9b029f6c8f6cab420040055b79" category="paragraph">更改目标主机的主机名后，必须确保在创建新的受保护配置文件之前更新所有现有受保护配置文件的主机名。要更新配置文件的主机名，请运行 smo profile update 命令。</block>
  <block id="315c42e2ec6e68c3ac291ba608cabd81" category="paragraph">更新目标数据库主机名后，如果克隆或挂载的备份在新主机中不可用，则无法删除或拆分克隆或卸载备份。在这种情况下，从新主机运行 SnapManager 操作会导致故障以及早期主机中的陈旧条目。要执行 SnapManager 操作，您必须使用配置文件更新还原到早期的主机名。</block>
  <block id="67941a86c209c70d6f9f5edeb64ccc51" category="list-text">输入以下命令： `smo profile update -profileprofile "-profile-passwordprofile_password]"-database-dbnamedb_dbname-hostdb_host "-siddb_sidi] -login-usernamedb_username-accountdb_password-portdb_portdport]] ｛ -mman ｛ -grouperman-login-useremnssnemony] [-mail-mail-mail-mail-mail-file`</block>
  <block id="04316ba2f62906518acf68c79afeec14" category="list-text">要查看配置文件的目标数据库主机名，请输入以下命令： `smo profile show`</block>
  <block id="6ee8afc9471d6a892fbaadd897f1ce12" category="summary">您可以通过应用用户身份验证和基于角色的访问控制（ RBAC ）来管理 SnapManager 中的安全性。通过用户身份验证方法，您可以访问存储库，主机和配置文件等资源。使用 RBAC ，您可以限制 SnapManager 对数据库中包含数据文件的卷和 LUN 执行的操作。</block>
  <block id="701257c1aa50f892022817238e17a4db" category="paragraph">您可以通过应用用户身份验证和基于角色的访问控制（ RBAC ）来管理 SnapManager 中的安全性。通过用户身份验证方法，您可以访问存储库，主机和配置文件等资源。使用 RBAC ，您可以限制 SnapManager 对数据库中包含数据文件的卷和 LUN 执行的操作。</block>
  <block id="5efa952cfaf28c47f631dbc5687bdf31" category="paragraph">您可以通过执行以下任务来管理基于角色的访问：</block>
  <block id="28428c2534338194b64ec6a17d98c4eb" category="list-text">使用 SnapDrive 为 SnapManager 启用 RBAC 。</block>
  <block id="fb1e2fcb54dbf96155b19bee3a1cf5ba" category="list-text">使用 Operations Manager 控制台为用户分配角色并设置角色功能。</block>
  <block id="2e6521745c1a541c276bf1d8ba6e3700" category="list-text">或者，也可以通过编辑 smo.config 文件来启用 SnapManager 以存储加密密码。</block>
  <block id="222ce83d1434f6369269ca1433fa36fc" category="paragraph">如果安装了 Protection Manager ，则对功能的访问将通过以下方式受到影响：</block>
  <block id="db061dee1d38de94140b19445bf5754a" category="list-text">如果安装了 Protection Manager ，则在创建数据库配置文件时， SnapManager 会创建一个数据集，并使用包含数据库文件的卷填充此数据集。</block>
  <block id="f96def37684faa4a93b8ec9c10b2a932" category="paragraph">执行备份操作后， SnapManager 会使数据集内容与数据库文件保持同步。</block>
  <block id="32a9cc037253e30cd81eb065f5661f7b" category="list-text">如果未安装 Protection Manager ，则 SnapManager 无法创建数据集，并且您无法对配置文件设置保护。</block>
  <block id="49e33cebeb28c4fbd23be4e7863de306" category="list-text">要停止服务器，请以 root 用户身份输入以下命令： `smo_server stop`</block>
  <block id="0529bed6d7eb70ff787854fd862041b4" category="summary">配置备份计划后，存储管理员会配置一个受保护的备份存储策略，其中将包含该计划。</block>
  <block id="4e847434584bba3cbb0b708edee0f285" category="doc">使用 Protection Manager 配置二级备份保护策略</block>
  <block id="fe2275dac8efd53d982e62b73593f16a" category="paragraph">在配置保护策略之前，存储管理员会向 DBA 配对节点授予以下信息：</block>
  <block id="259ccc58e2fd11d4ec4345862d2e1817" category="list-text">为二级存储指定的保留期限</block>
  <block id="31e0904e1305ac18249e3575b401be86" category="list-text">所需的二级存储保护类型</block>
  <block id="7b0f574bd059133bc54c8cb5bc0d7b45" category="paragraph">DBA 配对项可以在 SnapManager for Oracle 中列出创建的保护策略，并将其分配给要保护的数据的数据库配置文件。</block>
  <block id="0876cd43d12152fd993042ebee2f5127" category="list-text">从菜单栏中，单击 * 策略 * &gt; * 保护 * &gt; * 概述 * 。</block>
  <block id="744446b2bd8996f394d3e9241f5a7583" category="paragraph">此时将显示保护策略窗口中的概述选项卡。</block>
  <block id="d37c815939f4d6e4b8b0a28ce21575c1" category="list-text">单击 * 添加策略 * 以启动添加保护策略向导。</block>
  <block id="d76ece45aea6d8f016d37c4405eac969" category="list-text">完成向导，并执行以下步骤：</block>
  <block id="a8b58d4d6d7c83cd32a0cd681f496f5d" category="list-text">指定描述性策略名称。</block>
  <block id="30b3b903a190f8ee6344539a8429dc8e" category="paragraph">在此示例中，输入 * 技术公司薪资数据： backup* 和问题描述，然后单击 * 下一步 * 。</block>
  <block id="5ecd232c07f5a2b1326ee15aa6926b4f" category="list-text">选择一个基本策略。</block>
  <block id="cf9059a9498e497596e2a5089dbbd820" category="paragraph">在此示例中，选择 * 备份 * ，然后单击 * 下一步 * 。</block>
  <block id="39182fa0293a2a85c7d50b4ff2b18e41" category="list-text">在主数据节点策略属性表中，接受默认设置并单击 * 下一步 * 。</block>
  <block id="f59b860153dca2e6e86c1f41ad4117d6" category="admonition">在此示例中，将应用在 SnapManager 中配置的本地备份计划。使用此方法指定的任何本地备份计划都将被忽略。</block>
  <block id="7602277ffa69bede7cf37cb9e536a041" category="list-text">在主数据到备份连接属性表中，选择一个备份计划。</block>
  <block id="d8e0ab1db5f1bcbed5ae626fa6a21d70" category="paragraph">在此示例中，选择 * 薪资星期六凌晨 1 点加每天晚上 7 点 * 作为备份计划，然后单击 * 下一步 * 。</block>
  <block id="5341242cf54ca4afbb856c2277182390" category="paragraph">在此示例中，您选择的计划既包括先前配置的每周计划，也包括每日计划。</block>
  <block id="c8252fc21a0afd6de054654c5be1c7ec" category="list-text">在备份策略属性表中，指定备份节点的名称以及每日，每周或每月备份的保留时间。</block>
  <block id="66020cf7181680d7ccf56f6878bf70f8" category="paragraph">在此示例中，将每天备份保留时间指定为 10 天，将每周备份保留时间指定为 52 周。完成每个属性表后，单击 * 下一步 * 。</block>
  <block id="87626ae8280b44a5e91a058e3c198829" category="paragraph">完成所有属性表后，添加保护策略向导将显示要创建的保护策略的摘要表。</block>
  <block id="1dd4bf5f4af9acdfb5cdf68f0fa237a6" category="paragraph">在为 Protection Manager 配置的其他策略中，列出了 * 技术公司薪资数据：备份 * 保护策略。</block>
  <block id="cd89111a7c4d79c55d3996baa3766547" category="paragraph">现在，在为要保护的数据创建数据库配置文件时， DBA 配对节点可以使用 SnapManager for Oracle 列出并分配此策略。</block>
  <block id="2f1c85010a133edfc65cc19d98354e09" category="paragraph">指定用于登录到 ASM 实例的凭据。</block>
  <block id="97d4e2fc175cac7697a2a49c8ec0b146" category="paragraph">指定用于登录到 ASM 实例的用户名。</block>
  <block id="88ceca2b8881e3db7dfea2d10c34ea41" category="paragraph">指定用于登录到 ASM 实例的密码。</block>
  <block id="312e0e77edf890b5d14c30dd083b6e84" category="list-text">从二级卷 * 创建的文件（ -copy-idcopy_id） *</block>
  <block id="003bdcf44e84263765c1c0a28be36fbc" category="paragraph">指定 SnapManager 应将已受保护的备份副本克隆到二级存储。如果未指定此选项，则 SnapManager 会从主存储克隆副本。</block>
  <block id="3573ef50700620ab6e40c44cce62afe3" category="paragraph">每当指定 -from-secondary 选项时，都必须指定 -copy-id 选项。如果二级存储系统上有多个备份，则使用 -copy-id 选项指定二级存储上应使用哪个备份副本进行克隆。</block>
  <block id="0eafb4416ea3aa0a2b2bf5d1c912859c" category="list-text">要在当前状态下克隆数据库，请输入以下命令： smo clone create -profileprofileprofile_name-current -labelclone_name-clonprofile./clonespec_filename.xml</block>
  <block id="5eccc73bd9447e112240307b7a9089d5" category="list-text">二级存储上的副本列表，格式为 backup_copy ID —节点名称</block>
  <block id="202ace34a9ecba6b554baf003b683717" category="list-text">输入以下命令： `smo backup show -profileprofileprofile_name ｛ -labelLabel [data _ -archivelogs] | -id id id （ -quiet _ -verbose ）`</block>
  <block id="277095b3af81ca86344c684888096bbb" category="summary">在此示例中， TechCo 公司在同时也是适用于 Oracle 主机的 SnapManager 的数据库服务器上运行其薪资数据库，并将其薪资数据库数据和配置文件存储在公司总部的主存储系统上。企业要求通过每天和每周备份到本地存储以及备份到 50 英里以外二级存储站点的存储系统来保护该数据库。</block>
  <block id="3be94ef342056997f8d698676b43b392" category="doc">主存储和二级存储配置和拓扑</block>
  <block id="18aa39966c8e9dd9d6f6ebb20b80fac3" category="paragraph">下图显示了支持本地和二级备份保护所需的 SnapManager for Oracle 和 NetApp 管理控制台数据保护功能组件。</block>
  <block id="936ba5d2a220c3372c8385e91753e1c9" category="image-alt">此图显示了与 SnapManager for Oracle 和管理控制台数据库保护组合架构关联的组件</block>
  <block id="346e691d55dbb91a9cb2bea48c43f59a" category="paragraph">要管理薪资数据库并支持上一图所示的本地和二级备份保护，请使用以下部署。</block>
  <block id="d89efa3348cf2782ab7a525fa2fd059e" category="list-text">* SnapManager 主机 *</block>
  <block id="4ad0645249fc6078d8aee6458f6a9802" category="paragraph">SnapManager 主机 payroll.techco.com 位于公司总部，运行在 UNIX 服务器上，该服务器还运行生成和维护薪资数据库的数据库程序。</block>
  <block id="c5b9620800fbb87dad1eb4fc93504b98" category="list-text">* 连接 *</block>
  <block id="8ef43cf3df817b31dcbcf06a39ae76d8" category="paragraph">为了支持本地备份和二级备份保护， SnapManager 主机与以下组件建立了网络连接：</block>
  <block id="aebf415df311bcf6e227dcbe45ed0cab" category="list-text">适用于 Oracle 客户端的 SnapManager</block>
  <block id="b5b34e0a983e0af7858c6733a924e63a" category="list-text">SnapManager 存储库，用于运行数据库程序， SnapDrive for UNIX 和 SnapManager</block>
  <block id="a454d22ee2ee6cfccb510b84f1e4773e" category="list-text">主存储系统</block>
  <block id="ece2b22215c8444acd785306b04afc34" category="list-text">DataFabric Manager 服务器</block>
  <block id="6f2f9ebc037db8c3fd8bb67d88bf6d4c" category="list-text">* 已安装产品 *</block>
  <block id="b431fdcc8ed195e4c9cee7bb302e418b" category="paragraph">对于本示例， SnapManager 主机安装了以下产品：</block>
  <block id="50598aa0bcf9baf82b837dc47749447b" category="list-text">SnapManager 服务器</block>
  <block id="f9840f896c67ff72c7969df72e42430e" category="list-text">* TechCo 主存储系统 *</block>
  <block id="8c0caf9e969514f5eb403afdb7380f43" category="paragraph">薪资数据库（包括关联的数据文件，日志文件和控制文件）位于主存储系统上。它们位于 TechCo 公司总部以及连接主存储和 SnapManager 主机的 SnapManager 主机和网络上。最新的薪资数据库事务和更新将写入主存储系统。为薪资数据库提供本地备份保护的 Snapshot 副本也驻留在主存储系统上。</block>
  <block id="1cc06f212e803e76dc24b595ff469dad" category="paragraph">为了支持二级备份保护，主存储系统与以下组件建立了网络连接：</block>
  <block id="39bbb65d9377d0dc3e9799f36625169b" category="list-text">运行数据库程序， SnapDrive for UNIX 和 SnapManager 的 SnapManager 主机</block>
  <block id="79a96d57d76efb90191136642c364f06" category="paragraph">对于本示例，必须在这些系统上启用以下许可证：</block>
  <block id="5bd0c08adfd977fcd4e1af8b9b938d49" category="list-text">Data ONTAP 7.3.1 或更高版本</block>
  <block id="a7b5de34d2432484ea95ac954fcdc6c9" category="list-text">SnapVaultData ONTAP 主系统</block>
  <block id="4e58a6eeeb24d4f840377d262f284baa" category="list-text">FlexVol （ NFS 必需）</block>
  <block id="a2a817ee9a8e05389f7b11bd8ce4bbdb" category="list-text">NFS 协议</block>
  <block id="810e87dc68ff3e4087b305f2c5e43965" category="list-text">* TechCo 二级存储系统 *</block>
  <block id="128dd2ce35262fece3966fb3f661f10b" category="paragraph">二级存储系统位于 50 英里以外的网络连接二级存储站点，用于存储薪资数据库的二级备份。</block>
  <block id="ab77d9b3fd0590f012210780c77d64cd" category="paragraph">为了支持二级备份保护，二级存储系统会通过网络连接到以下组件：</block>
  <block id="d84ad915e0ecf6eb7494a2c7f22b1ae7" category="paragraph">对于本示例，必须在二级存储系统上启用以下许可证：</block>
  <block id="8562e572f1bb686b6698f2861f484c5c" category="list-text">SnapVaultData ONTAP 二级系统</block>
  <block id="8847b253455c5501b0cd46231b76e52f" category="list-text">* DataFabric Manager 服务器 *</block>
  <block id="5dc7352ca0e5f837fa7e2a701aeb8f18" category="paragraph">DataFabric Manager 服务器 techco_dfm 位于公司总部的一个位置，可供存储管理员访问。DataFabric Manager 服务器除其他功能外，还负责协调主存储和二级存储之间的备份任务。</block>
  <block id="beb1f253d18713ccbc4123137ab219bc" category="paragraph">为了支持二级备份保护， DataFabric Manager 服务器会与以下组件保持网络连接：</block>
  <block id="04d883eb32e0340ac99bac02e2190a36" category="list-text">NetApp 管理控制台</block>
  <block id="5a01473753e6687552f3986fc49c0fec" category="paragraph">在本示例中， DataFabric Manager 服务器已获得以下服务器产品的许可：</block>
  <block id="58a8b7742f8da98bedb8000ae4593c16" category="list-text">DataFabric Manager</block>
  <block id="1b45e3e812700c47458c86817f6ba874" category="list-text">* SnapManager 存储库 *</block>
  <block id="56f1c348c39ac00b6ea8ba1ae2826282" category="paragraph">SnapManager 存储库位于专用服务器上，用于存储有关 SnapManager 执行的操作的数据，例如备份时间，备份的表空间和数据文件，使用的存储系统，创建的克隆以及创建的 Snapshot 副本。当 DBA 尝试完全或部分还原时， SnapManager 会查询存储库以确定 SnapManager for Oracle 为还原创建的备份。</block>
  <block id="de13a36d2041e99c23f0452f95d880bd" category="list-text">* NetApp 管理控制台 *</block>
  <block id="f66933da69957004441b7e264f85dcf7" category="paragraph">NetApp 管理控制台是存储管理员使用的图形用户界面控制台，用于配置计划，策略，数据集和资源池分配，以便备份到二级存储系统，存储管理员可以访问这些系统。</block>
  <block id="04ccc70f962c02cc19c8c9991becb3e3" category="paragraph">为了支持二级备份保护， NetApp 管理控制台可通过网络连接到以下组件：</block>
  <block id="a649571664e3d598cafd975347d60fcb" category="list-text">适用于 Oracle 客户端的 * SnapManager *</block>
  <block id="ec255d6a4713f8ffb8cf01473761c75e" category="paragraph">SnapManager for Oracle 客户端是图形用户界面和命令行控制台，在此示例中，薪资数据库的 DBA 使用它来配置和执行本地备份以及备份到二级存储。</block>
  <block id="1cb5354c3580fb5879484b7651ecae25" category="paragraph">为了支持本地备份和二级备份保护， SnapManager for Oracle 客户端与以下组件建立了网络连接：</block>
  <block id="210ca15a79b23f4700f977e0743b0220" category="list-text">SnapManager 存储库，运行数据库程序， SnapDrive for UNIX 和 SnapManager</block>
  <block id="83e585fd5b0d1fd9ba780314986b31b2" category="list-text">数据库主机（如果与运行 SnapManager 的主机分开）</block>
  <block id="c4dbe9759c1afbc70687b98e364f92b0" category="paragraph">要支持本地备份和二级备份保护，必须在此组件上安装 SnapManager for Oracle 客户端软件。</block>
  <block id="0327944e6f8ba9dbd225cb9384929460" category="list-text">如果 SnapManager 与 OnCommand Unified Manager 集成，则具有数据保护功能</block>
  <block id="ad946df20efc42144780d13a4315792b" category="summary">除了使用基于角色的访问控制（ Role-Based Access Control ， RBAC ）之外， SnapManager 还会在运行 SnapManager 服务器的主机上使用操作系统（ OS ）登录来对用户进行身份验证。您可以通过操作时的密码提示或使用 smo credential set 命令来启用用户身份验证。</block>
  <block id="8950d6cbfd8311dd24b93f2978c056c9" category="paragraph">除了使用基于角色的访问控制（ Role-Based Access Control ， RBAC ）之外， SnapManager 还可以在运行 SnapManager 服务器的主机上使用操作系统（ OS ）登录来对用户进行身份验证。您可以通过操作时的密码提示或使用 smo credential set 命令来启用用户身份验证。</block>
  <block id="336a3723f6ef38fa316ed2e371a55197" category="summary">您必须在 SnapManager for Oracle 中创建配置文件，在配置文件中启用保护，并分配保护策略以创建受保护的备份。</block>
  <block id="27b39363a6ef64fc4af4b2752d52aa42" category="doc">使用 SnapManager for Oracle 创建数据库配置文件并分配保护策略</block>
  <block id="90f1dff7cf298772ff0ba0302f2d2635" category="paragraph">配置文件包含有关所管理数据库的信息，包括其凭据，备份设置和备份保护设置。创建配置文件后，您无需在每次执行操作时指定数据库详细信息。一个配置文件只能引用一个数据库，但同一个数据库可以由多个配置文件引用。</block>
  <block id="ad01a4536003b7c27a3fa6e0fd536dcf" category="list-text">从存储库树中，右键单击主机，然后选择 * 创建配置文件 * 。</block>
  <block id="357c0dfa6003892afafd4bdb19c72af1" category="list-text">在配置文件配置信息页面上，输入配置文件详细信息，然后单击 * 下一步 * 。</block>
  <block id="efde79b33cf3c4aa5f243119d882747d" category="paragraph">您可以输入以下信息：</block>
  <block id="e8fd005490bc2b0f76e01f40a35584a0" category="list-text">配置文件名称： paying_prod2</block>
  <block id="9c083da5a34535ffbd96680406055586" category="list-text">在数据库配置信息页面上，输入数据库详细信息，然后单击 * 下一步 * 。</block>
  <block id="8ce2a0508457c905946cc7a02cde963a" category="list-text">Database host ：接受默认值。由于您要从存储库树中的主机创建配置文件，因此 SnapManager 会显示主机名。</block>
  <block id="0dc146b5740373a78fe6b56a99d37b89" category="list-text">在数据库连接信息页面上，单击 * 使用数据库身份验证 * 以允许用户使用数据库信息进行身份验证。</block>
  <block id="c220b7a2a4b92d9e6543044d5d99a4ee" category="list-text">输入数据库连接详细信息并单击 * 下一步 * 。</block>
  <block id="3bf26c5d9d3c5a35f2aa4f8f9b90aecf" category="list-text">在 RMAN 配置信息页面上，单击 * 不使用 RMAN* ，然后单击 * 下一步 * 。</block>
  <block id="54172e53aeb41e842dad01812107ae9c" category="list-text">在 Snapshot Naming Information 页面上，通过选择变量为与此配置文件关联的 Snapshot 指定命名约定。</block>
  <block id="1a5d8bb8ca8908f0517a46cee20faffa" category="paragraph">SMID 变量创建唯一的快照标识符。</block>
  <block id="4f7a28a823b0a7379c9af8400f708c01" category="list-text">在 Variable Token 列表中，选择 usertext 并单击 * 添加 * 。</block>
  <block id="6a2d12a103851e3cbb0b83d80d228470" category="list-text">输入 payroll.techco.com 作为主机名，然后单击 * 确定 * 。</block>
  <block id="0561b5311f113ade543c753a8ac07fb9" category="list-text">单击 * 左侧 * ，直到主机名显示在 "Format" （格式）框中 SMO 之后。</block>
  <block id="6c2d1a6d7b95ed476905c0cf2134b184" category="paragraph">SMO_hostname_smoprofile_dbsid_scope_mode_smID 的 Snapshot 命名约定为 smo_payroll.techco.com_payroll_prod2_payrolldb_f_a_x" （其中， "f" 表示完整备份， "A" 表示自动模式， "x" 表示唯一的 SMID ）。</block>
  <block id="673ee6699151db6dded13e471ae5342f" category="list-text">选择 * 保护管理器保护策略 * 。</block>
  <block id="27df0ebc65442eb767e30b63c8d43c3e" category="paragraph">使用 * Protection Manager Protection Policy* ，您可以选择使用 NetApp 管理控制台配置的保护策略。</block>
  <block id="202793d4b1a7547cbc283a91da1de571" category="list-text">从从 NetApp 管理控制台检索到的保护策略中选择 * 技术公司薪资数据：备份 * 作为保护策略，然后单击 * 下一步 * 。</block>
  <block id="258634875a2fcc219df2e38c2da1e085" category="list-text">将 NetApp 管理控制台保护策略分配给数据库配置文件会自动创建一个非一致数据集，此数据集可由 NetApp 管理控制台操作员查看，并使用名称约定 SMO_&lt;hostname&gt;_&lt;profilename&gt; 或在本示例中为 smo_payroll.tech.com_PAYDB 。</block>
  <block id="115eff486a807a1ae75d3ee4c173338b" category="list-text">如果此配置文件不符合卷还原条件（也称为 " 快速还原 " ），则会发生以下情况：</block>
  <block id="6500734023c245aac111d750604660e3" category="list-text">"* 结果 * " 选项卡表示配置文件创建成功，并且在操作期间出现警告。</block>
  <block id="e096d2705151d252d9311c2c989f4389" category="list-text">"* 操作详细信息 * " 选项卡包含一个警告日志，其中指出配置文件不符合快速还原的条件并解释了原因。</block>
  <block id="d30cd56a14eb7d98d34f61a965434111" category="summary">此命令可用于了解运行拆分进程的进度。</block>
  <block id="31743a4326c5f459651cfd5564dca1d4" category="doc">smo clone split status 命令</block>
  <block id="1b94faa48fa870433fbb723f862bdbc5" category="paragraph">指定克隆进程生成的标签名称。</block>
  <block id="48baf0a174124dc48b694e4bd9585824" category="paragraph">指定克隆进程生成的唯一 ID 。</block>
  <block id="07d6036c50432eb2e450101629367caf" category="cell">其他实例的数据库状态（仅限 RAC ）</block>
  <block id="12e438b11974e24fa8769a2b711cef0f" category="paragraph">挂载或打开</block>
  <block id="ed36a1ef76a59ee3f15180e0441188ad" category="paragraph">任意</block>
  <block id="6433af35cc0d3c0fbb8ee457de1e946e" category="summary">您可以从二级存储还原受保护的备份。但是，如果备份也位于主存储上，则无法从二级存储还原备份。</block>
  <block id="814028197f3ca55d181a4d6217c171df" category="summary">通过 SnapManager for Oracle ，您可以将数据库还原到创建 Snapshot 副本时的状态。除了基于文件的还原过程之外， SnapManager 还支持基于卷的快速还原技术，与其他恢复方法相比，该技术可显著缩短还原时间。由于备份的创建频率更高，因此需要应用的日志数量会减少，从而减少数据库的平均恢复时间（ MTTR ）。</block>
  <block id="9bc76ce35b59263c8c15aec500a9ffa2" category="list-text">执行基于文件的还原或基于卷的还原，这是还原数据库备份的最快方法，也是 SnapManager 使用的默认方法。</block>
  <block id="8a90e3541a847e38fbe81ac9d208b53d" category="list-text">使用还原规范文件从二级存储（远程备份）和备用位置还原受保护的备份。</block>
  <block id="89096bc514872252658992792c4f9d53" category="paragraph">SnapManager 还可以还原自动存储管理（ Automatic Storage Management ， ASM ）数据库。一个 ASM 磁盘组可以由多个数据库共享。因此，您无法还原到磁盘组的旧 Snapshot 副本，因为它会还原所有数据库。传统的还原操作解决方案需要通过主机，并要求构成数据库的所有块从存储系统移动到主机，然后再移回存储系统。SnapManager 可以在 ASM 磁盘组中仅还原所需数据，而无需通过主机，从而减轻了这种开销。</block>
  <block id="f253571f2b4b3d0ab5400b0cfac1a503" category="list-text">输入以下命令： smo clone delete -profile profile_name （ -label label | -id guid] （ -sysspasswordsspassword ） | （ login-usernamedb_username-password ） db_password-portdb_port] ）（ -asminstance-asmusernameeasm_dump-asmpasswordasma_password）</block>
  <block id="a829995927d2189bed89325a898be648" category="list-text">要列出所有操作的摘要信息，请使用以下命令： `smo operation list profile -profile profile_name-bac分隔 符 "-quiet | -verbose`</block>
  <block id="d06f7715c7647243231ced109bfdc8c0" category="summary">您可以将 RAC 数据库克隆到非 RAC 数据库，也可以将其克隆到非 RAC 数据库，然后将其更改为 RAC 数据库。</block>
  <block id="7c763156c3b653c6046f113a50f648ed" category="doc">使用 RAC 数据库克隆</block>
  <block id="e9b110be1ca7d1a0c35c5c74b1d4acf1" category="list-text">要克隆 RAC 数据库，请输入以下命令： smo clone create -backup-label backup_label-profile profile_name-newsid new_sid-clonSpec full_path_to_clonsecure_file-verbose</block>
  <block id="b56b6de6a44daa4932fd4d971f1d4782" category="list-text">要将克隆的非 RAC 数据库更改为 RAC 数据库，请将文件从 initclone_sid.ora 重命名为 initclone_local_instance_sid.ora 。</block>
  <block id="ffc6955f78068fd2f560631e127fe1f3" category="list-text">编辑重命名的文件，将参数 cluster.database 设置为 true 。RAC 数据库信息。</block>
  <block id="5c6e9e0c81e35d756ca82cbbf6b0bb37" category="list-text">向 srvctl 注册克隆的 RAC 数据库。</block>
  <block id="3eeb8ed793966185d62ee84da4c5bf04" category="paragraph">您必须为数据库使用的每个存储系统创建 igroup ，并使用以下命令使用 igroup 信息更新 SnapDrive ： igroup add</block>
  <block id="e222cfb4c056fadc051196df5f292e13" category="summary">您可以运行 clone split 命令来拆分克隆。拆分的克隆将独立于原始克隆。SnapManager 会在克隆拆分操作后生成一个新的配置文件，您可以使用此配置文件管理拆分的克隆。</block>
  <block id="931b47da76fa35133604c5ed70636082" category="doc">smo clone split 命令</block>
  <block id="cd67a2ea558150e7abd2356d976a9063" category="list-text">* 配置文件 clone-profile*</block>
  <block id="50f27e02865f47851fbc5f15e791d39b" category="paragraph">指定克隆所在的主机名。</block>
  <block id="0a649995df449b646bb2eefb4e6f4beb" category="list-text">-label clone-lab*</block>
  <block id="d16e9fe1aa525d5b507c9f72604097c3" category="paragraph">指定克隆操作生成的标签名称。</block>
  <block id="1c57976046db0510c20c31bfe459dd95" category="list-text">* — id clone-id*</block>
  <block id="5363dfca54d41f8bd81b3b53405e41c9" category="paragraph">指定克隆操作生成的唯一 ID 。</block>
  <block id="180d265e46c6a1edbf780156034b49f9" category="list-text">* —拆分标签拆分操作标签 *</block>
  <block id="099ec390dfbbfbeb526ef680feffae71" category="list-text">-new-profile new-profile_name*</block>
  <block id="6a32851f82a966bf0451558aaa1dd98c" category="paragraph">指定成功执行拆分操作后 SnapManager 将生成的新配置文件名称。</block>
  <block id="b86fe405363d95953fa42c85ea5a2a64" category="list-text">-profile-password new-profile_password*</block>
  <block id="42adeade5a6b6b09e5003e9175be0b81" category="paragraph">指定存储库的数据库详细信息。</block>
  <block id="870775d7ffa798f3b9d2c937cea648ad" category="paragraph">指定存储库的数据库的名称。您可以使用全局名称或系统标识符。</block>
  <block id="43c55b870997e78d15e3642e2f9c2ce5" category="paragraph">指定存储库数据库所在主机计算机的名称或 IP 地址。</block>
  <block id="46010a837d5e48c7be77cc9582da72f1" category="paragraph">指定用于访问存储库数据库所在主机的传输控制协议（ Transmission Control Protocol ， TCP ）端口号。</block>
  <block id="3777cdabffb6e66d83b6db5960a702b5" category="paragraph">指定访问存储库数据库所在主机所需的用户名。</block>
  <block id="ef58ce22d4d6f62d1bcfca254bfb6869" category="paragraph">指定要备份，还原或克隆的数据库的详细信息。</block>
  <block id="19b90a380f9bdfb9d04a96ac142042aa" category="paragraph">指定配置文件所描述的数据库的名称。您可以使用全局名称或系统标识符。</block>
  <block id="ed1135a7c10850f5e1664a090545f42d" category="paragraph">指定数据库所在主机计算机的名称或 IP 地址。</block>
  <block id="4a243bd90b5dde8be8118f5897ef4257" category="paragraph">例如，如果您使用的是 Oracle Real Application Clusters （ RAC ），则必须在从中执行 SnapManager 的 RAC 节点上指定 RAC 实例的系统标识符。</block>
  <block id="1f928b0c3a97318437a3c391e2db1d9d" category="paragraph">将目标数据库控制文件指定为 RMAN 存储库，而不是目录。</block>
  <block id="c0e55a7f632c7b116875a2490d4609c6" category="admonition">UNIX 需要使用 -osaccount 和 -osgroup 变量，但在 Windows 上运行的数据库不允许使用这些变量。</block>
  <block id="457e5e1349a971584f03849d85a17ffa" category="paragraph">指定备份的保留策略。</block>
  <block id="34695ee487e433e11c64e2bd8c67e88e" category="paragraph">对于每个保留类，可以指定保留计数或保留持续时间，也可以同时指定这两者。持续时间以类的单位为单位（例如，小时表示每小时，天表示每天）。例如，如果为每日备份指定的保留期限仅为 7 ，则 SnapManager 不会限制配置文件的每日备份数（因为保留数量为 0 ），但 SnapManager 会自动删除 7 天前创建的每日备份。</block>
  <block id="2ab49ab39447c0e59f56d5462e6ec08c" category="list-text">-profile-comment profile-comment *</block>
  <block id="0331bd44c1abafa8fad4eb2d086a5958" category="list-text">*-protect -protection-policy policy_name*</block>
  <block id="c87d632e1157dbbf7509807c739f6205" category="paragraph">指定是否应将备份保护到二级存储。</block>
  <block id="a451bbd6ad6a12783f45fa8bb15dae0a" category="admonition">如果指定 -protect 时未指定 -protection-policy ，则数据集将没有保护策略。如果在创建配置文件时指定了 -protect 且未设置 -protection-policy ，则稍后可以使用 SMO profile update 命令设置该配置文件，也可以使用 Protection Manager 的控制台由存储管理员设置。</block>
  <block id="b2674a3ae7fc8ee455922a153576d119" category="paragraph">指定在存储库数据库下为多个配置文件配置摘要电子邮件通知的详细信息。SnapManager 将生成此电子邮件。</block>
  <block id="00baa8a3aa1621c286cb99c13ab734ca" category="list-text">* —通知 *</block>
  <block id="c83040c4eacc26cc04b29938e1eac2c9" category="paragraph">指定为新配置文件配置电子邮件通知的详细信息。SnapManager 将生成此电子邮件。通过电子邮件通知，数据库管理员可以接收有关使用此配置文件执行的数据库操作的成功或失败状态的电子邮件。</block>
  <block id="d9f48466f551d6b4e0a0adc7e5569613" category="list-text">* —成功 *</block>
  <block id="af93a991411ba09e29cbc924e7c1da29" category="paragraph">指定在 SnapManager 操作成功时为配置文件启用电子邮件通知。</block>
  <block id="4f47e592c4ef1386f8141650d96ecdc6" category="list-text">电子邮件地址 1 电子邮件地址 2 *</block>
  <block id="0be76807a66d6727659cd2e119606375" category="paragraph">指定收件人的电子邮件地址。</block>
  <block id="ef4e6304f70dfda0f6b56bc9a3111c6d" category="paragraph">指定电子邮件主题。</block>
  <block id="f05e0229ad60800e4a5595da129db21d" category="list-text">* - 故障 *</block>
  <block id="4de6049a7f8568ad5077457d0d6cdd2a" category="paragraph">指定在 SnapManager 操作失败时为配置文件启用电子邮件通知。</block>
  <block id="89a656149ef7f7b29945bec29a25ce9a" category="paragraph">指定归档日志备份与数据文件备份分开。这是一个可选参数，您可以在创建配置文件时提供此参数。使用此选项分隔备份后，您可以创建仅数据文件备份或仅归档日志备份。</block>
  <block id="2ea69788b61c26f52e90eaaa90bd68eb" category="paragraph">指定根据归档日志保留期限（每小时，每天，每周或每月）保留归档日志备份。</block>
  <block id="092290fae4e70d17595077fcb0b5c7c4" category="list-text">* 保护 "-protection-policypolicy_name] | -noprotect*</block>
  <block id="23c93a19152cebf9804e242336c6c836" category="paragraph">指定根据归档日志保护策略保护归档日志文件。</block>
  <block id="70487bc6e96c2bd1441495dbb68a5df1" category="paragraph">指定在成功执行配置文件创建操作后不收集转储文件。</block>
  <block id="1cfee939597517de62db524279b0d21a" category="paragraph">在控制台中仅显示错误消息。默认设置显示错误和警告消息。</block>
  <block id="82d628b9f0ac31d9e55082fadc080da8" category="list-text">要删除配置文件，请输入以下命令： `smo profile delete -profile profile_name`</block>
  <block id="6c19855c8b0bbed07917bf19284e7d5c" category="list-text">*-protect -protection-policy policy*</block>
  <block id="2c11eed191abe84952ca826438b44550" category="paragraph">指示是否应将备份保护到二级存储。</block>
  <block id="8a8b5158dac55d903871209faa139d5b" category="admonition">如果指定了 -protectis 而未指定 -protection-policy ，则数据集将没有保护策略。如果在创建配置文件时指定了 -protect 且未设置 -protection-policy ，则稍后可通过 smo profile update 命令设置此配置文件，或者由存储管理员通过 Protection Manager 的控制台设置。</block>
  <block id="d8244a6c173adfaf43235d0f55a18961" category="paragraph">指定根据归档日志保护策略保护归档日志文件。</block>
  <block id="2cf91b76b1ec3d2222d6b60a2cadcb55" category="paragraph">noprotect 选项指定不保护归档日志文件。</block>
  <block id="cbbba72dd2e9743319ff8e7c6101fa4f" category="paragraph"><block ref="cbbba72dd2e9743319ff8e7c6101fa4f" category="inline-xref-macro-rx"></block></block>
  <block id="448e544aa6aee4ab7788278ef77a5317" category="list-text">导航到 CD /opt/netapp/smO/storages 。</block>
  <block id="079844a2e1f9a034ff0ef4948232e8c2" category="paragraph">存储库目录可能包含每个存储库的两个文件。带有数字符号（ # ）的文件名使用 SnapManager 3.1 或更高版本创建，而带有连字符（ - ）的文件名使用 SnapManager 3.0 创建。</block>
  <block id="8bc70909cb55c8f74e29e1091a1da8c8" category="summary">您可以找到一些常见的已知图形用户界面（ Graphical User Interface ， GUI\ ）问题的相关信息，这些问题可能有助于您解决这些问题。</block>
  <block id="55c914ec6a1c3f2f36379a26c3eac2b3" category="list-text">启动控制台。</block>
  <block id="35c067ba09fbb287d3b5971247dbd4b1" category="paragraph">由于主机凭据无法在 SUSE Linux Enterprise Server 10 和 SUSE Linux Enterprise Server 11 平台中进行身份验证，配置文件创建失败。</block>
  <block id="f48c02be3bd4b8b4df36a89c1265a806" category="paragraph">SnapManager 使用可插拔身份验证模块（ PAM ）对用户进行身份验证。在 SUSE Linux Enterprise Server 10 和 11 版平台中，默认情况下， /etc/pam 目录中没有提供所需身份验证详细信息的 SnapManager 文件。因此，主机凭据将失败。</block>
  <block id="50efeb85623f5e12389471dd55dac4c5" category="paragraph">要成功登录到 SUSE Linux Enterprise Server 10 和 11 平台中的主机，请执行以下步骤：</block>
  <block id="516c6c58a75b83120fd21eb031de07c4" category="list-text">在 /etc/pam .d/ 中创建 SnapManager 文件。</block>
  <block id="a8bed152e4906e1e6eee166c6e666ac3" category="list-text">将以下内容添加到位于 /etc/pam .d/SnapManager 的 SnapManager 文件中：</block>
  <block id="d3254f41849bdcd6d993f9d467c46dba" category="list-text">保存此文件，然后重试配置文件创建操作。</block>
  <block id="006f32e44a5d9cb333c5064c304d6c0e" category="paragraph">在克隆拆分操作后， SnapManager 无法生成新配置文件，您不知道是否已创建新配置文件。</block>
  <block id="665f9ec89a14eca81fa408a090f994f1" category="paragraph">如果在克隆拆分操作后未创建新配置文件， SnapManager 将无法提示您。由于未显示失败操作的消息，因此您可能会假定已创建配置文件。</block>
  <block id="f798149bcb88079098d79384d89ec95c" category="paragraph">要了解是否为克隆拆分操作创建了新的配置文件，请执行以下步骤：</block>
  <block id="3cf3172bf5b8e644b144abfd24ccca6d" category="list-text">单击 * 监控 * 选项卡，右键单击克隆拆分操作条目，然后选择 * 属性 * 。</block>
  <block id="3d4451268db97ea5eb1fd2403e77134b" category="list-text">在配置文件属性窗口中，单击 * 日志 * 选项卡以查看克隆拆分操作和配置文件创建日志。</block>
  <block id="31fa5dc574d7c2932e968754b8be3094" category="list-text">单击 * 任务 * &gt; * 添加现有存储库 *</block>
  <block id="9a494a307dcd9ef43989e41de8c95991" category="paragraph">从配置文件属性窗口的 * 保护管理器保护策略 * 下拉菜单和配置文件创建向导的策略设置页面中选择 * 无 * 时，将显示错误消息 Unable to list the protection policies for the following reason ： Protection Manager is temporarily unavailable 。</block>
  <block id="a8272d5cb057fb318b5355da49195612" category="paragraph">未为保护管理器配置 SnapManager ，或者保护管理器未运行。</block>
  <block id="a61e8f328ff7ae0ad8f8ecfcc05d1c38" category="summary">您可以从存储库数据库中删除克隆拆分操作周期条目。</block>
  <block id="3509f1aad1f66cef2d8a0fe248a39f7f" category="doc">从存储库数据库中删除克隆拆分操作周期</block>
  <block id="a871a3544e94cd4c797dc86ed145ad3a" category="list-text">要从存储库数据库中删除克隆拆分操作周期条目，请输入以下命令： smo clone split -delete -profileprofile （ -hosthostname ） "-labelsplit -label | -idssplit -id] （ -quiet | -verbose ）</block>
  <block id="777db1e0a644b465b6ef04516c3bf764" category="summary">使用此命令可以从存储库数据库中删除克隆拆分操作周期条目。</block>
  <block id="047e37c9457304cdbf4725c57b53da78" category="doc">smo clone split — delete 命令</block>
  <block id="08945cad4deb9b4ccb003fd6c85a0c0f" category="paragraph">指定克隆拆分启动进程生成的标签名称。</block>
  <block id="548279c69ba0101130cec42b18061835" category="paragraph">指定克隆拆分启动进程生成的唯一 ID 。</block>
  <block id="b1ff5704b48e42d700d43961dd415064" category="summary">商标</block>
  <block id="76420fea807491bf342fd712e8a6885e" category="summary">通过 SnapManager ，您可以拆分和管理使用 FlexClone 技术创建的现有克隆。在 FlexClone 技术中，克隆和原始数据库共享相同的物理数据块。</block>
  <block id="b06c60815e4dd00cc8760c39a02058f8" category="doc">拆分克隆</block>
  <block id="56f782fe787964c62a269aac39f1b117" category="paragraph">在执行克隆拆分操作之前，您可以知道要拆分的克隆的估计大小以及聚合上所需的可用空间。</block>
  <block id="aecd17ab9198b3e7812eeab52c396583" category="paragraph">如果克隆拆分操作成功， SnapManager 将生成一个新的配置文件。如果 SnapManager 无法创建新配置文件，您可以手动创建新配置文件。您可以使用新配置文件创建数据库备份，还原数据和创建克隆。如果克隆拆分操作成功，无论是否创建新配置文件，克隆相关元数据都会从存储库数据库中删除。</block>
  <block id="76fcc8a8f6d040ccbe61ac64f6b30ff2" category="paragraph">您可以执行以下与拆分克隆相关的任务：</block>
  <block id="05ea6c467bfc910c7a2fdea16428b72a" category="list-text">查看克隆拆分估计值。</block>
  <block id="8e641aba920dee4defa904551487bf1d" category="list-text">拆分主存储上的克隆。</block>
  <block id="be4e84dfdb55d65ba12d02a60c632b21" category="list-text">拆分二级存储上的克隆。</block>
  <block id="616be2a30a6f221b6b2769a63ff8ad51" category="list-text">查看克隆拆分操作状态。</block>
  <block id="e7dea1c00d660275abefb95e64fc6c54" category="list-text">停止克隆拆分操作。</block>
  <block id="4f5cb3d06687f242dff77e8e6fff5fc0" category="list-text">销毁此配置文件以及底层存储。</block>
  <block id="83ad1ba9f8e63439ae01335dfb7266ba" category="list-text">删除为拆分克隆创建的配置文件。</block>
  <block id="d9589075d14da80fb4044b8a5861aef7" category="paragraph">从克隆的父卷拆分克隆时，与克隆的卷关联的 Snapshot 副本将被删除。无法使用在克隆拆分过程之前为克隆的数据库创建的备份，因为这些备份的 Snapshot 副本会被删除，并且备份会在存储库中保留为陈旧条目。</block>
  <block id="fb6d98195e5758e7acbbbce08841d06b" category="list-text">要列出您有权访问的资源，请输入以下命令： `smo credential list`</block>
  <block id="34ec45ba2ae96e6aa3ae54405e2b363f" category="list-text">要使本地用户的主目录能够识别配置文件到存储库的映射，以便路由操作请求，请输入以下命令： `smo profile sync -repository-dbname repo_dbname-host repo_host-port repo_port-login-username repo_username [-quiet | -verbose ]`</block>
  <block id="22a22372ea4b5101ea0b7a09c513d754" category="summary">使用此命令可以查看克隆拆分的已用存储估计量。</block>
  <block id="a8bebb25345315d488845f129824b60d" category="doc">smo clone split — estimate 命令</block>
  <block id="680406954e212dc403217ddce08e6166" category="summary">如果使用的是 Oracle RAC 数据库，则每当在主 RAC 节点中执行操作时，都必须使用 initasmdisks 文件更新 RAC 节点。</block>
  <block id="e5c49a3a1fb2b69fcb546ae225ba1095" category="doc">支持不使用 ASMLib 的 Oracle RAC ASM 数据库</block>
  <block id="bda060e05265d2288dc35dd47d3568d7" category="paragraph">如果从主节点登录到 RAC 节点不需要身份验证，则 asmmain.sh 会对所有 RAC 节点执行 initasmdisks 的安全复制（ SCP ）。每当进行还原时，都会调用主节点的 initasmdisks 文件，并且可以更新 asmmain.sh 脚本，以便在所有 RAC 节点中调用相同的脚本。</block>
  <block id="f36c286b5abdc61ffc202af77b79a55d" category="paragraph">创建的 /etc/initasmdisks 文件必须从其中一个启动脚本或 rc3.d 中新定义的脚本执行在 oracleha 服务启动之前，应始终执行 /etc/initasmdisks 文件。</block>
  <block id="6b740cb85e1eb98013b9beddd41116e9" category="paragraph">由于恢复失败，使用外部归档日志文件位置克隆 Real Application Clusters （ RAC ）数据库的联机数据库备份失败。这是因为在克隆数据库备份时， Oracle 数据库无法找到并应用归档日志文件，无法从外部归档日志位置进行恢复。</block>
  <block id="d9986a0e4a544728ac062e0b96ffde49" category="list-text">创建配置文件，以便能够对主存储，二级存储甚至三级存储进行完整或部分备份和备份。</block>
  <block id="57e22fa22a35396cea22a89794564a6d" category="admonition">要对 Real Application Cluster （ RAC ）数据库使用操作系统身份验证， SnapManager 服务器必须在 RAC 环境的每个节点上运行，并且 RAC 环境中的所有 Oracle 实例的数据库密码必须相同。SnapManager 使用数据库用户名和密码连接到配置文件中的每个 RAC 实例。</block>
  <block id="074bb9c0302c43eff48e2308645771b2" category="list-text">sqlnet.authentication_services 设置为 none 时的数据库身份验证。然后， SnapManager 会对目标数据库的所有连接使用数据库用户名和密码。</block>
  <block id="6ee35a126e9a98b3146fbb58c9de3032" category="admonition">要对自动存储管理（ Automatic Storage Management ， ASM ）实例使用数据库身份验证，必须输入用于登录到 ASM 实例的用户名和密码。</block>
  <block id="bce07384a0ed1e272c93fab3a98f8107" category="cell">是否支持 ASM 实例的数据库身份验证</block>
  <block id="c13421de9f71d47475b33cdc7fa40713" category="paragraph">UNIX 上的独立 ASM 数据库</block>
  <block id="6a702d55b9e65ac468cada66917572c4" category="paragraph">Oracle 11.2.0.3 及更高版本</block>
  <block id="a4747dc239ef2a19e5c1e490b128f5dc" category="paragraph">UNIX 上 RAC 数据库上的 ASM 实例</block>
  <block id="08544ee6d4960c0ffda3de600a1434b9" category="paragraph">Oracle 11.2.0.3</block>
  <block id="bcde8a85de0be98b1bc37a42c6b6c3c7" category="paragraph">NFS 上的 RAC 数据库</block>
  <block id="26665b24c41579aa6033e6712e70b339" category="summary">此命令将创建一个存储库，用于存储数据库配置文件和关联凭据。</block>
  <block id="dcf60515cf9fb8246caddb60955643ad" category="summary">您可以使用 SnapManager 克隆已受保护的备份的副本。</block>
  <block id="ef694434e1573e0e67c2ef1bb48db635" category="doc">克隆受保护的备份</block>
  <block id="bd426e44cb81096eaea340578736ba30" category="paragraph">主机（为克隆选择）必须能够使用相同的存储协议（例如 SAN 或 NAS ）访问二级存储。</block>
  <block id="78f5484e048998a43363521d1e6de84b" category="paragraph">您可以使用 -from-secondary 选项指定要从二级存储克隆的。</block>
  <block id="15c09650d04abc72a2638da28489d9f2" category="admonition">如果您使用的是在 7- 模式下运行的 Data ONTAP ，则必须为 -copy-id 选项指定有效值。但是，如果使用的是集群模式 Data ONTAP ，则不需要 -copy-id 选项。</block>
  <block id="53b8b7bdcfec1e8ae29f1652a47b4edb" category="paragraph">删除二级存储系统上受保护备份的克隆可能会失败。如果主存储系统和二级存储系统的系统时间未同步，则会发生此问题描述。</block>
  <block id="26e6334d0012584fd599df144f18bc7e" category="list-text">创建受保护备份副本的克隆： smo clone create -backup-labelbackup_name-newsidnew_sid-labelclone_label-profileprofileprofile_name-clonesefull_path_to_cloneseFile -from-secondary -copy-idid</block>
  <block id="09da1dd5b2c353800c10214d9a89442b" category="list-text">更新现有存储库： `smo repository update -repository -dbname repository_service_name -host repository_host_name -login -username repository_user_name -port repository_port`</block>
  <block id="ed8f7310107ee690a2cc6224629174cc" category="list-text">您必须具有存储库数据库所在主机的 root 用户凭据。</block>
  <block id="7758e1f147b189e8fde01e2a2c58de5b" category="paragraph">您可以从 SnapManager 命令行界面或图形用户界面重置密码。重置密码时， SnapManager 会查询存储库主机上的 SnapManager 服务器以确定存储库主机的操作系统。您必须输入用于连接到存储库主机的授权用户凭据。SnapManager 服务器使用用户在存储库数据库上的根凭据对用户进行身份验证。身份验证成功后， SnapManager 会使用新密码重置 SnapManager 服务器上的配置文件密码。</block>
  <block id="07ac18092eed09ee13f5efea91b1956a" category="list-text">输入以下命令以重置配置文件密码： "mo password reset -profileprofile "-profile-passwordprofile_password] [-repository-hostadmin-passwordadmin_password]"</block>
  <block id="592d776adfe417ae89e38bd116124e51" category="list-text">在二级存储资源上创建受保护的备份</block>
  <block id="428806327416f90de5c87fd05585cc57" category="paragraph">要使用保护策略保护备份，必须安装 Protection Manager 。备份可以具有以下保护状态之一：未请求，未受保护或受保护。</block>
  <block id="29f4bd33ba7752ba82cd5c92d6b6c88a" category="summary">在此示例中创建备份时， DBA 会选择创建完整备份，设置备份选项并选择对二级存储的保护。虽然备份最初是在本地存储上进行的，但由于此备份基于启用了保护的配置文件，因此备份会根据 Protection Manager 中定义的保护策略计划传输到二级存储。</block>
  <block id="c7c067683288ef0814291501621b676e" category="doc">使用 SnapManager for Oracle 创建受保护的备份</block>
  <block id="1e5845b0996f4ed673deef3cea1cbc3f" category="paragraph">在此示例中创建备份时， DBA 会选择创建完整备份，设置备份选项并选择对二级存储的保护。虽然备份最初是在本地存储上进行的，但由于此备份基于启用了保护的配置文件，因此备份会根据 Protection Manager 中定义的保护策略计划传输到二级存储。</block>
  <block id="9ae7f15819645080f3979d1d0c307fbc" category="list-text">在 SnapManager 存储库树中，右键单击包含要备份的数据库的配置文件，然后选择 * 备份 * 。</block>
  <block id="b4da9935c0baa02e40112b2a98cdc6de" category="paragraph">此时将启动适用于 Oracle 备份的 SnapManager 向导。</block>
  <block id="6a19c8cafc96517b25a8160884f833bd" category="list-text">输入 production_pay单 作为标签。</block>
  <block id="41473ac60d19776aba019e89eb76ecff" category="list-text">输入生产薪资 1 月 19 日备份作为注释。</block>
  <block id="cfe9cd25a51c546b7a0a9b9e08dfb2c7" category="list-text">选择 * 自动 * 作为要创建的备份类型。</block>
  <block id="f1afc37c2a204d280600672cc764a918" category="paragraph">这样， SnapManager 就可以确定是执行联机备份还是脱机备份。</block>
  <block id="1d781f0cfdb697edbc12e8762af906a4" category="list-text">选择 * 每日 * 或 * 每周 * 作为备份频率。</block>
  <block id="cc9fa03cfb4afae81afdcc55f30f42e2" category="list-text">要确认备份格式对于 Oracle 有效，请选中 * 验证备份 * 旁边的框。</block>
  <block id="84002eb2be8fb6e2e4e5989689d49429" category="paragraph">此操作使用 Oracle DBVerify 检查块格式和结构。</block>
  <block id="5e818c10160c48bb00b39e4ad446a3ad" category="list-text">要强制数据库的状态进入适当模式（例如从打开到挂载），请选择 * 如果需要，允许启动或关闭数据库 * ，然后单击 * 下一步 * 。</block>
  <block id="d051befefc29c4ff6ae4c4f89fe17046" category="list-text">在要备份的数据库，表空间或数据文件页面中，选择 * 完整备份 * ，然后单击 * 下一步 * 。</block>
  <block id="01df2695fca705d9f93a5b82bab9360b" category="list-text">要保护二级存储上的备份，请选中 * 保护备份 * ，然后单击 * 下一步 * 。</block>
  <block id="fb192f47a738f879e026f726ccece8f3" category="list-text">在 Perform Operation 页面中，验证您提供的信息，然后单击 * 备份 * 。</block>
  <block id="5aa8a2b1a24a09d2ff1a6723b08aba1a" category="list-text">在进度页面中，查看备份创建的进度和结果。</block>
  <block id="9955c8763971afdaf0cb925d3268765d" category="list-text">要查看操作的详细信息，请单击 * 操作详细信息 * 。</block>
  <block id="bd3f10c6a00e17e094a34b731f838c67" category="summary">管理员可以从二级存储还原受保护的备份，并可以选择将数据复制回主存储的方式。</block>
  <block id="3ba83f9de4446cab1ee7a2f168b8ad7e" category="doc">使用 SnapManager for Oracle 从二级存储还原备份</block>
  <block id="cb34be4a50451e068d474cdbfd8815c1" category="paragraph">在尝试还原备份之前，请检查备份的属性，并确保备份在主存储系统上释放并在二级存储上受到保护。</block>
  <block id="afea115abba1a6cc993ebb4479daded7" category="list-text">从 SnapManager for Oracle 存储库树中，右键单击要还原的备份，然后选择 * 还原 * 。</block>
  <block id="1b2f1fd1405a0bfaf60ca6797939fb29" category="list-text">在还原和恢复向导欢迎页面中，单击 * 下一步 * 。</block>
  <block id="6a252810118dae0cb2141cb6c1b91052" category="list-text">在还原配置信息页面中，单击 * 使用控制文件完成数据文件 / 表空间还原 * 。</block>
  <block id="75f651e0b646f2e3e1c7118c9ddb55fe" category="list-text">单击 * 如果需要，允许关闭数据库 * ，然后单击 * 下一步 * 。</block>
  <block id="4e3d005b8cfb89435a85c6e8a2dd3d85" category="list-text">在恢复配置信息页面中，单击 * 所有日志 * 。然后单击 * 下一步 * 。</block>
  <block id="1f6edea0a4b1183257d01ceb5cea3236" category="list-text">在还原源位置配置页面中，选择受保护备份源的 ID ，然后单击 * 下一步 * 。</block>
  <block id="a638cb1ed14b55138b72c2d40db3c442" category="list-text">在卷还原配置信息页面中，单击 * 尝试卷还原 * 以尝试卷还原。</block>
  <block id="ec4012d0d8b2d41fe929fa7433e13316" category="paragraph">这样，如果卷还原方法无法完成， SnapManager 就可以使用基于文件的还原方法。</block>
  <block id="ae881a81c36750afc36599f7eb7c7d65" category="list-text">要查看快速还原的资格检查以及有关强制检查和可覆盖检查的信息，请单击 * 预览 * 。</block>
  <block id="5f9d9aa9119ac4397f7c0d155fdaf547" category="list-text">在 Perform Operation 页面上，验证您提供的信息，然后单击 * 还原 * 。</block>
  <block id="8561bbee151f203fd4fc2b420bb53895" category="paragraph">删除受保护的备份时， SnapManager 会从二级存储和 SnapManager 存储库中删除该备份。下表显示了删除本地备份时在主存储和二级存储上执行的操作：</block>
  <block id="23e07ff9b90e2544e031a7aca5a76c0a" category="paragraph">删除 Snapshot 副本</block>
  <block id="1d2e4c3f36c56ebe4c6d06371854c4fc" category="paragraph">SnapManager 会删除本地备份。</block>
  <block id="4aa6bb9f152845eab9727308dcffc487" category="paragraph">本地备份已释放。如果删除已释放的备份，则备份元数据将从存储库中删除。</block>
  <block id="ba838bfa0f4e802f44d51b0f4210f0b7" category="paragraph">无论本地备份是否受到保护， SnapManager 都会删除该备份。</block>
  <block id="9f7ecaa179265c831789de19e6fdf03d" category="paragraph">SnapManager 会删除二级存储上的备份</block>
  <block id="59187352d0feabffb11f4f8f8e3149d9" category="paragraph">SnapManager 会删除本地备份和二级副本。</block>
  <block id="44c2b59aca1d14b269ee0eb8708591b1" category="paragraph">如果您尝试删除受二级存储保护的备份，则 Snapshot 副本可能会被标记为删除，并稍后由 Protection Manager 删除。</block>
  <block id="7d0f53d345fd110ccaba132079fe4c4d" category="summary">如果满足所有强制快速还原资格条件，您可以强制 SnapManager for Oracle 使用基于卷的 SnapRestore 过程，而不是其他还原过程。</block>
  <block id="607b5455e83c81029faef582570b31b6" category="paragraph">您可以将 backup restore 命令与 -fast 结合使用： `backup restore -fast 【需要我们的支持，覆盖我们的支持，回退和关闭】`</block>
  <block id="3f40579cf1d740aa93975a0d51a26dda" category="paragraph">只有在要对完整备份执行完整还原时，才能使用 -fast 选项。ffast 选项包括以下参数：</block>
  <block id="c8ba5bdcc755dbab773f36e57c52c7c9" category="list-text">Require ：如果满足所有强制还原资格条件且未找到可覆盖检查，则可用于执行卷还原。</block>
  <block id="965ab8d1053926cebfe5a42993146666" category="paragraph">如果指定 -fast 选项，但未指定 -fast 的任何参数，则 SnapManager 会默认使用 -require-parameter 。</block>
  <block id="384e77706bbd0b69e4c6f26b15e0049a" category="list-text">Override ：用于覆盖非强制资格检查并执行基于卷的快速还原。</block>
  <block id="4c6cab120c94e7223980ba22b0bea235" category="list-text">回退：用于使用 SnapManager 确定的任何方法还原数据库。</block>
  <block id="4991a1d9176789250da106231439e4e8" category="paragraph">如果不指定 -fast ，则 SnapManager 会使用 -backfallt 参数作为默认值。</block>
  <block id="0547c79a4c15be6d7e91b2918798425e" category="list-text">off ：用于避免执行所有资格检查所需的时间，以便执行基于文件的还原过程，而不是快速还原过程。</block>
  <block id="88eafc829219c74ec134401b4d0fd1c2" category="paragraph">如果备份未通过强制性资格检查，则无法成功完成快速还原。</block>
  <block id="a4f4bc5fbe97ef357a0043747882b38e" category="paragraph">SnapManager 仅在基于 UNIX 的环境中执行基于卷的快速恢复； SnapManager 不会在 Windows 环境中执行快速恢复。</block>
  <block id="75246c00c270e3c55693731220ab3526" category="paragraph">在对数据文件备份执行 VBSR 时，如果数据文件和归档日志文件位于同一个卷中，并且归档日志文件不在活动文件系统中，则数据库还原和恢复将成功。但是，未来的归档日志 Snapshot 会作为 VBSR 的一部分被删除，从而导致存储库中归档日志备份的条目过时。</block>
  <block id="86c40724ca704acda204fcf9d9f68c89" category="list-text">输入以下命令： smo backup restore -profileprofile_name-labelLabel-complete-fast require-verbose</block>
  <block id="4b4e60bc798eeda87928b652811f1403" category="list-text">如果资格检查确定没有强制检查失败，如果可以覆盖某些条件，并且您要继续执行还原过程，请输入以下命令： backup restore -fast override</block>
  <block id="a50ca8316d87475122e9ce26a1f2c029" category="paragraph"><block ref="a50ca8316d87475122e9ce26a1f2c029" category="inline-xref-macro-rx"></block></block>
  <block id="c98e06c57d714c324ad7ae02affb642e" category="summary">您可以更新配置文件以修改配置文件密码，要保留的备份数，对数据库的访问，对数据库进行身份验证的操作系统 \ （ OS\ ）身份验证，反之亦然，以及有关主机的信息。如果 Oracle 数据库密码信息发生更改，您还必须在配置文件中更改此信息。</block>
  <block id="646afb71b9a8f44b26bfa14516ab6c6a" category="paragraph">如果在配置文件上启用了保护策略，则无法使用 SnapManager 更改此策略。存储管理员必须使用 Protection Manager 的控制台更改此策略。</block>
  <block id="b4d13656a9f7e2d0082d4f1aed899690" category="paragraph">通过 SnapManager （ 3.2 或更高版本），您可以使用 -separate -archivelog-backups 选项更新配置文件，以便将归档日志备份与数据文件备份分开。您可以为归档日志备份指定单独的保留期限和保护策略。通过 SnapManager ，您可以将归档日志备份与联机数据库备份一起使用。您还可以同时创建联机数据文件备份和归档日志备份以进行克隆。创建联机数据文件备份时，系统会立即创建归档日志备份以及数据文件。</block>
  <block id="0421b363410c9048f685b5e2f6ae6bdb" category="list-text">输入以下命令： `smo profile update -profileprofile "-new-profilenew_profile_name] -profile-passwordprofile_password]-database-dbnamedb_dbname-host db_host "-sidb_sid_sidedb_sided_sides] -login -usernamedb_group-password db_password-port stance_port] [-snap-snap-snap-snap-snap-snap-snap-snap-name email_address2-subjectsubject_pattern]] -separate archivelog-backups-retain-archivelog-backups-hourshs _ -daysdays _ -weeksweeks| -monthsmonths [-protect [-protection-policy-policy_name] _ -noprotect] [-include-with-online backups _ one-backups _ -no-include-include-storage-online-backups`</block>
  <block id="aea743d464dcf2fc6aa19bbfa38bc6d3" category="paragraph">* 更改配置文件以使用操作系统身份验证 *</block>
  <block id="c5b61ac728055d08e83b71e08f552d80" category="paragraph">请指定以下内容，而不是添加用户名，密码和端口：</block>
  <block id="5535f1a62997df4a2df76a3a73c2b9b2" category="list-text">-osgroupos 组作为与操作系统帐户关联的组，通常是用于安装 Oracle 的帐户</block>
  <block id="9df9f73aca918a366262ab50eba3b67d" category="paragraph">* 使用自动存储管理（ Automatic Storage Management ， ASM ）实例身份验证创建配置文件 *</block>
  <block id="5980afb1744c6603824bad2e399ba21b" category="list-text">-asmusernameasminstance_username 是用于登录到 ASM 实例的用户名。</block>
  <block id="8b3606f06532bb88cdd48142c6aabc5a" category="paragraph">* 使用目录作为 Oracle Recovery Manager （ RMAN ）存储库，或者您要删除 RMAN*</block>
  <block id="4cbe4b3054360b43dfd7148c932134ce" category="list-text">-tnssname tnsnamname 作为 tnsnames.ora 文件中定义的 tnsnamname 。</block>
  <block id="63d3224c7934477148a579a72633dd14" category="list-text">-login -username username 作为连接到 RMAN 目录所需的用户名。</block>
  <block id="1c46f9f57a4cd62f5b28539b39820fd2" category="paragraph">如果未指定， SnapManager 将使用操作系统身份验证信息。您不能对 Real Application Clusters （ RAC ）数据库使用操作系统身份验证。</block>
  <block id="29e028c7af53eabe0b9567db4fb4129b" category="list-text">-controlfile （如果使用控制文件作为 RMAN 存储库）。</block>
  <block id="fe1a7b90d838046a3aca134d790cb160" category="list-text">-remove-RMAN 以删除 RMAN 。</block>
  <block id="bbb5d168f124c4750a9a04dbf2b140cc" category="paragraph">* 禁用配置文件的备份保护 *</block>
  <block id="9efdab8b83f3307ee7f35cf6858126a7" category="paragraph">指定 -noprotect 以不保护使用配置文件创建的数据库备份。对于已启用 -protect 的配置文件，如果要禁用保护，则会显示一条警告消息，指出此操作将删除数据集，并且您将无法还原或克隆此配置文件的备份。</block>
  <block id="a09c9a904fba71e77b0b2b997badc13d" category="list-text">-protect 在 Data Fabric Manager （ DFM ）服务器中创建应用程序数据集，并添加与数据库，数据文件，控制文件和归档日志相关的成员。</block>
  <block id="f190d99cf81954237506f06557286b5e" category="paragraph">如果数据集存在，则在创建配置文件时会重复使用该数据集。</block>
  <block id="ef8b5ad2fa797500a2cba858a3967133" category="list-text">要查看更新后的配置文件，请输入以下命令： `smo profile show`</block>
  <block id="19b5e4a5a04786d3a69fa4dd5b1e7cab" category="list-text">输入以下命令： smo profile update -profileprofile "-profile-passwordprofile_password]] ｛ -database-dbnamedb_dbname-host db_host "-siddb_sid] ｛ -login -usernamedb_username-password db_password-port db_port]] ｛ -groupm ｛ -controlfile _ ｛ -group-snap-name]-snap-snap-snap-name]-snap-snap-snap-name]-snap-man-snap-snap-snap-name]-snap-snap-snap-snap-snapmirrorings1&lt;-snap-snap-snap-snap-snap-snap-snap-name]&lt;-snap-snap-snap-snap-snap-snap-snap-snap-name]-snap-snap-snap-snap-snap-snap-snap-snap-name]-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-name]-snap-snap-snapmirrorings1&lt;-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-snap-name]</block>
  <block id="6b88c8a489f494915d6a7778e5591de0" category="paragraph">以下示例显示了电子邮件主题模式：</block>
  <block id="59b84fc8756dc62c13b4ac8d9e292a12" category="paragraph">有关如何使用 SnapDrive 命令更改存储系统名称的信息，请参见 _Troubleshooting storage system name issues_ 。</block>
  <block id="d5db414022d128ad2d9f9a9446b638e7" category="admonition">如果 SnapDrive 无法识别存储系统并显示错误消息，则可以输入 ipmigrate 命令以及存储系统的早期和更高主机名。有关存储系统名称问题的追加信息，请参见 _Troubleshooting storage system name issues_ 。</block>
  <block id="bb8ebe3535723214df6c10ad3cc972fc" category="list-text">输入以下命令： `smo storage rename -profileprofile-oldnameold_storage_name-newnamenew_storage_name [quiet | -verbose ]`</block>
  <block id="9d7590a62a1e3d2f02c915f3518873b3" category="paragraph"><block ref="9d7590a62a1e3d2f02c915f3518873b3" category="inline-xref-macro-rx"></block></block>
  <block id="ac858ac25c790075558ccd96d69e3f93" category="image-alt">prnt en drw SMO smsap db 表 unix</block>
  <block id="b504d8e2a83c016cd81cf1b2433da17f" category="list-text">要显示与特定配置文件关联的存储系统的信息，请输入以下命令： `smo storage list -profileprofile "-quiet | -verbose`</block>
  <block id="95abc6912bf5176da2269e08838b8d09" category="summary">启用基于角色的访问控制 \ （ RBAC ）后，您必须配置 DataFabric Manager 服务器以包括 RBAC 功能。此外，还必须注册在 DataFabric Manager 服务器中创建的 SnapDrive 用户以及 SnapDrive 中存储系统的 root 用户。</block>
  <block id="9592d3770de610a395c23d4f2e786ead" category="doc">在启用 RBAC 时配置 DataFabric Manager 服务器和 SnapDrive</block>
  <block id="3c44b8db44a1656adc4b95bb72a74bcf" category="paragraph">启用基于角色的访问控制（ Role-Based Access Control ， RBAC ）后，您必须配置 DataFabric Manager 服务器以包含 RBAC 功能。此外，还必须注册在 DataFabric Manager 服务器中创建的 SnapDrive 用户以及 SnapDrive 中存储系统的 root 用户。</block>
  <block id="8a6e6fed8c1d158f9929a6e4e916a104" category="list-text">配置 DataFabric Manager 服务器。</block>
  <block id="cf975fe11375f3a52b2b280dce73e97f" category="list-text">要刷新 DataFabric Manager 服务器以更新目标数据库直接在存储系统上所做的更改，请输入以下命令： dfm host discover storage_system</block>
  <block id="4685ded2f720e0d93131aef244530f00" category="list-text">在 DataFabric Manager 服务器中创建新用户并设置密码。</block>
  <block id="f430a9f0a684747b29394649812d4830" category="list-text">要将操作系统用户添加到 DataFabric Manager 服务器管理列表中，请输入以下命令： dfm user add sd-admin</block>
  <block id="5f8ef41913bc5b925cae6cb016c02090" category="list-text">要在 DataFabric Manager 服务器中创建新角色，请输入以下命令： dfm role create sd-admin-role</block>
  <block id="dde75703fc71d6ff9fab2b21c1bca9bb" category="list-text">要将 dfm.Core.AccessCheck 全局功能添加到角色，请输入以下命令： dfm role add sd-admin-role dfm.Core.AccessCheck Global</block>
  <block id="4a740b8be0f36fc20890da11237996c5" category="list-text">要向操作系统用户添加 SD-admin-role ，请输入以下命令： dfm user role set sd-admin-role</block>
  <block id="fe7ab3577ac3a279c96d6bf4bdb9a222" category="list-text">要在 DataFabric Manager 服务器中为 SnapDrive root 用户创建另一个角色，请输入以下命令： dfm role create sd-protect</block>
  <block id="663abbe79e3072d7f4f42a20a2c1cef2" category="list-text">要将 RBAC 功能添加到为 SnapDrive root 用户或管理员创建的角色中，请输入以下命令： dfm role add sd-protect sd.Config.Read Globaldfm role add sd-protect sd.Config.Write Globaldfm role add sd-protect sd.Config.Delete Globaldfm role add sd-protect sd.Storage.Read Globaldfm role add.sd-protect.sd-fm</block>
  <block id="0ac52bbbab435553a010b757fc04713b" category="list-text">要将目标数据库 Oracle 用户添加到 DataFabric Manager 服务器的管理员列表中并分配 SD-Protect 角色，请输入以下命令： dfm user add -r sd-protectardb_host1\oracle</block>
  <block id="30796b05d335ac806267b5e28e4617b7" category="list-text">要在 DataFabric Manager 服务器中添加目标数据库使用的存储系统，请输入以下命令： dfm host set storage_system hostLogin=Oracle hostPassword=password</block>
  <block id="4d3ab6bc24b56c0931d932543dbd3afc" category="list-text">要在 DataFabric Manager 服务器中的目标数据库所使用的存储系统中创建新角色，请输入以下命令： dfm host role create -h storage_system-c "api-* ， login-*" storage-rbac role</block>
  <block id="1923f9a5a9779077111ab9ffbe935673" category="list-text">要在存储系统中创建新组并分配在 DataFabric Manager 服务器中创建的新角色，请输入以下命令： dfm host usergroup create -h storage_system-r storage-rbac — rolestorage-rbac 组</block>
  <block id="80e4acbb87278b2ed1f7ac2cbe4c166a" category="list-text">要在存储系统中创建新用户并分配新角色以及在 DataFabric Manager 服务器中创建的组，请输入以下命令： dfm host user create -h storage_system-r storage-rbac 角色 -p password -g storage-rbac grouptardb_host1</block>
  <block id="5d20c5492bdec83cd32ccf94e1a73c6c" category="list-text">配置 SnapDrive 。</block>
  <block id="e570e09c6b240d6d0be78ee1f3616b00" category="list-text">要向 SnapDrive 注册 SD-admin 用户的凭据，请输入以下命令： snapdrive config set -dfm sd-admindfm_host</block>
  <block id="55640a129367283f080914f3c17b3427" category="list-text">要向 SnapDrive 注册存储系统的 root 用户或管理员，请输入以下命令： snapdrive config set tard1b_host sktorage_system</block>
  <block id="b1183582dc7604eca2616c6387d2286d" category="summary">如果薪资数据库的活动内容意外丢失或销毁， SnapManager 和 NetApp 管理控制台数据保护功能支持从本地备份或二级存储还原该数据。</block>
  <block id="405afe05cf405805b37eeea1b96c0310" category="doc">从备份还原数据库</block>
  <block id="d5f318a11576b63fa4ff9bc7b20cdab2" category="summary">您可以运行 operation show 命令列出针对指定配置文件执行的所有操作的摘要信息。输出将列出客户端用户（客户端 PC\ 的用户）和有效用户（ SnapManager 中对选定主机有效的用户）。</block>
  <block id="169aeaed9bff252d0bd9d91cff84a531" category="list-text">要查看特定操作 ID 的详细信息，请输入以下命令： `smo operation show -profile profile_name "-label label | -id id] "-quiet | -verbos]`</block>
  <block id="2dbee1a1ed1f212ebe1d52936ba8cfe1" category="paragraph">SMO.config 文件位于 &lt;default installation location&gt;/properties/SMO.config</block>
  <block id="25da78648df3071c85b8dcac49d75af3" category="summary">您可以清除资源（主机，存储库和配置文件）的凭据缓存。此操作将删除运行命令的用户的所有资源凭据。清除缓存后，您必须重新对凭据进行身份验证，才能访问这些受保护的资源。</block>
  <block id="5715990e401dcdeb72d45181575d3cf4" category="summary">保护策略是用于控制如何保护数据库备份的规则。您可以在创建配置文件时选择保护策略。</block>
  <block id="4e4d289073741c829dad5782694eff80" category="doc">什么是保护策略</block>
  <block id="ef4115cec95716536f57b1667f0a8e5e" category="paragraph">保护策略定义以下参数：</block>
  <block id="f7a427741069f663f3f1e74c0c2abf02" category="list-text">何时将副本传输到二级存储</block>
  <block id="5ec6ce431d3edb3a2ceee01a9a93b33c" category="list-text">应在计划时间传输的最大数据量</block>
  <block id="c5e11c1771621a0b1b38d4271104bf1d" category="list-text">为每个备份位置保留副本的时间</block>
  <block id="24167cdb77b03e388401264b8e7ed66a" category="list-text">滞后时间的警告和错误阈值</block>
  <block id="53aeb943af2e5ad59b286025256ccd92" category="paragraph">启用保护后， SnapManager 将为数据库创建一个数据集。数据集由一组存储集以及与其数据关联的配置信息组成。与数据集关联的存储集包括用于将数据导出到客户端的主存储集以及其他存储集中存在的一组副本和归档。数据集表示可导出的用户数据。如果管理员禁用对数据库的保护， SnapManager 将删除数据集。</block>
  <block id="f30ea88d6c0053637dbf17f447bdf4a8" category="paragraph">您可以为 Real Application Clusters （ RAC ）数据库创建联机备份，前提是主数据库处于打开或已挂载状态，并且实例处于打开状态。如果本地实例处于关闭状态或未打开任何实例，则可以使用 -force 选项进行联机备份。</block>
  <block id="b3d1d60f464edbfaaaaf73235067534f" category="list-text">如果本地实例处于关闭状态，并且至少有一个实例处于打开状态，则可以使用 -force 选项将本地实例更改为已挂载。</block>
  <block id="afd216b4e31964f8753592466b94e9c8" category="list-text">如果没有实例处于 OPEN 状态，则可以使用 -force 选项将本地实例更改为 OPEN 。</block>
  <block id="8a771624c0effedd014a2b705301744d" category="paragraph">对于联机 RAC 数据库备份，如果本地实例处于关闭状态或未打开任何实例，请使用 -force 选项。</block>
  <block id="08c74a9d2fb32fb430f86618f622a36d" category="list-text">在 NAS 环境中，必须使用 SnapDrive config set-mgmtpathmanagement_pathmanagement_pathmanagement_pathmanagement_pathdataath_path 命令配置主 NAS 和二级 NAS 数据路径。</block>
  <block id="8c1a96bb89a61de7b325a7739dc9f5fc" category="paragraph">例如， SnapDrive config set -mgmtpath f3050-197-91 f3050-197-91 f3050-197-91 f3050-220-91 ，其中 `f3050-197-91` 是管理路径， `f3050-220-91` 是数据路径。</block>
  <block id="538606668847c9b3cfba2cd0a2bdae97" category="list-text">要删除 SnapManager 操作的历史记录，请输入以下命令： `smo history purge -profile ｛ -name ， profile_nameprofile_name1 ， profile_name2] | all-repository-login （ -passwordrepo_password ） -usernamerepo_username-verbose namerepo_dbname-host-portrepo_port ｝ -operation.`</block>
  <block id="f34280148b1a7adb2c4609d42a5660fb" category="paragraph">执行完整备份时， SnapManager 会将整个数据库置于联机备份模式。单个表空间（例如 /vol/volA/TS1_1.dbf ）处于联机备份模式的时间比指定的特定表空间或数据文件长。</block>
  <block id="b8419d1867d319f5a96113e57bb3bfc6" category="paragraph">此示例将在 command.txt 中的 /tmp 下包含 profile create 命令来创建配置文件。然后，您可以运行 SMO cmdfile 命令。</block>
  <block id="c704ba7228d84f891511687c35dd7df6" category="paragraph">此文本文件包含以下信息：</block>
  <block id="284bf6564536bee0531b049d68e537f8" category="paragraph">现在，您可以通过使用 command.txt 文件运行 smo cmdfile 命令来创建此配置文件：</block>
  <block id="9efaf63f81e3bb7c3d6d5b8714ec322a" category="section-title">Real Application Clusters （ RAC ）数据库</block>
  <block id="51114804d35a1290250f3e77c0cd932b" category="paragraph">oradata 数据库名称</block>
  <block id="a3af4865c6df0101d8d6ce53a732bfd0" category="paragraph">oratemp_dbname</block>
  <block id="9ef88f21feb2b910b070699f43415ce8" category="paragraph">oracntrl01_dbname （多路复用）</block>
  <block id="70bb9440eb988a0fab6ad20075a1dcec" category="paragraph">oracntrl02_dbname （多路复用）</block>
  <block id="aec3615e419e0230df2a302f3e997137" category="paragraph">oralog01_dbname （多路复用）</block>
  <block id="d4c41168d21d7355316d91abca4b3612" category="paragraph">oralog02_dbname （多路复用）</block>
  <block id="901af59adaa910690dba145345151dc6" category="paragraph">oraarch_dbname</block>
  <block id="f76fe4641982b2d753194cee25211211" category="paragraph">集群文件</block>
  <block id="1f3477147fe51376a2a7013d3f05e8b0" category="paragraph">oracrs_clustername</block>
  <block id="e123b37686a9a9d716a6e091b0228582" category="section-title">自动存储管理（ Automatic Storage Management ， ASM ）数据库的单个实例</block>
  <block id="9a48bc6004b0335f1530e84492854f46" category="cell">LUN 名称</block>
  <block id="91d1b895c001ab838cef9f49e7c03bba" category="paragraph">orabin_host namelun</block>
  <block id="a8ed373d339928d882082a84e7407b43" category="paragraph">oradata 或 sidlun</block>
  <block id="685abf742f5cb8f29ed8cf2ea20b9cbb" category="paragraph">Oratemp_sidlun</block>
  <block id="2f12aa70740397bebe584a01848c2d5d" category="paragraph">oracntrl01_sidlun （多路复用）</block>
  <block id="661d12920fe9a40d417eaf3d35c1c61d" category="paragraph">oracntrl02_sidlun （多路复用）</block>
  <block id="59a5a1c8c2921a9af447f52309f4a815" category="paragraph">oralog01_dbnamelun （多路复用）</block>
  <block id="202c9f1e3cc3e9cf8057cbd808cda7c0" category="paragraph">oralog02_dbnamelun （多路复用）</block>
  <block id="cecf941dd05f977802ee146212f6e6db" category="paragraph">Oraarch_sidlun</block>
  <block id="ce0adabc5956b06acb2d1da9f016ed10" category="section-title">ASM RAC 数据库</block>
  <block id="1f5f33d0ef6e88dac6fa021e239daec6" category="paragraph">oracrs_clusternamelun</block>
  <block id="b0438f02f178d5ddc41b907cec33033c" category="summary">您必须了解 SnapManager 中支持的不同分区设备。</block>
  <block id="4bd25b1712982b8a8d84a95337815bda" category="paragraph">下表提供了分区信息以及如何为不同的操作系统启用分区信息：</block>
  <block id="696c660ff8d9323e55146a6dbd4e4088" category="cell">操作系统</block>
  <block id="eef67ff15a4127c321964ba5ac35e320" category="cell">单个分区</block>
  <block id="fe5140a7939f0efa7929769ad3151380" category="cell">多个分区</block>
  <block id="c977275f99fc6b313ac424d16894f350" category="cell">非分区设备</block>
  <block id="c410b0bed4aa121a30e3edd9390f6858" category="cell">文件系统或原始设备</block>
  <block id="3cf9d5874c9a257279348ef71e883195" category="paragraph">Red Hat Enterprise Linux 5 倍或</block>
  <block id="dd8f660117eb95e489b0c2ec695b27f9" category="paragraph">Oracle Enterprise Linux 5 倍</block>
  <block id="bceab77a3dd776918c0403d43679e146" category="paragraph">ext3*</block>
  <block id="b01915b4f743a20c8caa3454173cf8d5" category="paragraph">Red Hat Enterprise Linux 6 个或</block>
  <block id="34039c6bd1ccde435ff955e939533463" category="paragraph">Oracle Enterprise Linux 6 倍</block>
  <block id="b7915d9d4cd56041a4478be54eaad47b" category="paragraph">ext3 或 ext4*</block>
  <block id="39639ee8d62cba02f91b68df0563998c" category="paragraph">SUSE Linux Enterprise Server 11</block>
  <block id="a58ff3543bdd4887dec931f5116e6135" category="paragraph">SUSE Linux Enterprise Server 10</block>
  <block id="b1b97bac1ed7c1f9ab685dc410531098" category="paragraph">ext3***</block>
  <block id="807c28258ce29c672325a41353413ab3" category="paragraph">Red Hat Enterprise Linux 5x 或 Lateror</block>
  <block id="13f082ce0ac068ed8c9bee016d841573" category="paragraph">Oracle Enterprise Linux 5x 或更高版本</block>
  <block id="f931af8f038528a9c4f4bcea6bcac8b9" category="paragraph">使用 ASMlib* 的 ASM</block>
  <block id="a5e7cc495c24a6015e6ed78c7f09002f" category="paragraph">SUSE Linux Enterprise Server 10 SP4or</block>
  <block id="d3e6e8e7b5ff57839047c526c48fdb6e" category="paragraph">SUSE Linux Enterprise Server 10 SP4 或 Lateror</block>
  <block id="12f619a4d1808b4dd9d0859eb0a913ab" category="paragraph">不使用 ASMlib'%'* 的 ASM</block>
  <block id="491fef8108066eb80894c45402849a74" category="paragraph">有关支持的操作系统版本的详细信息，请参阅互操作性表。</block>
  <block id="76fc181ee7425016be5019311255652c" category="summary">此命令将停止正在运行的克隆拆分进程。</block>
  <block id="ab54bd743c4c3d069febe2605026a215" category="doc">smo clone split — stop 命令</block>
  <block id="faaf4f4d89fb5223b21057acdb69d496" category="list-text">* —标签拆分标签 *</block>
  <block id="70f5f89d3c6ca5de5e83b29d478014ea" category="list-text">* — id 拆分 ID *</block>
  <block id="abcdfb14bb02a7a477518c1292e435eb" category="summary">您可以在创建或更新数据库配置文件时启用或禁用数据保护。</block>
  <block id="d136649fbe54d54e3866998a50f39e76" category="doc">了解在配置文件中启用或禁用数据保护</block>
  <block id="65f179baeedc9b98aab5788bc9280b88" category="paragraph">要在二级存储资源上为数据库创建受保护的备份，数据库管理员和存储管理员将执行以下操作。</block>
  <block id="27451fbd2203e66a919bf6575c3264f2" category="paragraph">创建或编辑配置文件</block>
  <block id="fa930c2827797266ab1866e0e5d274e6" category="paragraph">要创建或编辑配置文件，请执行以下操作：</block>
  <block id="3dd5a750dd98bb4e957445ed0c863acd" category="list-text">为二级存储启用备份保护。</block>
  <block id="e3f08ee75d95a3f859015dd677f5ee4b" category="list-text">如果您使用的是在 7- 模式下运行的 Data ONTAP 并已安装 Protection Manager ，则可以在 Protection Manager 中选择存储或备份管理员创建的策略。</block>
  <block id="259a0d281944f7a0db4c716e19d97774" category="paragraph">如果您使用的是在 7- 模式下运行的 Data ONTAP 且已启用保护，则 SnapManager 会为数据库创建一个数据集。数据集由一组存储集以及与其数据关联的配置信息组成。与数据集关联的存储集包括用于将数据导出到客户端的主存储集以及其他存储集中存在的一组副本和归档。数据集表示可导出的用户数据。如果管理员禁用对数据库的保护， SnapManager 将删除数据集。</block>
  <block id="260b7d3d469a8fb5a2da3a3d8412abcf" category="list-text">如果您使用的是 ONTAP ，则必须根据创建的 SnapMirror 或 SnapVault 关系选择 _SnapManager_cDOT_Mirror_ 或 _SnapManager_cDOT_Vault_policy 。</block>
  <block id="1b34771e851f4711b2961465b4a48d43" category="paragraph">禁用备份保护时，系统会显示一条警告消息，指出数据集将被删除，并且无法为此配置文件还原或克隆备份。</block>
  <block id="d244c0d85a46bb7bca12c81d8402994d" category="paragraph">查看配置文件</block>
  <block id="8c7075f70e421f6487ba979e40e887f8" category="paragraph">由于存储管理员尚未分配用于实施保护策略的存储资源，因此配置文件在 SnapManager 图形用户界面和 profile show 命令输出中均显示为不符合。</block>
  <block id="fdf4f53632a249c35de25f30a5de08bf" category="paragraph">在 Protection Manager 管理控制台中分配存储资源</block>
  <block id="7674bb5fa86baae3963997a41d4a1ae2" category="paragraph">在 Protection Manager 管理控制台中，存储管理员可以查看未受保护的数据集，并为与配置文件关联的数据集的每个节点分配一个资源池。然后，存储管理员会确保配置二级卷并初始化保护关系。</block>
  <block id="d4c244e8c0905ddfd78a41aff440d9d0" category="paragraph">在 SnapManager 中查看符合性特征</block>
  <block id="f9ad4362b9328f3b88a7c04bc3dde799" category="paragraph">在 SnapManager 中，数据库管理员会在图形用户界面和 profile show 命令输出中看到配置文件已更改为符合状态，表示已分配资源。</block>
  <block id="ae3b31ef76375ed5ffdc6e447b89c661" category="paragraph">创建备份</block>
  <block id="64dc45cf0fd46ec7ee71d366fa5fa6f9" category="list-text">选择完整备份。</block>
  <block id="c94ecd468d1135f6e73142b027bb2461" category="list-text">此外，选择是否应保护备份并选择主保留类（例如，每小时或每天）。</block>
  <block id="3009fa5913ae39b9502128296a0aaf17" category="list-text">如果您使用的是 ONTAP ，并且希望立即保护到二级存储的备份，请指定保护选项。</block>
  <block id="07a6f27b02dfff85684b3eec93860095" category="admonition">protectnow 选项不适用于集群模式 Data ONTAP 。</block>
  <block id="a77cd9da1f97b4525b395968c8ef0e68" category="paragraph">查看备份</block>
  <block id="f4abea4bbc6facee5c9e567588a79d34" category="paragraph">新备份显示为已计划保护，但尚未受到保护（在 SnapManager 界面和 backup show 命令输出中）。保护状态显示为 "`不受保护` " 。</block>
  <block id="f62acafe474e3dffc770d7d95d1da666" category="paragraph">查看备份列表</block>
  <block id="765be32156c1bf3903407bfd7e28d3d7" category="paragraph">存储管理员验证备份是否已复制到二级存储后， SnapManager 会将备份保护状态从 "`not protected` " 更改为 "`protected` " 。</block>
  <block id="80c27974bd53e49ec62c95c33b249c35" category="summary">您可以从备用位置还原备份，以便将数据文件从中间文件系统还原到活动文件系统，或者将中间原始设备中的数据块还原到活动原始设备。</block>
  <block id="11a659241b559eea06d2dc687a7db85b" category="list-text">将在集群模式 Data ONTAP 中运行的存储系统添加到 SnapManager 服务器主机。</block>
  <block id="917b1c611ca083be986906b3028a0500" category="cell">然后运行以下命令 ...</block>
  <block id="f6466cadfa27ea6c02c6736424851a92" category="paragraph">管理 Storage Virtual Machine （ SVM ，以前称为 Vserver ）正在集群模式 Data ONTAP 中运行</block>
  <block id="b4a90931b29cb75504635758e915a7bf" category="paragraph">SnapDrive 配置集 -cserver user_namestorage_name</block>
  <block id="28c9eefb6d419aafbb77f79c0f05974c" category="paragraph">SVM 在集群模式 Data ONTAP 中运行</block>
  <block id="04be10be45039e4de71eeeba9e46ef0a" category="paragraph">SnapDrive 配置集 -vserver user_namestorage_name</block>
  <block id="d2f92a5ee5d45f51aadffd0c74ff4f56" category="paragraph">您可以克隆主（本地）存储上的备份或二级（远程）存储上的受保护备份。但是，如果备份操作正在进行中或备份已传输到二级存储，则无法克隆备份。</block>
  <block id="c414d0775cd15fa3e1c7176df31d2d80" category="list-text">确保 /etc/var/opt/oracle]/oratab 目录不包含指向目标系统标识符的条目。</block>
  <block id="6beab017d2f3416d716c4c40c88dc197" category="list-text">从 $ORACLE_HOME/DBS 中删除 spfile&lt;sid&gt;.ora 文件。</block>
  <block id="8a9096c102d6ae57f5873aef899a57d4" category="list-text">从 $ORACLE_HOME/DBS 中删除 init&lt;sid&gt;.ora 文件。</block>
  <block id="35f1dc315e64f3e812b6b3d97916638e" category="paragraph">克隆数据库时， SnapManager 会在 $ORACLE_HOME/DBS 目录中为数据库创建一个新的 init&lt;sid&gt;.ora 文件。</block>
  <block id="837f277956cf28d171f26121293859aa" category="paragraph">直接 NFS （ DNFS ）环境中的 Oracle 11g 允许进行额外的挂载点配置，例如，在 oranfstab 文件中使用多个路径进行负载平衡。SnapManager 不会修改此文件，因此，使用 SnapManager 克隆后，必须手动将要使用克隆的任何其他属性添加到 oranfstab 文件中。</block>
  <block id="dc8197305a4170e4599b2d703be47af2" category="paragraph">您可以克隆 Real Application Cluster （ RAC ）数据库以及非集群数据库。RAC 克隆从单个数据库开始。</block>
  <block id="620f81df6ff8e5dd6bb97f9cfcb098c0" category="paragraph">您还可以将 ASM 数据库克隆到远程主机。执行此操作时，您必须确保 ASM 实例正在远程主机上运行。</block>
  <block id="bd4ac0868349543ba18f68dc0932fb65" category="paragraph">如果克隆的数据库使用的是 spfile ，则 SnapManager 会为克隆创建一个 spfile 。它会将此文件放置在 $ORACLE_HOME/DBS 目录中，并为诊断文件创建目录结构。文件名为 spfile &lt;sid&gt;.ora 。</block>
  <block id="e89440b85fb21599a731af1dd26bdec9" category="summary">如果您不再需要 SnapManager 软件，则可以从主机服务器中将其卸载。</block>
  <block id="a65b10aeaa2ec17c171f1256b6845754" category="doc">从 UNIX 主机卸载软件</block>
  <block id="960936cdef8841cddb15e494abe54859" category="list-text">以 root 用户身份登录。</block>
  <block id="4838321bb0b0cf1fb72dcd9f99a5876d" category="list-text">要停止服务器，请输入以下命令： `smo_server stop`</block>
  <block id="85e39dc9ab063ff44e01d5bc636a19ff" category="list-text">要删除 SnapManager 软件，请输入以下命令： `UninstallSmo`</block>
  <block id="c97c796cf7675f81d1e9525def954b17" category="list-text">出现简介文本后，按 * Enter * 继续。</block>
  <block id="65ba763d047ed781a0ee6c5e36b09940" category="paragraph">卸载完成。</block>
  <block id="198ef048724426729d2dfb7af748c299" category="paragraph">在 SnapManager 服务器上，您无法通过操作系统的原生计划程序查看计划的备份。例如，创建计划备份后， cron 中不会显示任何其他条目。</block>
  <block id="9c22cdf47a53bb59ee3d734df41dc096" category="paragraph">对于重复备份，服务器仍会满足此请求。例如，如果服务器从 2008 年 1 月 30 日下午 3 ： 00 开始收到执行每小时备份的请求但当前时间为下午 3 ： 30当天，服务器将在下午 4 ： 00 执行首次备份并继续每小时执行一次备份。</block>
  <block id="21f5164da245cdb61a3cbe658faa82eb" category="paragraph">SnapManager 为多个主机端存储堆栈中的数据库提供 Snapshot 副本功能，包括 NFS ， ASM ， Veritas 等。</block>
  <block id="8f9c38250b906073515015b85e8914a5" category="admonition">对于 Real Application Clusters （ RAC ）配置， SnapManager 会在配置文件的主机端执行备份。</block>
  <block id="b8195fd1f636dbb4fce346a82042bb44" category="list-text">输入以下命令： SMO backup create -profile profile_name ｛ -full ｛ -online | -offline | -auto ｝ ｛ -retain ｛ -hourly ； -daily ； -weekly ； -monthly ； -unlimited ｝ ] ｛ -verify] | ｛ -filesfiles 【文件文件文件】 ｝ | ｛ -tablespaces-tablesogs ｛ -tablespacesaces ） ] 【 -snapvaultlabelsnapvault_lab】 【 -protect ： -noprotect ； -protectnow] 【 -backup-destpath1 ，【 path2]] 【 -exclude-destpath1 ， path2]] 【 -prunelog ｛ -all ： -untilscuntilump dump | -until date SCn-mm-dd ： ]-destinationsn ： -dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-dun-d</block>
  <block id="4b90c0be18adbf3a408ef5c62e4fe41c" category="paragraph">* 使用 _SnapManager_cDOT_Vault_protection policy* 在二级存储上创建备份</block>
  <block id="b4e61d98c9b892e76e14c8cf46ef69b8" category="paragraph">指定 -snapvaultlabel 。在将 SnapVault 关系设置为值时，您必须提供在 SnapMirror 策略规则中指定的 SnapMirror 标签。</block>
  <block id="3035207242afe64f50e5bf90068c21f0" category="paragraph">+ 在 UNIX 上创建部分数据文件备份的示例</block>
  <block id="2fff0822b55b8c008ceb846e6e6ffffa" category="list-text">-label 指定归档日志文件备份的标签。</block>
  <block id="8862de0aefd7e28b95c70bea04c4b3ea" category="list-text">-protect 用于保护归档日志备份。* 注： * 您必须提供 -backup-dest 选项或 -exclude-dest 选项。</block>
  <block id="7122c515fd0ebcd0b4ffbfcb165cfb42" category="paragraph">在 UNIX 上单独创建归档日志文件备份的示例</block>
  <block id="4c67d12e8dae5851217d0e47f0d97c0c" category="list-text">-archivelog 选项以指定归档日志文件。在 UNIX 上同时备份数据文件和归档日志文件的示例</block>
  <block id="ace257bd09567876df0a60eca736871c" category="paragraph">在 UNIX 上创建备份时删减所有归档日志文件的示例</block>
  <block id="92fdaf5b579c7c087e37f5a3e80311e4" category="paragraph"><block ref="92fdaf5b579c7c087e37f5a3e80311e4" category="inline-xref-macro-rx"></block></block>
  <block id="d4c8e953e3088ed77b064bddce6c7a19" category="list-text">输入以下命令： smo profile create -profileprofile "-profile-passwordprofile_password] -repositor-dbnamerepo_service_name-host-portrepo_port-login-usernamerepo_username-database-dbnamedb_dbname-hosterdb_host "-sidb_service_username-snap-snap-snap-snap-snap-edusername</block>
  <block id="5dbb8cadb8d23a8fe74faa56ca08a6d0" category="paragraph">以下示例显示了在创建新配置文件时配置的电子邮件通知：</block>
  <block id="7e1874ed14a435f97edf8f502aea3754" category="list-text">可以使用哪种还原机制（快速还原，存储端文件系统还原，存储端文件还原或主机端文件副本还原）来还原每个文件。</block>
  <block id="ec7e00fddfd97cea5cd92e0fde52fae3" category="paragraph">以下示例显示了使用主机端文件副本还原过程还原的某些文件，并说明了使用快速还原选项无法还原某些文件的原因。如果指定 -verbose 选项， SnapManager 将显示一个预览部分和一个分析部分，其中说明了无法通过快速还原过程还原每个文件的原因。</block>
  <block id="17392a106c9b7b4b9f5ce8cf195ca46b" category="paragraph">"smo profile update -profile profile_name -profile-password password"</block>
  <block id="cf084394671e6fd959bd89d4fa6ed1be" category="list-text">输入以下命令： smo profile update -profileprofileprofileprofile_name "-profile-passwordprofile_password] -repositor-dbnamerepo_service_name-host-host-portrepo_port-login-usernamerepo_username-database-groupnamedb_dbname-hostdb_host （ -sid_host ） [-snap-storm]-snap-snap-man-snap-name]</block>
  <block id="8cf04a9734132302f96da8e113e80ce5" category="sidebar">主页</block>
  <block id="5dd03e8d039863e563e049be198c3fd3" category="sidebar">发行说明</block>
  <block id="7e5a244ed934853124d9aebb1b86928e" category="sidebar">适用于集群模式 Data ONTAP 的 UNIX 安装和设置</block>
  <block id="800fd61bdd366a97ae161db8f523ad30" category="sidebar">在 7- 模式下运行的适用于 Data ONTAP 的 UNIX 安装和设置</block>
  <block id="d23d52eb082db2b040f7a1483c79d790" category="sidebar">UNIX 管理</block>
  <block id="30027cf267532429435367703cf3d996" category="sidebar">适用于 Windows 的安装和设置</block>
  <block id="d648f2a68a54fd1b3329efc3cf24d29c" category="sidebar">法律声明</block>
</blocks>